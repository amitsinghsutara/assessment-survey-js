/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={};function t(){var e=n().get("data");return null==e&&(console.log("default data file"),e="zulu-lettersounds"),e}function n(){const e=window.location.search;return new URLSearchParams(e)}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var i=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function r(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((i=i.apply(e,t||[])).next())}))};function s(e){return"/data/"+e+".json"}function a(e){return i(this,void 0,void 0,(function*(){var t=s(e);return fetch(t).then((e=>e.json()))}))}class o{constructor(){this.imageToCache=[],this.wavToCache=[],this.allAudios={},this.allImages={},this.dataURL="",this.correctSoundPath="dist/audio/Correct.wav",this.feedbackAudio=null,this.correctAudio=null}init(){this.feedbackAudio=new Audio,this.feedbackAudio.src=this.correctSoundPath,this.correctAudio=new Audio}static PrepareAudioAndImagesForSurvey(e,t){o.getInstance().dataURL=t;const n="audio/"+o.getInstance().dataURL+"/answer_feedback.mp3";for(var i in o.getInstance().wavToCache.push(n),o.getInstance().correctAudio.src=n,e){let t=e[i];for(var s in null!=t.promptAudio&&o.FilterAndAddAudioToAllAudios(t.promptAudio),null!=t.promptImg&&o.AddImageToAllImages(t.promptImg),t.answers){let e=t.answers[s];null!=e.answerImg&&o.AddImageToAllImages(e.answerImg)}}console.log(o.getInstance().allAudios),console.log(o.getInstance().allImages)}static AddImageToAllImages(e){console.log("Add image: "+e);let t=new Image;t.src=e,o.getInstance().allImages[e]=t}static FilterAndAddAudioToAllAudios(e){console.log("Adding audio: "+e),e.includes(".wav")?e=e.replace(".wav",".mp3"):e.includes(".mp3")||(e=e.trim()+".mp3"),console.log("Filtered: "+e);let t=new Audio;["luganda"].includes(o.getInstance().dataURL.split("-")[0]),t.src="audio/"+o.getInstance().dataURL+"/"+e,o.getInstance().allAudios[e]=t,console.log(t.src)}static PreloadBucket(e,t){for(var n in o.getInstance().dataURL=t,o.getInstance().correctAudio.src="audio/"+o.getInstance().dataURL+"/answer_feedback.mp3",e.items){var i=e.items[n];o.FilterAndAddAudioToAllAudios(i.itemName)}}static PlayAudio(e,t,n){console.log("trying to play "+e),e.includes(".mp3")?".mp3"!=e.slice(-4)&&(e=e.trim()+".mp3"):e=e.trim()+".mp3",console.log("Pre play all audios: "),console.log(o.getInstance().allAudios),new Promise(((t,i)=>{let s=o.getInstance().allAudios[e];s?(s.addEventListener("play",(()=>{void 0!==n&&n(!0)})),s.addEventListener("ended",(()=>{void 0!==n&&n(!1),t()})),s.play().catch((i=>{console.log(">>>>>>>>>");let s=o.getInstance().allAudios[e.toLowerCase()];s.addEventListener("play",(()=>{void 0!==n&&n(!0)})),s.addEventListener("ended",(()=>{void 0!==n&&n(!1),t()})),s.play().catch((e=>{console.error("Error playing audio:",e),t()}))}))):(console.warn("Audio file not found:",e),t())})).then((()=>{void 0!==t&&t()})).catch((e=>{console.error("Promise error:",e)}))}static GetImage(e){return o.getInstance().allImages[e]}static PlayDing(){o.getInstance().feedbackAudio.play()}static PlayCorrect(){o.getInstance().correctAudio.play()}static getInstance(){return null==o.instance&&(o.instance=new o,o.instance.init()),o.instance}}function r(e){return e[Math.floor(Math.random()*e.length)]}function c(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}o.instance=null;class l{constructor(){this.landingContainerId="landWrap",this.gameContainerId="gameWrap",this.endContainerId="endWrap",this.starContainerId="starWrapper",this.chestContainerId="chestWrapper",this.questionsContainerId="qWrap",this.feedbackContainerId="feedbackWrap",this.answersContainerId="aWrap",this.answerButton1Id="answerButton1",this.answerButton2Id="answerButton2",this.answerButton3Id="answerButton3",this.answerButton4Id="answerButton4",this.answerButton5Id="answerButton5",this.answerButton6Id="answerButton6",this.playButtonId="pbutton",this.chestImgId="chestImage",this.nextQuestion=null,this.contentLoaded=!1,this.shown=!1,this.stars=[],this.shownStarsCount=0,this.starPositions=Array(),this.qAnsNum=0,this.buttons=[],this.buttonsActive=!1}init(){this.landingContainer=document.getElementById(this.landingContainerId),this.gameContainer=document.getElementById(this.gameContainerId),this.endContainer=document.getElementById(this.endContainerId),this.starContainer=document.getElementById(this.starContainerId),this.chestContainer=document.getElementById(this.chestContainerId),this.questionsContainer=document.getElementById(this.questionsContainerId),this.feedbackContainer=document.getElementById(this.feedbackContainerId),this.answersContainer=document.getElementById(this.answersContainerId),this.answerButton1=document.getElementById(this.answerButton1Id),this.answerButton2=document.getElementById(this.answerButton2Id),this.answerButton3=document.getElementById(this.answerButton3Id),this.answerButton4=document.getElementById(this.answerButton4Id),this.answerButton5=document.getElementById(this.answerButton5Id),this.answerButton6=document.getElementById(this.answerButton6Id),this.playButton=document.getElementById(this.playButtonId),this.chestImg=document.getElementById(this.chestImgId),this.initializeStars(),this.initEventListeners()}initializeStars(){for(let e=0;e<20;e++){const t=document.createElement("img");t.id="star"+e,t.classList.add("topstarv"),this.starContainer.appendChild(t),this.starContainer.innerHTML+="",9==e&&(this.starContainer.innerHTML+="<br>"),this.stars.push(e)}c(this.stars)}static OverlappingOtherStars(e,t,n,i){if(e.length<1)return!1;for(let s=0;s<e.length;s++){const a=e[s].x-t,o=e[s].y-n;if(Math.sqrt(a*a+o*o)<i)return!0}return!1}initEventListeners(){this.answerButton1.addEventListener("click",(()=>{this.answerButtonPress(1)})),this.buttons.push(this.answerButton1),this.answerButton2.addEventListener("click",(()=>{this.answerButtonPress(2)})),this.buttons.push(this.answerButton2),this.answerButton3.addEventListener("click",(()=>{this.answerButtonPress(3)})),this.buttons.push(this.answerButton3),this.answerButton4.addEventListener("click",(()=>{this.answerButtonPress(4)})),this.buttons.push(this.answerButton4),this.answerButton5.addEventListener("click",(()=>{this.answerButtonPress(5)})),this.buttons.push(this.answerButton5),this.answerButton6.addEventListener("click",(()=>{this.answerButtonPress(6)})),this.buttons.push(this.answerButton6),this.landingContainer.addEventListener("click",(()=>{localStorage.getItem(t())&&this.showGame()}))}showOptions(){if(!l.getInstance().shown){const e=l.getInstance().nextQuestion,t=l.getInstance().buttons;let n=220;const i=150;l.getInstance().shown=!0;let s=0;t.forEach((e=>{e.style.visibility="hidden",e.style.animation=""})),setTimeout((()=>{for(let i=0;i<e.answers.length;i++){const a=e.answers[i],r=t[i];r.innerHTML="answerText"in a?a.answerText:"",r.style.visibility="hidden",r.style.boxShadow="0px 0px 0px 0px rgba(0,0,0,0)",setTimeout((()=>{if(r.style.visibility="visible",r.style.boxShadow="0px 6px 8px #606060",r.style.animation=`zoomIn ${n}ms ease forwards`,"answerImg"in a){const e=o.GetImage(a.answerImg);r.appendChild(e)}r.addEventListener("animationend",(()=>{s++,s===e.answers.length&&l.getInstance().enableAnswerButton()}))}),i*n*.3)}}),i),l.getInstance().qStart=Date.now()}}enableAnswerButton(){l.getInstance().buttonsActive=!0}static SetFeedbackText(e){console.log("Feedback text set to "+e),l.getInstance().feedbackContainer.innerHTML=e}showLanding(){this.landingContainer.style.display="flex",this.gameContainer.style.display="none",this.endContainer.style.display="none"}static ShowEnd(){l.getInstance().landingContainer.style.display="none",l.getInstance().gameContainer.style.display="none",l.getInstance().endContainer.style.display="flex"}showGame(){this.landingContainer.style.display="none",this.gameContainer.style.display="grid",this.endContainer.style.display="none",this.allStart=Date.now(),this.startPressCallback()}static SetFeedbackVisibile(e){e?(l.getInstance().feedbackContainer.classList.remove("hidden"),l.getInstance().feedbackContainer.classList.add("visible"),o.PlayCorrect(),l.getInstance().buttonsActive=!1):(l.getInstance().feedbackContainer.classList.remove("visible"),l.getInstance().feedbackContainer.classList.add("hidden"),l.getInstance().buttonsActive=!1)}static ReadyForNext(e){for(var t in console.log("ready for next!"),l.getInstance().answersContainer.style.visibility="hidden",l.getInstance().buttons)l.getInstance().buttons[t].style.visibility="hidden";l.getInstance().shown=!1,l.getInstance().nextQuestion=e,l.getInstance().questionsContainer.innerHTML="",l.getInstance().questionsContainer.style.display="none",l.getInstance().playButton.innerHTML="<button id='nextqButton'><img class=audio-button width='100px' height='100px' src='/img/SoundButton_Idle.png' type='image/svg+xml'> </img></button>",document.getElementById("nextqButton").addEventListener("click",(function(){l.ShowQuestion(),o.PlayAudio(e.promptAudio,l.getInstance().showOptions,l.ShowAudioAnimation)}))}static ShowAudioAnimation(e=!1){l.getInstance().playButton.querySelector("img").src=e?"animation/SoundButton.gif":"/img/SoundButton_Idle.png"}static ShowQuestion(e){l.getInstance().playButton.innerHTML="<button id='nextqButton'><img class=audio-button width='100px' height='100px' src='/img/SoundButton_Idle.png' type='image/svg+xml'> </img></button>",document.getElementById("nextqButton").addEventListener("click",(function(){console.log("next question button pressed"),console.log(e.promptAudio),"promptAudio"in e&&o.PlayAudio(e.promptAudio,void 0,l.ShowAudioAnimation)})),l.getInstance().answersContainer.style.visibility="visible";let t="";if(l.getInstance().questionsContainer.innerHTML="",void 0===e&&(e=l.getInstance().nextQuestion),"promptImg"in e){var n=o.GetImage(e.promptImg);l.getInstance().questionsContainer.appendChild(n)}for(var i in t+=e.promptText,t+="<BR>",l.getInstance().questionsContainer.innerHTML+=t,l.getInstance().buttons)l.getInstance().buttons[i].style.visibility="hidden"}static AddStar(){var e=document.getElementById("star"+l.getInstance().stars[l.getInstance().qAnsNum]);e.src="../animation/Star.gif",e.classList.add("topstarv"),e.classList.remove("topstarh"),e.style.position="absolute";let t=l.instance.starContainer.offsetWidth,n=l.instance.starContainer.offsetHeight;console.log("Stars Container dimensions: ",t,n);let i=0,s=0;do{i=Math.floor(Math.random()*(t-60)),s=Math.floor(Math.random()*n)}while(l.OverlappingOtherStars(l.instance.starPositions,i,s,30));e.style.transform="scale(10)",e.style.transition="top 1s ease, left 1s ease, transform 0.5s ease",e.style.zIndex="500",e.style.top=window.innerHeight/2+"px",e.style.left=l.instance.gameContainer.offsetWidth/2-e.offsetWidth/2+"px",setTimeout((()=>{if(e.style.transition="top 2s ease, left 2s ease, transform 2s ease",i<t/2){const t=5+8*Math.random();console.log("Rotating star to the right",t),e.style.transform="rotate(-"+t+"deg) scale(1)"}else{const t=5+8*Math.random();console.log("Rotating star to the left",t),e.style.transform="rotate("+t+"deg) scale(1)"}e.style.left=20+i+"px",e.style.top=60+s+"px",setTimeout((()=>{e.style.filter="drop-shadow(0px 0px 10px yellow)"}),1900)}),1e3),l.instance.starPositions.push({x:i,y:s}),l.getInstance().qAnsNum+=1,l.getInstance().shownStarsCount+=1}static ChangeStarImageAfterAnimation(){document.getElementById("star"+l.getInstance().stars[l.getInstance().qAnsNum-1]).src="../img/star_after_animation.gif"}answerButtonPress(e){const t=this.buttons.every((e=>"visible"===e.style.visibility));if(console.log(this.buttonsActive,t),!0===this.buttonsActive){o.PlayDing();const t=Date.now()-this.qStart;console.log("answered in "+t),this.buttonPressCallback(e,t)}}static ProgressChest(){const e=document.getElementById("chestImage");let t=e.src;console.log("Chest Progression--\x3e",e),console.log("Chest Progression--\x3e",e.src);const n=parseInt(t.slice(-6,-4),10);console.log("Chest Progression number--\x3e",n);const i=`img/chestprogression/TreasureChestOpen0${n%4+1}.svg`;e.src=i}static SetContentLoaded(e){l.getInstance().contentLoaded=e}static SetButtonPressAction(e){l.getInstance().buttonPressCallback=e}static SetStartAction(e){l.getInstance().startPressCallback=e}static getInstance(){return null===l.instance&&(l.instance=new l,l.instance.init()),l.instance}}l.instance=null;const u=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],a=t+1<e.length,o=a?e[t+1]:0,r=t+2<e.length,c=r?e[t+2]:0,l=s>>2,u=(3&s)<<4|o>>4;let d=(15&o)<<2|c>>6,h=63&c;r||(h=64,a||(d=64)),i.push(n[l],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(a>>10)),t[i++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const r=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==a||null==o||null==r)throw Error();const c=s<<2|a>>4;if(i.push(c),64!==o){const e=a<<4&240|o>>2;if(i.push(e),64!==r){const e=o<<6&192|r;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){return function(e){const t=u(e);return d.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function p(){return"object"==typeof indexedDB}function g(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}const f=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return d.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class v extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?function(e,t){return e.replace(y,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new v(i,o,n)}}const y=/\{\$([^}]+)}/g;function b(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],a=t[s];if(I(n)&&I(a)){if(!b(n,a))return!1}else if(n!==a)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function I(e){return null!==e&&"object"==typeof e}function B(e,t=1e3,n=2){const i=t*Math.pow(n,e),s=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+s)}function S(e){return e&&e._delegate?e._delegate:e}class k{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const A="[DEFAULT]";class C{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:A})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===A?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:A:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class E{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new C(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const T=[];var L;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(L||(L={}));const D={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},M=L.INFO,R={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},N=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=R[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class P{constructor(e){this.name=e,this._logLevel=M,this._logHandler=N,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in L))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?D[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...e),this._logHandler(this,L.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...e),this._logHandler(this,L.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,L.INFO,...e),this._logHandler(this,L.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,L.WARN,...e),this._logHandler(this,L.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...e),this._logHandler(this,L.ERROR,...e)}}let x,U;const F=new WeakMap,O=new WeakMap,j=new WeakMap,V=new WeakMap,$=new WeakMap;let q={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return O.get(e);if("objectStoreNames"===t)return e.objectStoreNames||j.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return W(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function H(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(z(this),e),W(F.get(this))}:function(...e){return W(t.apply(z(this),e))}:function(e,...n){const i=t.call(z(this),e,...n);return j.set(i,e.sort?e.sort():[e]),W(i)}:(e instanceof IDBTransaction&&function(e){if(O.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)}));O.set(e,t)}(e),n=e,(x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,q):e);var t,n}function W(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(W(e.result)),i()},a=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&F.set(t,e)})).catch((()=>{})),$.set(t,e),t}(e);if(V.has(e))return V.get(e);const t=H(e);return t!==e&&(V.set(e,t),$.set(t,e)),t}const z=e=>$.get(e);function G(e,t,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const o=indexedDB.open(e,t),r=W(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(W(o.result),e.oldVersion,e.newVersion,W(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),r.then((e=>{a&&e.addEventListener("close",(()=>a())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),r}const Q=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],J=new Map;function X(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(J.get(t))return J.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=K.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!Q.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,s?"readwrite":"readonly");let o=a.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&a.done]))[0]};return J.set(t,a),a}var Y;Y=q,q={...Y,get:(e,t,n)=>X(e,t)||Y.get(e,t,n),has:(e,t)=>!!X(e,t)||Y.has(e,t)};class Z{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ee="@firebase/app",te="0.8.2",ne=new P("@firebase/app"),ie="[DEFAULT]",se={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ae=new Map,oe=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){ne.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ce(e){const t=e.name;if(oe.has(t))return ne.debug(`There were multiple attempts to register component ${t}.`),!1;oe.set(t,e);for(const t of ae.values())re(t,e);return!0}function le(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ue=new w("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class de{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new k("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ue.create("app-deleted",{appName:this._name})}}function he(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:ie,automaticDataCollectionEnabled:!1},t),s=i.name;if("string"!=typeof s||!s)throw ue.create("bad-app-name",{appName:String(s)});var a;if(n||(n=null===(a=f())||void 0===a?void 0:a.config),!n)throw ue.create("no-options");const o=ae.get(s);if(o){if(b(n,o.options)&&b(i,o.config))return o;throw ue.create("duplicate-app",{appName:s})}const r=new E(s);for(const e of oe.values())r.addComponent(e);const c=new de(n,i,r);return ae.set(s,c),c}function pe(e,t,n){var i;let s=null!==(i=se[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=[`Unable to register library "${s}" with version "${t}":`];return a&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ne.warn(e.join(" "))}ce(new k(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const ge="firebase-heartbeat-store";let fe=null;function me(){return fe||(fe=G("firebase-heartbeat-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(ge)}}).catch((e=>{throw ue.create("idb-open",{originalErrorMessage:e.message})}))),fe}async function ve(e,t){var n;try{const n=(await me()).transaction(ge,"readwrite"),i=n.objectStore(ge);return await i.put(t,we(e)),n.done}catch(e){if(e instanceof v)ne.warn(e.message);else{const t=ue.create("idb-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message});ne.warn(t.message)}}}function we(e){return`${e.name}!${e.options.appId}`}class ye{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ie(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=be();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=be(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),Be(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Be(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=h(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function be(){return(new Date).toISOString().substring(0,10)}class Ie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!p()&&g().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){var t;try{return(await me()).transaction(ge).objectStore(ge).get(we(e))}catch(e){if(e instanceof v)ne.warn(e.message);else{const n=ue.create("idb-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message});ne.warn(n.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Be(e){return h(JSON.stringify({version:2,heartbeats:e})).length}ce(new k("platform-logger",(e=>new Z(e)),"PRIVATE")),ce(new k("heartbeat",(e=>new ye(e)),"PRIVATE")),pe(ee,te,""),pe(ee,te,"esm2017"),pe("fire-js","");const Se="@firebase/installations",ke="0.5.15",Ae="w:0.5.15",Ce=new w("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ee(e){return e instanceof v&&e.code.includes("request-failed")}function Te({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Le(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function De(e,t){const n=(await t.json()).error;return Ce.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Me({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function _e(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Re(e){return new Promise((t=>{setTimeout(t,e)}))}const Ne=/^[cdef][\w-]{21}$/;function Pe(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return Ne.test(t)?t:""}catch(e){return""}}function xe(e){return`${e.appName}!${e.appId}`}const Ue=new Map;function Fe(e,t){const n=xe(e);Oe(n,t),function(e,t){const n=(!je&&"BroadcastChannel"in self&&(je=new BroadcastChannel("[Firebase] FID Change"),je.onmessage=e=>{Oe(e.data.key,e.data.fid)}),je);n&&n.postMessage({key:e,fid:t}),0===Ue.size&&je&&(je.close(),je=null)}(n,t)}function Oe(e,t){const n=Ue.get(e);if(n)for(const e of n)e(t)}let je=null;const Ve="firebase-installations-store";let $e=null;function qe(){return $e||($e=G("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Ve)}})),$e}async function He(e,t){const n=xe(e),i=(await qe()).transaction(Ve,"readwrite"),s=i.objectStore(Ve),a=await s.get(n);return await s.put(t,n),await i.done,a&&a.fid===t.fid||Fe(e,t.fid),t}async function We(e){const t=xe(e),n=(await qe()).transaction(Ve,"readwrite");await n.objectStore(Ve).delete(t),await n.done}async function ze(e,t){const n=xe(e),i=(await qe()).transaction(Ve,"readwrite"),s=i.objectStore(Ve),a=await s.get(n),o=t(a);return void 0===o?await s.delete(n):await s.put(o,n),await i.done,!o||a&&a.fid===o.fid||Fe(e,o.fid),o}async function Ge(e){let t;const n=await ze(e.appConfig,(n=>{const i=function(e){return Je(e||{fid:Pe(),registrationStatus:0})}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Ce.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Te(e),s=Me(e),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:Ae},r={method:"POST",headers:s,body:JSON.stringify(o)},c=await _e((()=>fetch(i,r)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Le(e.authToken)}}throw await De("Create Installation",c)}(e,t);return He(e.appConfig,n)}catch(n){throw Ee(n)&&409===n.customData.serverCode?await We(e.appConfig):await He(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Qe(e)}:{installationEntry:t}}(e,i);return t=s.registrationPromise,s.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Qe(e){let t=await Ke(e.appConfig);for(;1===t.registrationStatus;)await Re(100),t=await Ke(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Ge(e);return n||t}return t}function Ke(e){return ze(e,(e=>{if(!e)throw Ce.create("installation-not-found");return Je(e)}))}function Je(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Xe({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${Te(e)}/${t}/authTokens:generate`}(e,n),s=function(e,{refreshToken:t}){const n=Me(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}(e,n),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Ae,appId:e.appId}},r={method:"POST",headers:s,body:JSON.stringify(o)},c=await _e((()=>fetch(i,r)));if(c.ok)return Le(await c.json());throw await De("Generate Auth Token",c)}async function Ye(e,t=!1){let n;const i=await ze(e.appConfig,(i=>{if(!et(i))throw Ce.create("not-registered");const s=i.authToken;if(!t&&(2===(a=s).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(a)))return i;var a;if(1===s.requestStatus)return n=async function(e,t){let n=await Ze(e.appConfig);for(;1===n.authToken.requestStatus;)await Re(100),n=await Ze(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Ye(e,t):i}(e,t),i;{if(!navigator.onLine)throw Ce.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Xe(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await He(e.appConfig,i),n}catch(n){if(!Ee(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await He(e.appConfig,n)}else await We(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Ze(e){return ze(e,(e=>{if(!et(e))throw Ce.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function et(e){return void 0!==e&&2===e.registrationStatus}function tt(e){return Ce.create("missing-app-config-values",{valueName:e})}const nt="installations";ce(new k(nt,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw tt("App Configuration");if(!e.name)throw tt("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw tt(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:le(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ce(new k("installations-internal",(e=>{const t=le(e.getProvider("app").getImmediate(),nt).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Ge(t);return i?i.catch(console.error):Ye(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await Ge(e);t&&await t}(n),(await Ye(n,t)).token}(t,e)}}),"PRIVATE")),pe(Se,ke),pe(Se,ke,"esm2017");const it="analytics",st="https://www.googletagmanager.com/gtag/js",at=new P("@firebase/analytics");function ot(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const rt=new w("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ct=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function lt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ut(e,t=ct,n){const{appId:i,apiKey:s,measurementId:a}=e.options;if(!i)throw rt.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:i};throw rt.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},r=new ht;return setTimeout((async()=>{r.abort()}),void 0!==n?n:6e4),dt({appId:i,apiKey:s,measurementId:a},o,r,t)}async function dt(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=ct){var a,o;const{appId:r,measurementId:c}=e;try{await function(e,t){return new Promise(((n,i)=>{const s=Math.max(t-Date.now(),0),a=setTimeout(n,s);e.addEventListener((()=>{clearTimeout(a),i(rt.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(c)return at.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null===(a=e)||void 0===a?void 0:a.message}]`),{appId:r,measurementId:c};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,s={method:"GET",headers:lt(i)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(a,s);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw rt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(r),t}catch(t){const a=t;if(!function(e){if(!(e instanceof v&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(a)){if(s.deleteThrottleMetadata(r),c)return at.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==a?void 0:a.message}]`),{appId:r,measurementId:c};throw t}const l=503===Number(null===(o=null==a?void 0:a.customData)||void 0===o?void 0:o.httpStatus)?B(n,s.intervalMillis,30):B(n,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return s.setThrottleMetadata(r,u),at.debug(`Calling attemptFetch again in ${l} millis`),dt(e,u,i,s)}}class ht{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let pt,gt;async function ft(e,t,n,i,s,a,o){var r;const c=ut(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&at.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>at.error(e))),t.push(c);const l=async function(){var e;if(!p())return at.warn(rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await g()}catch(t){return at.warn(rt.create("indexeddb-unavailable",{errorInfo:null===(e=t)||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(st)&&n.src.includes(e))return n;return null})(a)||function(e,t){const n=document.createElement("script");n.src=`${st}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(a,u.measurementId),gt&&(s("consent","default",gt),gt=void 0),s("js",new Date);const h=null!==(r=null==o?void 0:o.config)&&void 0!==r?r:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),s("config",u.measurementId,h),pt&&(s("set",pt),pt=void 0),u.measurementId}class mt{constructor(e){this.app=e}_delete(){return delete vt[this.app.options.appId],Promise.resolve()}}let vt={},wt=[];const yt={};let bt,It,Bt="dataLayer",St=!1;function kt(e,t,n){!function(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=rt.create("invalid-analytics-context",{errorInfo:t});at.warn(n.message)}}();const i=e.options.appId;if(!i)throw rt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw rt.create("no-api-key");at.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=vt[i])throw rt.create("already-exists",{id:i});if(!St){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,s){let a=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(a=window.gtag),window.gtag=function(e,t,n,i){return async function(s,a,o){try{"event"===s?await async function(e,t,n,i,s){try{let a=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const i=await ot(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),s=e&&t[e.appId];if(!s){a=[];break}a.push(s)}}0===a.length&&(a=Object.values(t)),await Promise.all(a),e("event",i,s||{})}catch(e){at.error(e)}}(e,t,n,a,o):"config"===s?await async function(e,t,n,i,s,a){const o=i[s];try{if(o)await t[o];else{const e=(await ot(n)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(e){at.error(e)}e("config",s,a)}(e,t,n,i,a,o):"consent"===s?e("consent","update",o):e("set",a)}catch(e){at.error(e)}}}(a,e,t,n),{gtagCore:a,wrappedGtag:window.gtag}}(vt,wt,yt);It=e,bt=t,St=!0}return vt[i]=ft(e,wt,yt,t,bt,Bt,n),new mt(e)}function At(e,t,n,i){e=S(e),async function(e,t,n,i,s){if(s&&s.global)e("event",n,i);else{const s=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:s}))}}(It,vt[e.app.options.appId],t,n,i).catch((e=>at.error(e)))}const Ct="@firebase/analytics",Et="0.8.3";ce(new k(it,((e,{options:t})=>kt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),ce(new k("analytics-internal",(function(e){try{const t=e.getProvider(it).getImmediate();return{logEvent:(e,n,i)=>At(t,e,n,i)}}catch(e){throw rt.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),pe(Ct,Et),pe(Ct,Et,"esm2017");class Tt{constructor(){}static getInstance(){return Tt.instance||(Tt.instance=new Tt),Tt.instance}static setAssessmentType(e){Tt.assessmentType=e}static getLocation(){console.log("starting to get location"),fetch("https://ipinfo.io/json?token=b6268727178610").then((e=>{if(console.log("got location response"),!e.ok)throw Error(e.statusText);return e.json()})).then((e=>{console.log(e),Tt.latlong=e.loc;var t=Tt.latlong.split(","),n=parseFloat(t[0]).toFixed(2),i=parseFloat(t[1]).toFixed(1);return Tt.clat=n,Tt.clon=i,Tt.latlong="",t=[],Tt.sendLocation(),{}})).catch((e=>{console.warn(`location failed to update! encountered error ${e.msg}`)}))}static linkAnalytics(e,t){Tt.gana=e,Tt.dataURL=t}static setUuid(e,t){Tt.uuid=e,Tt.userSource=t}static sendInit(e,t){Tt.appVersion=e,Tt.contentVersion=t,Tt.getLocation();var n="user "+Tt.uuid+" opened the assessment";console.log(n),At(Tt.gana,"opened",{})}static getAppLanguageFromDataURL(e){return e&&""!==e&&e.includes("-")?e.split("-")[0]:"NotAvailable"}static getAppTypeFromDataURL(e){return e&&""!==e&&e.includes("-")?e.split("-")[1]:"NotAvailable"}static sendLocation(){var e="Sending User coordinates: "+Tt.uuid+" : "+Tt.clat+", "+Tt.clon;console.log(e),At(Tt.gana,"user_location",{user:Tt.uuid,lang:Tt.getAppLanguageFromDataURL(Tt.dataURL),app:Tt.getAppTypeFromDataURL(Tt.dataURL),latlong:Tt.joinLatLong(Tt.clat,Tt.clon)}),console.log("INITIALIZED EVENT SENT"),console.log("App Language: "+Tt.getAppLanguageFromDataURL(Tt.dataURL)),console.log("App Type: "+Tt.getAppTypeFromDataURL(Tt.dataURL)),console.log("App Version: "+Tt.appVersion),console.log("Content Version: "+Tt.contentVersion),At(Tt.gana,"initialized",{type:"initialized",clUserId:Tt.uuid,userSource:Tt.userSource,latLong:Tt.joinLatLong(Tt.clat,Tt.clon),appVersion:Tt.appVersion,contentVersion:Tt.contentVersion,app:Tt.getAppTypeFromDataURL(Tt.dataURL),lang:Tt.getAppLanguageFromDataURL(Tt.dataURL)})}static sendAnswered(e,t,n){var i=e.answers[t-1],s=null,a=null;"correct"in e&&null!=e.correct&&(s=e.correct==i.answerName),"bucket"in e&&(a=e.bucket);var o="user "+Tt.uuid+" answered "+e.qName+" with "+i.answerName;o+=", all answers were [";var r="";for(var c in e.answers)o+=e.answers[c].answerName+",",r+=e.answers[c].answerName+",";o+="] ",o+=s,o+=a,console.log(o),console.log("Answered App Version: "+Tt.appVersion),console.log("Content Version: "+Tt.contentVersion),At(Tt.gana,"answered",{type:"answered",clUserId:Tt.uuid,userSource:Tt.userSource,latLong:Tt.joinLatLong(Tt.clat,Tt.clon),app:Tt.getAppTypeFromDataURL(Tt.dataURL),lang:Tt.getAppLanguageFromDataURL(Tt.dataURL),dt:n,question_number:e.qNumber,target:e.qTarget,question:e.promptText,selected_answer:i.answerName,iscorrect:s,options:r,bucket:a,appVersion:Tt.appVersion,contentVersion:Tt.contentVersion})}static sendBucket(e,t){var n=e.bucketID,i=e.numTried,s=e.numCorrect,a="user "+Tt.uuid+" finished the bucket "+n+" with "+s+" correct answers out of "+i+" tried and passed: "+t;console.log(a),console.log("Bucket Completed App Version: "+Tt.appVersion),console.log("Content Version: "+Tt.contentVersion),At(Tt.gana,"bucketCompleted",{type:"bucketCompleted",clUserId:Tt.uuid,userSource:Tt.userSource,latLong:Tt.joinLatLong(Tt.clat,Tt.clon),app:Tt.getAppTypeFromDataURL(Tt.dataURL),lang:Tt.getAppLanguageFromDataURL(Tt.dataURL),bucketNumber:n,numberTriedInBucket:i,numberCorrectInBucket:s,passedBucket:t,appVersion:Tt.appVersion,contentVersion:Tt.contentVersion})}static sendFinished(e=null,t,n){let i="user "+Tt.uuid+" finished the assessment";console.log(i);let s=Tt.getBasalBucketID(e),a=Tt.getCeilingBucketID(e);0==s&&(s=a);let o=Tt.calculateScore(e,s);const r=100*e.length;console.log("Sending completed event"),console.log("Score: "+o),console.log("Max Score: "+r),console.log("Basal Bucket: "+s),console.log("BASAL FROM ASSESSMENT: "+t),console.log("Ceiling Bucket: "+a),console.log("CEILING FROM ASSESSMENT: "+n),console.log("Completed App Version: "+Tt.appVersion),console.log("Content Version: "+Tt.contentVersion),Tt.sendDataToThirdParty(o,Tt.uuid),At(Tt.gana,"completed",{type:"completed",clUserId:Tt.uuid,userSource:Tt.userSource,app:Tt.getAppTypeFromDataURL(Tt.dataURL),lang:Tt.getAppLanguageFromDataURL(Tt.dataURL),latLong:Tt.joinLatLong(Tt.clat,Tt.clon),score:o,maxScore:r,basalBucket:s,ceilingBucket:a,appVersion:Tt.appVersion,contentVersion:Tt.contentVersion})}static sendDataToThirdParty(e,t){console.log("Attempting to send score to a third party! Score: ",e);const n=new URLSearchParams(window.location.search),i=n.get("endpoint"),s=(n.get("organization"),new XMLHttpRequest);if(!i)return void console.error("No target party URL found!");const a={user:t,page:"111108121363615",event:{type:"external",value:{type:"assessment",subType:Tt.assessmentType,score:e,completed:!0}}},o=JSON.stringify(a);try{s.open("POST",i,!0),s.setRequestHeader("Content-Type","application/json"),s.onload=function(){s.status>=200&&s.status<300?console.log("POST success!"+s.responseText):console.error("Request failed with status: "+s.status)},s.send(o)}catch(e){console.error("Failed to send data to target party: ",e)}}static calculateScore(e,t){console.log("Calculating score"),console.log(e);let n=0;console.log("Basal Bucket ID: "+t);let i=0;for(const n in e){const s=e[n];if(s.bucketID==t){i=s.numCorrect;break}}return console.log("Num Correct: "+i," basal: "+t," buckets: "+e.length),t===e.length&&i>=4?(console.log("Perfect score"),100*e.length):(n=0|Math.round(100*(t-1)+i/5*100),n)}static getBasalBucketID(e){let t=0;for(const n in e){const i=e[n];i.tested&&!i.passed&&(0==t||i.bucketID<t)&&(t=i.bucketID)}return t}static getCeilingBucketID(e){let t=0;for(const n in e){const i=e[n];i.tested&&i.passed&&(0==t||i.bucketID>t)&&(t=i.bucketID)}return t}static joinLatLong(e,t){return e+","+t}}class Lt{constructor(){this.devModeAvailable=!1,this.isInDevMode=!1,this.devModeToggleButtonContainerId="devModeModalToggleButtonContainer",this.devModeToggleButtonId="devModeModalToggleButton",this.devModeModalId="devModeSettingsModal",this.devModeBucketGenSelectId="devModeBucketGenSelect",this.toggleDevModeModal=()=>{"block"==this.devModeSettingsModal.style.display?this.devModeSettingsModal.style.display="none":this.devModeSettingsModal.style.display="block"},this.isInDevMode=window.location.href.includes("localhost")||window.location.href.includes("127.0.0.1")||window.location.href.includes("assessmentdev"),this.devModeToggleButtonContainer=document.getElementById(this.devModeToggleButtonContainerId),this.devModeSettingsModal=document.getElementById(this.devModeModalId),this.devModeBucketGenSelect=document.getElementById(this.devModeBucketGenSelectId),this.devModeBucketGenSelect.onchange=e=>{this.handleBucketGenModeChange(e)},this.devModeToggleButton=document.getElementById(this.devModeToggleButtonId),this.devModeToggleButton.onclick=this.toggleDevModeModal,this.isInDevMode?this.devModeToggleButtonContainer.style.display="block":this.devModeToggleButtonContainer.style.display="none"}hideDevModeButton(){this.devModeToggleButtonContainer.style.display="none"}onEnd(){l.ShowEnd(),this.app.unityBridge.SendClose()}}class Dt extends Lt{constructor(e,t){super(),this.handleBucketGenModeChange=()=>{console.log("Bucket Gen Mode Changed")},this.startSurvey=()=>{l.ReadyForNext(this.getNextQuestion())},this.onQuestionEnd=()=>{l.SetFeedbackVisibile(!1),this.currentQuestionIndex+=1,setTimeout((()=>{this.HasQuestionsLeft()?l.ReadyForNext(this.getNextQuestion()):(console.log("There are no questions left."),this.onEnd())}),500)},this.TryAnswer=(e,t)=>{Tt.sendAnswered(this.questionsData[this.currentQuestionIndex],e,t),l.SetFeedbackVisibile(!0),l.AddStar(),setTimeout((()=>{this.onQuestionEnd()}),2e3)},this.buildQuestionList=()=>function(e){return i(this,void 0,void 0,(function*(){return a(e).then((e=>e.questions))}))}(this.app.dataURL),console.log("Survey initialized"),this.dataURL=e,this.unityBridge=t,this.currentQuestionIndex=0,l.SetButtonPressAction(this.TryAnswer),l.SetStartAction(this.startSurvey)}Run(e){return t=this,n=void 0,s=function*(){this.app=e,this.buildQuestionList().then((e=>{this.questionsData=e,o.PrepareAudioAndImagesForSurvey(this.questionsData,this.app.GetDataURL()),this.unityBridge.SendLoaded()}))},new((i=void 0)||(i=Promise))((function(e,a){function o(e){try{c(s.next(e))}catch(e){a(e)}}function r(e){try{c(s.throw(e))}catch(e){a(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,r)}c((s=s.apply(t,n||[])).next())}));var t,n,i,s}HasQuestionsLeft(){return this.currentQuestionIndex<=this.questionsData.length-1}getNextQuestion(){return this.questionsData[this.currentQuestionIndex]}}class Mt{constructor(e){this.value=e,this.left=null,this.right=null}}function _t(e,t,n){if(e>t)return null;let i;if((e+t)%2==0&&1!==n.size){if(i=Math.floor((e+t)/2),0===i)return null}else do{i=Math.floor((e+t)/2),i+=Math.floor(2*Math.random())}while(i>t||n.has(i));n.add(i);let s=new Mt(i);return s.left=_t(e,i-1,n),s.right=_t(i+1,t,n),s}var Rt,Nt;!function(e){e[e.BinarySearch=0]="BinarySearch",e[e.LinearSearchUp=1]="LinearSearchUp",e[e.LinearSearchDown=2]="LinearSearchDown"}(Rt||(Rt={})),function(e){e[e.RandomBST=0]="RandomBST",e[e.LinearArrayBased=1]="LinearArrayBased"}(Nt||(Nt={}));class Pt extends Lt{constructor(e,t){super(),this.bucketGenMode=Nt.RandomBST,this.MAX_STARS_COUNT_IN_LINEAR_MODE=20,this.startAssessment=()=>{l.ReadyForNext(this.getNextQuestion()),this.isInDevMode&&this.hideDevModeButton()},this.buildBuckets=e=>{return t=this,n=void 0,o=function*(){if(void 0===this.buckets||0===this.buckets.length){var t=function(e){return i(this,void 0,void 0,(function*(){return a(e).then((e=>e.buckets))}))}(this.app.GetDataURL()).then((e=>{this.buckets=e,this.numBuckets=e.length,console.log("buckets: "+this.buckets),this.bucketArray=Array.from(Array(this.numBuckets),((e,t)=>t+1)),console.log("empty array "+this.bucketArray);let t=new Set;t.add(0);let n=_t(this.buckets[0].bucketID-1,this.buckets[this.buckets.length-1].bucketID,t),i=this.convertToBucketBST(n,this.buckets);console.log("Generated the buckets root ----------------------------------------------"),console.log(i),this.basalBucket=this.numBuckets+1,this.ceilingBucket=-1,this.currentNode=i,this.tryMoveBucket(!1)}));return t}return e===Nt.RandomBST?new Promise(((e,t)=>{let n=new Set;n.add(0);let i=_t(this.buckets[0].bucketID-1,this.buckets[this.buckets.length-1].bucketID,n),s=this.convertToBucketBST(i,this.buckets);console.log("Generated the buckets root ----------------------------------------------"),console.log(s),this.basalBucket=this.numBuckets+1,this.ceilingBucket=-1,this.currentNode=s,this.tryMoveBucket(!1),e()})):e===Nt.LinearArrayBased?new Promise(((e,t)=>{this.currentLinearBucketIndex=0,this.tryMoveBucket(!1),e()})):void 0},new((s=void 0)||(s=Promise))((function(e,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function r(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(a,r)}c((o=o.apply(t,n||[])).next())}));var t,n,s,o},this.convertToBucketBST=(e,t)=>{if(null===e)return e;let n=e.value;return e.value=t.find((e=>e.bucketID===n)),null!==e.left&&(e.left=this.convertToBucketBST(e.left,t)),null!==e.right&&(e.right=this.convertToBucketBST(e.right,t)),e},this.initBucket=e=>{this.currentBucket=e,this.currentBucket.usedItems=[],this.currentBucket.numTried=0,this.currentBucket.numCorrect=0,this.currentBucket.numConsecutiveWrong=0,this.currentBucket.tested=!0,this.currentBucket.passed=!1},this.TryAnswer=(e,t)=>{this.bucketGenMode===Nt.RandomBST&&Tt.sendAnswered(this.currentQuestion,e,t),this.currentBucket.numTried+=1,this.currentQuestion.answers[e-1].answerName==this.currentQuestion.correct?(this.currentBucket.numCorrect+=1,this.currentBucket.numConsecutiveWrong=0,console.log("Answered correctly")):(this.currentBucket.numConsecutiveWrong+=1,console.log("Answered incorrectly, "+this.currentBucket.numConsecutiveWrong)),(this.bucketGenMode===Nt.LinearArrayBased&&l.getInstance().shownStarsCount<this.MAX_STARS_COUNT_IN_LINEAR_MODE||this.bucketGenMode===Nt.RandomBST)&&l.AddStar(),l.SetFeedbackVisibile(!0),setTimeout((()=>{console.log("Completed first Timeout"),this.onQuestionEnd()}),2e3)},this.onQuestionEnd=()=>{let e=this.HasQuestionsLeft()?500:4e3;const t=()=>{l.SetFeedbackVisibile(!1),(this.bucketGenMode===Nt.LinearArrayBased&&l.getInstance().shownStarsCount<this.MAX_STARS_COUNT_IN_LINEAR_MODE||this.bucketGenMode===Nt.RandomBST)&&l.ChangeStarImageAfterAnimation(),this.HasQuestionsLeft()?l.ReadyForNext(this.getNextQuestion()):(console.log("No questions left"),this.onEnd())};new Promise((t=>{setTimeout((()=>{t()}),e)})).then((()=>{t()}))},this.getNextQuestion=()=>{var e,t,n,i;do{e=r(this.currentBucket.items)}while(this.currentBucket.usedItems.includes(e));this.currentBucket.usedItems.push(e);do{t=r(this.currentBucket.items)}while(e==t);do{n=r(this.currentBucket.items)}while(e==n||t==n);do{i=r(this.currentBucket.items)}while(e==i||t==i||n==i);var s=[e,t,n,i];c(s);var a={qName:"question-"+this.questionNumber+"-"+e.itemName,qNumber:this.questionNumber,qTarget:e.itemName,promptText:"",bucket:this.currentBucket.bucketID,promptAudio:e.itemName,correct:e.itemText,answers:[{answerName:s[0].itemName,answerText:s[0].itemText},{answerName:s[1].itemName,answerText:s[1].itemText},{answerName:s[2].itemName,answerText:s[2].itemText},{answerName:s[3].itemName,answerText:s[3].itemText}]};return this.currentQuestion=a,this.questionNumber+=1,a},this.tryMoveBucket=e=>{this.bucketGenMode===Nt.RandomBST?this.tryMoveBucketRandomBST(e):this.bucketGenMode===Nt.LinearArrayBased&&this.tryMoveBucketLinearArrayBased(e)},this.tryMoveBucketRandomBST=e=>{const t=this.currentNode.value;null!=this.currentBucket&&(this.currentBucket.passed=e,Tt.sendBucket(this.currentBucket,e)),console.log("new  bucket is "+t.bucketID),o.PreloadBucket(t,this.app.GetDataURL()),this.initBucket(t)},this.tryMoveBucketLinearArrayBased=e=>{const t=this.buckets[this.currentLinearBucketIndex];console.log("New Bucket: "+t.bucketID),o.PreloadBucket(t,this.app.GetDataURL()),this.initBucket(t)},this.HasQuestionsLeft=()=>{var e=!0;return!this.currentBucket.passed&&(this.currentBucket.numCorrect>=4?(console.log("Passed this bucket "+this.currentBucket.bucketID),this.currentBucket.bucketID>=this.numBuckets?(console.log("Passed highest bucket"),this.currentBucket.passed=!0,this.bucketGenMode===Nt.RandomBST&&Tt.sendBucket(this.currentBucket,!0),l.ProgressChest(),e=!1):(console.log("Moving up bucket"),null!=this.currentNode.right?(l.ProgressChest(),console.log("Moving to right node"),this.bucketGenMode===Nt.RandomBST?this.currentNode=this.currentNode.right:this.currentLinearBucketIndex++,this.tryMoveBucket(!0)):(console.log("Reached root node"),this.currentBucket.passed=!0,this.bucketGenMode===Nt.RandomBST&&Tt.sendBucket(this.currentBucket,!0),l.ProgressChest(),e=!1))):(this.currentBucket.numConsecutiveWrong>=2||this.currentBucket.numTried>=5)&&(console.log("Failed this bucket "+this.currentBucket.bucketID),this.currentBucket.bucketID<this.basalBucket&&(this.basalBucket=this.currentBucket.bucketID),this.currentBucket.bucketID<=1?(console.log("Failed lowest bucket !"),e=!1,this.currentBucket.passed=!1,this.bucketGenMode===Nt.RandomBST&&Tt.sendBucket(this.currentBucket,!1)):(console.log("Moving down bucket !"),null!=this.currentNode.left?(console.log("Moving to left node"),this.bucketGenMode===Nt.RandomBST?this.currentNode=this.currentNode.left:this.currentLinearBucketIndex++,this.tryMoveBucket(!1)):(console.log("Reached root node !"),e=!1,this.currentBucket.passed=!1,this.bucketGenMode===Nt.RandomBST&&Tt.sendBucket(this.currentBucket,!1)))),e)},this.dataURL=e,this.unityBridge=t,this.questionNumber=0,console.log("app initialized"),l.SetButtonPressAction(this.TryAnswer),l.SetStartAction(this.startAssessment)}Run(e){this.app=e,this.buildBuckets(this.bucketGenMode).then((e=>{console.log(this.currentBucket),this.unityBridge.SendLoaded()}))}handleBucketGenModeChange(e){this.bucketGenMode=parseInt(this.devModeBucketGenSelect.value),this.buildBuckets(this.bucketGenMode).then((()=>{}))}onEnd(){Tt.sendFinished(this.buckets,this.basalBucket,this.ceilingBucket),l.ShowEnd(),this.app.unityBridge.SendClose()}}class xt{constructor(){"undefined"!=typeof Unity?this.unityReference=Unity:this.unityReference=null}SendMessage(e){null!==this.unityReference&&this.unityReference.call(e)}SendLoaded(){null!==this.unityReference?this.unityReference.call("loaded"):console.log("would call Unity loaded now")}SendClose(){null!==this.unityReference?this.unityReference.call("close"):console.log("would close Unity now")}}pe("firebase","9.12.1","app");try{self["workbox:window:7.0.0"]&&_()}catch(Ut){}function Ut(e,t){return new Promise((function(n){var i=new MessageChannel;i.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[i.port2])}))}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ot(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:7.0.0"]&&_()}catch(Ut){}var jt=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function Vt(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var $t=function(e,t){this.type=e,Object.assign(this,t)};function qt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ht(){}var Wt={type:"SKIP_WAITING"};function zt(e,t){if(!t)return e&&e.then?e.then(Ht):Promise.resolve()}var Gt=function(e){var t,n;function i(t,n){var i,s;return void 0===n&&(n={}),(i=e.call(this)||this).nn={},i.tn=0,i.rn=new jt,i.en=new jt,i.on=new jt,i.un=0,i.an=new Set,i.cn=function(){var e=i.fn,t=e.installing;i.tn>0||!Vt(t.scriptURL,i.sn.toString())||performance.now()>i.un+6e4?(i.vn=t,e.removeEventListener("updatefound",i.cn)):(i.hn=t,i.an.add(t),i.rn.resolve(t)),++i.tn,t.addEventListener("statechange",i.ln)},i.ln=function(e){var t=i.fn,n=e.target,s=n.state,a=n===i.vn,o={sw:n,isExternal:a,originalEvent:e};!a&&i.mn&&(o.isUpdate=!0),i.dispatchEvent(new $t(s,o)),"installed"===s?i.wn=self.setTimeout((function(){"installed"===s&&t.waiting===n&&i.dispatchEvent(new $t("waiting",o))}),200):"activating"===s&&(clearTimeout(i.wn),a||i.en.resolve(n))},i.dn=function(e){var t=i.hn,n=t!==navigator.serviceWorker.controller;i.dispatchEvent(new $t("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:i.mn})),n||i.on.resolve(t)},i.gn=(s=function(e){var t=e.data,n=e.ports,s=e.source;return qt(i.getSW(),(function(){i.an.has(s)&&i.dispatchEvent(new $t("message",{data:t,originalEvent:e,ports:n,sw:s}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(s.apply(this,e))}catch(e){return Promise.reject(e)}}),i.sn=t,i.nn=n,navigator.serviceWorker.addEventListener("message",i.gn),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s,a=i.prototype;return a.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var i=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return zt(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return i.mn=Boolean(navigator.serviceWorker.controller),i.yn=i.pn(),qt(i.bn(),(function(e){i.fn=e,i.yn&&(i.hn=i.yn,i.en.resolve(i.yn),i.on.resolve(i.yn),i.yn.addEventListener("statechange",i.ln,{once:!0}));var t=i.fn.waiting;return t&&Vt(t.scriptURL,i.sn.toString())&&(i.hn=t,Promise.resolve().then((function(){i.dispatchEvent(new $t("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.dn),i.fn}))}))}catch(e){return Promise.reject(e)}},a.update=function(){try{return this.fn?zt(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},a.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},a.messageSW=function(e){try{return qt(this.getSW(),(function(t){return Ut(t,e)}))}catch(e){return Promise.reject(e)}},a.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Ut(this.fn.waiting,Wt)},a.pn=function(){var e=navigator.serviceWorker.controller;return e&&Vt(e.scriptURL,this.sn.toString())?e:void 0},a.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return qt(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(s=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,s),i}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=Ot(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());var Qt=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function r(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((i=i.apply(e,t||[])).next())}))};let Kt=document.getElementById("loadingScreen");const Jt=new BroadcastChannel("as-message-channel");function Xt(e){"Loading"==e.data.msg&&function(e,t){let n=document.getElementById("progressBar");t<100?n.style.width=t+"%":t>=100&&(Kt.style.display="none",l.SetContentLoaded(!0),localStorage.setItem(e.data.data.bookName,"true"),function(e){if(window.Android){let t=null!==localStorage.getItem(e);window.Android.cachedStatus(t)}}(e.data.data.bookName))}(e,parseInt(e.data.data.progress)),"UpdateFound"==e.data.msg&&(console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>.,update Found"),function(){let e="Update Found.\nPlease accept the update by pressing Ok.";1==confirm(e)?window.location.reload():e="Update will happen on the next launch."}())}Jt.addEventListener("message",Xt);const Yt=new class{constructor(){this.lang="english",this.unityBridge=new xt,console.log("Initializing app..."),this.dataURL=t(),this.cacheModel=new class{constructor(e,t,n){this.appName=e,this.contentFilePath=t,this.audioVisualResources=n}setAppName(e){this.appName=e}setContentFilePath(e){this.contentFilePath=e}setAudioVisualResources(e){this.audioVisualResources=e}addItemToAudioVisualResources(e){this.audioVisualResources.has(e)||this.audioVisualResources.add(e)}}(this.dataURL,this.dataURL,new Set);const e=function(e=function(e="[DEFAULT]"){const t=ae.get(e);if(!t&&e===ie)return he();if(!t)throw ue.create("no-app",{appName:e});return t}()){const t=le(e=S(e),it);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=le(e,it);if(n.isInitialized()){const e=n.getImmediate();if(b(t,n.getOptions()))return e;throw rt.create("already-initialized")}return n.initialize({options:t})}(e)}(he({apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:7b1b1181864d28b49de10c",measurementId:"G-FF1159TGCF"}));this.analytics=e,At(e,"notification_received"),At(e,"test initialization event",{}),console.log("firebase initialized")}spinUp(){return Qt(this,void 0,void 0,(function*(){window.addEventListener("load",(()=>{console.log("Window Loaded!"),(()=>{Qt(this,void 0,void 0,(function*(){yield function(e){return i(this,void 0,void 0,(function*(){return a(e).then((e=>e))}))}(this.dataURL).then((e=>{console.log("Assessment/Survey v1.0.5 initializing!"),console.log("App data loaded!"),console.log(e),this.cacheModel.setContentFilePath(s(this.dataURL)),l.SetFeedbackText(e.feedbackText);let t=e.appType,i=e.assessmentType;if("survey"==t)this.game=new Dt(this.dataURL,this.unityBridge);else if("assessment"==t){let t=e.buckets;for(let n=0;n<t.length;n++)for(let i=0;i<t[n].items.length;i++){let s;s=e.quizName.includes("Luganda")||e.quizName.toLowerCase().includes("west african english")?"/audio/"+this.dataURL+"/"+t[n].items[i].itemName.toLowerCase().trim()+".mp3":"/audio/"+this.dataURL+"/"+t[n].items[i].itemName.trim()+".mp3",this.cacheModel.addItemToAudioVisualResources(s)}this.cacheModel.addItemToAudioVisualResources("/audio/"+this.dataURL+"/answer_feedback.mp3"),this.game=new Pt(this.dataURL,this.unityBridge)}var a;this.game.unityBridge=this.unityBridge,Tt.setUuid((null==(a=n().get("cr_user_id"))&&(console.log("no uuid provided"),a="WebUserNoID"),a),function(){var e=n().get("userSource");return null==e&&(console.log("no user source provided"),e="WebUserNoSource"),e}()),Tt.linkAnalytics(this.analytics,this.dataURL),Tt.setAssessmentType(i),Tt.sendInit("v1.0.5",e.contentVersion),this.game.Run(this)})),yield this.registerServiceWorker(this.game)}))})()}))}))}registerServiceWorker(e){return Qt(this,void 0,void 0,(function*(){console.log("Registering service worker..."),"serviceWorker"in navigator?(new Gt("./sw.js",{}).register().then((e=>{console.log("Service worker registered!"),this.handleServiceWorkerRegistation(e)})).catch((e=>{console.log("Service worker registration failed: "+e)})),navigator.serviceWorker.addEventListener("message",Xt),yield navigator.serviceWorker.ready,console.log("Cache Model: "),console.log(this.cacheModel),null==localStorage.getItem(this.cacheModel.appName)?(console.log("WE DONT HAVE THIS ASSESSMENT< CACHING IT!"),Kt.style.display="flex",Jt.postMessage({command:"Cache",data:{appData:this.cacheModel}})):Kt.style.display="none",Jt.onmessage=e=>{console.log(e.data.command+" received from service worker!"),"Activated"==e.data.command&&null==localStorage.getItem(this.cacheModel.appName)&&Jt.postMessage({command:"Cache",data:{appData:this.cacheModel}})}):console.warn("Service workers are not supported in this browser.")}))}handleServiceWorkerRegistation(e){var t;try{null===(t=null==e?void 0:e.installing)||void 0===t||t.postMessage({type:"Registartion",value:this.lang})}catch(e){console.log("Service worker registration failed: "+e)}}GetDataURL(){return this.dataURL}};Yt.spinUp()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7bUJBQ0EsSUFBSUEsRUFBc0IsQ0FBQyxFQzZCcEIsU0FBU0MsSUFFZixJQUFJQyxFQURlQyxJQUNHQyxJQUFJLFFBTTFCLE9BTFlDLE1BQVJILElBQ0hJLFFBQVFDLElBQUkscUJBQ1pMLEVBQU8scUJBR0RBLENBQ1IsQ0FFQSxTQUFTQyxJQUNSLE1BQU1LLEVBQWNDLE9BQU9DLFNBQVNDLE9BRXBDLE9BRGtCLElBQUlDLGdCQUFnQkosRUFFdkMsQ0M3Q0FSLEVBQW9CYSxFQUFJLFdBQ3ZCLEdBQTBCLGlCQUFmQyxXQUF5QixPQUFPQSxXQUMzQyxJQUNDLE9BQU9DLE1BQVEsSUFBSUMsU0FBUyxjQUFiLEVBR2hCLENBRkUsTUFBT0MsR0FDUixHQUFzQixpQkFBWFIsT0FBcUIsT0FBT0EsTUFDeEMsQ0FDQSxDQVB1Qiw2U0MyQmpCLFNBQVNTLEVBQVdDLEdBQzFCLE1BQU8sU0FBV0EsRUFBTSxPQUN6QixDQU1BLFNBQWVDLEVBQVNELDRDQUN2QixJQUFJRSxFQUFPSCxFQUFXQyxHQUV0QixPQUFPRyxNQUFNRCxHQUFNRSxNQUFLQyxHQUFZQSxFQUFTQyxRQUM5QyxJQ2pDTyxNQUFNQyxFQUFiLGNBSVcsS0FBQUMsYUFBeUIsR0FDekIsS0FBQUMsV0FBdUIsR0FFdkIsS0FBQUMsVUFBaUIsQ0FBQyxFQUNsQixLQUFBQyxVQUFpQixDQUFDLEVBQ2xCLEtBQUFDLFFBQWtCLEdBRWpCLEtBQUFDLGlCQUFtQix5QkFFbkIsS0FBQUMsY0FBcUIsS0FDckIsS0FBQUMsYUFBb0IsSUFpS2hDLENBL0pZQyxPQUNKcEIsS0FBS2tCLGNBQWdCLElBQUlHLE1BQ3pCckIsS0FBS2tCLGNBQWNJLElBQU10QixLQUFLaUIsaUJBQzlCakIsS0FBS21CLGFBQWUsSUFBSUUsS0FDNUIsQ0FFT0Usc0NBQXNDQyxFQUF3QlIsR0FDakVMLEVBQWdCYyxjQUFjVCxRQUFVQSxFQUN4QyxNQUFNVSxFQUFxQixTQUFXZixFQUFnQmMsY0FBY1QsUUFBVSx1QkFLOUUsSUFBSyxJQUFJVyxLQUhUaEIsRUFBZ0JjLGNBQWNaLFdBQVdlLEtBQUtGLEdBQzlDZixFQUFnQmMsY0FBY04sYUFBYUcsSUFBTUksRUFFdkJGLEVBQWMsQ0FDcEMsSUFBSUssRUFBZUwsRUFBY0csR0FTakMsSUFBSyxJQUFJRyxLQVJ1QixNQUE1QkQsRUFBYUUsYUFDYnBCLEVBQWdCcUIsNkJBQTZCSCxFQUFhRSxhQUdoQyxNQUExQkYsRUFBYUksV0FDYnRCLEVBQWdCdUIsb0JBQW9CTCxFQUFhSSxXQUc3QkosRUFBYU0sUUFBUyxDQUMxQyxJQUFJQyxFQUFhUCxFQUFhTSxRQUFRTCxHQUNWLE1BQXhCTSxFQUFXQyxXQUNYMUIsRUFBZ0J1QixvQkFBb0JFLEVBQVdDLFlBSTNEOUMsUUFBUUMsSUFBSW1CLEVBQWdCYyxjQUFjWCxXQUMxQ3ZCLFFBQVFDLElBQUltQixFQUFnQmMsY0FBY1YsVUFDOUMsQ0FFT1EsMkJBQTJCZSxHQUM5Qi9DLFFBQVFDLElBQUksY0FBZ0I4QyxHQUM1QixJQUFJQyxFQUFXLElBQUlDLE1BQ25CRCxFQUFTakIsSUFBTWdCLEVBQ2YzQixFQUFnQmMsY0FBY1YsVUFBVXVCLEdBQWVDLENBQzNELENBRU9oQixvQ0FBb0NrQixHQUN2Q2xELFFBQVFDLElBQUksaUJBQW1CaUQsR0FDM0JBLEVBQVlDLFNBQVMsUUFDckJELEVBQWNBLEVBQVlFLFFBQVEsT0FBUSxRQUNuQ0YsRUFBWUMsU0FBUyxVQUc1QkQsRUFBY0EsRUFBWUcsT0FBUyxRQUd2Q3JELFFBQVFDLElBQUksYUFBZWlELEdBRTNCLElBQUlJLEVBQVcsSUFBSXhCLE1EM0NuQixDQUFDLFdDNEMrQnFCLFNBQVMvQixFQUFnQmMsY0FBY1QsUUFBUThCLE1BQU0sS0FBSyxJQUV0RkQsRUFBU3ZCLElBQU0sU0FBV1gsRUFBZ0JjLGNBQWNULFFBQVUsSUFBTXlCLEVBUTVFOUIsRUFBZ0JjLGNBQWNYLFVBQVUyQixHQUFlSSxFQUV2RHRELFFBQVFDLElBQUlxRCxFQUFTdkIsSUFDekIsQ0FFT0MscUJBQXFCd0IsRUFBbUIvQixHQUczQyxJQUFLLElBQUlnQyxLQUZUckMsRUFBZ0JjLGNBQWNULFFBQVVBLEVBQ3hDTCxFQUFnQmMsY0FBY04sYUFBYUcsSUFBTSxTQUFXWCxFQUFnQmMsY0FBY1QsUUFBVSx1QkFDOUUrQixFQUFVRSxNQUFNLENBQ2xDLElBQUlDLEVBQU9ILEVBQVVFLE1BQU1ELEdBQzNCckMsRUFBZ0JxQiw2QkFBNkJrQixFQUFLQyxVQUUxRCxDQUVPNUIsaUJBQWlCNkIsRUFBbUJDLEVBQTZCQyxHQUVwRS9ELFFBQVFDLElBQUksa0JBQW9CNEQsR0FDNUJBLEVBQVVWLFNBQVMsUUFDUSxRQUF2QlUsRUFBVUcsT0FBTyxLQUNqQkgsRUFBWUEsRUFBVVIsT0FBUyxRQUduQ1EsRUFBWUEsRUFBVVIsT0FBUyxPQUduQ3JELFFBQVFDLElBQUkseUJBQ1pELFFBQVFDLElBQUltQixFQUFnQmMsY0FBY1gsV0FHdEIsSUFBSTBDLFNBQWMsQ0FBQ0MsRUFBU0MsS0FDNUMsSUFBSUMsRUFBUWhELEVBQWdCYyxjQUFjWCxVQUFVc0MsR0FDaERPLEdBQ0FBLEVBQU1DLGlCQUFpQixRQUFRLFVBQ0wsSUFBaEIsR0FBOEJOLEdBQVUsRUFBWSxJQUc5REssRUFBTUMsaUJBQWlCLFNBQVMsVUFDTixJQUFoQixHQUE4Qk4sR0FBVSxHQUM5Q0csR0FBUyxJQUdiRSxFQUFNRSxPQUFPQyxPQUFPQyxJQUNoQnhFLFFBQVFDLElBQUksYUFDWixJQUFJd0UsRUFBYXJELEVBQWdCYyxjQUFjWCxVQUFVc0MsRUFBVWEsZUFDbkVELEVBQVdKLGlCQUFpQixRQUFRLFVBQ2QsSUFBaEIsR0FBOEJOLEdBQVUsRUFBWSxJQUc5RFUsRUFBV0osaUJBQWlCLFNBQVMsVUFDWCxJQUFoQixHQUE4Qk4sR0FBVSxHQUM5Q0csR0FBUyxJQUdiTyxFQUFXSCxPQUFPQyxPQUFPQyxJQUNyQnhFLFFBQVF3RSxNQUFNLHVCQUF3QkEsR0FDdENOLEdBQVMsR0FDWCxNQUlGbEUsUUFBUTJFLEtBQUssd0JBQXlCZCxHQUN0Q0ssUUFLSWpELE1BQUssVUFDZ0IsSUFBdkIsR0FBcUM2QyxHQUF5QixJQUNyRVMsT0FBTUMsSUFDTHhFLFFBQVF3RSxNQUFNLGlCQUFrQkEsRUFBTSxHQUU5QyxDQUlPeEMsZ0JBQWdCNEMsR0FDbkIsT0FBT3hELEVBQWdCYyxjQUFjVixVQUFVb0QsRUFDbkQsQ0FFTzVDLGtCQUNIWixFQUFnQmMsY0FBY1AsY0FBYzJDLE1BQ2hELENBRU90QyxxQkFDSFosRUFBZ0JjLGNBQWNOLGFBQWEwQyxNQUMvQyxDQUVPdEMscUJBTUgsT0FMZ0MsTUFBNUJaLEVBQWdCeUQsV0FDaEJ6RCxFQUFnQnlELFNBQVcsSUFBSXpELEVBQy9CQSxFQUFnQnlELFNBQVNoRCxRQUd0QlQsRUFBZ0J5RCxRQUMzQixFQ25MRyxTQUFTQyxFQUFTQyxHQUN4QixPQUFPQSxFQUFNQyxLQUFLQyxNQUFNRCxLQUFLRSxTQUFXSCxFQUFNSSxRQUMvQyxDQUVPLFNBQVNDLEVBQWFMLEdBQzVCLElBQUssSUFBSU0sRUFBSU4sRUFBTUksT0FBUyxFQUFHRSxFQUFJLEVBQUdBLElBQUssQ0FDMUMsTUFBTUMsRUFBSU4sS0FBS0MsTUFBTUQsS0FBS0UsVUFBWUcsRUFBSSxLQUN6Q04sRUFBTU0sR0FBSU4sRUFBTU8sSUFBTSxDQUFDUCxFQUFNTyxHQUFJUCxFQUFNTSxJQUUxQyxDREZtQixFQUFBUixTQUFtQyxLRUgvQyxNQUFNVSxFQUFiLGNBSVMsS0FBQUMsbUJBQXFCLFdBR3JCLEtBQUFDLGdCQUFrQixXQUdsQixLQUFBQyxlQUFpQixVQUdqQixLQUFBQyxnQkFBa0IsY0FHbEIsS0FBQUMsaUJBQW1CLGVBR25CLEtBQUFDLHFCQUF1QixRQUd2QixLQUFBQyxvQkFBc0IsZUFHdEIsS0FBQUMsbUJBQXFCLFFBR3JCLEtBQUFDLGdCQUFrQixnQkFFbEIsS0FBQUMsZ0JBQWtCLGdCQUVsQixLQUFBQyxnQkFBa0IsZ0JBRWxCLEtBQUFDLGdCQUFrQixnQkFFbEIsS0FBQUMsZ0JBQWtCLGdCQUVsQixLQUFBQyxnQkFBa0IsZ0JBSWxCLEtBQUFDLGFBQWUsVUFHZixLQUFBQyxXQUFhLGFBR2QsS0FBQUMsYUFBZSxLQUVkLEtBQUFDLGVBQWdCLEVBR2pCLEtBQUFDLE9BQVEsRUFFUixLQUFBQyxNQUFRLEdBQ1IsS0FBQUMsZ0JBQWtCLEVBQ2xCLEtBQUFDLGNBQWlEQyxRQUNqRCxLQUFBQyxRQUFVLEVBSVYsS0FBQUMsUUFBVSxHQUtWLEtBQUFDLGVBQXlCLENBaVlqQyxDQS9YU3BGLE9BRVBwQixLQUFLeUcsaUJBQW1CQyxTQUFTQyxlQUFlM0csS0FBSytFLG9CQUNyRC9FLEtBQUs0RyxjQUFnQkYsU0FBU0MsZUFBZTNHLEtBQUtnRixpQkFDbERoRixLQUFLNkcsYUFBZUgsU0FBU0MsZUFBZTNHLEtBQUtpRixnQkFDakRqRixLQUFLOEcsY0FBZ0JKLFNBQVNDLGVBQWUzRyxLQUFLa0YsaUJBQ2xEbEYsS0FBSytHLGVBQWlCTCxTQUFTQyxlQUFlM0csS0FBS21GLGtCQUNuRG5GLEtBQUtnSCxtQkFBcUJOLFNBQVNDLGVBQWUzRyxLQUFLb0Ysc0JBQ3ZEcEYsS0FBS2lILGtCQUFvQlAsU0FBU0MsZUFBZTNHLEtBQUtxRixxQkFDdERyRixLQUFLa0gsaUJBQW1CUixTQUFTQyxlQUFlM0csS0FBS3NGLG9CQUdyRHRGLEtBQUttSCxjQUFnQlQsU0FBU0MsZUFBZTNHLEtBQUt1RixpQkFDbER2RixLQUFLb0gsY0FBZ0JWLFNBQVNDLGVBQWUzRyxLQUFLd0YsaUJBQ2xEeEYsS0FBS3FILGNBQWdCWCxTQUFTQyxlQUFlM0csS0FBS3lGLGlCQUNsRHpGLEtBQUtzSCxjQUFnQlosU0FBU0MsZUFBZTNHLEtBQUswRixpQkFDbEQxRixLQUFLdUgsY0FBZ0JiLFNBQVNDLGVBQWUzRyxLQUFLMkYsaUJBQ2xEM0YsS0FBS3dILGNBQWdCZCxTQUFTQyxlQUFlM0csS0FBSzRGLGlCQUVsRDVGLEtBQUt5SCxXQUFhZixTQUFTQyxlQUFlM0csS0FBSzZGLGNBRS9DN0YsS0FBSzBILFNBQVdoQixTQUFTQyxlQUFlM0csS0FBSzhGLFlBRTdDOUYsS0FBSzJILGtCQUVMM0gsS0FBSzRILG9CQUNOLENBRVFELGtCQUNQLElBQUssSUFBSS9DLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUFLLENBQzVCLE1BQU1pRCxFQUFVbkIsU0FBU29CLGNBQWMsT0FHdkNELEVBQVFFLEdBQUssT0FBU25ELEVBRXRCaUQsRUFBUUcsVUFBVUMsSUFBSSxZQUV0QmpJLEtBQUs4RyxjQUFjb0IsWUFBWUwsR0FFL0I3SCxLQUFLOEcsY0FBY3FCLFdBQWEsR0FFdkIsR0FBTHZELElBQ0g1RSxLQUFLOEcsY0FBY3FCLFdBQWEsUUFHakNuSSxLQUFLa0csTUFBTXRFLEtBQUtnRCxHQUdqQkQsRUFBYTNFLEtBQUtrRyxNQUNuQixDQUVPM0UsNkJBQTZCNkUsRUFBZ0RnQyxFQUFXQyxFQUFXQyxHQUN6RyxHQUFJbEMsRUFBYzFCLE9BQVMsRUFBRyxPQUFPLEVBRXJDLElBQUssSUFBSUUsRUFBSSxFQUFHQSxFQUFJd0IsRUFBYzFCLE9BQVFFLElBQUssQ0FDOUMsTUFBTTJELEVBQUtuQyxFQUFjeEIsR0FBR3dELEVBQUlBLEVBQzFCSSxFQUFLcEMsRUFBY3hCLEdBQUd5RCxFQUFJQSxFQUVoQyxHQURpQjlELEtBQUtrRSxLQUFLRixFQUFLQSxFQUFLQyxFQUFLQSxHQUMzQkYsRUFDZCxPQUFPLEVBR1QsT0FBTyxDQUNSLENBRVFWLHFCQUVQNUgsS0FBS21ILGNBQWN2RCxpQkFBaUIsU0FBUyxLQUM1QzVELEtBQUswSSxrQkFBa0IsRUFBRSxJQUcxQjFJLEtBQUt1RyxRQUFRM0UsS0FBSzVCLEtBQUttSCxlQUV2Qm5ILEtBQUtvSCxjQUFjeEQsaUJBQWlCLFNBQVMsS0FDNUM1RCxLQUFLMEksa0JBQWtCLEVBQUUsSUFHMUIxSSxLQUFLdUcsUUFBUTNFLEtBQUs1QixLQUFLb0gsZUFFdkJwSCxLQUFLcUgsY0FBY3pELGlCQUFpQixTQUFTLEtBQzVDNUQsS0FBSzBJLGtCQUFrQixFQUFFLElBRzFCMUksS0FBS3VHLFFBQVEzRSxLQUFLNUIsS0FBS3FILGVBRXZCckgsS0FBS3NILGNBQWMxRCxpQkFBaUIsU0FBUyxLQUM1QzVELEtBQUswSSxrQkFBa0IsRUFBRSxJQUcxQjFJLEtBQUt1RyxRQUFRM0UsS0FBSzVCLEtBQUtzSCxlQUV2QnRILEtBQUt1SCxjQUFjM0QsaUJBQWlCLFNBQVMsS0FDNUM1RCxLQUFLMEksa0JBQWtCLEVBQUUsSUFHMUIxSSxLQUFLdUcsUUFBUTNFLEtBQUs1QixLQUFLdUgsZUFFdkJ2SCxLQUFLd0gsY0FBYzVELGlCQUFpQixTQUFTLEtBQzVDNUQsS0FBSzBJLGtCQUFrQixFQUFFLElBRzFCMUksS0FBS3VHLFFBQVEzRSxLQUFLNUIsS0FBS3dILGVBRXZCeEgsS0FBS3lHLGlCQUFpQjdDLGlCQUFpQixTQUFTLEtBQzNDK0UsYUFBYUMsUUFBUTFKLE1BQ3hCYyxLQUFLNkksYUFHUixDQUVRQyxjQUNQLElBQUtoRSxFQUFhckQsY0FBY3dFLE1BQU8sQ0FDdEMsTUFBTThDLEVBQU9qRSxFQUFhckQsY0FBY3NFLGFBQ2xDUSxFQUFVekIsRUFBYXJELGNBQWM4RSxRQUMzQyxJQUFJeUMsRUFBb0IsSUFDeEIsTUFBTUMsRUFBbUIsSUFDekJuRSxFQUFhckQsY0FBY3dFLE9BQVEsRUFDbkMsSUFBSWlELEVBQW1CLEVBQ3ZCM0MsRUFBUTRDLFNBQVFDLElBQ2ZBLEVBQU9DLE1BQU1DLFdBQWEsU0FDMUJGLEVBQU9DLE1BQU1FLFVBQVksRUFBRSxJQUU1QkMsWUFBVyxLQUNWLElBQUssSUFBSTVFLEVBQUksRUFBR0EsRUFBSW1FLEVBQUs1RyxRQUFRdUMsT0FBUUUsSUFBSyxDQUM3QyxNQUFNNkUsRUFBWVYsRUFBSzVHLFFBQVF5QyxHQUN6QndFLEVBQVM3QyxFQUFRM0IsR0FFdkJ3RSxFQUFPakIsVUFBWSxlQUFnQnNCLEVBQVlBLEVBQVVDLFdBQWEsR0FDdEVOLEVBQU9DLE1BQU1DLFdBQWEsU0FDMUJGLEVBQU9DLE1BQU1NLFVBQVksZ0NBQ3pCSCxZQUFXLEtBSVYsR0FIQUosRUFBT0MsTUFBTUMsV0FBYSxVQUMxQkYsRUFBT0MsTUFBTU0sVUFBWSxzQkFDekJQLEVBQU9DLE1BQU1FLFVBQVksVUFBVVAsb0JBQy9CLGNBQWVTLEVBQVcsQ0FDN0IsTUFBTUcsRUFBU2pKLEVBQWdCa0osU0FBU0osRUFBVXBILFdBQ2xEK0csRUFBT2xCLFlBQVkwQixHQUVwQlIsRUFBT3hGLGlCQUFpQixnQkFBZ0IsS0FDdkNzRixJQUNJQSxJQUFxQkgsRUFBSzVHLFFBQVF1QyxRQUNyQ0ksRUFBYXJELGNBQWNxSSx1QkFFM0IsR0FDQ2xGLEVBQUlvRSxFQUFxQixPQUc1QkMsR0FHSG5FLEVBQWFyRCxjQUFjc0ksT0FBU0MsS0FBS0MsTUFFM0MsQ0FFUUgscUJBQ1BoRixFQUFhckQsY0FBYytFLGVBQWdCLENBQzVDLENBQ09qRix1QkFBdUIySSxHQUM3QjNLLFFBQVFDLElBQUksd0JBQTBCMEssR0FDdENwRixFQUFhckQsY0FBY3dGLGtCQUFrQmtCLFVBQVkrQixDQUMxRCxDQUdRQyxjQUNQbkssS0FBS3lHLGlCQUFpQjRDLE1BQU1lLFFBQVUsT0FDdENwSyxLQUFLNEcsY0FBY3lDLE1BQU1lLFFBQVUsT0FDbkNwSyxLQUFLNkcsYUFBYXdDLE1BQU1lLFFBQVUsTUFDbkMsQ0FFTzdJLGlCQUNOdUQsRUFBYXJELGNBQWNnRixpQkFBaUI0QyxNQUFNZSxRQUFVLE9BQzVEdEYsRUFBYXJELGNBQWNtRixjQUFjeUMsTUFBTWUsUUFBVSxPQUN6RHRGLEVBQWFyRCxjQUFjb0YsYUFBYXdDLE1BQU1lLFFBQVUsTUFDekQsQ0FFUXZCLFdBQ1A3SSxLQUFLeUcsaUJBQWlCNEMsTUFBTWUsUUFBVSxPQUN0Q3BLLEtBQUs0RyxjQUFjeUMsTUFBTWUsUUFBVSxPQUNuQ3BLLEtBQUs2RyxhQUFhd0MsTUFBTWUsUUFBVSxPQUNsQ3BLLEtBQUtxSyxTQUFXTCxLQUFLQyxNQUNyQmpLLEtBQUtzSyxvQkFDTixDQUVPL0ksMkJBQTJCZ0osR0FDN0JBLEdBQ0h6RixFQUFhckQsY0FBY3dGLGtCQUFrQmUsVUFBVXdDLE9BQU8sVUFDOUQxRixFQUFhckQsY0FBY3dGLGtCQUFrQmUsVUFBVUMsSUFBSSxXQUMzRHRILEVBQWdCOEosY0FDaEIzRixFQUFhckQsY0FBYytFLGVBQWdCLElBRTNDMUIsRUFBYXJELGNBQWN3RixrQkFBa0JlLFVBQVV3QyxPQUFPLFdBQzlEMUYsRUFBYXJELGNBQWN3RixrQkFBa0JlLFVBQVVDLElBQUksVUFDM0RuRCxFQUFhckQsY0FBYytFLGVBQWdCLEVBRTdDLENBRU9qRixvQkFBb0J3SCxHQUcxQixJQUFLLElBQUkyQixLQUZUbkwsUUFBUUMsSUFBSSxtQkFDWnNGLEVBQWFyRCxjQUFjeUYsaUJBQWlCbUMsTUFBTUMsV0FBYSxTQUNqRHhFLEVBQWFyRCxjQUFjOEUsUUFDeEN6QixFQUFhckQsY0FBYzhFLFFBQVFtRSxHQUFHckIsTUFBTUMsV0FBYSxTQUUxRHhFLEVBQWFyRCxjQUFjd0UsT0FBUSxFQUNuQ25CLEVBQWFyRCxjQUFjc0UsYUFBZWdELEVBQzFDakUsRUFBYXJELGNBQWN1RixtQkFBbUJtQixVQUFZLEdBQzFEckQsRUFBYXJELGNBQWN1RixtQkFBbUJxQyxNQUFNZSxRQUFVLE9BRzlEdEYsRUFBYXJELGNBQWNnRyxXQUFXVSxVQUFZLHNKQUN6QnpCLFNBQVNDLGVBQWUsZUFDOUIvQyxpQkFBaUIsU0FBUyxXQUM1Q2tCLEVBQWE2RixlQUViaEssRUFBZ0JpSyxVQUFVN0IsRUFBS2hILFlBQWErQyxFQUFhckQsY0FBY3FILFlBQWFoRSxFQUFhK0YsbUJBRWxHLEdBRUQsQ0FFT3RKLDBCQUEwQnVKLEdBQW1CLEdBQzdCaEcsRUFBYXJELGNBQWNnRyxXQUFXc0QsY0FBYyxPQUUzRHpKLElBRFh3SixFQUNpQiw0QkFHQSwyQkFHdEIsQ0FHT3ZKLG9CQUFvQnlKLEdBRzFCbEcsRUFBYXJELGNBQWNnRyxXQUFXVSxVQUFZLHNKQUV6QnpCLFNBQVNDLGVBQWUsZUFDOUIvQyxpQkFBaUIsU0FBUyxXQUM1Q3JFLFFBQVFDLElBQUksZ0NBQ1pELFFBQVFDLElBQUl3TCxFQUFZakosYUFFcEIsZ0JBQWlCaUosR0FDcEJySyxFQUFnQmlLLFVBQVVJLEVBQVlqSixpQkFBYXpDLEVBQVd3RixFQUFhK0YsbUJBRTdFLElBRUEvRixFQUFhckQsY0FBY3lGLGlCQUFpQm1DLE1BQU1DLFdBQWEsVUFFL0QsSUFBSTJCLEVBQVEsR0FRWixHQU5BbkcsRUFBYXJELGNBQWN1RixtQkFBbUJtQixVQUFZLFFBRTlCLElBQWpCLElBQ1Y2QyxFQUFjbEcsRUFBYXJELGNBQWNzRSxjQUd0QyxjQUFlaUYsRUFBYSxDQUMvQixJQUFJcEIsRUFBU2pKLEVBQWdCa0osU0FBU21CLEVBQVkvSSxXQUNsRDZDLEVBQWFyRCxjQUFjdUYsbUJBQW1Ca0IsWUFBWTBCLEdBVTNELElBQUssSUFBSXNCLEtBUFRELEdBQVNELEVBQVlHLFdBRXJCRixHQUFTLE9BRVRuRyxFQUFhckQsY0FBY3VGLG1CQUFtQm1CLFdBQWE4QyxFQUduQ25HLEVBQWFyRCxjQUFjOEUsUUFDbER6QixFQUFhckQsY0FBYzhFLFFBQVEyRSxHQUFhN0IsTUFBTUMsV0FBYSxRQUVyRSxDQUVPL0gsaUJBQ04sSUFBSTZKLEVBQWExRSxTQUFTQyxlQUFlLE9BQVM3QixFQUFhckQsY0FBY3lFLE1BQU1wQixFQUFhckQsY0FBYzZFLFVBQzlHOEUsRUFBVzlKLElBQU0sd0JBQ2pCOEosRUFBV3BELFVBQVVDLElBQUksWUFDekJtRCxFQUFXcEQsVUFBVXdDLE9BQU8sWUFFNUJZLEVBQVcvQixNQUFNZ0MsU0FBVyxXQUU1QixJQUFJQyxFQUFpQnhHLEVBQWFWLFNBQVMwQyxjQUFjeUUsWUFDckRDLEVBQWtCMUcsRUFBYVYsU0FBUzBDLGNBQWMyRSxhQUUxRGxNLFFBQVFDLElBQUksK0JBQWdDOEwsRUFBZ0JFLEdBRTVELElBQUlFLEVBQVUsRUFDVkMsRUFBVSxFQUVkLEdBQ0NELEVBQVVuSCxLQUFLQyxNQUFNRCxLQUFLRSxVQUFZNkcsRUFBaUIsS0FDdkRLLEVBQVVwSCxLQUFLQyxNQUFNRCxLQUFLRSxTQUFXK0csU0FDN0IxRyxFQUFhOEcsc0JBQXNCOUcsRUFBYVYsU0FBU2dDLGNBQWVzRixFQUFTQyxFQUFTLEtBR25HUCxFQUFXL0IsTUFBTXdDLFVBQVksWUFDN0JULEVBQVcvQixNQUFNeUMsV0FBYSxpREFDOUJWLEVBQVcvQixNQUFNMEMsT0FBUyxNQUMxQlgsRUFBVy9CLE1BQU0yQyxJQUFNdE0sT0FBT3VNLFlBQWMsRUFBSSxLQUNoRGIsRUFBVy9CLE1BQU02QyxLQUFPcEgsRUFBYVYsU0FBU3dDLGNBQWMyRSxZQUFjLEVBQUtILEVBQVdHLFlBQWMsRUFBSyxLQUU3Ry9CLFlBQVcsS0FFVixHQURBNEIsRUFBVy9CLE1BQU15QyxXQUFhLCtDQUMxQkosRUFBVUosRUFBaUIsRUFBRyxDQUVqQyxNQUFNYSxFQUFXLEVBQXFCLEVBQWhCNUgsS0FBS0UsU0FDM0JsRixRQUFRQyxJQUFJLDZCQUE4QjJNLEdBQzFDZixFQUFXL0IsTUFBTXdDLFVBQVksV0FBYU0sRUFBVyxvQkFDL0MsQ0FFTixNQUFNQSxFQUFXLEVBQXFCLEVBQWhCNUgsS0FBS0UsU0FDM0JsRixRQUFRQyxJQUFJLDRCQUE2QjJNLEdBQ3pDZixFQUFXL0IsTUFBTXdDLFVBQVksVUFBWU0sRUFBVyxnQkFHckRmLEVBQVcvQixNQUFNNkMsS0FBTyxHQUFLUixFQUFVLEtBQ3ZDTixFQUFXL0IsTUFBTTJDLElBQU0sR0FBS0wsRUFBVSxLQUV0Q25DLFlBQVcsS0FDVjRCLEVBQVcvQixNQUFNK0MsT0FBUyxrQ0FBa0MsR0FDMUQsS0FBSyxHQUNOLEtBRUh0SCxFQUFhVixTQUFTZ0MsY0FBY3hFLEtBQUssQ0FBRXdHLEVBQUdzRCxFQUFTckQsRUFBR3NELElBRTFEN0csRUFBYXJELGNBQWM2RSxTQUFXLEVBRXRDeEIsRUFBYXJELGNBQWMwRSxpQkFBbUIsQ0FDL0MsQ0FFTzVFLHVDQUNXbUYsU0FBU0MsZUFBZSxPQUFTN0IsRUFBYXJELGNBQWN5RSxNQUFNcEIsRUFBYXJELGNBQWM2RSxRQUFVLElBQzdHaEYsSUFBTSxpQ0FDbEIsQ0FHUW9ILGtCQUFrQjJELEdBQ3pCLE1BQU1DLEVBQW9CdE0sS0FBS3VHLFFBQVFnRyxPQUFNbkQsR0FBc0MsWUFBNUJBLEVBQU9DLE1BQU1DLGFBRXBFLEdBREEvSixRQUFRQyxJQUFJUSxLQUFLd0csY0FBZThGLElBQ0wsSUFBdkJ0TSxLQUFLd0csY0FBd0IsQ0FDaEM3RixFQUFnQjZMLFdBQ2hCLE1BQ01DLEVBRFd6QyxLQUFLQyxNQUNHakssS0FBSytKLE9BQzlCeEssUUFBUUMsSUFBSSxlQUFpQmlOLEdBQzdCek0sS0FBSzBNLG9CQUFvQkwsRUFBV0ksR0FFdEMsQ0FFT2xMLHVCQUNOLE1BQU1vTCxFQUFhakcsU0FBU0MsZUFBZSxjQUMzQyxJQUFJaUcsRUFBZ0JELEVBQVdyTCxJQUMvQi9CLFFBQVFDLElBQUksMEJBQXdCbU4sR0FDcENwTixRQUFRQyxJQUFJLDBCQUF3Qm1OLEVBQVdyTCxLQUMvQyxNQUFNdUwsRUFBcUJDLFNBQVNGLEVBQWNySixPQUFPLEdBQUksR0FBSSxJQUNqRWhFLFFBQVFDLElBQUksaUNBQStCcU4sR0FDM0MsTUFDTUUsRUFBZSwwQ0FER0YsRUFBcUIsRUFBSSxRQUVqREYsRUFBV3JMLElBQU15TCxDQUlsQixDQUVPeEwsd0JBQXdCeUwsR0FDOUJsSSxFQUFhckQsY0FBY3VFLGNBQWdCZ0gsQ0FDNUMsQ0FFT3pMLDRCQUE0QjBMLEdBQ2xDbkksRUFBYXJELGNBQWNpTCxvQkFBc0JPLENBQ2xELENBRU8xTCxzQkFBc0IwTCxHQUM1Qm5JLEVBQWFyRCxjQUFjNkksbUJBQXFCMkMsQ0FDakQsQ0FFTzFMLHFCQU1OLE9BTDhCLE9BQTFCdUQsRUFBYVYsV0FDaEJVLEVBQWFWLFNBQVcsSUFBSVUsRUFDNUJBLEVBQWFWLFNBQVNoRCxRQUdoQjBELEVBQWFWLFFBQ3JCLEVBamNlLEVBQUFBLFNBQWdDLEtDWWhELE1BaUVNOEksRUFBc0IsU0FBVUMsR0FFbEMsTUFBTUMsRUFBTSxHQUNaLElBQUlDLEVBQUksRUFDUixJQUFLLElBQUl6SSxFQUFJLEVBQUdBLEVBQUl1SSxFQUFJekksT0FBUUUsSUFBSyxDQUNqQyxJQUFJMEksRUFBSUgsRUFBSUksV0FBVzNJLEdBQ25CMEksRUFBSSxJQUNKRixFQUFJQyxLQUFPQyxFQUVOQSxFQUFJLE1BQ1RGLEVBQUlDLEtBQVFDLEdBQUssRUFBSyxJQUN0QkYsRUFBSUMsS0FBWSxHQUFKQyxFQUFVLEtBRUEsUUFBWixNQUFKQSxJQUNOMUksRUFBSSxFQUFJdUksRUFBSXpJLFFBQ3lCLFFBQVosTUFBeEJ5SSxFQUFJSSxXQUFXM0ksRUFBSSxLQUVwQjBJLEVBQUksUUFBZ0IsS0FBSkEsSUFBZSxLQUE2QixLQUF0QkgsRUFBSUksYUFBYTNJLElBQ3ZEd0ksRUFBSUMsS0FBUUMsR0FBSyxHQUFNLElBQ3ZCRixFQUFJQyxLQUFTQyxHQUFLLEdBQU0sR0FBTSxJQUM5QkYsRUFBSUMsS0FBU0MsR0FBSyxFQUFLLEdBQU0sSUFDN0JGLEVBQUlDLEtBQVksR0FBSkMsRUFBVSxNQUd0QkYsRUFBSUMsS0FBUUMsR0FBSyxHQUFNLElBQ3ZCRixFQUFJQyxLQUFTQyxHQUFLLEVBQUssR0FBTSxJQUM3QkYsRUFBSUMsS0FBWSxHQUFKQyxFQUFVLElBRTlCLENBQ0EsT0FBT0YsQ0FDWCxFQXlDTUksRUFBUyxDQUlYQyxlQUFnQixLQUloQkMsZUFBZ0IsS0FLaEJDLHNCQUF1QixLQUt2QkMsc0JBQXVCLEtBS3ZCQyxrQkFBbUIsaUVBSWZDLG1CQUNBLE9BQU85TixLQUFLNk4sa0JBQW9CLEtBQ3BDLEVBSUlFLDJCQUNBLE9BQU8vTixLQUFLNk4sa0JBQW9CLEtBQ3BDLEVBUUFHLG1CQUFvQyxtQkFBVEMsS0FVM0JDLGdCQUFnQkMsRUFBT0MsR0FDbkIsSUFBSy9ILE1BQU1nSSxRQUFRRixHQUNmLE1BQU1HLE1BQU0saURBRWhCdE8sS0FBS3VPLFFBQ0wsTUFBTUMsRUFBZ0JKLEVBQ2hCcE8sS0FBSzJOLHNCQUNMM04sS0FBS3lOLGVBQ0xnQixFQUFTLEdBQ2YsSUFBSyxJQUFJN0osRUFBSSxFQUFHQSxFQUFJdUosRUFBTXpKLE9BQVFFLEdBQUssRUFBRyxDQUN0QyxNQUFNOEosRUFBUVAsRUFBTXZKLEdBQ2QrSixFQUFZL0osRUFBSSxFQUFJdUosRUFBTXpKLE9BQzFCa0ssRUFBUUQsRUFBWVIsRUFBTXZKLEVBQUksR0FBSyxFQUNuQ2lLLEVBQVlqSyxFQUFJLEVBQUl1SixFQUFNekosT0FDMUJvSyxFQUFRRCxFQUFZVixFQUFNdkosRUFBSSxHQUFLLEVBQ25DbUssRUFBV0wsR0FBUyxFQUNwQk0sR0FBcUIsRUFBUk4sSUFBaUIsRUFBTUUsR0FBUyxFQUNuRCxJQUFJSyxHQUFxQixHQUFSTCxJQUFpQixFQUFNRSxHQUFTLEVBQzdDSSxFQUFtQixHQUFSSixFQUNWRCxJQUNESyxFQUFXLEdBQ05QLElBQ0RNLEVBQVcsS0FHbkJSLEVBQU83TSxLQUFLNE0sRUFBY08sR0FBV1AsRUFBY1EsR0FBV1IsRUFBY1MsR0FBV1QsRUFBY1UsR0FDekcsQ0FDQSxPQUFPVCxFQUFPVSxLQUFLLEdBQ3ZCLEVBU0FDLGFBQWFqQixFQUFPQyxHQUdoQixPQUFJcE8sS0FBS2dPLHFCQUF1QkksRUFDckJpQixLQUFLbEIsR0FFVG5PLEtBQUtrTyxnQkFBZ0JoQixFQUFvQmlCLEdBQVFDLEVBQzVELEVBU0FrQixhQUFhbkIsRUFBT0MsR0FHaEIsT0FBSXBPLEtBQUtnTyxxQkFBdUJJLEVBQ3JCSCxLQUFLRSxHQWhKRSxTQUFVb0IsR0FFaEMsTUFBTW5DLEVBQU0sR0FDWixJQUFJb0MsRUFBTSxFQUFHbEMsRUFBSSxFQUNqQixLQUFPa0MsRUFBTUQsRUFBTTdLLFFBQVEsQ0FDdkIsTUFBTStLLEVBQUtGLEVBQU1DLEtBQ2pCLEdBQUlDLEVBQUssSUFDTHJDLEVBQUlFLEtBQU9vQyxPQUFPQyxhQUFhRixRQUU5QixHQUFJQSxFQUFLLEtBQU9BLEVBQUssSUFBSyxDQUMzQixNQUFNRyxFQUFLTCxFQUFNQyxLQUNqQnBDLEVBQUlFLEtBQU9vQyxPQUFPQyxjQUFvQixHQUFMRixJQUFZLEVBQVcsR0FBTEcsRUFDdkQsTUFDSyxHQUFJSCxFQUFLLEtBQU9BLEVBQUssSUFBSyxDQUUzQixNQUdNSSxJQUFZLEVBQUxKLElBQVcsSUFBYSxHQUgxQkYsRUFBTUMsT0FHMkIsSUFBYSxHQUY5Q0QsRUFBTUMsT0FFK0MsRUFBVyxHQURoRUQsRUFBTUMsTUFFYixNQUNKcEMsRUFBSUUsS0FBT29DLE9BQU9DLGFBQWEsT0FBVUUsR0FBSyxLQUM5Q3pDLEVBQUlFLEtBQU9vQyxPQUFPQyxhQUFhLE9BQWMsS0FBSkUsR0FDN0MsS0FDSyxDQUNELE1BQU1ELEVBQUtMLEVBQU1DLEtBQ1hNLEVBQUtQLEVBQU1DLEtBQ2pCcEMsRUFBSUUsS0FBT29DLE9BQU9DLGNBQW9CLEdBQUxGLElBQVksSUFBYSxHQUFMRyxJQUFZLEVBQVcsR0FBTEUsRUFDM0UsQ0FDSixDQUNBLE9BQU8xQyxFQUFJK0IsS0FBSyxHQUNwQixDQW9IZVksQ0FBa0IvUCxLQUFLZ1Esd0JBQXdCN0IsRUFBT0MsR0FDakUsRUFnQkE0Qix3QkFBd0I3QixFQUFPQyxHQUMzQnBPLEtBQUt1TyxRQUNMLE1BQU0wQixFQUFnQjdCLEVBQ2hCcE8sS0FBSzROLHNCQUNMNU4sS0FBSzBOLGVBQ0xlLEVBQVMsR0FDZixJQUFLLElBQUk3SixFQUFJLEVBQUdBLEVBQUl1SixFQUFNekosUUFBUyxDQUMvQixNQUFNZ0ssRUFBUXVCLEVBQWM5QixFQUFNK0IsT0FBT3RMLE1BRW5DZ0ssRUFEWWhLLEVBQUl1SixFQUFNekosT0FDRnVMLEVBQWM5QixFQUFNK0IsT0FBT3RMLElBQU0sSUFDekRBLEVBQ0YsTUFDTWtLLEVBRFlsSyxFQUFJdUosRUFBTXpKLE9BQ0Z1TCxFQUFjOUIsRUFBTStCLE9BQU90TCxJQUFNLEtBQ3pEQSxFQUNGLE1BQ011TCxFQURZdkwsRUFBSXVKLEVBQU16SixPQUNGdUwsRUFBYzlCLEVBQU0rQixPQUFPdEwsSUFBTSxHQUUzRCxLQURFQSxFQUNXLE1BQVQ4SixHQUEwQixNQUFURSxHQUEwQixNQUFURSxHQUEwQixNQUFUcUIsRUFDbkQsTUFBTTdCLFFBRVYsTUFBTVMsRUFBWUwsR0FBUyxFQUFNRSxHQUFTLEVBRTFDLEdBREFILEVBQU83TSxLQUFLbU4sR0FDRSxLQUFWRCxFQUFjLENBQ2QsTUFBTUUsRUFBYUosR0FBUyxFQUFLLElBQVNFLEdBQVMsRUFFbkQsR0FEQUwsRUFBTzdNLEtBQUtvTixHQUNFLEtBQVZtQixFQUFjLENBQ2QsTUFBTWxCLEVBQWFILEdBQVMsRUFBSyxJQUFRcUIsRUFDekMxQixFQUFPN00sS0FBS3FOLEVBQ2hCLENBQ0osQ0FDSixDQUNBLE9BQU9SLENBQ1gsRUFNQUYsUUFDSSxJQUFLdk8sS0FBS3lOLGVBQWdCLENBQ3RCek4sS0FBS3lOLGVBQWlCLENBQUMsRUFDdkJ6TixLQUFLME4sZUFBaUIsQ0FBQyxFQUN2QjFOLEtBQUsyTixzQkFBd0IsQ0FBQyxFQUM5QjNOLEtBQUs0TixzQkFBd0IsQ0FBQyxFQUU5QixJQUFLLElBQUloSixFQUFJLEVBQUdBLEVBQUk1RSxLQUFLOE4sYUFBYXBKLE9BQVFFLElBQzFDNUUsS0FBS3lOLGVBQWU3SSxHQUFLNUUsS0FBSzhOLGFBQWFvQyxPQUFPdEwsR0FDbEQ1RSxLQUFLME4sZUFBZTFOLEtBQUt5TixlQUFlN0ksSUFBTUEsRUFDOUM1RSxLQUFLMk4sc0JBQXNCL0ksR0FBSzVFLEtBQUsrTixxQkFBcUJtQyxPQUFPdEwsR0FDakU1RSxLQUFLNE4sc0JBQXNCNU4sS0FBSzJOLHNCQUFzQi9JLElBQU1BLEVBRXhEQSxHQUFLNUUsS0FBSzZOLGtCQUFrQm5KLFNBQzVCMUUsS0FBSzBOLGVBQWUxTixLQUFLK04scUJBQXFCbUMsT0FBT3RMLElBQU1BLEVBQzNENUUsS0FBSzROLHNCQUFzQjVOLEtBQUs4TixhQUFhb0MsT0FBT3RMLElBQU1BLEVBR3RFLENBQ0osR0FhRXdMLEVBQWdDLFNBQVVqRCxHQUU1QyxPQVZpQixTQUFVQSxHQUMzQixNQUFNa0QsRUFBWW5ELEVBQW9CQyxHQUN0QyxPQUFPSyxFQUFPVSxnQkFBZ0JtQyxHQUFXLEVBQzdDLENBT1dDLENBQWFuRCxHQUFLeEssUUFBUSxNQUFPLEdBQzVDLEVBME1BLFNBQVMsSUFDTCxNQUE0QixpQkFBZDROLFNBQ2xCLENBUUEsU0FBUyxJQUNMLE9BQU8sSUFBSS9NLFNBQVEsQ0FBQ0MsRUFBU0MsS0FDekIsSUFDSSxJQUFJOE0sR0FBVyxFQUNmLE1BQU1DLEVBQWdCLDBEQUNoQkMsRUFBVUMsS0FBS0osVUFBVUssS0FBS0gsR0FDcENDLEVBQVFHLFVBQVksS0FDaEJILEVBQVFJLE9BQU9DLFFBRVZQLEdBQ0RHLEtBQUtKLFVBQVVTLGVBQWVQLEdBRWxDaE4sR0FBUSxFQUFLLEVBRWpCaU4sRUFBUU8sZ0JBQWtCLEtBQ3RCVCxHQUFXLENBQUssRUFFcEJFLEVBQVFRLFFBQVUsS0FDZCxJQUFJQyxFQUNKek4sR0FBaUMsUUFBeEJ5TixFQUFLVCxFQUFRM00sYUFBMEIsSUFBUG9OLE9BQWdCLEVBQVNBLEVBQUdDLFVBQVksR0FBRyxDQUs1RixDQUZBLE1BQU9yTixHQUNITCxFQUFPSyxFQUNYLElBRVIsQ0E2Q0EsTUFxQ01zTixFQUFjLEtBQ2hCLElBQ0ksT0FwRVIsV0FDSSxHQUFvQixvQkFBVFYsS0FDUCxPQUFPQSxLQUVYLEdBQXNCLG9CQUFYalIsT0FDUCxPQUFPQSxPQUVYLFFBQXNCLElBQVgsRUFBQUksRUFDUCxPQUFPLEVBQUFBLEVBRVgsTUFBTSxJQUFJd08sTUFBTSxrQ0FDcEIsQ0FrQm9DZ0QsR0FBWUMsdUJBTWIsTUFDL0IsR0FBdUIsb0JBQVpDLGNBQWtELElBQWhCQSxRQUFRQyxJQUNqRCxPQUVKLE1BQU1DLEVBQXFCRixRQUFRQyxJQUFJRixzQkFDdkMsT0FBSUcsRUFDT0MsS0FBS0MsTUFBTUYsUUFEdEIsQ0FFQSxFQTJCUUcsSUF6QmtCLE1BQzFCLEdBQXdCLG9CQUFibkwsU0FDUCxPQUVKLElBQUlvTCxFQUNKLElBQ0lBLEVBQVFwTCxTQUFTcUwsT0FBT0QsTUFBTSxnQ0FNbEMsQ0FKQSxNQUFPNVIsR0FHSCxNQUNKLENBQ0EsTUFBTThSLEVBQVVGLEdBN1NDLFNBQVUzRSxHQUMzQixJQUNJLE9BQU9LLEVBQU84QixhQUFhbkMsR0FBSyxFQUlwQyxDQUZBLE1BQU9qTixHQUNIWCxRQUFRd0UsTUFBTSx3QkFBeUI3RCxFQUMzQyxDQUNBLE9BQU8sSUFDWCxDQXFTNkIrUixDQUFhSCxFQUFNLElBQzVDLE9BQU9FLEdBQVdMLEtBQUtDLE1BQU1JLEVBQVEsRUFZN0JFLEVBV1IsQ0FUQSxNQUFPaFMsR0FRSCxZQURBWCxRQUFRNFMsS0FBSywrQ0FBK0NqUyxJQUVoRSxHQThESixNQUFNa1MsRUFDRkMsY0FDSXJTLEtBQUswRCxPQUFTLE9BQ2QxRCxLQUFLeUQsUUFBVSxPQUNmekQsS0FBS3NTLFFBQVUsSUFBSTlPLFNBQVEsQ0FBQ0MsRUFBU0MsS0FDakMxRCxLQUFLeUQsUUFBVUEsRUFDZnpELEtBQUswRCxPQUFTQSxDQUFNLEdBRTVCLENBTUE2TyxhQUFhdEYsR0FDVCxNQUFPLENBQUNsSixFQUFPaUosS0FDUGpKLEVBQ0EvRCxLQUFLMEQsT0FBT0ssR0FHWi9ELEtBQUt5RCxRQUFRdUosR0FFTyxtQkFBYkMsSUFHUGpOLEtBQUtzUyxRQUFReE8sT0FBTSxTQUdLLElBQXBCbUosRUFBU3ZJLE9BQ1R1SSxFQUFTbEosR0FHVGtKLEVBQVNsSixFQUFPaUosR0FFeEIsQ0FFUixFQTRHSixNQUFNd0YsVUFBc0JsRSxNQUN4QitELFlBRUFJLEVBQU1yQixFQUVOc0IsR0FDSUMsTUFBTXZCLEdBQ05wUixLQUFLeVMsS0FBT0EsRUFDWnpTLEtBQUswUyxXQUFhQSxFQUVsQjFTLEtBQUs0UyxLQWJNLGdCQWdCWEMsT0FBT0MsZUFBZTlTLEtBQU13UyxFQUFjTyxXQUd0Q3pFLE1BQU0wRSxtQkFDTjFFLE1BQU0wRSxrQkFBa0JoVCxLQUFNaVQsRUFBYUYsVUFBVUcsT0FFN0QsRUFFSixNQUFNRCxFQUNGWixZQUFZYyxFQUFTQyxFQUFhQyxHQUM5QnJULEtBQUttVCxRQUFVQSxFQUNmblQsS0FBS29ULFlBQWNBLEVBQ25CcFQsS0FBS3FULE9BQVNBLENBQ2xCLENBQ0FILE9BQU9ULEtBQVN0VCxHQUNaLE1BQU11VCxFQUFhdlQsRUFBSyxJQUFNLENBQUMsRUFDekJtVSxFQUFXLEdBQUd0VCxLQUFLbVQsV0FBV1YsSUFDOUJjLEVBQVd2VCxLQUFLcVQsT0FBT1osR0FDdkJyQixFQUFVbUMsRUFPeEIsU0FBeUJBLEVBQVVwVSxHQUMvQixPQUFPb1UsRUFBUzVRLFFBQVE2USxHQUFTLENBQUNDLEVBQUdDLEtBQ2pDLE1BQU0xRyxFQUFRN04sRUFBS3VVLEdBQ25CLE9BQWdCLE1BQVQxRyxFQUFnQjBDLE9BQU8xQyxHQUFTLElBQUkwRyxLQUFPLEdBRTFELENBWm1DQyxDQUFnQkosRUFBVWIsR0FBYyxRQUU3RGtCLEVBQWMsR0FBRzVULEtBQUtvVCxnQkFBZ0JoQyxNQUFZa0MsTUFFeEQsT0FEYyxJQUFJZCxFQUFjYyxFQUFVTSxFQUFhbEIsRUFFM0QsRUFRSixNQUFNYyxFQUFVLGdCQWtNaEIsU0FBU0ssRUFBVUMsRUFBR3BKLEdBQ2xCLEdBQUlvSixJQUFNcEosRUFDTixPQUFPLEVBRVgsTUFBTXFKLEVBQVFsQixPQUFPbUIsS0FBS0YsR0FDcEJHLEVBQVFwQixPQUFPbUIsS0FBS3RKLEdBQzFCLElBQUssTUFBTXdKLEtBQUtILEVBQU8sQ0FDbkIsSUFBS0UsRUFBTXZSLFNBQVN3UixHQUNoQixPQUFPLEVBRVgsTUFBTUMsRUFBUUwsRUFBRUksR0FDVkUsRUFBUTFKLEVBQUV3SixHQUNoQixHQUFJRyxFQUFTRixJQUFVRSxFQUFTRCxJQUM1QixJQUFLUCxFQUFVTSxFQUFPQyxHQUNsQixPQUFPLE9BR1YsR0FBSUQsSUFBVUMsRUFDZixPQUFPLENBRWYsQ0FDQSxJQUFLLE1BQU1GLEtBQUtELEVBQ1osSUFBS0YsRUFBTXJSLFNBQVN3UixHQUNoQixPQUFPLEVBR2YsT0FBTyxDQUNYLENBQ0EsU0FBU0csRUFBU0MsR0FDZCxPQUFpQixPQUFWQSxHQUFtQyxpQkFBVkEsQ0FDcEMsQ0EyeUJBLFNBQVNDLEVBQXVCQyxFQUFjQyxFQTFCZCxJQTBCd0RDLEVBckJ6RCxHQXlCM0IsTUFBTUMsRUFBZ0JGLEVBQWlCbFEsS0FBS3FRLElBQUlGLEVBQWVGLEdBR3pESyxFQUFhdFEsS0FBS3VRLE1BYk4sR0FpQmRILEdBR0NwUSxLQUFLRSxTQUFXLElBQ2pCLEdBRUosT0FBT0YsS0FBS3dRLElBaENTLE1BZ0NhSixFQUFnQkUsRUFDdEQsQ0E4REEsU0FBUyxFQUFtQjFCLEdBQ3hCLE9BQUlBLEdBQVdBLEVBQVE2QixVQUNaN0IsRUFBUTZCLFVBR1I3QixDQUVmLENDM2dFQSxNQUFNOEIsRUFPRjVDLFlBQVlPLEVBQU1zQyxFQUFpQkMsR0FDL0JuVixLQUFLNFMsS0FBT0EsRUFDWjVTLEtBQUtrVixnQkFBa0JBLEVBQ3ZCbFYsS0FBS21WLEtBQU9BLEVBQ1puVixLQUFLb1YsbUJBQW9CLEVBSXpCcFYsS0FBS3FWLGFBQWUsQ0FBQyxFQUNyQnJWLEtBQUtzVixrQkFBb0IsT0FDekJ0VixLQUFLdVYsa0JBQW9CLElBQzdCLENBQ0FDLHFCQUFxQkMsR0FFakIsT0FEQXpWLEtBQUtzVixrQkFBb0JHLEVBQ2xCelYsSUFDWCxDQUNBMFYscUJBQXFCTixHQUVqQixPQURBcFYsS0FBS29WLGtCQUFvQkEsRUFDbEJwVixJQUNYLENBQ0EyVixnQkFBZ0JDLEdBRVosT0FEQTVWLEtBQUtxVixhQUFlTyxFQUNiNVYsSUFDWCxDQUNBNlYsMkJBQTJCNUksR0FFdkIsT0FEQWpOLEtBQUt1VixrQkFBb0J0SSxFQUNsQmpOLElBQ1gsRUFtQkosTUFBTThWLEVBQXFCLFlBc0IzQixNQUFNQyxFQUNGMUQsWUFBWU8sRUFBTW9ELEdBQ2RoVyxLQUFLNFMsS0FBT0EsRUFDWjVTLEtBQUtnVyxVQUFZQSxFQUNqQmhXLEtBQUtpVyxVQUFZLEtBQ2pCalcsS0FBS2tXLFVBQVksSUFBSUMsSUFDckJuVyxLQUFLb1csa0JBQW9CLElBQUlELElBQzdCblcsS0FBS3FXLGlCQUFtQixJQUFJRixJQUM1Qm5XLEtBQUtzVyxnQkFBa0IsSUFBSUgsR0FDL0IsQ0FLQTlXLElBQUlrWCxHQUVBLE1BQU1DLEVBQXVCeFcsS0FBS3lXLDRCQUE0QkYsR0FDOUQsSUFBS3ZXLEtBQUtvVyxrQkFBa0JNLElBQUlGLEdBQXVCLENBQ25ELE1BQU1HLEVBQVcsSUFBSXZFLEVBRXJCLEdBREFwUyxLQUFLb1csa0JBQWtCUSxJQUFJSixFQUFzQkcsR0FDN0MzVyxLQUFLNlcsY0FBY0wsSUFDbkJ4VyxLQUFLOFcsdUJBRUwsSUFDSSxNQUFNMVMsRUFBV3BFLEtBQUsrVyx1QkFBdUIsQ0FDekNDLG1CQUFvQlIsSUFFcEJwUyxHQUNBdVMsRUFBU2xULFFBQVFXLEVBTXpCLENBSEEsTUFBT2xFLEdBR1AsQ0FFUixDQUNBLE9BQU9GLEtBQUtvVyxrQkFBa0IvVyxJQUFJbVgsR0FBc0JsRSxPQUM1RCxDQUNBMkUsYUFBYUMsR0FDVCxJQUFJL0YsRUFFSixNQUFNcUYsRUFBdUJ4VyxLQUFLeVcsNEJBQTRCUyxhQUF5QyxFQUFTQSxFQUFRWCxZQUNsSFksRUFBeUYsUUFBN0VoRyxFQUFLK0YsYUFBeUMsRUFBU0EsRUFBUUMsZ0JBQTZCLElBQVBoRyxHQUFnQkEsRUFDdkgsSUFBSW5SLEtBQUs2VyxjQUFjTCxLQUNuQnhXLEtBQUs4Vyx1QkFlSixDQUVELEdBQUlLLEVBQ0EsT0FBTyxLQUdQLE1BQU03SSxNQUFNLFdBQVd0TyxLQUFLNFMsd0JBRXBDLENBdEJJLElBQ0ksT0FBTzVTLEtBQUsrVyx1QkFBdUIsQ0FDL0JDLG1CQUFvQlIsR0FVNUIsQ0FQQSxNQUFPdFcsR0FDSCxHQUFJaVgsRUFDQSxPQUFPLEtBR1AsTUFBTWpYLENBRWQsQ0FXUixDQUNBa1gsZUFDSSxPQUFPcFgsS0FBS2lXLFNBQ2hCLENBQ0FvQixhQUFhcEIsR0FDVCxHQUFJQSxFQUFVckQsT0FBUzVTLEtBQUs0UyxLQUN4QixNQUFNdEUsTUFBTSx5QkFBeUIySCxFQUFVckQscUJBQXFCNVMsS0FBSzRTLFNBRTdFLEdBQUk1UyxLQUFLaVcsVUFDTCxNQUFNM0gsTUFBTSxpQkFBaUJ0TyxLQUFLNFMsa0NBSXRDLEdBRkE1UyxLQUFLaVcsVUFBWUEsRUFFWmpXLEtBQUs4Vyx1QkFBVixDQUlBLEdBd0tSLFNBQTBCYixHQUN0QixNQUF1QyxVQUFoQ0EsRUFBVVgsaUJBQ3JCLENBMUtZZ0MsQ0FBaUJyQixHQUNqQixJQUNJalcsS0FBSytXLHVCQUF1QixDQUFFQyxtQkFBb0JsQixHQU90RCxDQUxBLE1BQU81VixHQUtQLENBS0osSUFBSyxNQUFPOFcsRUFBb0JPLEtBQXFCdlgsS0FBS29XLGtCQUFrQm9CLFVBQVcsQ0FDbkYsTUFBTWhCLEVBQXVCeFcsS0FBS3lXLDRCQUE0Qk8sR0FDOUQsSUFFSSxNQUFNNVMsRUFBV3BFLEtBQUsrVyx1QkFBdUIsQ0FDekNDLG1CQUFvQlIsSUFFeEJlLEVBQWlCOVQsUUFBUVcsRUFLN0IsQ0FIQSxNQUFPbEUsR0FHUCxDQUNKLENBN0JBLENBOEJKLENBQ0F1WCxjQUFjbEIsRUFBYVQsYUFDdkI5VixLQUFLb1csa0JBQWtCc0IsT0FBT25CLEdBQzlCdlcsS0FBS3FXLGlCQUFpQnFCLE9BQU9uQixHQUM3QnZXLEtBQUtrVyxVQUFVd0IsT0FBT25CLEVBQzFCLENBR0FvQixlQUNJLE1BQU1DLEVBQVd2UixNQUFNd1IsS0FBSzdYLEtBQUtrVyxVQUFVNEIsZ0JBQ3JDdFUsUUFBUXVVLElBQUksSUFDWEgsRUFDRXhMLFFBQU8rRyxHQUFXLGFBQWNBLElBRWhDNkUsS0FBSTdFLEdBQVdBLEVBQVE4RSxTQUFTUCxjQUNsQ0UsRUFDRXhMLFFBQU8rRyxHQUFXLFlBQWFBLElBRS9CNkUsS0FBSTdFLEdBQVdBLEVBQVErRSxhQUVwQyxDQUNBQyxpQkFDSSxPQUF5QixNQUFsQm5ZLEtBQUtpVyxTQUNoQixDQUNBWSxjQUFjTixFQUFhVCxhQUN2QixPQUFPOVYsS0FBS2tXLFVBQVVRLElBQUlILEVBQzlCLENBQ0E2QixXQUFXN0IsRUFBYVQsYUFDcEIsT0FBTzlWLEtBQUtxVyxpQkFBaUJoWCxJQUFJa1gsSUFBZSxDQUFDLENBQ3JELENBQ0E4QixXQUFXQyxFQUFPLENBQUMsR0FDZixNQUFNLFFBQUVwQixFQUFVLENBQUMsR0FBTW9CLEVBQ25COUIsRUFBdUJ4VyxLQUFLeVcsNEJBQTRCNkIsRUFBS3RCLG9CQUNuRSxHQUFJaFgsS0FBSzZXLGNBQWNMLEdBQ25CLE1BQU1sSSxNQUFNLEdBQUd0TyxLQUFLNFMsUUFBUTRELG1DQUVoQyxJQUFLeFcsS0FBS21ZLGlCQUNOLE1BQU03SixNQUFNLGFBQWF0TyxLQUFLNFMsb0NBRWxDLE1BQU14TyxFQUFXcEUsS0FBSytXLHVCQUF1QixDQUN6Q0MsbUJBQW9CUixFQUNwQlUsWUFHSixJQUFLLE1BQU9GLEVBQW9CTyxLQUFxQnZYLEtBQUtvVyxrQkFBa0JvQixVQUVwRWhCLElBRGlDeFcsS0FBS3lXLDRCQUE0Qk8sSUFFbEVPLEVBQWlCOVQsUUFBUVcsR0FHakMsT0FBT0EsQ0FDWCxDQVNBbVUsT0FBT3RMLEVBQVVzSixHQUNiLElBQUlwRixFQUNKLE1BQU1xRixFQUF1QnhXLEtBQUt5Vyw0QkFBNEJGLEdBQ3hEaUMsRUFBOEUsUUFBekRySCxFQUFLblIsS0FBS3NXLGdCQUFnQmpYLElBQUltWCxVQUEwQyxJQUFQckYsRUFBZ0JBLEVBQUssSUFBSXNILElBQ3JIRCxFQUFrQnZRLElBQUlnRixHQUN0QmpOLEtBQUtzVyxnQkFBZ0JNLElBQUlKLEVBQXNCZ0MsR0FDL0MsTUFBTUUsRUFBbUIxWSxLQUFLa1csVUFBVTdXLElBQUltWCxHQUk1QyxPQUhJa0MsR0FDQXpMLEVBQVN5TCxFQUFrQmxDLEdBRXhCLEtBQ0hnQyxFQUFrQmQsT0FBT3pLLEVBQVMsQ0FFMUMsQ0FLQTBMLHNCQUFzQnZVLEVBQVVtUyxHQUM1QixNQUFNcUMsRUFBWTVZLEtBQUtzVyxnQkFBZ0JqWCxJQUFJa1gsR0FDM0MsR0FBS3FDLEVBR0wsSUFBSyxNQUFNM0wsS0FBWTJMLEVBQ25CLElBQ0kzTCxFQUFTN0ksRUFBVW1TLEVBSXZCLENBRkEsTUFBT3BGLEdBRVAsQ0FFUixDQUNBNEYsd0JBQXVCLG1CQUFFQyxFQUFrQixRQUFFRSxFQUFVLENBQUMsSUFDcEQsSUFBSTlTLEVBQVdwRSxLQUFLa1csVUFBVTdXLElBQUkyWCxHQUNsQyxJQUFLNVMsR0FBWXBFLEtBQUtpVyxZQUNsQjdSLEVBQVdwRSxLQUFLaVcsVUFBVWYsZ0JBQWdCbFYsS0FBS2dXLFVBQVcsQ0FDdERnQixvQkF5Q3VCVCxFQXpDMkJTLEVBMEN2RFQsSUFBZVQsT0FBcUJ4VyxFQUFZaVgsR0F6QzNDVyxZQUVKbFgsS0FBS2tXLFVBQVVVLElBQUlJLEVBQW9CNVMsR0FDdkNwRSxLQUFLcVcsaUJBQWlCTyxJQUFJSSxFQUFvQkUsR0FNOUNsWCxLQUFLMlksc0JBQXNCdlUsRUFBVTRTLEdBTWpDaFgsS0FBS2lXLFVBQVVWLG1CQUNmLElBQ0l2VixLQUFLaVcsVUFBVVYsa0JBQWtCdlYsS0FBS2dXLFVBQVdnQixFQUFvQjVTLEVBSXpFLENBRkEsTUFBTytNLEdBRVAsQ0FtQmhCLElBQXVDb0YsRUFoQi9CLE9BQU9uUyxHQUFZLElBQ3ZCLENBQ0FxUyw0QkFBNEJGLEVBQWFULGFBQ3JDLE9BQUk5VixLQUFLaVcsVUFDRWpXLEtBQUtpVyxVQUFVYixrQkFBb0JtQixFQUFhVCxFQUdoRFMsQ0FFZixDQUNBTyx1QkFDSSxRQUFVOVcsS0FBS2lXLFdBQzBCLGFBQXJDalcsS0FBS2lXLFVBQVVYLGlCQUN2QixFQTZCSixNQUFNdUQsRUFDRnhHLFlBQVlPLEdBQ1I1UyxLQUFLNFMsS0FBT0EsRUFDWjVTLEtBQUs4WSxVQUFZLElBQUkzQyxHQUN6QixDQVVBNEMsYUFBYTlDLEdBQ1QsTUFBTStDLEVBQVdoWixLQUFLaVosWUFBWWhELEVBQVVyRCxNQUM1QyxHQUFJb0csRUFBU2IsaUJBQ1QsTUFBTSxJQUFJN0osTUFBTSxhQUFhMkgsRUFBVXJELHlDQUF5QzVTLEtBQUs0UyxRQUV6Rm9HLEVBQVMzQixhQUFhcEIsRUFDMUIsQ0FDQWlELHdCQUF3QmpELEdBQ0hqVyxLQUFLaVosWUFBWWhELEVBQVVyRCxNQUMvQnVGLGtCQUVUblksS0FBSzhZLFVBQVVwQixPQUFPekIsRUFBVXJELE1BRXBDNVMsS0FBSytZLGFBQWE5QyxFQUN0QixDQVFBZ0QsWUFBWXJHLEdBQ1IsR0FBSTVTLEtBQUs4WSxVQUFVcEMsSUFBSTlELEdBQ25CLE9BQU81UyxLQUFLOFksVUFBVXpaLElBQUl1VCxHQUc5QixNQUFNb0csRUFBVyxJQUFJakQsRUFBU25ELEVBQU01UyxNQUVwQyxPQURBQSxLQUFLOFksVUFBVWxDLElBQUloRSxFQUFNb0csR0FDbEJBLENBQ1gsQ0FDQUcsZUFDSSxPQUFPOVMsTUFBTXdSLEtBQUs3WCxLQUFLOFksVUFBVWhCLFNBQ3JDLEVDallKLE1BQU01QixFQUFZLEdBWWxCLElBQUlrRCxHQUNKLFNBQVdBLEdBQ1BBLEVBQVNBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBa0IsUUFBSSxHQUFLLFVBQ3BDQSxFQUFTQSxFQUFlLEtBQUksR0FBSyxPQUNqQ0EsRUFBU0EsRUFBZSxLQUFJLEdBQUssT0FDakNBLEVBQVNBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBaUIsT0FBSSxHQUFLLFFBQ3RDLENBUEQsQ0FPR0EsSUFBYUEsRUFBVyxDQUFDLElBQzVCLE1BQU1DLEVBQW9CLENBQ3RCLE1BQVNELEVBQVNFLE1BQ2xCLFFBQVdGLEVBQVNHLFFBQ3BCLEtBQVFILEVBQVNJLEtBQ2pCLEtBQVFKLEVBQVNLLEtBQ2pCLE1BQVNMLEVBQVNNLE1BQ2xCLE9BQVVOLEVBQVNPLFFBS2pCQyxFQUFrQlIsRUFBU0ksS0FPM0JLLEVBQWdCLENBQ2xCLENBQUNULEVBQVNFLE9BQVEsTUFDbEIsQ0FBQ0YsRUFBU0csU0FBVSxNQUNwQixDQUFDSCxFQUFTSSxNQUFPLE9BQ2pCLENBQUNKLEVBQVNLLE1BQU8sT0FDakIsQ0FBQ0wsRUFBU00sT0FBUSxTQU9oQkksRUFBb0IsQ0FBQzFWLEVBQVUyVixLQUFZQyxLQUM3QyxHQUFJRCxFQUFVM1YsRUFBUzZWLFNBQ25CLE9BRUosTUFBTWhRLEdBQU0sSUFBSUQsTUFBT2tRLGNBQ2pCQyxFQUFTTixFQUFjRSxHQUM3QixJQUFJSSxFQUlBLE1BQU0sSUFBSTdMLE1BQU0sOERBQThEeUwsTUFIOUV4YSxRQUFRNGEsR0FBUSxJQUFJbFEsT0FBUzdGLEVBQVN3TyxXQUFZb0gsRUFJdEQsRUFFSixNQUFNSSxFQU9GL0gsWUFBWU8sR0FDUjVTLEtBQUs0UyxLQUFPQSxFQUlaNVMsS0FBS3FhLFVBQVlULEVBS2pCNVosS0FBS3NhLFlBQWNSLEVBSW5COVosS0FBS3VhLGdCQUFrQixLQUl2QnJFLEVBQVV0VSxLQUFLNUIsS0FDbkIsQ0FDSWlhLGVBQ0EsT0FBT2phLEtBQUtxYSxTQUNoQixDQUNJSixhQUFTTyxHQUNULEtBQU1BLEtBQU9wQixHQUNULE1BQU0sSUFBSXFCLFVBQVUsa0JBQWtCRCwrQkFFMUN4YSxLQUFLcWEsVUFBWUcsQ0FDckIsQ0FFQUUsWUFBWUYsR0FDUnhhLEtBQUtxYSxVQUEyQixpQkFBUkcsRUFBbUJuQixFQUFrQm1CLEdBQU9BLENBQ3hFLENBQ0lHLGlCQUNBLE9BQU8zYSxLQUFLc2EsV0FDaEIsQ0FDSUssZUFBV0gsR0FDWCxHQUFtQixtQkFBUkEsRUFDUCxNQUFNLElBQUlDLFVBQVUscURBRXhCemEsS0FBS3NhLFlBQWNFLENBQ3ZCLENBQ0lJLHFCQUNBLE9BQU81YSxLQUFLdWEsZUFDaEIsQ0FDSUssbUJBQWVKLEdBQ2Z4YSxLQUFLdWEsZ0JBQWtCQyxDQUMzQixDQUlBSyxTQUFTYixHQUNMaGEsS0FBS3VhLGlCQUFtQnZhLEtBQUt1YSxnQkFBZ0J2YSxLQUFNb1osRUFBU0UsU0FBVVUsR0FDdEVoYSxLQUFLc2EsWUFBWXRhLEtBQU1vWixFQUFTRSxTQUFVVSxFQUM5QyxDQUNBeGEsT0FBT3dhLEdBQ0hoYSxLQUFLdWEsaUJBQ0R2YSxLQUFLdWEsZ0JBQWdCdmEsS0FBTW9aLEVBQVNHLFdBQVlTLEdBQ3BEaGEsS0FBS3NhLFlBQVl0YSxLQUFNb1osRUFBU0csV0FBWVMsRUFDaEQsQ0FDQTdILFFBQVE2SCxHQUNKaGEsS0FBS3VhLGlCQUFtQnZhLEtBQUt1YSxnQkFBZ0J2YSxLQUFNb1osRUFBU0ksUUFBU1EsR0FDckVoYSxLQUFLc2EsWUFBWXRhLEtBQU1vWixFQUFTSSxRQUFTUSxFQUM3QyxDQUNBOVYsUUFBUThWLEdBQ0poYSxLQUFLdWEsaUJBQW1CdmEsS0FBS3VhLGdCQUFnQnZhLEtBQU1vWixFQUFTSyxRQUFTTyxHQUNyRWhhLEtBQUtzYSxZQUFZdGEsS0FBTW9aLEVBQVNLLFFBQVNPLEVBQzdDLENBQ0FqVyxTQUFTaVcsR0FDTGhhLEtBQUt1YSxpQkFBbUJ2YSxLQUFLdWEsZ0JBQWdCdmEsS0FBTW9aLEVBQVNNLFNBQVVNLEdBQ3RFaGEsS0FBS3NhLFlBQVl0YSxLQUFNb1osRUFBU00sU0FBVU0sRUFDOUMsRUMvSkosSUFBSWMsRUFDQUMsRUFxQkosTUFBTUMsRUFBbUIsSUFBSUMsUUFDdkJDLEVBQXFCLElBQUlELFFBQ3pCRSxFQUEyQixJQUFJRixRQUMvQkcsRUFBaUIsSUFBSUgsUUFDckJJLEVBQXdCLElBQUlKLFFBMERsQyxJQUFJSyxFQUFnQixDQUNoQmpjLElBQUlrYyxFQUFRQyxFQUFNQyxHQUNkLEdBQUlGLGFBQWtCRyxlQUFnQixDQUVsQyxHQUFhLFNBQVRGLEVBQ0EsT0FBT04sRUFBbUI3YixJQUFJa2MsR0FFbEMsR0FBYSxxQkFBVEMsRUFDQSxPQUFPRCxFQUFPSSxrQkFBb0JSLEVBQXlCOWIsSUFBSWtjLEdBR25FLEdBQWEsVUFBVEMsRUFDQSxPQUFPQyxFQUFTRSxpQkFBaUIsUUFDM0JyYyxFQUNBbWMsRUFBU0csWUFBWUgsRUFBU0UsaUJBQWlCLEdBRTdELENBRUEsT0FBTyxFQUFLSixFQUFPQyxHQUN2QixFQUNBNUUsSUFBRyxDQUFDMkUsRUFBUUMsRUFBTXhPLEtBQ2R1TyxFQUFPQyxHQUFReE8sR0FDUixHQUVYMEosSUFBRyxDQUFDNkUsRUFBUUMsSUFDSkQsYUFBa0JHLGlCQUNSLFNBQVRGLEdBQTRCLFVBQVRBLElBR2pCQSxLQUFRRCxHQXFDdkIsU0FBU00sRUFBdUI3TyxHQUM1QixNQUFxQixtQkFBVkEsR0FoQ084TyxFQWlDTTlPLEtBN0JYK08sWUFBWWhKLFVBQVVpSixhQUM3QixxQkFBc0JOLGVBQWUzSSxXQTdHbkNnSSxJQUNIQSxFQUF1QixDQUNwQmtCLFVBQVVsSixVQUFVbUosUUFDcEJELFVBQVVsSixVQUFVb0osU0FDcEJGLFVBQVVsSixVQUFVcUosc0JBcUhFMVosU0FBU29aLEdBQzVCLFlBQWE5QixHQUloQixPQURBOEIsRUFBS08sTUFBTUMsRUFBT3RjLE1BQU9nYSxHQUNsQixFQUFLZ0IsRUFBaUIzYixJQUFJVyxNQUNyQyxFQUVHLFlBQWFnYSxHQUdoQixPQUFPLEVBQUs4QixFQUFLTyxNQUFNQyxFQUFPdGMsTUFBT2dhLEdBQ3pDLEVBdkJXLFNBQVV1QyxLQUFldkMsR0FDNUIsTUFBTXdDLEVBQUtWLEVBQUtXLEtBQUtILEVBQU90YyxNQUFPdWMsS0FBZXZDLEdBRWxELE9BREFtQixFQUF5QnZFLElBQUk0RixFQUFJRCxFQUFXRyxLQUFPSCxFQUFXRyxPQUFTLENBQUNILElBQ2pFLEVBQUtDLEVBQ2hCLEdBMEJBeFAsYUFBaUIwTyxnQkFoR3pCLFNBQXdDYyxHQUVwQyxHQUFJdEIsRUFBbUJ4RSxJQUFJOEYsR0FDdkIsT0FDSixNQUFNRyxFQUFPLElBQUluWixTQUFRLENBQUNDLEVBQVNDLEtBQy9CLE1BQU1rWixFQUFXLEtBQ2JKLEVBQUdLLG9CQUFvQixXQUFZQyxHQUNuQ04sRUFBR0ssb0JBQW9CLFFBQVM5WSxHQUNoQ3lZLEVBQUdLLG9CQUFvQixRQUFTOVksRUFBTSxFQUVwQytZLEVBQVcsS0FDYnJaLElBQ0FtWixHQUFVLEVBRVI3WSxFQUFRLEtBQ1ZMLEVBQU84WSxFQUFHelksT0FBUyxJQUFJZ1osYUFBYSxhQUFjLGVBQ2xESCxHQUFVLEVBRWRKLEVBQUc1WSxpQkFBaUIsV0FBWWtaLEdBQ2hDTixFQUFHNVksaUJBQWlCLFFBQVNHLEdBQzdCeVksRUFBRzVZLGlCQUFpQixRQUFTRyxFQUFNLElBR3ZDbVgsRUFBbUJ0RSxJQUFJNEYsRUFBSUcsRUFDL0IsQ0F5RVFLLENBQStCaFEsR0E5SmhCaVEsRUErSkRqUSxHQXpKVjhOLElBQ0hBLEVBQW9CLENBQ2pCaUIsWUFDQW1CLGVBQ0FDLFNBQ0FsQixVQUNBUCxrQkFaaUQwQixNQUFNOVAsR0FBTTJQLGFBQWtCM1AsSUFnSzVFLElBQUkrUCxNQUFNclEsRUFBT3NPLEdBRXJCdE8sR0F6Q1gsSUFBc0I4TyxFQXpIQ21CLENBbUt2QixDQUNBLFNBQVMsRUFBS2pRLEdBR1YsR0FBSUEsYUFBaUJzUSxXQUNqQixPQTNJUixTQUEwQjVNLEdBQ3RCLE1BQU00QixFQUFVLElBQUk5TyxTQUFRLENBQUNDLEVBQVNDLEtBQ2xDLE1BQU1rWixFQUFXLEtBQ2JsTSxFQUFRbU0sb0JBQW9CLFVBQVdVLEdBQ3ZDN00sRUFBUW1NLG9CQUFvQixRQUFTOVksRUFBTSxFQUV6Q3daLEVBQVUsS0FDWjlaLEVBQVEsRUFBS2lOLEVBQVFJLFNBQ3JCOEwsR0FBVSxFQUVSN1ksRUFBUSxLQUNWTCxFQUFPZ04sRUFBUTNNLE9BQ2Y2WSxHQUFVLEVBRWRsTSxFQUFROU0saUJBQWlCLFVBQVcyWixHQUNwQzdNLEVBQVE5TSxpQkFBaUIsUUFBU0csRUFBTSxJQWU1QyxPQWJBdU8sRUFDSzlSLE1BQU13TSxJQUdIQSxhQUFpQmlQLFdBQ2pCakIsRUFBaUJwRSxJQUFJNUosRUFBTzBELEVBQ2hDLElBR0M1TSxPQUFNLFNBR1h1WCxFQUFzQnpFLElBQUl0RSxFQUFTNUIsR0FDNUI0QixDQUNYLENBNEdla0wsQ0FBaUJ4USxHQUc1QixHQUFJb08sRUFBZTFFLElBQUkxSixHQUNuQixPQUFPb08sRUFBZS9iLElBQUkyTixHQUM5QixNQUFNeVEsRUFBVzVCLEVBQXVCN08sR0FPeEMsT0FKSXlRLElBQWF6USxJQUNib08sRUFBZXhFLElBQUk1SixFQUFPeVEsR0FDMUJwQyxFQUFzQnpFLElBQUk2RyxFQUFVelEsSUFFakN5USxDQUNYLENBQ0EsTUFBTW5CLEVBQVV0UCxHQUFVcU8sRUFBc0JoYyxJQUFJMk4sR0M1S3BELFNBQVMwUSxFQUFPOUssRUFBTStLLEdBQVMsUUFBRUMsRUFBTyxRQUFFQyxFQUFPLFNBQUVDLEVBQVEsV0FBRUMsR0FBZSxDQUFDLEdBQ3pFLE1BQU1yTixFQUFVSCxVQUFVSyxLQUFLZ0MsRUFBTStLLEdBQy9CSyxFQUFjLEVBQUt0TixHQWdCekIsT0FmSW1OLEdBQ0FuTixFQUFROU0saUJBQWlCLGlCQUFrQnFhLElBQ3ZDSixFQUFRLEVBQUtuTixFQUFRSSxRQUFTbU4sRUFBTUMsV0FBWUQsRUFBTUUsV0FBWSxFQUFLek4sRUFBUXNMLGFBQWEsSUFHaEc0QixHQUNBbE4sRUFBUTlNLGlCQUFpQixXQUFXLElBQU1nYSxNQUM5Q0ksRUFDS3hkLE1BQU00ZCxJQUNITCxHQUNBSyxFQUFHeGEsaUJBQWlCLFNBQVMsSUFBTW1hLE1BQ25DRCxHQUNBTSxFQUFHeGEsaUJBQWlCLGlCQUFpQixJQUFNa2EsS0FBVyxJQUV6RGhhLE9BQU0sU0FDSmthLENBQ1gsQ0FhQSxNQUFNSyxFQUFjLENBQUMsTUFBTyxTQUFVLFNBQVUsYUFBYyxTQUN4REMsRUFBZSxDQUFDLE1BQU8sTUFBTyxTQUFVLFNBQ3hDQyxFQUFnQixJQUFJcEksSUFDMUIsU0FBU3FJLEVBQVVqRCxFQUFRQyxHQUN2QixLQUFNRCxhQUFrQlEsY0FDbEJQLEtBQVFELEdBQ00saUJBQVRDLEVBQ1AsT0FFSixHQUFJK0MsRUFBY2xmLElBQUltYyxHQUNsQixPQUFPK0MsRUFBY2xmLElBQUltYyxHQUM3QixNQUFNaUQsRUFBaUJqRCxFQUFLN1ksUUFBUSxhQUFjLElBQzVDK2IsRUFBV2xELElBQVNpRCxFQUNwQkUsRUFBVUwsRUFBYTViLFNBQVMrYixHQUN0QyxLQUVFQSxLQUFtQkMsRUFBV3ZCLFNBQVdELGdCQUFnQm5LLGFBQ3JENEwsSUFBV04sRUFBWTNiLFNBQVMrYixHQUNsQyxPQUVKLE1BQU10RSxFQUFTeEMsZUFBZ0JpSCxLQUFjNUUsR0FFekMsTUFBTXdDLEVBQUt4YyxLQUFLZ2MsWUFBWTRDLEVBQVdELEVBQVUsWUFBYyxZQUMvRCxJQUFJcEQsRUFBU2lCLEVBQUdxQyxNQVFoQixPQVBJSCxJQUNBbkQsRUFBU0EsRUFBT3VELE1BQU05RSxFQUFLK0UsaUJBTWpCdmIsUUFBUXVVLElBQUksQ0FDdEJ3RCxFQUFPa0QsTUFBbUJ6RSxHQUMxQjJFLEdBQVduQyxFQUFHRyxRQUNkLEVBQ1IsRUFFQSxPQURBNEIsRUFBYzNILElBQUk0RSxFQUFNckIsR0FDakJBLENBQ1gsQ0FDYSxJQUFDNkUsSURzQ2UxRCxFQUF6QkEsRUN0Q3VCLElBQ3BCMEQsRUFDSDNmLElBQUssQ0FBQ2tjLEVBQVFDLEVBQU1DLElBQWErQyxFQUFVakQsRUFBUUMsSUFBU3dELEVBQVMzZixJQUFJa2MsRUFBUUMsRUFBTUMsR0FDdkYvRSxJQUFLLENBQUM2RSxFQUFRQyxNQUFXZ0QsRUFBVWpELEVBQVFDLElBQVN3RCxFQUFTdEksSUFBSTZFLEVBQVFDLElDOUQ3RSxNQUFNeUQsRUFDRjVNLFlBQVkyRCxHQUNSaFcsS0FBS2dXLFVBQVlBLENBQ3JCLENBR0FrSix3QkFJSSxPQUhrQmxmLEtBQUtnVyxVQUFVbUQsZUFJNUJuQixLQUFJZ0IsSUFDTCxHQW9CWixTQUFrQ0EsR0FDOUIsTUFBTS9DLEVBQVkrQyxFQUFTNUIsZUFDM0IsTUFBa0YsYUFBMUVuQixhQUE2QyxFQUFTQSxFQUFVZCxLQUM1RSxDQXZCZ0JnSyxDQUF5Qm5HLEdBQVcsQ0FDcEMsTUFBTTdGLEVBQVU2RixFQUFTL0IsZUFDekIsTUFBTyxHQUFHOUQsRUFBUWlNLFdBQVdqTSxFQUFRd0ssU0FDekMsQ0FFSSxPQUFPLElBQ1gsSUFFQ3ZSLFFBQU9pVCxHQUFhQSxJQUNwQmxRLEtBQUssSUFDZCxFQWVKLE1BQU1tUSxHQUFTLGdCQUNUQyxHQUFZLFFBa0JaQyxHQUFTLElBQUlwRixFQUFPLGlCQXdFcEIsR0FBcUIsWUFDckJxRixHQUFzQixDQUN4QixDQUFDSCxJQUFTLFlBQ1YsdUJBQVUsbUJBQ1Ysc0JBQVUsaUJBQ1YsNkJBQVUsd0JBQ1Ysc0JBQVUsaUJBQ1YsNkJBQVUsd0JBQ1YsaUJBQVUsWUFDVix3QkFBVSxtQkFDVixxQkFBVSxZQUNWLDRCQUFVLG1CQUNWLHNCQUFVLFVBQ1YsNkJBQVUsaUJBQ1YsMEJBQVUsV0FDVixpQ0FBVSxrQkFDVixzQkFBVSxXQUNWLDZCQUFVLGtCQUNWLHdCQUFVLFlBQ1YsK0JBQVUsbUJBQ1YsMEJBQVUsVUFDVixpQ0FBVSxpQkFDVixvQkFBVSxXQUNWLDJCQUFVLGtCQUNWLHNCQUFVLFdBQ1YsNkJBQVUsa0JBQ1YsVUFBVyxVQUNYLFNBQVEsZUFzQk5JLEdBQVEsSUFBSXZKLElBT1p3SixHQUFjLElBQUl4SixJQU14QixTQUFTeUosR0FBY0MsRUFBSzVKLEdBQ3hCLElBQ0k0SixFQUFJN0osVUFBVStDLGFBQWE5QyxFQUkvQixDQUZBLE1BQU8vVixHQUNIc2YsR0FBTzNFLE1BQU0sYUFBYTVFLEVBQVVyRCw0Q0FBNENpTixFQUFJak4sT0FBUTFTLEVBQ2hHLENBQ0osQ0FlQSxTQUFTNGYsR0FBbUI3SixHQUN4QixNQUFNOEosRUFBZ0I5SixFQUFVckQsS0FDaEMsR0FBSStNLEdBQVlqSixJQUFJcUosR0FFaEIsT0FEQVAsR0FBTzNFLE1BQU0sc0RBQXNEa0YsT0FDNUQsRUFFWEosR0FBWS9JLElBQUltSixFQUFlOUosR0FFL0IsSUFBSyxNQUFNNEosS0FBT0gsR0FBTTVILFNBQ3BCOEgsR0FBY0MsRUFBSzVKLEdBRXZCLE9BQU8sQ0FDWCxDQVVBLFNBQVMsR0FBYTRKLEVBQUtqTixHQUN2QixNQUFNb04sRUFBc0JILEVBQUk3SixVQUMzQmlELFlBQVksYUFDWmhDLGFBQWEsQ0FBRUUsVUFBVSxJQUk5QixPQUhJNkksR0FDS0EsRUFBb0JDLG1CQUV0QkosRUFBSTdKLFVBQVVpRCxZQUFZckcsRUFDckMsQ0FxQ0EsTUFlTXNOLEdBQWdCLElBQUlqTixFQUFhLE1BQU8sV0FmL0IsQ0FDWCxTQUF5QixvRkFFekIsZUFBcUMsZ0NBQ3JDLGdCQUF1QyxrRkFDdkMsY0FBbUMsa0RBQ25DLGFBQWlDLDBFQUNqQyx1QkFBcUQsNkVBRXJELHVCQUFxRCx3REFDckQsV0FBNkIsZ0ZBQzdCLFVBQTJCLHFGQUMzQixVQUE2QixtRkFDN0IsYUFBaUMsd0ZBb0JyQyxNQUFNa04sR0FDRjlOLFlBQVk2RSxFQUFTa0osRUFBUXBLLEdBQ3pCaFcsS0FBS3FnQixZQUFhLEVBQ2xCcmdCLEtBQUtzZ0IsU0FBV3pOLE9BQU8wTixPQUFPLENBQUMsRUFBR3JKLEdBQ2xDbFgsS0FBS3dnQixRQUFVM04sT0FBTzBOLE9BQU8sQ0FBQyxFQUFHSCxHQUNqQ3BnQixLQUFLeWdCLE1BQVFMLEVBQU94TixLQUNwQjVTLEtBQUswZ0IsZ0NBQ0ROLEVBQU9PLCtCQUNYM2dCLEtBQUs0Z0IsV0FBYTVLLEVBQ2xCaFcsS0FBS2dXLFVBQVUrQyxhQUFhLElBQUk5RCxFQUFVLE9BQU8sSUFBTWpWLE1BQU0sVUFDakUsQ0FDSTJnQixxQ0FFQSxPQURBM2dCLEtBQUs2Z0IsaUJBQ0U3Z0IsS0FBSzBnQiwrQkFDaEIsQ0FDSUMsbUNBQStCbkcsR0FDL0J4YSxLQUFLNmdCLGlCQUNMN2dCLEtBQUswZ0IsZ0NBQWtDbEcsQ0FDM0MsQ0FDSTVILFdBRUEsT0FEQTVTLEtBQUs2Z0IsaUJBQ0U3Z0IsS0FBS3lnQixLQUNoQixDQUNJdkosY0FFQSxPQURBbFgsS0FBSzZnQixpQkFDRTdnQixLQUFLc2dCLFFBQ2hCLENBQ0lGLGFBRUEsT0FEQXBnQixLQUFLNmdCLGlCQUNFN2dCLEtBQUt3Z0IsT0FDaEIsQ0FDSXhLLGdCQUNBLE9BQU9oVyxLQUFLNGdCLFVBQ2hCLENBQ0lFLGdCQUNBLE9BQU85Z0IsS0FBS3FnQixVQUNoQixDQUNJUyxjQUFVdEcsR0FDVnhhLEtBQUtxZ0IsV0FBYTdGLENBQ3RCLENBS0FxRyxpQkFDSSxHQUFJN2dCLEtBQUs4Z0IsVUFDTCxNQUFNWixHQUFjaE4sT0FBTyxjQUFpQyxDQUFFNk4sUUFBUy9nQixLQUFLeWdCLE9BRXBGLEVBeUJKLFNBQVNPLEdBQWNWLEVBQVVXLEVBQVksQ0FBQyxHQUMxQyxJQUFJL0osRUFBVW9KLEVBQ1csaUJBQWRXLElBRVBBLEVBQVksQ0FBRXJPLEtBRERxTyxJQUdqQixNQUFNYixFQUFTdk4sT0FBTzBOLE9BQU8sQ0FBRTNOLEtBQU0sR0FBb0IrTixnQ0FBZ0MsR0FBU00sR0FDNUZyTyxFQUFPd04sRUFBT3hOLEtBQ3BCLEdBQW9CLGlCQUFUQSxJQUFzQkEsRUFDN0IsTUFBTXNOLEdBQWNoTixPQUFPLGVBQW1DLENBQzFENk4sUUFBU3JSLE9BQU9rRCxLTHlUQSxJQUFZekIsRUtyVHBDLEdBREErRixJQUFZQSxFTHNUNEQsUUFBeEIvRixFQUFLRSxXQUFrQyxJQUFQRixPQUFnQixFQUFTQSxFQUFHaVAsU0tyVHZHbEosRUFDRCxNQUFNZ0osR0FBY2hOLE9BQU8sY0FFL0IsTUFBTWdPLEVBQWN4QixHQUFNcmdCLElBQUl1VCxHQUM5QixHQUFJc08sRUFBYSxDQUViLEdBQUlyTixFQUFVcUQsRUFBU2dLLEVBQVloSyxVQUMvQnJELEVBQVV1TSxFQUFRYyxFQUFZZCxRQUM5QixPQUFPYyxFQUdQLE1BQU1oQixHQUFjaE4sT0FBTyxnQkFBcUMsQ0FBRTZOLFFBQVNuTyxHQUVuRixDQUNBLE1BQU1vRCxFQUFZLElBQUk2QyxFQUFtQmpHLEdBQ3pDLElBQUssTUFBTXFELEtBQWEwSixHQUFZN0gsU0FDaEM5QixFQUFVK0MsYUFBYTlDLEdBRTNCLE1BQU1rTCxFQUFTLElBQUloQixHQUFnQmpKLEVBQVNrSixFQUFRcEssR0FFcEQsT0FEQTBKLEdBQU05SSxJQUFJaEUsRUFBTXVPLEdBQ1RBLENBQ1gsQ0FrRkEsU0FBU0MsR0FBZ0JDLEVBQWtCMUQsRUFBUzJELEdBQ2hELElBQUluUSxFQUdKLElBQUlpTyxFQUEyRCxRQUFoRGpPLEVBQUtzTyxHQUFvQjRCLFVBQXNDLElBQVBsUSxFQUFnQkEsRUFBS2tRLEVBQ3hGQyxJQUNBbEMsR0FBVyxJQUFJa0MsS0FFbkIsTUFBTUMsRUFBa0JuQyxFQUFRdE4sTUFBTSxTQUNoQzBQLEVBQWtCN0QsRUFBUTdMLE1BQU0sU0FDdEMsR0FBSXlQLEdBQW1CQyxFQUFpQixDQUNwQyxNQUFNQyxFQUFVLENBQ1osK0JBQStCckMsb0JBQTBCekIsT0FZN0QsT0FWSTRELEdBQ0FFLEVBQVE3ZixLQUFLLGlCQUFpQndkLHNEQUU5Qm1DLEdBQW1CQyxHQUNuQkMsRUFBUTdmLEtBQUssT0FFYjRmLEdBQ0FDLEVBQVE3ZixLQUFLLGlCQUFpQitiLDJEQUVsQzZCLEdBQU90YixLQUFLdWQsRUFBUXRTLEtBQUssS0FFN0IsQ0FDQTJRLEdBQW1CLElBQUk3SyxFQUFVLEdBQUdtSyxhQUFtQixLQUFNLENBQUdBLFVBQVN6QixhQUFZLFdBQ3pGLENBMkNBLE1BRU0rRCxHQUFhLDJCQUNuQixJQUFJQyxHQUFZLEtBQ2hCLFNBQVNDLEtBb0JMLE9BbkJLRCxLQUNEQSxHQUFZakUsRUFOSiw4QkFDRyxFQUs2QixDQUNwQ0csUUFBUyxDQUFDTyxFQUFJRixLQU9ELElBRERBLEdBRUFFLEVBQUd5RCxrQkFBa0JILEdBQzdCLElBRUw1ZCxPQUFNNUQsSUFDTCxNQUFNZ2dCLEdBQWNoTixPQUFPLFdBQTJCLENBQ2xENE8scUJBQXNCNWhCLEVBQUVrUixTQUMxQixLQUdIdVEsRUFDWCxDQXNCQWhLLGVBQWVvSyxHQUEyQmxDLEVBQUttQyxHQUMzQyxJQUFJN1EsRUFDSixJQUNJLE1BQ01xTCxTQURXb0YsTUFDSDVGLFlBQVkwRixHQUFZLGFBQ2hDOUYsRUFBY1ksRUFBR1osWUFBWThGLElBRW5DLGFBRE05RixFQUFZcUcsSUFBSUQsRUFBaUJFLEdBQVdyQyxJQUMzQ3JELEVBQUdHLElBWWQsQ0FWQSxNQUFPemMsR0FDSCxHQUFJQSxhQUFhc1MsRUFDYmdOLEdBQU90YixLQUFLaEUsRUFBRWtSLGFBRWIsQ0FDRCxNQUFNK1EsRUFBY2pDLEdBQWNoTixPQUFPLFVBQTJCLENBQ2hFNE8scUJBQW1DLFFBQVozUSxFQUFLalIsU0FBc0IsSUFBUGlSLE9BQWdCLEVBQVNBLEVBQUdDLFVBRTNFb08sR0FBT3RiLEtBQUtpZSxFQUFZL1EsUUFDNUIsQ0FDSixDQUNKLENBQ0EsU0FBUzhRLEdBQVdyQyxHQUNoQixNQUFPLEdBQUdBLEVBQUlqTixRQUFRaU4sRUFBSTNJLFFBQVFrTCxPQUN0QyxDQXFCQSxNQUFNQyxHQUNGaFEsWUFBWTJELEdBQ1JoVyxLQUFLZ1csVUFBWUEsRUFVakJoVyxLQUFLc2lCLGlCQUFtQixLQUN4QixNQUFNekMsRUFBTTdmLEtBQUtnVyxVQUFVaUQsWUFBWSxPQUFPaEMsZUFDOUNqWCxLQUFLdWlCLFNBQVcsSUFBSUMsR0FBcUIzQyxHQUN6QzdmLEtBQUt5aUIsd0JBQTBCemlCLEtBQUt1aUIsU0FBU0csT0FBT2xpQixNQUFLc1EsSUFDckQ5USxLQUFLc2lCLGlCQUFtQnhSLEVBQ2pCQSxJQUVmLENBUUE2Ryx5QkFDSSxNQUtNZ0wsRUFMaUIzaUIsS0FBS2dXLFVBQ3ZCaUQsWUFBWSxtQkFDWmhDLGVBR3dCaUksd0JBQ3ZCMEQsRUFBT0MsS0FNYixHQUw4QixPQUExQjdpQixLQUFLc2lCLG1CQUNMdGlCLEtBQUtzaUIsdUJBQXlCdGlCLEtBQUt5aUIseUJBSW5DemlCLEtBQUtzaUIsaUJBQWlCUSx3QkFBMEJGLElBQ2hENWlCLEtBQUtzaUIsaUJBQWlCUyxXQUFXM0YsTUFBSzRGLEdBQXVCQSxFQUFvQkosT0FBU0EsSUFhOUYsT0FSSTVpQixLQUFLc2lCLGlCQUFpQlMsV0FBV25oQixLQUFLLENBQUVnaEIsT0FBTUQsVUFHbEQzaUIsS0FBS3NpQixpQkFBaUJTLFdBQWEvaUIsS0FBS3NpQixpQkFBaUJTLFdBQVczVyxRQUFPNFcsSUFDdkUsTUFBTUMsRUFBYyxJQUFJalosS0FBS2daLEVBQW9CSixNQUFNTSxVQUV2RCxPQURZbFosS0FBS0MsTUFDSmdaLEdBckRxQixNQXFEK0IsSUFFOURqakIsS0FBS3VpQixTQUFTWSxVQUFVbmpCLEtBQUtzaUIsaUJBQ3hDLENBUUEzSyw0QkFLSSxHQUo4QixPQUExQjNYLEtBQUtzaUIsd0JBQ0N0aUIsS0FBS3lpQix3QkFHZSxPQUExQnppQixLQUFLc2lCLGtCQUN1QyxJQUE1Q3RpQixLQUFLc2lCLGlCQUFpQlMsV0FBV3JlLE9BQ2pDLE1BQU8sR0FFWCxNQUFNa2UsRUFBT0MsTUFFUCxpQkFBRU8sRUFBZ0IsY0FBRUMsR0F5QmxDLFNBQW9DQyxFQUFpQkMsRUF0RzVCLE1BeUdyQixNQUFNSCxFQUFtQixHQUV6QixJQUFJQyxFQUFnQkMsRUFBZ0IvZixRQUNwQyxJQUFLLE1BQU15ZixLQUF1Qk0sRUFBaUIsQ0FFL0MsTUFBTUUsRUFBaUJKLEVBQWlCSyxNQUFLQyxHQUFNQSxFQUFHZixRQUFVSyxFQUFvQkwsUUFDcEYsR0FBS2EsR0FpQkQsR0FIQUEsRUFBZUcsTUFBTS9oQixLQUFLb2hCLEVBQW9CSixNQUcxQ2dCLEdBQVdSLEdBQW9CRyxFQUFTLENBQ3hDQyxFQUFlRyxNQUFNRSxNQUNyQixLQUNKLE9BZEEsR0FKQVQsRUFBaUJ4aEIsS0FBSyxDQUNsQitnQixNQUFPSyxFQUFvQkwsTUFDM0JnQixNQUFPLENBQUNYLEVBQW9CSixRQUU1QmdCLEdBQVdSLEdBQW9CRyxFQUFTLENBR3hDSCxFQUFpQlMsTUFDakIsS0FDSixDQWFKUixFQUFnQkEsRUFBYzlmLE1BQU0sRUFDeEMsQ0FDQSxNQUFPLENBQ0g2ZixtQkFDQUMsZ0JBRVIsQ0FoRW9EUyxDQUEyQjlqQixLQUFLc2lCLGlCQUFpQlMsWUFDdkZnQixFQUFlM1QsRUFBOEJ1QixLQUFLcVMsVUFBVSxDQUFFckcsUUFBUyxFQUFHb0YsV0FBWUssS0FnQjVGLE9BZEFwakIsS0FBS3NpQixpQkFBaUJRLHNCQUF3QkYsRUFDMUNTLEVBQWMzZSxPQUFTLEdBRXZCMUUsS0FBS3NpQixpQkFBaUJTLFdBQWFNLFFBSTdCcmpCLEtBQUt1aUIsU0FBU1ksVUFBVW5qQixLQUFLc2lCLG9CQUduQ3RpQixLQUFLc2lCLGlCQUFpQlMsV0FBYSxHQUU5Qi9pQixLQUFLdWlCLFNBQVNZLFVBQVVuakIsS0FBS3NpQixtQkFFL0J5QixDQUNYLEVBRUosU0FBU2xCLEtBR0wsT0FGYyxJQUFJN1ksTUFFTGtRLGNBQWMrSixVQUFVLEVBQUcsR0FDNUMsQ0F5Q0EsTUFBTXpCLEdBQ0ZuUSxZQUFZd04sR0FDUjdmLEtBQUs2ZixJQUFNQSxFQUNYN2YsS0FBS2trQix3QkFBMEJsa0IsS0FBS21rQiw4QkFDeEMsQ0FDQXhNLHFDQUNJLFFBQUssS0FJTSxJQUNGblgsTUFBSyxLQUFNLElBQ1hzRCxPQUFNLEtBQU0sR0FFekIsQ0FJQTZULGFBRUksU0FEOEIzWCxLQUFLa2tCLHdCQUk5QixDQUNELE1BQU1FLFFBcE9sQnpNLGVBQTJDa0ksR0FDdkMsSUFBSTFPLEVBQ0osSUFFSSxhQURpQnlRLE1BRVo1RixZQUFZMEYsSUFDWjlGLFlBQVk4RixJQUNacmlCLElBQUk2aUIsR0FBV3JDLEdBWXhCLENBVkEsTUFBTzNmLEdBQ0gsR0FBSUEsYUFBYXNTLEVBQ2JnTixHQUFPdGIsS0FBS2hFLEVBQUVrUixhQUViLENBQ0QsTUFBTStRLEVBQWNqQyxHQUFjaE4sT0FBTyxVQUF5QixDQUM5RDRPLHFCQUFtQyxRQUFaM1EsRUFBS2pSLFNBQXNCLElBQVBpUixPQUFnQixFQUFTQSxFQUFHQyxVQUUzRW9PLEdBQU90YixLQUFLaWUsRUFBWS9RLFFBQzVCLENBQ0osQ0FDSixDQWdONkNpVCxDQUE0QnJrQixLQUFLNmYsS0FDbEUsT0FBT3VFLEdBQXNCLENBQUVyQixXQUFZLEdBQy9DLENBTEksTUFBTyxDQUFFQSxXQUFZLEdBTTdCLENBRUFwTCxnQkFBZ0IyTSxHQUNaLElBQUluVCxFQUVKLFNBRDhCblIsS0FBS2trQix3QkFJOUIsQ0FDRCxNQUFNSyxRQUFpQ3ZrQixLQUFLMGlCLE9BQzVDLE9BQU9YLEdBQTJCL2hCLEtBQUs2ZixJQUFLLENBQ3hDaUQsc0JBQXlFLFFBQWpEM1IsRUFBS21ULEVBQWlCeEIsNkJBQTBDLElBQVAzUixFQUFnQkEsRUFBS29ULEVBQXlCekIsc0JBQy9IQyxXQUFZdUIsRUFBaUJ2QixZQUVyQyxDQUNKLENBRUFwTCxVQUFVMk0sR0FDTixJQUFJblQsRUFFSixTQUQ4Qm5SLEtBQUtra0Isd0JBSTlCLENBQ0QsTUFBTUssUUFBaUN2a0IsS0FBSzBpQixPQUM1QyxPQUFPWCxHQUEyQi9oQixLQUFLNmYsSUFBSyxDQUN4Q2lELHNCQUF5RSxRQUFqRDNSLEVBQUttVCxFQUFpQnhCLDZCQUEwQyxJQUFQM1IsRUFBZ0JBLEVBQUtvVCxFQUF5QnpCLHNCQUMvSEMsV0FBWSxJQUNMd0IsRUFBeUJ4QixjQUN6QnVCLEVBQWlCdkIsYUFHaEMsQ0FDSixFQU9KLFNBQVNhLEdBQVdOLEdBRWhCLE9BQU9sVCxFQUVQdUIsS0FBS3FTLFVBQVUsQ0FBRXJHLFFBQVMsRUFBR29GLFdBQVlPLEtBQW9CNWUsTUFDakUsQ0FtQklvYixHQUFtQixJQUFJN0ssRUFBVSxtQkFBbUJlLEdBQWEsSUFBSWlKLEVBQTBCakosSUFBWSxZQUMzRzhKLEdBQW1CLElBQUk3SyxFQUFVLGFBQWFlLEdBQWEsSUFBSXFNLEdBQXFCck0sSUFBWSxZQUVoR29MLEdBQWdCOUIsR0FBUUMsR0FhTCxJQVhuQjZCLEdBQWdCOUIsR0FBUUMsR0FBVyxXQUVuQzZCLEdBQWdCLFVBQVcsSUNyNUIvQixNQUFNLEdBQU8sMEJBQ1AsR0FBVSxTQW1CVm9ELEdBQWtCLFdBK0JsQixHQUFnQixJQUFJdlIsRUEzQlYsZ0JBQ0ssZ0JBa0JTLENBQzFCLDRCQUErRCxrREFDL0QsaUJBQXlDLDJDQUN6Qyx5QkFBeUQsbUNBQ3pELGlCQUF5Qyw2RkFDekMsY0FBbUMsa0RBQ25DLDhCQUFtRSw2RUFJdkUsU0FBU3dSLEdBQWMxZ0IsR0FDbkIsT0FBUUEsYUFBaUJ5TyxHQUNyQnpPLEVBQU0wTyxLQUFLL1AsU0FBUyxpQkFDNUIsQ0FrQkEsU0FBU2dpQixJQUF5QixVQUFFQyxJQUNoQyxNQUFPLDREQUFxQ0EsaUJBQ2hELENBQ0EsU0FBU0MsR0FBaUNua0IsR0FDdEMsTUFBTyxDQUNIb2tCLE1BQU9wa0IsRUFBU29rQixNQUNoQkMsY0FBZSxFQUNmQyxXQXVDbUNDLEVBdkNVdmtCLEVBQVNza0IsVUF5Q25ERSxPQUFPRCxFQUFrQnJpQixRQUFRLElBQUssU0F4Q3pDdWlCLGFBQWNsYixLQUFLQyxPQXNDM0IsSUFBMkMrYSxDQXBDM0MsQ0FDQXJOLGVBQWV3TixHQUFxQkMsRUFBYTNrQixHQUM3QyxNQUNNNGtCLFNBRHFCNWtCLEVBQVNDLFFBQ0xxRCxNQUMvQixPQUFPLEdBQWNtUCxPQUFPLGlCQUF1QyxDQUMvRGtTLGNBQ0FFLFdBQVlELEVBQVU1UyxLQUN0QjhTLGNBQWVGLEVBQVVqVSxRQUN6Qm9VLGFBQWNILEVBQVVJLFFBRWhDLENBQ0EsU0FBU0MsSUFBVyxPQUFFQyxJQUNsQixPQUFPLElBQUlDLFFBQVEsQ0FDZixlQUFnQixtQkFDaEJDLE9BQVEsbUJBQ1IsaUJBQWtCRixHQUUxQixDQVdBaE8sZUFBZW1PLEdBQW1CQyxHQUM5QixNQUFNalYsUUFBZWlWLElBQ3JCLE9BQUlqVixFQUFPMlUsUUFBVSxLQUFPM1UsRUFBTzJVLE9BQVMsSUFFakNNLElBRUpqVixDQUNYLENBa0ZBLFNBQVNrVixHQUFNQyxHQUNYLE9BQU8sSUFBSXppQixTQUFRQyxJQUNmK0YsV0FBVy9GLEVBQVN3aUIsRUFBRyxHQUUvQixDQXVDQSxNQUFNQyxHQUFvQixvQkFNMUIsU0FBU0MsS0FDTCxJQUdJLE1BQU1DLEVBQWUsSUFBSUMsV0FBVyxLQUNyQjFWLEtBQUsyVixRQUFVM1YsS0FBSzRWLFVBQzVCQyxnQkFBZ0JKLEdBRXZCQSxFQUFhLEdBQUssSUFBY0EsRUFBYSxHQUFLLEdBQ2xELE1BQU1LLEVBU2QsU0FBZ0JMLEdBSVosT0FqRDJCOWhCLEVBOENhOGhCLEVBN0M1Qi9XLEtBQUtLLE9BQU9DLGdCQUFnQnJMLElBQzdCM0IsUUFBUSxNQUFPLEtBQUtBLFFBQVEsTUFBTyxNQStDN0IrakIsT0FBTyxFQUFHLElBakQvQixJQUErQnBpQixDQWtEL0IsQ0Fkb0JxaUIsQ0FBT1AsR0FDbkIsT0FBT0YsR0FBa0JVLEtBQUtILEdBQU9BLEVBZnpCLEVBb0JoQixDQUhBLE1BQU90VixHQUVILE1BbkJZLEVBb0JoQixDQUNKLENBMEJBLFNBQVMwVixHQUFPQyxHQUNaLE1BQU8sR0FBR0EsRUFBVS9GLFdBQVcrRixFQUFVMUUsT0FDN0MsQ0FrQkEsTUFBTTJFLEdBQXFCLElBQUk1USxJQUsvQixTQUFTNlEsR0FBV0YsRUFBV0wsR0FDM0IsTUFBTS9TLEVBQU1tVCxHQUFPQyxHQUNuQkcsR0FBdUJ2VCxFQUFLK1MsR0FxQ2hDLFNBQTRCL1MsRUFBSytTLEdBQzdCLE1BQU1TLElBU0RDLElBQW9CLHFCQUFzQnhXLE9BQzNDd1csR0FBbUIsSUFBSUMsaUJBQWlCLHlCQUN4Q0QsR0FBaUJFLFVBQVlubkIsSUFDekIrbUIsR0FBdUIvbUIsRUFBRWYsS0FBS3VVLElBQUt4VCxFQUFFZixLQUFLc25CLElBQUksR0FHL0NVLElBZEhELEdBQ0FBLEVBQVFJLFlBQVksQ0FBRTVULE1BQUsrUyxRQWdCQyxJQUE1Qk0sR0FBbUJRLE1BQWNKLEtBQ2pDQSxHQUFpQnBXLFFBQ2pCb1csR0FBbUIsS0FmM0IsQ0ExQ0lLLENBQW1COVQsRUFBSytTLEVBQzVCLENBMEJBLFNBQVNRLEdBQXVCdlQsRUFBSytTLEdBQ2pDLE1BQU03TixFQUFZbU8sR0FBbUIxbkIsSUFBSXFVLEdBQ3pDLEdBQUtrRixFQUdMLElBQUssTUFBTTNMLEtBQVkyTCxFQUNuQjNMLEVBQVN3WixFQUVqQixDQVFBLElBQUlVLEdBQW1CLEtBa0N2QixNQUVNTSxHQUFvQiwrQkFDMUIsSUFBSSxHQUFZLEtBQ2hCLFNBQVMsS0FnQkwsT0FmSyxLQUNELEdBQVkvSixFQU5FLGtDQUNHLEVBS21DLENBQ2hERyxRQUFTLENBQUNPLEVBQUlGLEtBT0QsSUFEREEsR0FFQUUsRUFBR3lELGtCQUFrQjRGLEdBQzdCLEtBSUwsRUFDWCxDQUVBOVAsZUFBZWYsR0FBSWtRLEVBQVc5WixHQUMxQixNQUFNMEcsRUFBTW1ULEdBQU9DLEdBRWJ0SyxTQURXLE1BQ0hSLFlBQVl5TCxHQUFtQixhQUN2QzdMLEVBQWNZLEVBQUdaLFlBQVk2TCxJQUM3QkMsUUFBa0I5TCxFQUFZdmMsSUFBSXFVLEdBTXhDLGFBTE1rSSxFQUFZcUcsSUFBSWpWLEVBQU8wRyxTQUN2QjhJLEVBQUdHLEtBQ0orSyxHQUFZQSxFQUFTakIsTUFBUXpaLEVBQU15WixLQUNwQ08sR0FBV0YsRUFBVzlaLEVBQU15WixLQUV6QnpaLENBQ1gsQ0FFQTJLLGVBQWVuTixHQUFPc2MsR0FDbEIsTUFBTXBULEVBQU1tVCxHQUFPQyxHQUVidEssU0FEVyxNQUNIUixZQUFZeUwsR0FBbUIsbUJBQ3ZDakwsRUFBR1osWUFBWTZMLElBQW1CL1AsT0FBT2hFLFNBQ3pDOEksRUFBR0csSUFDYixDQU9BaEYsZUFBZWdRLEdBQU9iLEVBQVdjLEdBQzdCLE1BQU1sVSxFQUFNbVQsR0FBT0MsR0FFYnRLLFNBRFcsTUFDSFIsWUFBWXlMLEdBQW1CLGFBQ3ZDNUksRUFBUXJDLEVBQUdaLFlBQVk2TCxJQUN2QkMsUUFBa0I3SSxFQUFNeGYsSUFBSXFVLEdBQzVCK0osRUFBV21LLEVBQVNGLEdBVzFCLFlBVmlCcG9CLElBQWJtZSxRQUNNb0IsRUFBTW5ILE9BQU9oRSxTQUdibUwsRUFBTW9ELElBQUl4RSxFQUFVL0osU0FFeEI4SSxFQUFHRyxNQUNMYyxHQUFjaUssR0FBWUEsRUFBU2pCLE1BQVFoSixFQUFTZ0osS0FDcERPLEdBQVdGLEVBQVdySixFQUFTZ0osS0FFNUJoSixDQUNYLENBc0JBOUYsZUFBZWtRLEdBQXFCQyxHQUNoQyxJQUFJQyxFQUNKLE1BQU1DLFFBQTBCTCxHQUFPRyxFQUFjaEIsV0FBV21CLElBQzVELE1BQU1ELEVBa0JkLFNBQXlDQyxHQUtyQyxPQUFPQyxHQUpPRCxHQUFZLENBQ3RCeEIsSUFBS04sS0FDTGdDLG1CQUFvQixHQUc1QixDQXhCa0NDLENBQWdDSCxHQUNwREksRUErQmQsU0FBd0NQLEVBQWVFLEdBQ25ELEdBQTZDLElBQXpDQSxFQUFrQkcsbUJBQTRDLENBQzlELElBQUtHLFVBQVVDLE9BR1gsTUFBTyxDQUNIUCxvQkFDQUQsb0JBSGlDdmtCLFFBQVFFLE9BQU8sR0FBY3dQLE9BQU8saUJBTzdFLE1BQU1zVixFQUFrQixDQUNwQi9CLElBQUt1QixFQUFrQnZCLElBQ3ZCMEIsbUJBQW9CLEVBQ3BCTSxpQkFBa0J6ZSxLQUFLQyxPQUVyQjhkLEVBY2RwUSxlQUFvQ21RLEVBQWVFLEdBQy9DLElBQ0ksTUFBTVUsUUExWmQvUSxnQkFBeUMsVUFBRW1QLEVBQVMseUJBQUU2QixJQUE0QixJQUFFbEMsSUFDaEYsTUFBTW1DLEVBQVdsRSxHQUF5Qm9DLEdBQ3BDK0IsRUFBVW5ELEdBQVdvQixHQUVyQmdDLEVBQW1CSCxFQUF5QjFSLGFBQWEsQ0FDM0RFLFVBQVUsSUFFZCxHQUFJMlIsRUFBa0IsQ0FDbEIsTUFBTUMsUUFBeUJELEVBQWlCRSxzQkFDNUNELEdBQ0FGLEVBQVFJLE9BQU8sb0JBQXFCRixFQUU1QyxDQUNBLE1BQU1HLEVBQU8sQ0FDVHpDLE1BQ0EwQyxZQTFJc0IsU0EySXRCL0csTUFBTzBFLEVBQVUxRSxNQUNqQmdILFdBQVk1RSxJQUVWOVQsRUFBVSxDQUNaeUosT0FBUSxPQUNSME8sVUFDQUssS0FBTXZYLEtBQUtxUyxVQUFVa0YsSUFFbkJ6b0IsUUFBaUJxbEIsSUFBbUIsSUFBTXZsQixNQUFNcW9CLEVBQVVsWSxLQUNoRSxHQUFJalEsRUFBUzRvQixHQUFJLENBQ2IsTUFBTUMsUUFBc0I3b0IsRUFBU0MsT0FPckMsTUFOb0MsQ0FDaEMrbEIsSUFBSzZDLEVBQWM3QyxLQUFPQSxFQUMxQjBCLG1CQUFvQixFQUNwQm9CLGFBQWNELEVBQWNDLGFBQzVCQyxVQUFXNUUsR0FBaUMwRSxFQUFjRSxXQUdsRSxDQUVJLFlBQVlyRSxHQUFxQixzQkFBdUIxa0IsRUFFaEUsQ0FvWGtEZ3BCLENBQTBCM0IsRUFBZUUsR0FDbkYsT0FBT3BSLEdBQUlrUixFQUFjaEIsVUFBVzRCLEVBZ0J4QyxDQWRBLE1BQU94b0IsR0FhSCxNQVpJdWtCLEdBQWN2a0IsSUFBa0MsTUFBNUJBLEVBQUV3UyxXQUFXNFMsaUJBRzNCOWEsR0FBT3NkLEVBQWNoQixpQkFJckJsUSxHQUFJa1IsRUFBY2hCLFVBQVcsQ0FDL0JMLElBQUt1QixFQUFrQnZCLElBQ3ZCMEIsbUJBQW9CLElBR3RCam9CLENBQ1YsQ0FDSixDQWxDb0N3cEIsQ0FBcUI1QixFQUFlVSxHQUNoRSxNQUFPLENBQUVSLGtCQUFtQlEsRUFBaUJULHNCQUNqRCxDQUNLLE9BQTZDLElBQXpDQyxFQUFrQkcsbUJBQ2hCLENBQ0hILG9CQUNBRCxvQkFBcUI0QixHQUF5QjdCLElBSTNDLENBQUVFLG9CQUVqQixDQTNEaUM0QixDQUErQjlCLEVBQWVFLEdBRXZFLE9BREFELEVBQXNCTSxFQUFpQk4sb0JBQ2hDTSxFQUFpQkwsaUJBQWlCLElBRTdDLE1BMVBnQixLQTBQWkEsRUFBa0J2QixJQUVYLENBQUV1Qix3QkFBeUJELEdBRS9CLENBQ0hDLG9CQUNBRCxzQkFFUixDQXVFQXBRLGVBQWVnUyxHQUF5QjdCLEdBSXBDLElBQUkrQixRQUFjQyxHQUEwQmhDLEVBQWNoQixXQUMxRCxLQUFvQyxJQUE3QitDLEVBQU0xQiwwQkFFSG5DLEdBQU0sS0FDWjZELFFBQWNDLEdBQTBCaEMsRUFBY2hCLFdBRTFELEdBQWlDLElBQTdCK0MsRUFBTTFCLG1CQUE0QyxDQUVsRCxNQUFNLGtCQUFFSCxFQUFpQixvQkFBRUQsU0FBOEJGLEdBQXFCQyxHQUM5RSxPQUFJQyxHQUtPQyxDQUVmLENBQ0EsT0FBTzZCLENBQ1gsQ0FTQSxTQUFTQyxHQUEwQmhELEdBQy9CLE9BQU9hLEdBQU9iLEdBQVdtQixJQUNyQixJQUFLQSxFQUNELE1BQU0sR0FBYy9VLE9BQU8sMEJBRS9CLE9BQU9nVixHQUFxQkQsRUFBUyxHQUU3QyxDQUNBLFNBQVNDLEdBQXFCMkIsR0FDMUIsT0FTaUQsS0FEYjdCLEVBUkQ2QixHQVNUMUIsb0JBQ3RCSCxFQUFrQlMsaUJBN2xCQyxJQTZsQnVDemUsS0FBS0MsTUFUeEQsQ0FDSHdjLElBQUtvRCxFQUFNcEQsSUFDWDBCLG1CQUFvQixHQUdyQjBCLEVBRVgsSUFBd0M3QixDQUR4QyxDQXNCQXJRLGVBQWVvUyxJQUF5QixVQUFFakQsRUFBUyx5QkFBRTZCLEdBQTRCWCxHQUM3RSxNQUFNWSxFQWlDVixTQUFzQzlCLEdBQVcsSUFBRUwsSUFDL0MsTUFBTyxHQUFHL0IsR0FBeUJvQyxNQUFjTCx1QkFDckQsQ0FuQ3FCdUQsQ0FBNkJsRCxFQUFXa0IsR0FDbkRhLEVBL2hCVixTQUE0Qi9CLEdBQVcsYUFBRXlDLElBQ3JDLE1BQU1WLEVBQVVuRCxHQUFXb0IsR0FFM0IsT0FEQStCLEVBQVFJLE9BQU8sZ0JBb0JuQixTQUFnQ00sR0FDNUIsTUFBTyxVQUE0QkEsR0FDdkMsQ0F0Qm9DVSxDQUF1QlYsSUFDaERWLENBQ1gsQ0EyaEJvQnFCLENBQW1CcEQsRUFBV2tCLEdBRXhDYyxFQUFtQkgsRUFBeUIxUixhQUFhLENBQzNERSxVQUFVLElBRWQsR0FBSTJSLEVBQWtCLENBQ2xCLE1BQU1DLFFBQXlCRCxFQUFpQkUsc0JBQzVDRCxHQUNBRixFQUFRSSxPQUFPLG9CQUFxQkYsRUFFNUMsQ0FDQSxNQUFNRyxFQUFPLENBQ1RpQixhQUFjLENBQ1ZmLFdBQVk1RSxHQUNacEMsTUFBTzBFLEVBQVUxRSxRQUduQjFSLEVBQVUsQ0FDWnlKLE9BQVEsT0FDUjBPLFVBQ0FLLEtBQU12WCxLQUFLcVMsVUFBVWtGLElBRW5Cem9CLFFBQWlCcWxCLElBQW1CLElBQU12bEIsTUFBTXFvQixFQUFVbFksS0FDaEUsR0FBSWpRLEVBQVM0b0IsR0FHVCxPQUQyQnpFLFNBRENua0IsRUFBU0MsUUFLckMsWUFBWXlrQixHQUFxQixzQkFBdUIxa0IsRUFFaEUsQ0EyQkFrWCxlQUFleVMsR0FBaUJ0QyxFQUFldUMsR0FBZSxHQUMxRCxJQUFJQyxFQUNKLE1BQU1ULFFBQWNsQyxHQUFPRyxFQUFjaEIsV0FBV21CLElBQ2hELElBQUtzQyxHQUFrQnRDLEdBQ25CLE1BQU0sR0FBYy9VLE9BQU8sa0JBRS9CLE1BQU1zWCxFQUFldkMsRUFBU3VCLFVBQzlCLElBQUthLElBK0YyQixLQURkYixFQTlGb0JnQixHQStGeEIxRixnQkFHdEIsU0FBNEIwRSxHQUN4QixNQUFNdmYsRUFBTUQsS0FBS0MsTUFDakIsT0FBUUEsRUFBTXVmLEVBQVV0RSxjQUNwQnNFLEVBQVV0RSxhQUFlc0UsRUFBVXpFLFVBQVk5YSxFQXB4QnZCLElBcXhCaEMsQ0FOU3dnQixDQUFtQmpCLElBOUZoQixPQUFPdkIsRUE0Rm5CLElBQTBCdUIsRUExRmIsR0FBbUMsSUFBL0JnQixFQUFhMUYsY0FHbEIsT0FEQXdGLEVBd0JaM1MsZUFBeUNtUSxFQUFldUMsR0FJcEQsSUFBSVIsUUFBY2EsR0FBdUI1QyxFQUFjaEIsV0FDdkQsS0FBeUMsSUFBbEMrQyxFQUFNTCxVQUFVMUUscUJBRWJrQixHQUFNLEtBQ1o2RCxRQUFjYSxHQUF1QjVDLEVBQWNoQixXQUV2RCxNQUFNMEMsRUFBWUssRUFBTUwsVUFDeEIsT0FBZ0MsSUFBNUJBLEVBQVUxRSxjQUVIc0YsR0FBaUJ0QyxFQUFldUMsR0FHaENiLENBRWYsQ0ExQzJCbUIsQ0FBMEI3QyxFQUFldUMsR0FDakRwQyxFQUVOLENBRUQsSUFBS0ssVUFBVUMsT0FDWCxNQUFNLEdBQWNyVixPQUFPLGVBRS9CLE1BQU1zVixFQTBGbEIsU0FBNkNQLEdBQ3pDLE1BQU0yQyxFQUFzQixDQUN4QjlGLGNBQWUsRUFDZitGLFlBQWE3Z0IsS0FBS0MsT0FFdEIsT0FBTzRJLE9BQU8wTixPQUFPMU4sT0FBTzBOLE9BQU8sQ0FBQyxFQUFHMEgsR0FBVyxDQUFFdUIsVUFBV29CLEdBQ25FLENBaEdvQ0UsQ0FBb0M3QyxHQUU1RCxPQURBcUMsRUFzRFozUyxlQUF3Q21RLEVBQWVFLEdBQ25ELElBQ0ksTUFBTXdCLFFBQWtCTyxHQUF5QmpDLEVBQWVFLEdBQzFEK0MsRUFBMkJsWSxPQUFPME4sT0FBTzFOLE9BQU8wTixPQUFPLENBQUMsRUFBR3lILEdBQW9CLENBQUV3QixjQUV2RixhQURNNVMsR0FBSWtSLEVBQWNoQixVQUFXaUUsR0FDNUJ2QixDQWNYLENBWkEsTUFBT3RwQixHQUNILElBQUl1a0IsR0FBY3ZrQixJQUNlLE1BQTVCQSxFQUFFd1MsV0FBVzRTLFlBQWtELE1BQTVCcGxCLEVBQUV3UyxXQUFXNFMsV0FLaEQsQ0FDRCxNQUFNeUYsRUFBMkJsWSxPQUFPME4sT0FBTzFOLE9BQU8wTixPQUFPLENBQUMsRUFBR3lILEdBQW9CLENBQUV3QixVQUFXLENBQUUxRSxjQUFlLFdBQzdHbE8sR0FBSWtSLEVBQWNoQixVQUFXaUUsRUFDdkMsWUFMVXZnQixHQUFPc2QsRUFBY2hCLFdBTS9CLE1BQU01bUIsQ0FDVixDQUNKLENBMUUyQjhxQixDQUF5QmxELEVBQWVVLEdBQ2hEQSxDQUNYLEtBS0osT0FIa0I4QixRQUNOQSxFQUNOVCxFQUFNTCxTQUVoQixDQWtDQSxTQUFTa0IsR0FBdUI1RCxHQUM1QixPQUFPYSxHQUFPYixHQUFXbUIsSUFDckIsSUFBS3NDLEdBQWtCdEMsR0FDbkIsTUFBTSxHQUFjL1UsT0FBTyxrQkFHL0IsT0FpRGdDLEtBREhzVyxFQWpEUnZCLEVBQVN1QixXQWtEaEIxRSxlQUNkMEUsRUFBVXFCLFlBcHlCUyxJQW95QjBCN2dCLEtBQUtDLE1BakR2QzRJLE9BQU8wTixPQUFPMU4sT0FBTzBOLE9BQU8sQ0FBQyxFQUFHMEgsR0FBVyxDQUFFdUIsVUFBVyxDQUFFMUUsY0FBZSxLQUU3RW1ELEVBNkNmLElBQXFDdUIsQ0E3Q2QsR0FFdkIsQ0FzQkEsU0FBU2UsR0FBa0J2QyxHQUN2QixZQUE4QjFvQixJQUF0QjBvQixHQUNxQyxJQUF6Q0EsRUFBa0JHLGtCQUMxQixDQTBSQSxTQUFTOEMsR0FBcUJDLEdBQzFCLE9BQU8sR0FBY2hZLE9BQU8sNEJBQTZELENBQ3JGZ1ksYUFFUixDQWtCQSxNQUFNQyxHQUFxQixnQkEwQnZCckwsR0FBbUIsSUFBSTdLLEVBQVVrVyxJQXhCZG5WLElBQ25CLE1BQU02SixFQUFNN0osRUFBVWlELFlBQVksT0FBT2hDLGVBRW5DNlAsRUFwRFYsU0FBMEJqSCxHQUN0QixJQUFLQSxJQUFRQSxFQUFJM0ksUUFDYixNQUFNK1QsR0FBcUIscUJBRS9CLElBQUtwTCxFQUFJak4sS0FDTCxNQUFNcVksR0FBcUIsWUFHL0IsTUFBTUcsRUFBYSxDQUNmLFlBQ0EsU0FDQSxTQUVKLElBQUssTUFBTUMsS0FBV0QsRUFDbEIsSUFBS3ZMLEVBQUkzSSxRQUFRbVUsR0FDYixNQUFNSixHQUFxQkksR0FHbkMsTUFBTyxDQUNIdEssUUFBU2xCLEVBQUlqTixLQUNiK1IsVUFBVzlFLEVBQUkzSSxRQUFReU4sVUFDdkJnQixPQUFROUYsRUFBSTNJLFFBQVF5TyxPQUNwQnZELE1BQU92QyxFQUFJM0ksUUFBUWtMLE1BRTNCLENBNEJzQmtKLENBQWlCekwsR0FRbkMsTUFOMEIsQ0FDdEJBLE1BQ0FpSCxZQUNBNkIseUJBSjZCLEdBQWE5SSxFQUFLLGFBSy9DM0gsUUFBUyxJQUFNMVUsUUFBUUMsVUFFSCxHQWE0QyxXQUNwRXFjLEdBQW1CLElBQUk3SyxFQTFCUywwQkFjWGUsSUFDckIsTUFFTThSLEVBQWdCLEdBRlY5UixFQUFVaUQsWUFBWSxPQUFPaEMsZUFFRGtVLElBQW9CbFUsZUFLNUQsTUFKOEIsQ0FDMUJzVSxNQUFPLElBdFJmNVQsZUFBcUJtUSxHQUNqQixNQUFNMEQsRUFBb0IxRCxHQUNwQixrQkFBRUUsRUFBaUIsb0JBQUVELFNBQThCRixHQUFxQjJELEdBUzlFLE9BUkl6RCxFQUNBQSxFQUFvQmprQixNQUFNdkUsUUFBUXdFLE9BS2xDcW1CLEdBQWlCb0IsR0FBbUIxbkIsTUFBTXZFLFFBQVF3RSxPQUUvQ2lrQixFQUFrQnZCLEdBQzdCLENBMFFxQjhFLENBQU16RCxHQUNuQjJELFNBQVdwQixHQWpQbkIxUyxlQUF3Qm1RLEVBQWV1QyxHQUFlLEdBQ2xELE1BQU1tQixFQUFvQjFELEVBSzFCLGFBRUpuUSxlQUFnRG1RLEdBQzVDLE1BQU0sb0JBQUVDLFNBQThCRixHQUFxQkMsR0FDdkRDLFNBRU1BLENBRWQsQ0FaVTJELENBQWlDRixVQUdmcEIsR0FBaUJvQixFQUFtQm5CLElBQzNDeEYsS0FDckIsQ0EwT29DNEcsQ0FBUzNELEVBQWV1QyxHQUU1QixHQUltRCxZQVNuRmpKLEdBQWdCLEdBQU0sSUFFdEJBLEdBQWdCLEdBQU0sR0FBUyxXQ3JtQy9CLE1BQU11SyxHQUFpQixZQU1qQkMsR0FBVywyQ0FrQlgsR0FBUyxJQUFJeFIsRUFBTyx1QkF3QjFCLFNBQVN5UixHQUFrQkMsR0FDdkIsT0FBT3RvQixRQUFRdVUsSUFBSStULEVBQVM5VCxLQUFJMUYsR0FBV0EsRUFBUXhPLE9BQU01RCxHQUFLQSxNQUNsRSxDQTZPQSxNQTBCTSxHQUFnQixJQUFJK1MsRUFBYSxZQUFhLFlBMUJyQyxDQUNYLGlCQUF5QywwSUFHekMsc0JBQW1ELGtSQUluRCwrQkFBcUUsaUpBR3JFLCtCQUFxRSx3RUFDckUsNEJBQStELG9NQUcvRCx3QkFBdUQsb01BR3ZELGlCQUF5Qyx5S0FFekMsc0JBQW1ELGtFQUNuRCxhQUFpQyw4SEFFakMsWUFBK0IsOEhBa0Q3QjhZLEdBQW1CLElBZnpCLE1BQ0kxWixZQUFZMlosRUFBbUIsQ0FBQyxFQUFHdlgsRUFMVixLQU1yQnpVLEtBQUtnc0IsaUJBQW1CQSxFQUN4QmhzQixLQUFLeVUsZUFBaUJBLENBQzFCLENBQ0F3WCxvQkFBb0I3SixHQUNoQixPQUFPcGlCLEtBQUtnc0IsaUJBQWlCNUosRUFDakMsQ0FDQThKLG9CQUFvQjlKLEVBQU8rSixHQUN2Qm5zQixLQUFLZ3NCLGlCQUFpQjVKLEdBQVMrSixDQUNuQyxDQUNBQyx1QkFBdUJoSyxVQUNacGlCLEtBQUtnc0IsaUJBQWlCNUosRUFDakMsR0FPSixTQUFTLEdBQVd1RCxHQUNoQixPQUFPLElBQUlDLFFBQVEsQ0FDZkMsT0FBUSxtQkFDUixpQkFBa0JGLEdBRTFCLENBbUNBaE8sZUFBZTBVLEdBQTRCeE0sRUFFM0N5TSxFQUFZUCxHQUFrQlEsR0FDMUIsTUFBTSxNQUFFbkssRUFBSyxPQUFFdUQsRUFBTSxjQUFFNkcsR0FBa0IzTSxFQUFJM0ksUUFDN0MsSUFBS2tMLEVBQ0QsTUFBTSxHQUFjbFAsT0FBTyxhQUUvQixJQUFLeVMsRUFBUSxDQUNULEdBQUk2RyxFQUNBLE1BQU8sQ0FDSEEsZ0JBQ0FwSyxTQUdSLE1BQU0sR0FBY2xQLE9BQU8sYUFDL0IsQ0FDQSxNQUFNOFksRUFBbUJNLEVBQVVMLG9CQUFvQjdKLElBQVUsQ0FDN0Q1TixhQUFjLEVBQ2RpWSxzQkFBdUJ6aUIsS0FBS0MsT0FFMUJ5aUIsRUFBUyxJQUFJQyxHQUtuQixPQUpBbmpCLFlBQVdtTyxVQUVQK1UsRUFBT0UsT0FBTyxRQUNHdHRCLElBQWxCaXRCLEVBQThCQSxFQXphUixLQTBhbEJNLEdBQW1DLENBQUV6SyxRQUFPdUQsU0FBUTZHLGlCQUFpQlIsRUFBa0JVLEVBQVFKLEVBQzFHLENBT0EzVSxlQUFla1YsR0FBbUNDLEdBQVcsc0JBQUVMLEVBQXFCLGFBQUVqWSxHQUFnQmtZLEVBQVFKLEVBQVlQLElBRXRILElBQUk1YSxFQUFJNGIsRUFDUixNQUFNLE1BQUUzSyxFQUFLLGNBQUVvSyxHQUFrQk0sRUFJakMsVUEwREosU0FBNkJKLEVBQVFELEdBQ2pDLE9BQU8sSUFBSWpwQixTQUFRLENBQUNDLEVBQVNDLEtBRXpCLE1BQU1zcEIsRUFBZ0J6b0IsS0FBSzBvQixJQUFJUixFQUF3QnppQixLQUFLQyxNQUFPLEdBQzdEaWpCLEVBQVUxakIsV0FBVy9GLEVBQVN1cEIsR0FFcENOLEVBQU85b0Isa0JBQWlCLEtBQ3BCdXBCLGFBQWFELEdBRWJ4cEIsRUFBTyxHQUFjd1AsT0FBTyxpQkFBdUMsQ0FDL0R1WiwwQkFDRCxHQUNMLEdBRVYsQ0F2RWNXLENBQW9CVixFQUFRRCxFQVV0QyxDQVJBLE1BQU92c0IsR0FDSCxHQUFJc3NCLEVBSUEsT0FIQSxHQUFPdG9CLEtBQ0gsNkdBQXVDc29CLDBFQUMrQyxRQUFacmIsRUFBS2pSLFNBQXNCLElBQVBpUixPQUFnQixFQUFTQSxFQUFHQyxZQUN2SCxDQUFFZ1IsUUFBT29LLGlCQUVwQixNQUFNdHNCLENBQ1YsQ0FDQSxJQUNJLE1BQU1PLFFBbkZka1gsZUFBa0NtVixHQUM5QixJQUFJM2IsRUFDSixNQUFNLE1BQUVpUixFQUFLLE9BQUV1RCxHQUFXbUgsRUFDcEJwYyxFQUFVLENBQ1p5SixPQUFRLE1BQ1IwTyxRQUFTLEdBQVdsRCxJQUVsQjBILEVBelhpQiw2RUF5WFcxcUIsUUFBUSxXQUFZeWYsR0FDaEQzaEIsUUFBaUJGLE1BQU04c0IsRUFBUTNjLEdBQ3JDLEdBQXdCLE1BQXBCalEsRUFBU2dsQixRQUFzQyxNQUFwQmhsQixFQUFTZ2xCLE9BQWdCLENBQ3BELElBQUk2SCxFQUFlLEdBQ25CLElBRUksTUFBTUMsUUFBc0I5c0IsRUFBU0MsUUFDSCxRQUE3QnlRLEVBQUtvYyxFQUFheHBCLGFBQTBCLElBQVBvTixPQUFnQixFQUFTQSxFQUFHQyxXQUNsRWtjLEVBQWVDLEVBQWF4cEIsTUFBTXFOLFFBR3ZCLENBQW5CLE1BQU9vYyxHQUFZLENBQ25CLE1BQU0sR0FBY3RhLE9BQU8sc0JBQWlELENBQ3hFdWEsV0FBWWh0QixFQUFTZ2xCLE9BQ3JCaUksZ0JBQWlCSixHQUV6QixDQUNBLE9BQU83c0IsRUFBU0MsTUFDcEIsQ0EwRCtCaXRCLENBQW1CYixHQUcxQyxPQURBUixFQUFVRix1QkFBdUJoSyxHQUMxQjNoQixDQTRCWCxDQTFCQSxNQUFPUCxHQUNILE1BQU02RCxFQUFRN0QsRUFDZCxJQXdEUixTQUEwQkEsR0FDdEIsS0FBTUEsYUFBYXNTLEdBQW1CdFMsRUFBRXdTLFlBQ3BDLE9BQU8sRUFHWCxNQUFNK2EsRUFBYXhJLE9BQU8va0IsRUFBRXdTLFdBQXVCLFlBQ25ELE9BQXVCLE1BQWYrYSxHQUNXLE1BQWZBLEdBQ2UsTUFBZkEsR0FDZSxNQUFmQSxDQUNSLENBbEVhRyxDQUFpQjdwQixHQUFRLENBRTFCLEdBREF1b0IsRUFBVUYsdUJBQXVCaEssR0FDN0JvSyxFQUlBLE9BSEEsR0FBT3RvQixLQUNILDBHQUF1Q3NvQiwwRUFDa0N6b0IsYUFBcUMsRUFBU0EsRUFBTXFOLFlBQzFILENBQUVnUixRQUFPb0ssaUJBR2hCLE1BQU10c0IsQ0FFZCxDQUNBLE1BQU04c0IsRUFBcUosTUFBckkvSCxPQUFpRixRQUF6RThILEVBQUtocEIsYUFBcUMsRUFBU0EsRUFBTTJPLGtCQUErQixJQUFQcWEsT0FBZ0IsRUFBU0EsRUFBR1UsWUFDcklsWixFQUF1QkMsRUFBYzhYLEVBQVU3WCxlQTdJbkMsSUE4SVpGLEVBQXVCQyxFQUFjOFgsRUFBVTdYLGdCQUUvQ3VYLEVBQW1CLENBQ3JCUyxzQkFBdUJ6aUIsS0FBS0MsTUFBUStpQixFQUNwQ3hZLGFBQWNBLEVBQWUsR0FLakMsT0FGQThYLEVBQVVKLG9CQUFvQjlKLEVBQU80SixHQUNyQyxHQUFPblIsTUFBTSxpQ0FBaUNtUyxZQUN2Q0gsR0FBbUNDLEVBQVdkLEVBQWtCVSxFQUFRSixFQUNuRixDQUNKLENBa0RBLE1BQU1LLEdBQ0Z0YSxjQUNJclMsS0FBSzZ0QixVQUFZLEVBQ3JCLENBQ0FqcUIsaUJBQWlCa3FCLEdBQ2I5dEIsS0FBSzZ0QixVQUFVanNCLEtBQUtrc0IsRUFDeEIsQ0FDQWxCLFFBQ0k1c0IsS0FBSzZ0QixVQUFVMWtCLFNBQVEya0IsR0FBWUEsS0FDdkMsRUFzQkosSUFBSUMsR0FnR0FDLEdBc0VKclcsZUFBZXNXLEdBQXFCcE8sRUFBS3FPLEVBQTJCQyxFQUFzQnJHLEVBQWVzRyxFQUFVQyxFQUFlblgsR0FDOUgsSUFBSS9GLEVBQ0osTUFBTW1kLEVBQXVCakMsR0FBNEJ4TSxHQUV6RHlPLEVBQ0s5dEIsTUFBSzRmLElBQ04rTixFQUFxQi9OLEVBQU9vTSxlQUFpQnBNLEVBQU9nQyxNQUNoRHZDLEVBQUkzSSxRQUFRc1YsZUFDWnBNLEVBQU9vTSxnQkFBa0IzTSxFQUFJM0ksUUFBUXNWLGVBQ3JDLEdBQU90b0IsS0FBSyxvREFBb0QyYixFQUFJM0ksUUFBUXNWLDZFQUNUcE0sRUFBT29NLHdMQUk5RSxJQUVDMW9CLE9BQU01RCxHQUFLLEdBQU82RCxNQUFNN0QsS0FFN0JndUIsRUFBMEJ0c0IsS0FBSzBzQixHQUMvQixNQUFNQyxFQXJEVjVXLGlCQUNJLElBQUl4RyxFQUNKLElBQUssSUFJRCxPQUhBLEdBQU9qTixLQUFLLEdBQWNnUCxPQUFPLHdCQUFxRCxDQUNsRnNiLFVBQVcsb0RBQ1pwZCxVQUNJLEVBR1AsVUFDVSxHQU9WLENBTEEsTUFBT2xSLEdBSUgsT0FIQSxHQUFPZ0UsS0FBSyxHQUFjZ1AsT0FBTyx3QkFBcUQsQ0FDbEZzYixVQUF3QixRQUFacmQsRUFBS2pSLFNBQXNCLElBQVBpUixPQUFnQixFQUFTQSxFQUFHc2QsYUFDN0RyZCxVQUNJLENBQ1gsQ0FFSixPQUFPLENBQ1gsQ0FpQ3VCc2QsR0FBb0JsdUIsTUFBS211QixHQUNwQ0EsRUFDTzdHLEVBQWN5RCxhQUdyQixLQUdEcUQsRUFBZW5JLFNBQWFqakIsUUFBUXVVLElBQUksQ0FDM0N1VyxFQUNBQyxLQTNmUixTQUE4QkYsR0FDMUIsTUFBTVEsRUFBYW52QixPQUFPZ0gsU0FBU29vQixxQkFBcUIsVUFDeEQsSUFBSyxNQUFNQyxLQUFPbGMsT0FBT2lGLE9BQU8rVyxHQUM1QixHQUFJRSxFQUFJenRCLEtBQ0p5dEIsRUFBSXp0QixJQUFJb0IsU0FBU2twQixLQUNqQm1ELEVBQUl6dEIsSUFBSW9CLFNBQVMyckIsR0FDakIsT0FBT1UsRUFHZixPQUFPLElBQ1gsRUFxZlNDLENBQXFCWCxJQTNzQjlCLFNBQXlCQSxFQUFlN0IsR0FDcEMsTUFBTXlDLEVBQVN2b0IsU0FBU29CLGNBQWMsVUFHdENtbkIsRUFBTzN0QixJQUFNLEdBQUdzcUIsUUFBY3lDLFFBQW9CN0IsSUFDbER5QyxFQUFPdFgsT0FBUSxFQUNmalIsU0FBU3dvQixLQUFLaG5CLFlBQVkrbUIsRUFDOUIsQ0Fxc0JRRSxDQUFnQmQsRUFBZU8sRUFBY3BDLGVBRzdDd0IsS0FDQUksRUFBUyxVQUF5QixVQUFXSixJQXBHakRBLFFBcUc4QjF1QixHQU05Qjh1QixFQUFTLEtBQU0sSUFBSXBrQixNQUduQixNQUFNb2xCLEVBQStGLFFBQTNFamUsRUFBSytGLGFBQXlDLEVBQVNBLEVBQVFrSixjQUEyQixJQUFQalAsRUFBZ0JBLEVBQUssQ0FBQyxFQWlCbkksT0FmQWllLEVBQTJCLE9BQUksV0FDL0JBLEVBQWlCekgsUUFBUyxFQUNmLE1BQVBsQixJQUNBMkksRUFBMkIsWUFBSTNJLEdBTW5DMkgsRUFBUyxTQUF1QlEsRUFBY3BDLGNBQWU0QyxHQUV6RHJCLEtBQ0FLLEVBQVMsTUFBaUJMLElBbkg5QkEsUUFvSHNDenVCLEdBRS9Cc3ZCLEVBQWNwQyxhQUN6QixDQXFCQSxNQUFNNkMsR0FDRmhkLFlBQVl3TixHQUNSN2YsS0FBSzZmLElBQU1BLENBQ2YsQ0FDQTNILFVBRUksY0FET29YLEdBQTBCdHZCLEtBQUs2ZixJQUFJM0ksUUFBUWtMLE9BQzNDNWUsUUFBUUMsU0FDbkIsRUFPSixJQUFJNnJCLEdBQTRCLENBQUMsRUFNN0JwQixHQUE0QixHQU9oQyxNQUFNQyxHQUF1QixDQUFDLEVBSTlCLElBU0lvQixHQUtBQyxHQWRBbkIsR0FBZ0IsWUFtQmhCb0IsSUFBaUIsRUFtRHJCLFNBQVNDLEdBQVE3UCxFQUFLaUksRUFBZTVRLElBdEJyQyxXQUNJLE1BQU15WSxFQUF3QixHQU85QixHUHhhSixXQUNJLE1BQU1DLEVBQTRCLGlCQUFYQyxPQUNqQkEsT0FBT0QsUUFDWSxpQkFBWkUsUUFDSEEsUUFBUUYsYUFDUnR3QixFQUNWLE1BQTBCLGlCQUFac3dCLFFBQXVDdHdCLElBQWZzd0IsRUFBUTduQixFQUNsRCxDTzJaUSxJQUNBNG5CLEVBQXNCL3RCLEtBQUssNENQelVOLG9CQUFkMG1CLFdBQThCQSxVQUFVeUgsZU80VS9DSixFQUFzQi90QixLQUFLLDhCQUUzQit0QixFQUFzQmpyQixPQUFTLEVBQUcsQ0FDbEMsTUFBTXNyQixFQUFVTCxFQUNYM1gsS0FBSSxDQUFDNUcsRUFBUzBOLElBQVUsSUFBSUEsRUFBUSxNQUFNMU4sTUFDMUNqQyxLQUFLLEtBQ0o4Z0IsRUFBTSxHQUFjL2MsT0FBTyw0QkFBNkQsQ0FDMUZzYixVQUFXd0IsSUFFZixHQUFPOXJCLEtBQUsrckIsRUFBSTdlLFFBQ3BCLENBQ0osQ0FNSThlLEdBQ0EsTUFBTTlOLEVBQVF2QyxFQUFJM0ksUUFBUWtMLE1BQzFCLElBQUtBLEVBQ0QsTUFBTSxHQUFjbFAsT0FBTyxhQUUvQixJQUFLMk0sRUFBSTNJLFFBQVF5TyxPQUFRLENBQ3JCLElBQUk5RixFQUFJM0ksUUFBUXNWLGNBTVosTUFBTSxHQUFjdFosT0FBTyxjQUwzQixHQUFPaFAsS0FDSCx5S0FBNkUyYixFQUFJM0ksUUFBUXNWLG9GQU1yRyxDQUNBLEdBQXdDLE1BQXBDOEMsR0FBMEJsTixHQUMxQixNQUFNLEdBQWNsUCxPQUFPLGlCQUF1QyxDQUM5RG5MLEdBQUlxYSxJQUdaLElBQUtxTixHQUFnQixFQS8yQnpCLFNBQThCcEIsR0FFMUIsSUFBSThCLEVBQVksR0FDWjlwQixNQUFNZ0ksUUFBUTNPLE9BQW9CLFdBQ2xDeXdCLEVBQVl6d0IsT0FBb0IsVUFHaENBLE9BQW9CLFVBQUl5d0IsQ0FHaEMsQ0F3MkJRQyxHQUNBLE1BQU0sWUFBRUMsRUFBVyxTQUFFakMsR0F6c0I3QixTQUEwQmtCLEVBQTJCcEIsRUFBMkJDLEVBQXNCRSxFQUFlaUMsR0FFakgsSUFBSWxDLEVBQVcsWUFBYW1DLEdBRXhCN3dCLE9BQW9CLFVBQUVrQyxLQUFLNHVCLFVBQy9CLEVBUUEsT0FOSTl3QixPQUF1QixNQUNhLG1CQUE3QkEsT0FBdUIsT0FFOUIwdUIsRUFBVzF1QixPQUF1QixNQUV0Q0EsT0FBdUIsS0F4RTNCLFNBQWtCMHVCLEVBS2xCa0IsRUFLQXBCLEVBTUFDLEdBK0JJLE9BeEJBeFcsZUFBMkI4WSxFQUFTQyxFQUFrQkMsR0FDbEQsSUFFb0IsVUFBWkYsUUFqRmhCOVksZUFBMkJ5VyxFQUFVa0IsRUFBMkJwQixFQUEyQjFCLEVBQWVtRSxHQUN0RyxJQUNJLElBQUlDLEVBQWtDLEdBR3RDLEdBQUlELEdBQWNBLEVBQW9CLFFBQUcsQ0FDckMsSUFBSUUsRUFBZUYsRUFBb0IsUUFFbEN0cUIsTUFBTWdJLFFBQVF3aUIsS0FDZkEsRUFBZSxDQUFDQSxJQUlwQixNQUFNQyxRQUE2QmpGLEdBQWtCcUMsR0FDckQsSUFBSyxNQUFNNkMsS0FBWUYsRUFBYyxDQUVqQyxNQUFNRyxFQUFjRixFQUFxQnJOLE1BQUtyRCxHQUFVQSxFQUFPb00sZ0JBQWtCdUUsSUFDM0VFLEVBQXdCRCxHQUFlMUIsRUFBMEIwQixFQUFZNU8sT0FDbkYsSUFBSTZPLEVBR0MsQ0FJREwsRUFBa0MsR0FDbEMsS0FDSixDQVJJQSxFQUFnQ2h2QixLQUFLcXZCLEVBUzdDLENBQ0osQ0FJK0MsSUFBM0NMLEVBQWdDbHNCLFNBQ2hDa3NCLEVBQWtDL2QsT0FBT2lGLE9BQU93WCxVQUk5QzlyQixRQUFRdVUsSUFBSTZZLEdBRWxCeEMsRUFBUyxRQUFxQjVCLEVBQWVtRSxHQUFjLENBQUMsRUFJaEUsQ0FGQSxNQUFPendCLEdBQ0gsR0FBTzZELE1BQU03RCxFQUNqQixDQUNKLENBc0NzQmd4QixDQUFZOUMsRUFBVWtCLEVBQTJCcEIsRUFBMkJ3QyxFQUFrQkMsR0FFbkYsV0FBWkYsUUF2SHJCOVksZUFBNEJ5VyxFQUFVa0IsRUFBMkJwQixFQUEyQkMsRUFBc0IzQixFQUFlbUUsR0FHN0gsTUFBTVEsRUFBcUJoRCxFQUFxQjNCLEdBQ2hELElBQ0ksR0FBSTJFLFFBQ003QixFQUEwQjZCLE9BRS9CLENBS0QsTUFDTUgsU0FENkJuRixHQUFrQnFDLElBQ1p6SyxNQUFLckQsR0FBVUEsRUFBT29NLGdCQUFrQkEsSUFDN0V3RSxTQUNNMUIsRUFBMEIwQixFQUFZNU8sTUFFcEQsQ0FJSixDQUZBLE1BQU9saUIsR0FDSCxHQUFPNkQsTUFBTTdELEVBQ2pCLENBQ0FrdUIsRUFBUyxTQUF1QjVCLEVBQWVtRSxFQUNuRCxDQWlHc0JTLENBQWFoRCxFQUFVa0IsRUFBMkJwQixFQUEyQkMsRUFBc0J1QyxFQUFrQkMsR0FFMUcsWUFBWkYsRUFFTHJDLEVBQVMsVUFBeUIsU0FBVXVDLEdBSTVDdkMsRUFBUyxNQUFpQnNDLEVBS2xDLENBRkEsTUFBT3h3QixHQUNILEdBQU82RCxNQUFNN0QsRUFDakIsQ0FDSixDQUVKLENBd0IrQm14QixDQUFTakQsRUFBVWtCLEVBQTJCcEIsRUFBMkJDLEdBQzdGLENBQ0hDLFdBQ0FpQyxZQUFhM3dCLE9BQXVCLEtBRTVDLENBd3JCMEM0eEIsQ0FBaUJoQyxHQUEyQnBCLEdBQTJCQyxJQUN6R3FCLEdBQXNCYSxFQUN0QmQsR0FBbUJuQixFQUNuQnFCLElBQWlCLENBQ3JCLENBS0EsT0FGQUgsR0FBMEJsTixHQUFTNkwsR0FBcUJwTyxFQUFLcU8sR0FBMkJDLEdBQXNCckcsRUFBZXlILEdBQWtCbEIsR0FBZW5YLEdBQ3BJLElBQUltWSxHQUFpQnhQLEVBRW5ELENBa0pBLFNBQVMwUixHQUFTQyxFQUFtQkMsRUFBV0MsRUFBYXhhLEdBQ3pEc2EsRUFBb0IsRUFBbUJBLEdBaGhCM0M3WixlQUEwQmdhLEVBQWNWLEVBQXVCUSxFQUFXQyxFQUFheGEsR0FDbkYsR0FBSUEsR0FBV0EsRUFBUTBhLE9BQ25CRCxFQUFhLFFBQXFCRixFQUFXQyxPQUc1QyxDQUNELE1BQU1sRixRQUFzQnlFLEVBRTVCVSxFQUFhLFFBQXFCRixFQURuQjVlLE9BQU8wTixPQUFPMU4sT0FBTzBOLE9BQU8sQ0FBQyxFQUFHbVIsR0FBYyxDQUFFLFFBQVdsRixJQUU5RSxDQUNKLENBdWdCSXFGLENBQVdyQyxHQUFxQkYsR0FBMEJrQyxFQUFrQjNSLElBQUkzSSxRQUFRa0wsT0FBUXFQLEVBQVdDLEVBQWF4YSxHQUFTcFQsT0FBTTVELEdBQUssR0FBTzZELE1BQU03RCxJQUM3SixDQW9CQSxNQUFNLEdBQU8sc0JBQ1AsR0FBVSxRQVFaNGYsR0FBbUIsSUFBSTdLLEVBQVUwVyxJQUFnQixDQUFDM1YsR0FBYWtCLFFBQVM0YSxLQU03RHBDLEdBSksxWixFQUFVaUQsWUFBWSxPQUFPaEMsZUFDbkJqQixFQUNqQmlELFlBQVksMEJBQ1poQyxlQUM4QjZhLElBQ3BDLFdBQ0hoUyxHQUFtQixJQUFJN0ssRUFBVSxzQkFJakMsU0FBeUJlLEdBQ3JCLElBQ0ksTUFBTStiLEVBQVkvYixFQUFVaUQsWUFBWTBTLElBQWdCMVUsZUFDeEQsTUFBTyxDQUNIc2EsU0FBVSxDQUFDRSxFQUFXQyxFQUFheGEsSUFBWXFhLEdBQVNRLEVBQVdOLEVBQVdDLEVBQWF4YSxHQU9uRyxDQUpBLE1BQU9oWCxHQUNILE1BQU0sR0FBY2dULE9BQU8sK0JBQW1FLENBQzFGOGUsT0FBUTl4QixHQUVoQixDQUNKLEdBaEJ3RSxZQUN4RWtoQixHQUFnQixHQUFNLElBRXRCQSxHQUFnQixHQUFNLEdBQVMsV0M3b0M1QixNQUFNNlEsR0FrQlosY0FFQSxDQUVBMXdCLHFCQUtDLE9BSkswd0IsR0FBZ0I3dEIsV0FDcEI2dEIsR0FBZ0I3dEIsU0FBVyxJQUFJNnRCLElBR3pCQSxHQUFnQjd0QixRQUN4QixDQUVBN0MseUJBQXlCMndCLEdBQ3hCRCxHQUFnQkMsZUFBaUJBLENBQ2xDLENBR0Ezd0IscUJBQ0NoQyxRQUFRQyxJQUFJLDRCQUNaZSxNQUFNLCtDQUErQ0MsTUFBTUMsSUFFMUQsR0FEQWxCLFFBQVFDLElBQUksMEJBQ1JpQixFQUFTNG9CLEdBQ1osTUFBTS9hLE1BQU03TixFQUFTMHhCLFlBRXRCLE9BQU8xeEIsRUFBU0MsTUFBTSxJQUNwQkYsTUFBTStzQixJQUNSaHVCLFFBQVFDLElBQUkrdEIsR0FDWjBFLEdBQWdCRyxRQUFVN0UsRUFBYThFLElBQ3ZDLElBQUlDLEVBQVVMLEdBQWdCRyxRQUFRdHZCLE1BQU0sS0FDeEN5dkIsRUFBTUMsV0FBV0YsRUFBUSxJQUFJRyxRQUFRLEdBQ3JDQyxFQUFNRixXQUFXRixFQUFRLElBQUlHLFFBQVEsR0FVekMsT0FUQVIsR0FBZ0JVLEtBQU9KLEVBQ3ZCTixHQUFnQlcsS0FBT0YsRUFDdkJULEdBQWdCRyxRQUFVLEdBQzFCRSxFQUFVLEdBSVZMLEdBQWdCWSxlQUVULENBQUMsQ0FBQyxJQUNQL3VCLE9BQU9tc0IsSUFDVDF3QixRQUFRMkUsS0FBSyxnREFBZ0QrckIsRUFBSTZDLE1BQU0sR0FFekUsQ0FHQXZ4QixxQkFBcUJ3eEIsRUFBU0MsR0FDN0JmLEdBQWdCZ0IsS0FBT0YsRUFDdkJkLEdBQWdCanhCLFFBQVVneUIsQ0FDM0IsQ0FHQXp4QixlQUFlMnhCLEVBQWlCQyxHQUMvQmxCLEdBQWdCbUIsS0FBT0YsRUFDdkJqQixHQUFnQm9CLFdBQWFGLENBQzlCLENBR0E1eEIsZ0JBQWdCK3hCLEVBQW9CQyxHQUNuQ3RCLEdBQWdCcUIsV0FBYUEsRUFDN0JyQixHQUFnQnNCLGVBQWlCQSxFQUVqQ3RCLEdBQWdCdUIsY0FFaEIsSUFBSUMsRUFBYyxRQUFVeEIsR0FBZ0JtQixLQUFPLHlCQUVuRDd6QixRQUFRQyxJQUFJaTBCLEdBRVpsQyxHQUFTVSxHQUFnQmdCLEtBQUssU0FBVSxDQUFDLEVBRzFDLENBR0ExeEIsaUNBQWlDbXlCLEdBRWhDLE9BQUlBLEdBQXVCLEtBQVpBLEdBQWtCQSxFQUFRaHhCLFNBQVMsS0FDMUNneEIsRUFBUTV3QixNQUFNLEtBQUssR0FHcEIsY0FDUixDQUdBdkIsNkJBQTZCbXlCLEdBRTVCLE9BQUlBLEdBQXVCLEtBQVpBLEdBQWtCQSxFQUFRaHhCLFNBQVMsS0FDMUNneEIsRUFBUTV3QixNQUFNLEtBQUssR0FHcEIsY0FDUixDQUdBdkIsc0JBQ0MsSUFBSWt5QixFQUFjLDZCQUErQnhCLEdBQWdCbUIsS0FBTyxNQUFRbkIsR0FBZ0JVLEtBQU8sS0FBT1YsR0FBZ0JXLEtBQzlIcnpCLFFBQVFDLElBQUlpMEIsR0FFWmxDLEdBQVNVLEdBQWdCZ0IsS0FBSyxnQkFBaUIsQ0FDOUNVLEtBQU0xQixHQUFnQm1CLEtBQ3RCUSxLQUFNM0IsR0FBZ0I0QiwwQkFBMEI1QixHQUFnQmp4QixTQUNoRTZlLElBQUtvUyxHQUFnQjZCLHNCQUFzQjdCLEdBQWdCanhCLFNBQzNEb3hCLFFBQVNILEdBQWdCOEIsWUFBWTlCLEdBQWdCVSxLQUFNVixHQUFnQlcsUUFHNUVyekIsUUFBUUMsSUFBSSwwQkFDWkQsUUFBUUMsSUFBSSxpQkFBbUJ5eUIsR0FBZ0I0QiwwQkFBMEI1QixHQUFnQmp4QixVQUN6RnpCLFFBQVFDLElBQUksYUFBZXl5QixHQUFnQjZCLHNCQUFzQjdCLEdBQWdCanhCLFVBQ2pGekIsUUFBUUMsSUFBSSxnQkFBa0J5eUIsR0FBZ0JxQixZQUM5Qy96QixRQUFRQyxJQUFJLG9CQUFzQnl5QixHQUFnQnNCLGdCQUVsRGhDLEdBQVNVLEdBQWdCZ0IsS0FBSyxjQUFlLENBQzVDOWQsS0FBTSxjQUNONmUsU0FBVS9CLEdBQWdCbUIsS0FDMUJDLFdBQVlwQixHQUFnQm9CLFdBQzVCWSxRQUFTaEMsR0FBZ0I4QixZQUFZOUIsR0FBZ0JVLEtBQU1WLEdBQWdCVyxNQUMzRVUsV0FBWXJCLEdBQWdCcUIsV0FDNUJDLGVBQWdCdEIsR0FBZ0JzQixlQUloQzFULElBQUtvUyxHQUFnQjZCLHNCQUFzQjdCLEdBQWdCanhCLFNBQzNENHlCLEtBQU0zQixHQUFnQjRCLDBCQUEwQjVCLEdBQWdCanhCLFVBRWxFLENBR0FPLG9CQUFvQjJ5QixFQUFhQyxFQUFjQyxHQUM5QyxJQUFJQyxFQUFNSCxFQUFLL3hCLFFBQVFneUIsRUFBTyxHQUUxQkcsRUFBWSxLQUNaQyxFQUFTLEtBQ1QsWUFBYUwsR0FDSSxNQUFoQkEsRUFBS00sVUFFUEYsRUFER0osRUFBS00sU0FBV0gsRUFBSUksWUFRdEIsV0FBWVAsSUFDZkssRUFBU0wsRUFBS0ssUUFFZixJQUFJZCxFQUFjLFFBQVV4QixHQUFnQm1CLEtBQU8sYUFBZWMsRUFBS1EsTUFBUSxTQUFXTCxFQUFJSSxXQUM5RmhCLEdBQWUsdUJBQ2YsSUFBSW5iLEVBQU8sR0FDWCxJQUFLLElBQUlxYyxLQUFRVCxFQUFLL3hCLFFBQ3JCc3hCLEdBQWVTLEVBQUsveEIsUUFBUXd5QixHQUFNRixXQUFhLElBQy9DbmMsR0FBUTRiLEVBQUsveEIsUUFBUXd5QixHQUFNRixXQUFhLElBR3pDaEIsR0FBZSxLQUNmQSxHQUFlYSxFQUNmYixHQUFlYyxFQUNmaDFCLFFBQVFDLElBQUlpMEIsR0FDWmwwQixRQUFRQyxJQUFJLHlCQUEyQnl5QixHQUFnQnFCLFlBQ3ZEL3pCLFFBQVFDLElBQUksb0JBQXNCeXlCLEdBQWdCc0IsZ0JBRWxEaEMsR0FBU1UsR0FBZ0JnQixLQUFLLFdBQVksQ0FDekM5ZCxLQUFNLFdBQ042ZSxTQUFVL0IsR0FBZ0JtQixLQUMxQkMsV0FBWXBCLEdBQWdCb0IsV0FDNUJZLFFBQVNoQyxHQUFnQjhCLFlBQVk5QixHQUFnQlUsS0FBTVYsR0FBZ0JXLE1BSTNFL1MsSUFBS29TLEdBQWdCNkIsc0JBQXNCN0IsR0FBZ0JqeEIsU0FDM0Q0eUIsS0FBTTNCLEdBQWdCNEIsMEJBQTBCNUIsR0FBZ0JqeEIsU0FDaEU0ekIsR0FBSVIsRUFDSlMsZ0JBQWlCWCxFQUFLWSxRQUN0QnZaLE9BQVEyWSxFQUFLYSxRQUNiQyxTQUFVZCxFQUFLL29CLFdBQ2Y4cEIsZ0JBQWlCWixFQUFJSSxXQUNyQkgsVUFBV0EsRUFDWHBkLFFBQVNvQixFQUNUaWMsT0FBUUEsRUFDUmpCLFdBQVlyQixHQUFnQnFCLFdBQzVCQyxlQUFnQnRCLEdBQWdCc0IsZ0JBR2xDLENBR0FoeUIsa0JBQWtCMnpCLEVBQVlDLEdBQzdCLElBQUlDLEVBQUtGLEVBQUdHLFNBQ1JDLEVBQVNKLEVBQUdLLFNBQ1pDLEVBQVdOLEVBQUdPLFdBRWRoQyxFQUFjLFFBQVV4QixHQUFnQm1CLEtBQU8sd0JBQTBCZ0MsRUFBSyxTQUFXSSxFQUFXLDJCQUE2QkYsRUFBbkgsc0JBQXlKSCxFQUMzSzUxQixRQUFRQyxJQUFJaTBCLEdBQ1psMEIsUUFBUUMsSUFBSSxpQ0FBbUN5eUIsR0FBZ0JxQixZQUMvRC96QixRQUFRQyxJQUFJLG9CQUFzQnl5QixHQUFnQnNCLGdCQUVsRGhDLEdBQVNVLEdBQWdCZ0IsS0FBSyxrQkFBbUIsQ0FDaEQ5ZCxLQUFNLGtCQUNONmUsU0FBVS9CLEdBQWdCbUIsS0FDMUJDLFdBQVlwQixHQUFnQm9CLFdBQzVCWSxRQUFTaEMsR0FBZ0I4QixZQUFZOUIsR0FBZ0JVLEtBQU1WLEdBQWdCVyxNQUkzRS9TLElBQUtvUyxHQUFnQjZCLHNCQUFzQjdCLEdBQWdCanhCLFNBQzNENHlCLEtBQU0zQixHQUFnQjRCLDBCQUEwQjVCLEdBQWdCanhCLFNBQ2hFMDBCLGFBQWNOLEVBQ2RPLG9CQUFvQkwsRUFDcEJNLHNCQUFzQkosRUFDdEJLLGFBQWNWLEVBQ2Q3QixXQUFZckIsR0FBZ0JxQixXQUM1QkMsZUFBZ0J0QixHQUFnQnNCLGdCQUVsQyxDQUdBaHlCLG9CQUFvQnUwQixFQUFvQixLQUFNQyxFQUFxQkMsR0FDbEUsSUFBSXZDLEVBQWMsUUFBVXhCLEdBQWdCbUIsS0FBTywyQkFDbkQ3ekIsUUFBUUMsSUFBSWkwQixHQUVaLElBQUl3QyxFQUFnQmhFLEdBQWdCaUUsaUJBQWlCSixHQUNqREssRUFBa0JsRSxHQUFnQm1FLG1CQUFtQk4sR0FFcEMsR0FBakJHLElBQ0hBLEVBQWdCRSxHQUdqQixJQUFJRSxFQUFRcEUsR0FBZ0JxRSxlQUFlUixFQUFTRyxHQUNwRCxNQUFNTSxFQUE0QixJQUFqQlQsRUFBUXB4QixPQUV6Qm5GLFFBQVFDLElBQUksMkJBQ1pELFFBQVFDLElBQUksVUFBWTYyQixHQUN4QjkyQixRQUFRQyxJQUFJLGNBQWdCKzJCLEdBQzVCaDNCLFFBQVFDLElBQUksaUJBQW1CeTJCLEdBQy9CMTJCLFFBQVFDLElBQUksMEJBQTRCdTJCLEdBQ3hDeDJCLFFBQVFDLElBQUksbUJBQXFCMjJCLEdBQ2pDNTJCLFFBQVFDLElBQUksNEJBQThCdzJCLEdBQzFDejJCLFFBQVFDLElBQUksMEJBQTRCeXlCLEdBQWdCcUIsWUFDeEQvekIsUUFBUUMsSUFBSSxvQkFBc0J5eUIsR0FBZ0JzQixnQkFFbER0QixHQUFnQnVFLHFCQUFxQkgsRUFBT3BFLEdBQWdCbUIsTUFFNUQ3QixHQUFTVSxHQUFnQmdCLEtBQUssWUFBYSxDQUMxQzlkLEtBQU0sWUFDTjZlLFNBQVUvQixHQUFnQm1CLEtBQzFCQyxXQUFZcEIsR0FBZ0JvQixXQUM1QnhULElBQUtvUyxHQUFnQjZCLHNCQUFzQjdCLEdBQWdCanhCLFNBQzNENHlCLEtBQU0zQixHQUFnQjRCLDBCQUEwQjVCLEdBQWdCanhCLFNBQ2hFaXpCLFFBQVNoQyxHQUFnQjhCLFlBQVk5QixHQUFnQlUsS0FBTVYsR0FBZ0JXLE1BSTNFeUQsTUFBT0EsRUFDUEUsU0FBVUEsRUFDVlIsWUFBYUUsRUFDYkQsY0FBZUcsRUFDZjdDLFdBQVlyQixHQUFnQnFCLFdBQzVCQyxlQUFnQnRCLEdBQWdCc0IsZ0JBRWxDLENBRUFoeUIsNEJBQTRCODBCLEVBQWVqRCxHQUUxQzd6QixRQUFRQyxJQUFJLHFEQUFzRDYyQixHQUdsRSxNQUFNSSxFQUFZLElBQUk1MkIsZ0JBQWdCSCxPQUFPQyxTQUFTQyxRQUNoRDgyQixFQUFpQkQsRUFBVXAzQixJQUFJLFlBRXpCczNCLEdBRFNGLEVBQVVwM0IsSUFBSSxnQkFDakIsSUFBSXUzQixnQkFFdEIsSUFBS0YsRUFFSixZQURBbjNCLFFBQVF3RSxNQUFNLDhCQUlULE1BQU04eUIsRUFBVSxDQUNkLEtBQVF6RCxFQUNSLEtBQVEsa0JBQ1IsTUFBUyxDQUNQLEtBQVEsV0FDUixNQUFTLENBQ1AsS0FBUSxhQUNqQixRQUFXbkIsR0FBZ0JDLGVBQ2xCLE1BQVNtRSxFQUNULFdBQWEsS0FLYlMsRUFBZ0JubEIsS0FBS3FTLFVBQVU2UyxHQUUzQyxJQUNDRixFQUFJL2xCLEtBQUssT0FBUThsQixHQUFnQixHQUNqQ0MsRUFBSUksaUJBQWlCLGVBQWdCLG9CQUVyQ0osRUFBSUssT0FBUyxXQUNSTCxFQUFJbFIsUUFBVSxLQUFPa1IsRUFBSWxSLE9BQVMsSUFFckNsbUIsUUFBUUMsSUFBSSxnQkFBa0JtM0IsRUFBSU0sY0FHbEMxM0IsUUFBUXdFLE1BQU0sK0JBQWlDNHlCLEVBQUlsUixPQUVyRCxFQUVBa1IsRUFBSU8sS0FBS0osR0FDUixNQUFPL3lCLEdBQ1J4RSxRQUFRd0UsTUFBTSx3Q0FBeUNBLEdBR3pELENBR0F4QyxzQkFBc0J1MEIsRUFBbUJHLEdBQ3hDMTJCLFFBQVFDLElBQUkscUJBQ1pELFFBQVFDLElBQUlzMkIsR0FFWixJQUFJTyxFQUFRLEVBRVo5MkIsUUFBUUMsSUFBSSxvQkFBc0J5MkIsR0FHbEMsSUFBSVIsRUFBYSxFQUVqQixJQUFLLE1BQU0zVyxLQUFTZ1gsRUFBUyxDQUM1QixNQUFNdkIsRUFBU3VCLEVBQVFoWCxHQUN2QixHQUFJeVYsRUFBT2MsVUFBWVksRUFBZSxDQUNyQ1IsRUFBYWxCLEVBQU9rQixXQUNwQixPQU1GLE9BRkFsMkIsUUFBUUMsSUFBSSxnQkFBa0JpMkIsRUFBWSxXQUFhUSxFQUFlLGFBQWVILEVBQVFweEIsUUFFekZ1eEIsSUFBa0JILEVBQVFweEIsUUFBVSt3QixHQUFjLEdBRXJEbDJCLFFBQVFDLElBQUksaUJBRVksSUFBakJzMkIsRUFBUXB4QixTQUdoQjJ4QixFQUEyRSxFQUFuRTl4QixLQUFLdVEsTUFBNkIsS0FBckJtaEIsRUFBZ0IsR0FBYVIsRUFBYSxFQUFLLEtBRTdEWSxFQUNSLENBR0E5MEIsd0JBQXdCdTBCLEdBQ3ZCLElBQUlULEVBQVcsRUFHZixJQUFLLE1BQU12VyxLQUFTZ1gsRUFBUyxDQUM1QixNQUFNdkIsRUFBU3VCLEVBQVFoWCxHQUNuQnlWLEVBQU80QyxTQUFXNUMsRUFBT1ksU0FDWixHQUFaRSxHQUFpQmQsRUFBT2MsU0FBV0EsS0FDdENBLEVBQVdkLEVBQU9jLFVBS3JCLE9BQU9BLENBQ1IsQ0FHQTl6QiwwQkFBMEJ1MEIsR0FDekIsSUFBSVQsRUFBVyxFQUdmLElBQUssTUFBTXZXLEtBQVNnWCxFQUFTLENBQzVCLE1BQU12QixFQUFTdUIsRUFBUWhYLEdBQ25CeVYsRUFBTzRDLFFBQVU1QyxFQUFPWSxTQUNYLEdBQVpFLEdBQWlCZCxFQUFPYyxTQUFXQSxLQUN0Q0EsRUFBV2QsRUFBT2MsVUFLckIsT0FBT0EsQ0FDUixDQUdBOXpCLG1CQUFtQmd4QixFQUFhRyxHQUMvQixPQUFPSCxFQUFNLElBQU1HLENBQ3BCLEVDdFpNLE1BQWUwRSxHQW9CckIva0IsY0FmTyxLQUFBZ2xCLGtCQUE0QixFQUM1QixLQUFBQyxhQUF1QixFQUV2QixLQUFBQywrQkFBeUMsb0NBR3pDLEtBQUFDLHNCQUFnQywyQkFHaEMsS0FBQUMsZUFBeUIsdUJBR3pCLEtBQUFDLHlCQUFtQyx5QkEyQm5DLEtBQUFDLG1CQUFxQixLQUNvQixTQUEzQzMzQixLQUFLNDNCLHFCQUFxQnZ1QixNQUFNZSxRQUNuQ3BLLEtBQUs0M0IscUJBQXFCdnVCLE1BQU1lLFFBQVUsT0FFMUNwSyxLQUFLNDNCLHFCQUFxQnZ1QixNQUFNZSxRQUFVLFNBM0IzQ3BLLEtBQUtzM0IsWUFBYzUzQixPQUFPQyxTQUFTazRCLEtBQUtuMUIsU0FBUyxjQUFnQmhELE9BQU9DLFNBQVNrNEIsS0FBS24xQixTQUFTLGNBQWdCaEQsT0FBT0MsU0FBU2s0QixLQUFLbjFCLFNBQVMsaUJBQzdJMUMsS0FBSzgzQiw2QkFBK0JweEIsU0FBU0MsZUFBZTNHLEtBQUt1M0IsZ0NBQ2pFdjNCLEtBQUs0M0IscUJBQXVCbHhCLFNBQVNDLGVBQWUzRyxLQUFLeTNCLGdCQUV6RHozQixLQUFLKzNCLHVCQUF5QnJ4QixTQUFTQyxlQUFlM0csS0FBSzAzQiwwQkFDM0QxM0IsS0FBSyszQix1QkFBdUJDLFNBQVkvWixJQUFZamUsS0FBS2k0QiwwQkFBMEJoYSxFQUFNLEVBRXpGamUsS0FBS2s0QixvQkFBc0J4eEIsU0FBU0MsZUFBZTNHLEtBQUt3M0IsdUJBQ3hEeDNCLEtBQUtrNEIsb0JBQW9CQyxRQUFVbjRCLEtBQUsyM0IsbUJBRW5DMzNCLEtBQUtzM0IsWUFHVHQzQixLQUFLODNCLDZCQUE2Qnp1QixNQUFNZSxRQUFVLFFBRmxEcEssS0FBSzgzQiw2QkFBNkJ6dUIsTUFBTWUsUUFBVSxNQUlwRCxDQUVPZ3VCLG9CQUNOcDRCLEtBQUs4M0IsNkJBQTZCenVCLE1BQU1lLFFBQVUsTUFDbkQsQ0FnQk9pdUIsUUFFTnZ6QixFQUFhd3pCLFVBQ2J0NEIsS0FBSzZmLElBQUkwWSxZQUFZQyxXQUN0QixFQ3JETSxNQUFNQyxXQUFlckIsR0FLM0Iva0IsWUFBWXJSLEVBQWlCdTNCLEdBQzVCNWxCLFFBVU0sS0FBQXNsQiwwQkFBNEIsS0FDbEMxNEIsUUFBUUMsSUFBSSwwQkFBMEIsRUFZaEMsS0FBQWs1QixZQUFjLEtBQ3BCNXpCLEVBQWE2ekIsYUFBYTM0QixLQUFLNDRCLGtCQUFrQixFQUczQyxLQUFBQyxjQUFnQixLQUN0Qi96QixFQUFhZzBCLHFCQUFvQixHQUVqQzk0QixLQUFLKzRCLHNCQUF3QixFQUU3QnZ2QixZQUFXLEtBQ054SixLQUFLZzVCLG1CQUNSbDBCLEVBQWE2ekIsYUFBYTM0QixLQUFLNDRCLG9CQUUvQnI1QixRQUFRQyxJQUFJLGdDQUNaUSxLQUFLcTRCLFdBRUosSUFBSSxFQUdELEtBQUFZLFVBQVksQ0FBQ0MsRUFBZ0I5RSxLQUNuQ25DLEdBQWdCa0gsYUFBYW41QixLQUFLd0IsY0FBY3hCLEtBQUsrNEIsc0JBQXVCRyxFQUFROUUsR0FDcEZ0dkIsRUFBYWcwQixxQkFBb0IsR0FDakNoMEIsRUFBYXMwQixVQUNiNXZCLFlBQVcsS0FBUXhKLEtBQUs2NEIsZUFBZSxHQUFJLElBQUssRUFHMUMsS0FBQVEsa0JBQW9CLElkaERyQixTQUFvQ2o1Qiw0Q0FDMUMsT0FBT0MsRUFBU0QsR0FBS0ksTUFBS3JCLEdBQWlCQSxFQUFnQixXQUM1RCxJYytDMEJtNkIsQ0FBcUJ0NUIsS0FBSzZmLElBQUk3ZSxTQWpEdER6QixRQUFRQyxJQUFJLHNCQUVaUSxLQUFLZ0IsUUFBVUEsRUFDZmhCLEtBQUt1NEIsWUFBY0EsRUFDbkJ2NEIsS0FBSys0QixxQkFBdUIsRUFDNUJqMEIsRUFBYXkwQixxQkFBcUJ2NUIsS0FBS2k1QixXQUN2Q24wQixFQUFhMDBCLGVBQWV4NUIsS0FBSzA0QixZQUNsQyxDQU1hZSxJQUFJNVosd0NBQ2hCN2YsS0FBSzZmLElBQU1BLEVBQ1g3ZixLQUFLcTVCLG9CQUFvQjc0QixNQUFLc1EsSUFDN0I5USxLQUFLd0IsY0FBZ0JzUCxFQUNyQm5RLEVBQWdCKzRCLCtCQUErQjE1QixLQUFLd0IsY0FBZXhCLEtBQUs2ZixJQUFJOFosY0FDNUUzNUIsS0FBS3U0QixZQUFZcUIsWUFBWSxHQUUvQixpU0FpQ09aLG1CQUNOLE9BQU9oNUIsS0FBSys0QixzQkFBeUIvNEIsS0FBS3dCLGNBQWNrRCxPQUFTLENBQ2xFLENBRU9rMEIsa0JBRU4sT0FEbUI1NEIsS0FBS3dCLGNBQWN4QixLQUFLKzRCLHFCQUU1QyxFQzdFTSxNQUFNYyxHQUtUeG5CLFlBQVlyRixHQUNSaE4sS0FBS2dOLE1BQVFBLEVBQ2JoTixLQUFLa00sS0FBTyxLQUNabE0sS0FBSzg1QixNQUFRLElBQ2pCLEVBVUcsU0FBU0MsR0FBb0JDLEVBQU9DLEVBQUtDLEdBQzVDLEdBQUlGLEVBQVFDLEVBQUssT0FBTyxLQUd4QixJQUFJRSxFQUVKLElBQUtILEVBQVFDLEdBQU8sR0FBTSxHQUEwQixJQUFyQkMsRUFBWTNTLE1BRXZDLEdBREE0UyxFQUFNNTFCLEtBQUtDLE9BQU93MUIsRUFBUUMsR0FBTyxHQUNyQixJQUFSRSxFQUFXLE9BQU8sVUFFdEIsR0FDSUEsRUFBTTUxQixLQUFLQyxPQUFPdzFCLEVBQVFDLEdBQU8sR0FDakNFLEdBQU81MUIsS0FBS0MsTUFBc0IsRUFBaEJELEtBQUtFLGdCQUNsQjAxQixFQUFNRixHQUFPQyxFQUFZeGpCLElBQUl5akIsSUFHMUNELEVBQVlqeUIsSUFBSWt5QixHQUVoQixJQUFJQyxFQUFPLElBQUlQLEdBQVNNLEdBS3hCLE9BSEFDLEVBQUtsdUIsS0FBTzZ0QixHQUFvQkMsRUFBT0csRUFBTSxFQUFHRCxHQUNoREUsRUFBS04sTUFBUUMsR0FBb0JJLEVBQU0sRUFBR0YsRUFBS0MsR0FFeENFLENBQ1gsS0MvQktDLEdBTUFDLElBTkwsU0FBS0QsR0FDSixtQ0FDQSx1Q0FDQSwwQ0FDQSxDQUpELENBQUtBLEtBQUFBLEdBQVcsS0FNaEIsU0FBS0MsR0FDSiw2QkFDQSwwQ0FDQSxDQUhELENBQUtBLEtBQUFBLEdBQWEsS0FLWCxNQUFNQyxXQUFtQm5ELEdBcUIvQi9rQixZQUFZclIsRUFBaUJ1M0IsR0FDNUI1bEIsUUFMUyxLQUFBNm5CLGNBQStCRixHQUFjRyxVQUUvQyxLQUFBQywrQkFBaUMsR0E0QmxDLEtBQUFDLGdCQUFrQixLQUN4QjcxQixFQUFhNnpCLGFBQWEzNEIsS0FBSzQ0QixtQkFDM0I1NEIsS0FBS3MzQixhQUNSdDNCLEtBQUtvNEIscUJBSUEsS0FBQXdDLGFBQXNCSixJQUFpQyxxQ0FFN0QsUUFBcUJsN0IsSUFBakJVLEtBQUs4MUIsU0FBaUQsSUFBeEI5MUIsS0FBSzgxQixRQUFRcHhCLE9BQWMsQ0FDNUQsSUFBSW0yQixFaEIzREEsU0FBc0N6NkIsNENBQzVDLE9BQU9DLEVBQVNELEdBQUtJLE1BQUtyQixHQUFpQkEsRUFBYyxTQUMxRCxJZ0J5RGEyN0IsQ0FBdUI5NkIsS0FBSzZmLElBQUk4WixjQUFjbjVCLE1BQU1zUSxJQUM3RDlRLEtBQUs4MUIsUUFBVWhsQixFQUNmOVEsS0FBSys2QixXQUFhanFCLEVBQU9wTSxPQUN6Qm5GLFFBQVFDLElBQUksWUFBY1EsS0FBSzgxQixTQUMvQjkxQixLQUFLZzdCLFlBQWMzMEIsTUFBTXdSLEtBQUt4UixNQUFNckcsS0FBSys2QixhQUFhLENBQUN0bkIsRUFBRzdPLElBQU1BLEVBQUUsSUFDbEVyRixRQUFRQyxJQUFJLGVBQWtCUSxLQUFLZzdCLGFBQ25DLElBQUlkLEVBQWMsSUFBSXpoQixJQUN0QnloQixFQUFZanlCLElBQUksR0FDaEIsSUFBSWd6QixFQUFZbEIsR0FBb0IvNUIsS0FBSzgxQixRQUFRLEdBQUdULFNBQVcsRUFBR3IxQixLQUFLODFCLFFBQVE5MUIsS0FBSzgxQixRQUFRcHhCLE9BQVMsR0FBRzJ3QixTQUFVNkUsR0FHOUdnQixFQUFjbDdCLEtBQUttN0IsbUJBQW1CRixFQUFXajdCLEtBQUs4MUIsU0FDMUR2MkIsUUFBUUMsSUFBSSw2RUFDWkQsUUFBUUMsSUFBSTA3QixHQUNabDdCLEtBQUsrMUIsWUFBYy8xQixLQUFLKzZCLFdBQWEsRUFDckMvNkIsS0FBS2cyQixlQUFpQixFQUN0QmgyQixLQUFLbzdCLFlBQWNGLEVBQ25CbDdCLEtBQUtxN0IsZUFBYyxFQUFNLElBRTFCLE9BQU9SLEVBRVAsT0FBSUwsSUFBa0JGLEdBQWNHLFVBRTVCLElBQUlqM0IsU0FBYyxDQUFDQyxFQUFTQyxLQUNsQyxJQUFJdzJCLEVBQWMsSUFBSXpoQixJQUN0QnloQixFQUFZanlCLElBQUksR0FDaEIsSUFBSWd6QixFQUFZbEIsR0FBb0IvNUIsS0FBSzgxQixRQUFRLEdBQUdULFNBQVcsRUFBR3IxQixLQUFLODFCLFFBQVE5MUIsS0FBSzgxQixRQUFRcHhCLE9BQVMsR0FBRzJ3QixTQUFVNkUsR0FHOUdnQixFQUFjbDdCLEtBQUttN0IsbUJBQW1CRixFQUFXajdCLEtBQUs4MUIsU0FDMUR2MkIsUUFBUUMsSUFBSSw2RUFDWkQsUUFBUUMsSUFBSTA3QixHQUNabDdCLEtBQUsrMUIsWUFBYy8xQixLQUFLKzZCLFdBQWEsRUFDckMvNkIsS0FBS2cyQixlQUFpQixFQUN0QmgyQixLQUFLbzdCLFlBQWNGLEVBQ25CbDdCLEtBQUtxN0IsZUFBYyxHQUNuQjUzQixHQUFTLElBRUErMkIsSUFBa0JGLEdBQWNnQixpQkFDbkMsSUFBSTkzQixTQUFjLENBQUNDLEVBQVNDLEtBQ2xDMUQsS0FBS3U3Qix5QkFBMkIsRUFDaEN2N0IsS0FBS3E3QixlQUFjLEdBQ25CNTNCLEdBQVMsU0FKSixDQVFULGNBakQ4RCxrUkFpRDdELEVBUU0sS0FBQTAzQixtQkFBcUIsQ0FBQ2YsRUFBZ0J0RSxLQUU1QyxHQUFhLE9BQVRzRSxFQUFlLE9BQU9BLEVBRTFCLElBQUlvQixFQUFXcEIsRUFBS3B0QixNQUtwQixPQUpBb3RCLEVBQUtwdEIsTUFBUThvQixFQUFRclMsTUFBSzhRLEdBQVVBLEVBQU9jLFdBQWFtRyxJQUN0QyxPQUFkcEIsRUFBS2x1QixPQUFla3VCLEVBQUtsdUIsS0FBT2xNLEtBQUttN0IsbUJBQW1CZixFQUFLbHVCLEtBQU00cEIsSUFDcEQsT0FBZnNFLEVBQUtOLFFBQWdCTSxFQUFLTixNQUFROTVCLEtBQUttN0IsbUJBQW1CZixFQUFLTixNQUFPaEUsSUFFbkVzRSxDQUFJLEVBR0wsS0FBQXFCLFdBQWNsSCxJQUNwQnYwQixLQUFLMDdCLGNBQWdCbkgsRUFDckJ2MEIsS0FBSzA3QixjQUFjQyxVQUFZLEdBQy9CMzdCLEtBQUswN0IsY0FBY25HLFNBQVcsRUFDOUJ2MUIsS0FBSzA3QixjQUFjakcsV0FBYSxFQUNoQ3oxQixLQUFLMDdCLGNBQWNFLG9CQUFzQixFQUN6QzU3QixLQUFLMDdCLGNBQWN2RSxRQUFTLEVBQzVCbjNCLEtBQUswN0IsY0FBY3ZHLFFBQVMsQ0FBSyxFQUczQixLQUFBOEQsVUFBWSxDQUFDQyxFQUFnQjlFLEtBQy9CcDBCLEtBQUt3NkIsZ0JBQWtCRixHQUFjRyxXQUN4Q3hJLEdBQWdCa0gsYUFBYW41QixLQUFLNjdCLGdCQUFpQjNDLEVBQVE5RSxHQUU1RHAwQixLQUFLMDdCLGNBQWNuRyxVQUFZLEVBQzNCdjFCLEtBQUs2N0IsZ0JBQWdCMTVCLFFBQVErMkIsRUFBUyxHQUFHekUsWUFBY3owQixLQUFLNjdCLGdCQUFnQnJILFNBQy9FeDBCLEtBQUswN0IsY0FBY2pHLFlBQWMsRUFDakN6MUIsS0FBSzA3QixjQUFjRSxvQkFBc0IsRUFDekNyOEIsUUFBUUMsSUFBSSx3QkFFWlEsS0FBSzA3QixjQUFjRSxxQkFBdUIsRUFDMUNyOEIsUUFBUUMsSUFBSSx5QkFBMkJRLEtBQUswN0IsY0FBY0UsdUJBRXZENTdCLEtBQUt3NkIsZ0JBQWtCRixHQUFjZ0Isa0JBQW9CeDJCLEVBQWFyRCxjQUFjMEUsZ0JBQWtCbkcsS0FBSzA2QixnQ0FFcEcxNkIsS0FBS3c2QixnQkFBa0JGLEdBQWNHLFlBRC9DMzFCLEVBQWFzMEIsVUFJZHQwQixFQUFhZzBCLHFCQUFvQixHQUNqQ3R2QixZQUFXLEtBQ1ZqSyxRQUFRQyxJQUFJLDJCQUNaUSxLQUFLNjRCLGVBQWUsR0FDbEIsSUFBSyxFQUdGLEtBQUFBLGNBQWdCLEtBQ3RCLElBQUlpRCxFQUFzQjk3QixLQUFLZzVCLG1CQUFzQixJQUFNLElBRTNELE1BQU0rQyxFQUFnQixLQUNyQmozQixFQUFhZzBCLHFCQUFvQixJQUM3Qjk0QixLQUFLdzZCLGdCQUFrQkYsR0FBY2dCLGtCQUFvQngyQixFQUFhckQsY0FBYzBFLGdCQUFrQm5HLEtBQUswNkIsZ0NBRXBHMTZCLEtBQUt3NkIsZ0JBQWtCRixHQUFjRyxZQUQvQzMxQixFQUFhazNCLGdDQUlWaDhCLEtBQUtnNUIsbUJBQ1JsMEIsRUFBYTZ6QixhQUFhMzRCLEtBQUs0NEIsb0JBRS9CcjVCLFFBQVFDLElBQUkscUJBQ1pRLEtBQUtxNEIsVUFLZ0IsSUFBSTcwQixTQUFjQyxJQUN4QytGLFlBQVcsS0FDVi9GLEdBQVMsR0FDUHE0QixFQUFtQixJQUlSdDdCLE1BQUssS0FDbkJ1N0IsR0FBZSxHQUNkLEVBSUksS0FBQW5ELGdCQUFrQixLQUN4QixJQUFJcUQsRUFBWUMsRUFBT0MsRUFBT0MsRUFFOUIsR0FDQ0gsRUFBYTUzQixFQUFTckUsS0FBSzA3QixjQUFjejRCLGFBQ2pDakQsS0FBSzA3QixjQUFjQyxVQUFVajVCLFNBQVN1NUIsSUFDOUNqOEIsS0FBSzA3QixjQUFjQyxVQUFVLzVCLEtBQUtxNkIsR0FDbkMsR0FDQ0MsRUFBUTczQixFQUFTckUsS0FBSzA3QixjQUFjejRCLGFBQzVCZzVCLEdBQWNDLEdBQ3ZCLEdBQ0NDLEVBQVE5M0IsRUFBU3JFLEtBQUswN0IsY0FBY3o0QixhQUM1Qmc1QixHQUFjRSxHQUFTRCxHQUFTQyxHQUN6QyxHQUNDQyxFQUFRLzNCLEVBQVNyRSxLQUFLMDdCLGNBQWN6NEIsYUFDNUJnNUIsR0FBY0csR0FBU0YsR0FBU0UsR0FBU0QsR0FBU0MsR0FFM0QsSUFBSUMsRUFBZ0IsQ0FBQ0osRUFBWUMsRUFBT0MsRUFBT0MsR0FDL0N6M0IsRUFBYTAzQixHQUViLElBQUl2ckIsRUFBUyxDQUNaNGpCLE1BQU8sWUFBYzEwQixLQUFLczhCLGVBQWlCLElBQU1MLEVBQVc5NEIsU0FDNUQyeEIsUUFBUzkwQixLQUFLczhCLGVBQ2R2SCxRQUFTa0gsRUFBVzk0QixTQUNwQmdJLFdBQVksR0FDWm9wQixPQUFRdjBCLEtBQUswN0IsY0FBY3JHLFNBQzNCdHpCLFlBQWFrNkIsRUFBVzk0QixTQUN4QnF4QixRQUFTeUgsRUFBV00sU0FDcEJwNkIsUUFBUyxDQUNSLENBQ0NzeUIsV0FBWTRILEVBQWMsR0FBR2w1QixTQUM3QnVHLFdBQVkyeUIsRUFBYyxHQUFHRSxVQUU5QixDQUNDOUgsV0FBWTRILEVBQWMsR0FBR2w1QixTQUM3QnVHLFdBQVkyeUIsRUFBYyxHQUFHRSxVQUU5QixDQUNDOUgsV0FBWTRILEVBQWMsR0FBR2w1QixTQUM3QnVHLFdBQVkyeUIsRUFBYyxHQUFHRSxVQUU5QixDQUNDOUgsV0FBWTRILEVBQWMsR0FBR2w1QixTQUM3QnVHLFdBQVkyeUIsRUFBYyxHQUFHRSxZQU9oQyxPQUZBdjhCLEtBQUs2N0IsZ0JBQWtCL3FCLEVBQ3ZCOVEsS0FBS3M4QixnQkFBa0IsRUFDaEJ4ckIsQ0FBTSxFQUdQLEtBQUF1cUIsY0FBaUJsRyxJQUNuQm4xQixLQUFLdzZCLGdCQUFrQkYsR0FBY0csVUFDeEN6NkIsS0FBS3c4Qix1QkFBdUJySCxHQUNsQm4xQixLQUFLdzZCLGdCQUFrQkYsR0FBY2dCLGtCQUMvQ3Q3QixLQUFLeThCLDhCQUE4QnRILElBSTlCLEtBQUFxSCx1QkFBMEJySCxJQUNoQyxNQUFNcHlCLEVBQWEvQyxLQUFLbzdCLFlBQVlwdUIsTUFDVixNQUF0QmhOLEtBQUswN0IsZ0JBQ1IxN0IsS0FBSzA3QixjQUFjdkcsT0FBU0EsRUFDNUJsRCxHQUFnQnlLLFdBQVcxOEIsS0FBSzA3QixjQUFldkcsSUFFaEQ1MUIsUUFBUUMsSUFBSSxrQkFBb0J1RCxFQUFVc3lCLFVBQzFDMTBCLEVBQWdCZzhCLGNBQWM1NUIsRUFBVy9DLEtBQUs2ZixJQUFJOFosY0FDbEQzNUIsS0FBS3k3QixXQUFXMTRCLEVBQVUsRUFHcEIsS0FBQTA1Qiw4QkFBaUN0SCxJQUN2QyxNQUFNcHlCLEVBQVkvQyxLQUFLODFCLFFBQVE5MUIsS0FBS3U3QiwwQkFNcENoOEIsUUFBUUMsSUFBSSxlQUFpQnVELEVBQVVzeUIsVUFDdkMxMEIsRUFBZ0JnOEIsY0FBYzU1QixFQUFXL0MsS0FBSzZmLElBQUk4WixjQUNsRDM1QixLQUFLeTdCLFdBQVcxNEIsRUFBVSxFQUdwQixLQUFBaTJCLGlCQUFtQixLQUV6QixJQUFJNEQsR0FBbUIsRUFFdkIsT0FBSTU4QixLQUFLMDdCLGNBQWN2RyxTQUVuQm4xQixLQUFLMDdCLGNBQWNqRyxZQUFjLEdBRXBDbDJCLFFBQVFDLElBQUksc0JBQXdCUSxLQUFLMDdCLGNBQWNyRyxVQUVuRHIxQixLQUFLMDdCLGNBQWNyRyxVQUFZcjFCLEtBQUsrNkIsWUFFdkN4N0IsUUFBUUMsSUFBSSx5QkFDWlEsS0FBSzA3QixjQUFjdkcsUUFBUyxFQUN4Qm4xQixLQUFLdzZCLGdCQUFrQkYsR0FBY0csV0FDeEN4SSxHQUFnQnlLLFdBQVcxOEIsS0FBSzA3QixlQUFlLEdBRWhENTJCLEVBQWErM0IsZ0JBQ2JELEdBQW1CLElBSW5CcjlCLFFBQVFDLElBQUksb0JBQ2tCLE1BQTFCUSxLQUFLbzdCLFlBQVl0QixPQUVwQmgxQixFQUFhKzNCLGdCQUNidDlCLFFBQVFDLElBQUksd0JBQ1JRLEtBQUt3NkIsZ0JBQWtCRixHQUFjRyxVQUN4Q3o2QixLQUFLbzdCLFlBQWNwN0IsS0FBS283QixZQUFZdEIsTUFFcEM5NUIsS0FBS3U3QiwyQkFFTnY3QixLQUFLcTdCLGVBQWMsS0FHbkI5N0IsUUFBUUMsSUFBSSxxQkFDWlEsS0FBSzA3QixjQUFjdkcsUUFBUyxFQUN4Qm4xQixLQUFLdzZCLGdCQUFrQkYsR0FBY0csV0FDeEN4SSxHQUFnQnlLLFdBQVcxOEIsS0FBSzA3QixlQUFlLEdBRWhENTJCLEVBQWErM0IsZ0JBQ2JELEdBQW1CLE1BR1g1OEIsS0FBSzA3QixjQUFjRSxxQkFBdUIsR0FBSzU3QixLQUFLMDdCLGNBQWNuRyxVQUFZLEtBRXhGaDJCLFFBQVFDLElBQUksc0JBQXdCUSxLQUFLMDdCLGNBQWNyRyxVQUNuRHIxQixLQUFLMDdCLGNBQWNyRyxTQUFXcjFCLEtBQUsrMUIsY0FFdEMvMUIsS0FBSysxQixZQUFjLzFCLEtBQUswN0IsY0FBY3JHLFVBRW5DcjFCLEtBQUswN0IsY0FBY3JHLFVBQVksR0FFbEM5MUIsUUFBUUMsSUFBSSwwQkFDWm85QixHQUFtQixFQUNuQjU4QixLQUFLMDdCLGNBQWN2RyxRQUFTLEVBQ3hCbjFCLEtBQUt3NkIsZ0JBQWtCRixHQUFjRyxXQUN4Q3hJLEdBQWdCeUssV0FBVzE4QixLQUFLMDdCLGVBQWUsS0FJaERuOEIsUUFBUUMsSUFBSSx3QkFDaUIsTUFBekJRLEtBQUtvN0IsWUFBWWx2QixNQUVwQjNNLFFBQVFDLElBQUksdUJBQ1JRLEtBQUt3NkIsZ0JBQWtCRixHQUFjRyxVQUN4Q3o2QixLQUFLbzdCLFlBQWNwN0IsS0FBS283QixZQUFZbHZCLEtBRXBDbE0sS0FBS3U3QiwyQkFFTnY3QixLQUFLcTdCLGVBQWMsS0FHbkI5N0IsUUFBUUMsSUFBSSx1QkFDWm85QixHQUFtQixFQUNuQjU4QixLQUFLMDdCLGNBQWN2RyxRQUFTLEVBQ3hCbjFCLEtBQUt3NkIsZ0JBQWtCRixHQUFjRyxXQUN4Q3hJLEdBQWdCeUssV0FBVzE4QixLQUFLMDdCLGVBQWUsTUFNNUNrQixFQUFnQixFQTlVdkI1OEIsS0FBS2dCLFFBQVVBLEVBQ2ZoQixLQUFLdTRCLFlBQWNBLEVBQ25CdjRCLEtBQUtzOEIsZUFBaUIsRUFDdEIvOEIsUUFBUUMsSUFBSSxtQkFDWnNGLEVBQWF5MEIscUJBQXFCdjVCLEtBQUtpNUIsV0FDdkNuMEIsRUFBYTAwQixlQUFleDVCLEtBQUsyNkIsZ0JBQ2xDLENBRU9sQixJQUFJcUQsR0FDVjk4QixLQUFLNmYsSUFBTWlkLEVBQ1g5OEIsS0FBSzQ2QixhQUFhNTZCLEtBQUt3NkIsZUFBZWg2QixNQUFLc1EsSUFDMUN2UixRQUFRQyxJQUFJUSxLQUFLMDdCLGVBQ2pCMTdCLEtBQUt1NEIsWUFBWXFCLFlBQVksR0FFL0IsQ0FFTzNCLDBCQUEwQmhhLEdBRWhDamUsS0FBS3c2QixjQUFnQjF0QixTQUFTOU0sS0FBSyszQix1QkFBdUIvcUIsT0FDMURoTixLQUFLNDZCLGFBQWE1NkIsS0FBS3c2QixlQUFlaDZCLE1BQUssUUFHNUMsQ0E0VGdCNjNCLFFBQ2ZwRyxHQUFnQjhLLGFBQWEvOEIsS0FBSzgxQixRQUFTOTFCLEtBQUsrMUIsWUFBYS8xQixLQUFLZzJCLGVBQ2xFbHhCLEVBQWF3ekIsVUFDYnQ0QixLQUFLNmYsSUFBSTBZLFlBQVlDLFdBQ3RCLEVDaFlNLE1BQU13RSxHQUlaM3FCLGNBQ3NCLG9CQUFWNHFCLE1BQ1ZqOUIsS0FBS2s5QixlQUFpQkQsTUFFdEJqOUIsS0FBS2s5QixlQUFpQixJQUV4QixDQUVPQyxZQUFZL3JCLEdBQ1UsT0FBeEJwUixLQUFLazlCLGdCQUNSbDlCLEtBQUtrOUIsZUFBZXpnQixLQUFLckwsRUFFM0IsQ0FFT3dvQixhQUNzQixPQUF4QjU1QixLQUFLazlCLGVBQ1JsOUIsS0FBS2s5QixlQUFlemdCLEtBQUssVUFHekJsZCxRQUFRQyxJQUFJLDhCQUVkLENBRU9nNUIsWUFDc0IsT0FBeEJ4NEIsS0FBS2s5QixlQUNSbDlCLEtBQUtrOUIsZUFBZXpnQixLQUFLLFNBR3pCbGQsUUFBUUMsSUFBSSx3QkFFZCxFQ2xCRDRoQixHQW5CVyxXQUNHLFNBa0JpQixPQ3RCL0IsSUFBSXpRLEtBQUsseUJBQXlCOEMsR0FBYSxDQUFULE1BQU0ycEIsSUFBRyxDQUFDLFNBQVNBLEdBQUVBLEVBQUVDLEdBQUcsT0FBTyxJQUFJNzVCLFNBQVEsU0FBVTg1QixHQUFHLElBQUlwOUIsRUFBRSxJQUFJcTlCLGVBQWVyOUIsRUFBRXM5QixNQUFNblcsVUFBVSxTQUFTK1YsR0FBR0UsRUFBRUYsRUFBRWorQixLQUFLLEVBQUVpK0IsRUFBRTlWLFlBQVkrVixFQUFFLENBQUNuOUIsRUFBRXU5QixPQUFRLEdBQUUsQ0FBdUssU0FBU0gsR0FBRUYsRUFBRUMsSUFBSSxNQUFNQSxHQUFHQSxFQUFFRCxFQUFFMTRCLFVBQVUyNEIsRUFBRUQsRUFBRTE0QixRQUFRLElBQUksSUFBSTQ0QixFQUFFLEVBQUVwOUIsRUFBRSxJQUFJbUcsTUFBTWczQixHQUFHQyxFQUFFRCxFQUFFQyxJQUFJcDlCLEVBQUVvOUIsR0FBR0YsRUFBRUUsR0FBRyxPQUFPcDlCLENBQUMsQ0FBQyxTQUFTQSxHQUFFazlCLEVBQUVDLEdBQUcsSUFBSW45QixFQUFFLEdBQUcsb0JBQW9CdzlCLFFBQVEsTUFBTU4sRUFBRU0sT0FBT0MsVUFBVSxDQUFDLEdBQUd0M0IsTUFBTWdJLFFBQVErdUIsS0FBS2w5QixFQUFFLFNBQVNrOUIsRUFBRUMsR0FBRyxHQUFHRCxFQUFFLENBQUMsR0FBRyxpQkFBaUJBLEVBQUUsT0FBT0UsR0FBRUYsRUFBRUMsR0FBRyxJQUFJbjlCLEVBQUUyUyxPQUFPRSxVQUFVMGIsU0FBU2hTLEtBQUsyZ0IsR0FBRzc1QixNQUFNLEdBQUcsR0FBRyxNQUFNLFdBQVdyRCxHQUFHazlCLEVBQUUvcUIsY0FBY25TLEVBQUVrOUIsRUFBRS9xQixZQUFZTyxNQUFNLFFBQVExUyxHQUFHLFFBQVFBLEVBQUVtRyxNQUFNd1IsS0FBS3VsQixHQUFHLGNBQWNsOUIsR0FBRywyQ0FBMkMwbUIsS0FBSzFtQixHQUFHbzlCLEdBQUVGLEVBQUVDLFFBQUcsQ0FBTSxDQUFDLENBQTNSLENBQTZSRCxLQUFLQyxHQUFHRCxHQUFHLGlCQUFpQkEsRUFBRTE0QixPQUFPLENBQUN4RSxJQUFJazlCLEVBQUVsOUIsR0FBRyxJQUFJMEUsRUFBRSxFQUFFLE9BQU8sV0FBVyxPQUFPQSxHQUFHdzRCLEVBQUUxNEIsT0FBTyxDQUFDaVksTUFBSyxHQUFJLENBQUNBLE1BQUssRUFBRzNQLE1BQU1vd0IsRUFBRXg0QixLQUFLLENBQUMsQ0FBQyxNQUFNLElBQUk2VixVQUFVLHdJQUF3SSxDQUFDLE9BQU92YSxFQUFFazlCLEVBQUVNLE9BQU9DLGFBQWFDLEtBQUtDLEtBQUszOUIsRUFBRSxDQUFDLElBQUl5USxLQUFLLHVCQUF1QjhDLEdBQWEsQ0FBVCxNQUFNMnBCLElBQUcsQ0FBQyxJQUFJeDRCLEdBQUUsV0FBVyxJQUFJdzRCLEVBQUVwOUIsS0FBS0EsS0FBS3NTLFFBQVEsSUFBSTlPLFNBQVEsU0FBVTY1QixFQUFFQyxHQUFHRixFQUFFMzVCLFFBQVE0NUIsRUFBRUQsRUFBRTE1QixPQUFPNDVCLENBQUUsR0FBRSxFQUFFLFNBQVNRLEdBQUVWLEVBQUVDLEdBQUcsSUFBSUMsRUFBRTM5QixTQUFTazRCLEtBQUssT0FBTyxJQUFJa0csSUFBSVgsRUFBRUUsR0FBR3pGLE9BQU8sSUFBSWtHLElBQUlWLEVBQUVDLEdBQUd6RixJQUFJLENBQUMsSUFBSWhvQixHQUFFLFNBQVN1dEIsRUFBRUMsR0FBR3I5QixLQUFLbVYsS0FBS2lvQixFQUFFdnFCLE9BQU8wTixPQUFPdmdCLEtBQUtxOUIsRUFBRSxFQUFFLFNBQVN2cEIsR0FBRXNwQixFQUFFQyxFQUFFQyxHQUFHLE9BQU9BLEVBQUVELEVBQUVBLEVBQUVELEdBQUdBLEdBQUdBLEdBQUdBLEVBQUU1OEIsT0FBTzQ4QixFQUFFNTVCLFFBQVFDLFFBQVEyNUIsSUFBSUMsRUFBRUQsRUFBRTU4QixLQUFLNjhCLEdBQUdELEVBQUUsQ0FBQyxTQUFTOXZCLEtBQUksQ0FBQyxJQUFJMHdCLEdBQUUsQ0FBQzdvQixLQUFLLGdCQUFnQixTQUFTOG9CLEdBQUViLEVBQUVDLEdBQUcsSUFBSUEsRUFBRSxPQUFPRCxHQUFHQSxFQUFFNThCLEtBQUs0OEIsRUFBRTU4QixLQUFLOE0sSUFBRzlKLFFBQVFDLFNBQVMsQ0FBQyxJQUFJeTZCLEdBQUUsU0FBU1osR0FBRyxJQUFJcDlCLEVBQUVvTixFQUFFLFNBQVM0d0IsRUFBRWQsRUFBRUMsR0FBRyxJQUFJbjlCLEVBQUVvTixFQUFFLFlBQU8sSUFBUyt2QixJQUFJQSxFQUFFLENBQUMsSUFBSW45QixFQUFFbzlCLEVBQUU3Z0IsS0FBS3pjLE9BQU9BLE1BQU1tK0IsR0FBRyxDQUFDLEVBQUVqK0IsRUFBRWsrQixHQUFHLEVBQUVsK0IsRUFBRW0rQixHQUFHLElBQUl6NUIsR0FBRTFFLEVBQUVvK0IsR0FBRyxJQUFJMTVCLEdBQUUxRSxFQUFFcStCLEdBQUcsSUFBSTM1QixHQUFFMUUsRUFBRXMrQixHQUFHLEVBQUV0K0IsRUFBRXUrQixHQUFHLElBQUlobUIsSUFBSXZZLEVBQUV3K0IsR0FBRyxXQUFXLElBQUl0QixFQUFFbDlCLEVBQUU2bEIsR0FBR3NYLEVBQUVELEVBQUV1QixXQUFXeitCLEVBQUVrK0IsR0FBRyxJQUFJTixHQUFFVCxFQUFFdUIsVUFBVTErQixFQUFFMitCLEdBQUdwUSxhQUFhcVEsWUFBWTcwQixNQUFNL0osRUFBRXMrQixHQUFHLEtBQUt0K0IsRUFBRTYrQixHQUFHMUIsRUFBRUQsRUFBRXZnQixvQkFBb0IsY0FBYzNjLEVBQUV3K0IsTUFBTXgrQixFQUFFOCtCLEdBQUczQixFQUFFbjlCLEVBQUV1K0IsR0FBR3gyQixJQUFJbzFCLEdBQUduOUIsRUFBRW0rQixHQUFHNTZCLFFBQVE0NUIsTUFBTW45QixFQUFFaytCLEdBQUdmLEVBQUV6NUIsaUJBQWlCLGNBQWMxRCxFQUFFKytCLEdBQUcsRUFBRS8rQixFQUFFKytCLEdBQUcsU0FBUzdCLEdBQUcsSUFBSUMsRUFBRW45QixFQUFFNmxCLEdBQUd1WCxFQUFFRixFQUFFN2hCLE9BQU8zVyxFQUFFMDRCLEVBQUU0QixNQUFNcEIsRUFBRVIsSUFBSXA5QixFQUFFNitCLEdBQUdqckIsRUFBRSxDQUFDcXJCLEdBQUc3QixFQUFFOEIsV0FBV3RCLEVBQUV1QixjQUFjakMsSUFBSVUsR0FBRzU5QixFQUFFby9CLEtBQUt4ckIsRUFBRXlyQixVQUFTLEdBQUlyL0IsRUFBRXMvQixjQUFjLElBQUkzdkIsR0FBRWpMLEVBQUVrUCxJQUFJLGNBQWNsUCxFQUFFMUUsRUFBRXUvQixHQUFHOXVCLEtBQUtuSCxZQUFXLFdBQVksY0FBYzVFLEdBQUd5NEIsRUFBRXFDLFVBQVVwQyxHQUFHcDlCLEVBQUVzL0IsY0FBYyxJQUFJM3ZCLEdBQUUsVUFBVWlFLEdBQUksR0FBRSxLQUFLLGVBQWVsUCxJQUFJdW9CLGFBQWFqdEIsRUFBRXUvQixJQUFJM0IsR0FBRzU5QixFQUFFbytCLEdBQUc3NkIsUUFBUTY1QixHQUFHLEVBQUVwOUIsRUFBRXkvQixHQUFHLFNBQVN2QyxHQUFHLElBQUlDLEVBQUVuOUIsRUFBRTgrQixHQUFHMUIsRUFBRUQsSUFBSS9VLFVBQVVzWCxjQUFjQyxXQUFXMy9CLEVBQUVzL0IsY0FBYyxJQUFJM3ZCLEdBQUUsY0FBYyxDQUFDdXZCLFdBQVc5QixFQUFFK0IsY0FBY2pDLEVBQUUrQixHQUFHOUIsRUFBRWtDLFNBQVNyL0IsRUFBRW8vQixNQUFNaEMsR0FBR3A5QixFQUFFcStCLEdBQUc5NkIsUUFBUTQ1QixFQUFFLEVBQUVuOUIsRUFBRTQvQixJQUFJeHlCLEVBQUUsU0FBUzh2QixHQUFHLElBQUlDLEVBQUVELEVBQUVqK0IsS0FBS20rQixFQUFFRixFQUFFMkMsTUFBTW43QixFQUFFdzRCLEVBQUU0QyxPQUFPLE9BQU9sc0IsR0FBRTVULEVBQUUrL0IsU0FBUSxXQUFZLy9CLEVBQUV1K0IsR0FBRy9uQixJQUFJOVIsSUFBSTFFLEVBQUVzL0IsY0FBYyxJQUFJM3ZCLEdBQUUsVUFBVSxDQUFDMVEsS0FBS2srQixFQUFFZ0MsY0FBY2pDLEVBQUUyQyxNQUFNekMsRUFBRTZCLEdBQUd2NkIsSUFBSyxHQUFFLEVBQUUsV0FBVyxJQUFJLElBQUl3NEIsRUFBRSxHQUFHQyxFQUFFLEVBQUVBLEVBQUU3TSxVQUFVOXJCLE9BQU8yNEIsSUFBSUQsRUFBRUMsR0FBRzdNLFVBQVU2TSxHQUFHLElBQUksT0FBTzc1QixRQUFRQyxRQUFRNkosRUFBRStPLE1BQU1yYyxLQUFLbzlCLEdBQXFDLENBQWpDLE1BQU1BLEdBQUcsT0FBTzU1QixRQUFRRSxPQUFPMDVCLEVBQUUsQ0FBQyxHQUFHbDlCLEVBQUUyK0IsR0FBR3pCLEVBQUVsOUIsRUFBRWkrQixHQUFHZCxFQUFFL1UsVUFBVXNYLGNBQWNoOEIsaUJBQWlCLFVBQVUxRCxFQUFFNC9CLElBQUk1L0IsQ0FBQyxDQUFDb04sRUFBRWd3QixHQUFHcDlCLEVBQUVnK0IsR0FBR25yQixVQUFVRixPQUFPSyxPQUFPNUYsRUFBRXlGLFdBQVc3UyxFQUFFNlMsVUFBVVYsWUFBWW5TLEVBQUVBLEVBQUVnZ0MsVUFBVTV5QixFQUFFLElBQU02eUIsRUFBSUMsRUFBRWxDLEVBQUVuckIsVUFBVSxPQUFPcXRCLEVBQUVDLFNBQVMsU0FBU2pELEdBQUcsSUFBSUMsUUFBRyxJQUFTRCxFQUFFLENBQUMsRUFBRUEsR0FBR2tELFVBQVVoRCxPQUFFLElBQVNELEdBQUdBLEVBQUUsSUFBSSxJQUFJbjlCLEVBQUVGLEtBQUssT0FBTyxTQUFTbzlCLEVBQUVDLEdBQUcsSUFBSUMsRUFBRUYsSUFBSSxPQUFHRSxHQUFHQSxFQUFFOThCLEtBQVk4OEIsRUFBRTk4QixLQUFLNjhCLEdBQVVBLEdBQUksQ0FBakUsRUFBbUUsV0FBWSxJQUFJQyxHQUFHLGFBQWE1MkIsU0FBUzY1QixXQUFXLE9BQU90QyxHQUFFLElBQUl6NkIsU0FBUSxTQUFVNDVCLEdBQUcsT0FBTzE5QixPQUFPa0UsaUJBQWlCLE9BQU93NUIsRUFBRyxJQUFJLElBQUUsV0FBWSxPQUFPbDlCLEVBQUVvL0IsR0FBR2tCLFFBQVFsWSxVQUFVc1gsY0FBY0MsWUFBWTMvQixFQUFFdWdDLEdBQUd2Z0MsRUFBRXdnQyxLQUFLNXNCLEdBQUU1VCxFQUFFazFCLE1BQUssU0FBVWdJLEdBQUdsOUIsRUFBRTZsQixHQUFHcVgsRUFBRWw5QixFQUFFdWdDLEtBQUt2Z0MsRUFBRTgrQixHQUFHOStCLEVBQUV1Z0MsR0FBR3ZnQyxFQUFFbytCLEdBQUc3NkIsUUFBUXZELEVBQUV1Z0MsSUFBSXZnQyxFQUFFcStCLEdBQUc5NkIsUUFBUXZELEVBQUV1Z0MsSUFBSXZnQyxFQUFFdWdDLEdBQUc3OEIsaUJBQWlCLGNBQWMxRCxFQUFFKytCLEdBQUcsQ0FBQzBCLE1BQUssS0FBTSxJQUFJdEQsRUFBRW45QixFQUFFNmxCLEdBQUcyWixRQUFRLE9BQU9yQyxHQUFHUyxHQUFFVCxFQUFFdUIsVUFBVTErQixFQUFFMitCLEdBQUdwUSxjQUFjdnVCLEVBQUU4K0IsR0FBRzNCLEVBQUU3NUIsUUFBUUMsVUFBVWpELE1BQUssV0FBWU4sRUFBRXMvQixjQUFjLElBQUkzdkIsR0FBRSxVQUFVLENBQUNzdkIsR0FBRzlCLEVBQUV1RCwwQkFBeUIsSUFBTSxJQUFHcGdDLE1BQUssV0FBYSxLQUFJTixFQUFFOCtCLEtBQUs5K0IsRUFBRW0rQixHQUFHNTZCLFFBQVF2RCxFQUFFOCtCLElBQUk5K0IsRUFBRXUrQixHQUFHeDJCLElBQUkvSCxFQUFFOCtCLEtBQUs5K0IsRUFBRTZsQixHQUFHbmlCLGlCQUFpQixjQUFjMUQsRUFBRXcrQixJQUFJcFcsVUFBVXNYLGNBQWNoOEIsaUJBQWlCLG1CQUFtQjFELEVBQUV5L0IsSUFBSXovQixFQUFFNmxCLEVBQUcsR0FBRyxHQUFvQyxDQUFqQyxNQUFNcVgsR0FBRyxPQUFPNTVCLFFBQVFFLE9BQU8wNUIsRUFBRSxDQUFDLEVBQUVnRCxFQUFFelksT0FBTyxXQUFXLElBQUksT0FBTzNuQixLQUFLK2xCLEdBQUdrWSxHQUFFaitCLEtBQUsrbEIsR0FBRzRCLGVBQVUsQ0FBd0MsQ0FBakMsTUFBTXlWLEdBQUcsT0FBTzU1QixRQUFRRSxPQUFPMDVCLEVBQUUsQ0FBQyxFQUFFZ0QsRUFBRUgsTUFBTSxXQUFXLFlBQU8sSUFBU2pnQyxLQUFLZy9CLEdBQUd4N0IsUUFBUUMsUUFBUXpELEtBQUtnL0IsSUFBSWgvQixLQUFLcStCLEdBQUcvckIsT0FBTyxFQUFFOHRCLEVBQUVTLFVBQVUsU0FBU3hELEdBQUcsSUFBSSxPQUFPdnBCLEdBQUU5VCxLQUFLaWdDLFNBQVEsU0FBVTNDLEdBQUcsT0FBT0YsR0FBRUUsRUFBRUQsRUFBRyxHQUFvQyxDQUFqQyxNQUFNRCxHQUFHLE9BQU81NUIsUUFBUUUsT0FBTzA1QixFQUFFLENBQUMsRUFBRWdELEVBQUVVLG1CQUFtQixXQUFXOWdDLEtBQUsrbEIsSUFBSS9sQixLQUFLK2xCLEdBQUcyWixTQUFTdEMsR0FBRXA5QixLQUFLK2xCLEdBQUcyWixRQUFRMUIsR0FBRSxFQUFFb0MsRUFBRU0sR0FBRyxXQUFXLElBQUl0RCxFQUFFOVUsVUFBVXNYLGNBQWNDLFdBQVcsT0FBT3pDLEdBQUdVLEdBQUVWLEVBQUV3QixVQUFVNStCLEtBQUs2K0IsR0FBR3BRLFlBQVkyTyxPQUFFLENBQU0sRUFBRWdELEVBQUVoTCxHQUFHLFdBQVcsSUFBSSxJQUFJZ0ksRUFBRXA5QixLQUFLLE9BQU8sU0FBU285QixFQUFFQyxHQUFHLElBQUksSUFBSUMsRUFBRUYsR0FBd0IsQ0FBcEIsTUFBTUEsR0FBRyxPQUFPQyxFQUFFRCxFQUFFLENBQUMsT0FBR0UsR0FBR0EsRUFBRTk4QixLQUFZODhCLEVBQUU5OEIsVUFBSyxFQUFPNjhCLEdBQVVDLENBQUMsQ0FBOUYsRUFBZ0csV0FBWSxPQUFPeHBCLEdBQUV3VSxVQUFVc1gsY0FBY1MsU0FBU2pELEVBQUV5QixHQUFHekIsRUFBRWUsS0FBSSxTQUFVZCxHQUFHLE9BQU9ELEVBQUVvQixHQUFHTSxZQUFZNzBCLE1BQU1vekIsQ0FBRSxHQUFHLElBQUUsU0FBVUQsR0FBRyxNQUFNQSxDQUFFLEdBQW9DLENBQWpDLE1BQU1BLEdBQUcsT0FBTzU1QixRQUFRRSxPQUFPMDVCLEVBQUUsQ0FBQyxHQUFPK0MsRUFBRSxDQUFDLENBQUN6c0IsSUFBSSxTQUFTclUsSUFBSSxXQUFXLE9BQU9XLEtBQUtzK0IsR0FBR2hzQixPQUFPLEdBQUcsQ0FBQ29CLElBQUksY0FBY3JVLElBQUksV0FBVyxPQUFPVyxLQUFLdStCLEdBQUdqc0IsT0FBTyxNQUFwbkosU0FBVzhxQixFQUFFQyxHQUFHLElBQUksSUFBSUMsRUFBRSxFQUFFQSxFQUFFRCxFQUFFMzRCLE9BQU80NEIsSUFBSSxDQUFDLElBQUlwOUIsRUFBRW05QixFQUFFQyxHQUFHcDlCLEVBQUU2Z0MsV0FBVzdnQyxFQUFFNmdDLGFBQVksRUFBRzdnQyxFQUFFOGdDLGNBQWEsRUFBRyxVQUFVOWdDLElBQUlBLEVBQUUrZ0MsVUFBUyxHQUFJcHVCLE9BQU9xdUIsZUFBZTlELEVBQUVsOUIsRUFBRXdULElBQUl4VCxFQUFFLENBQUMsQ0FBcTlJbTlCLENBQTFIYSxFQUE4SG5yQixVQUFVb3RCLEdBQWFqQyxDQUFDLENBQTd0RyxDQUErdEcsV0FBVyxTQUFTZCxJQUFJcDlCLEtBQUttaEMsR0FBRyxJQUFJaHJCLEdBQUcsQ0FBQyxJQUFJa25CLEVBQUVELEVBQUVycUIsVUFBVSxPQUFPc3FCLEVBQUV6NUIsaUJBQWlCLFNBQVN3NUIsRUFBRUMsR0FBR3I5QixLQUFLb2hDLEdBQUdoRSxHQUFHbjFCLElBQUlvMUIsRUFBRSxFQUFFQSxFQUFFeGdCLG9CQUFvQixTQUFTdWdCLEVBQUVDLEdBQUdyOUIsS0FBS29oQyxHQUFHaEUsR0FBRzFsQixPQUFPMmxCLEVBQUUsRUFBRUEsRUFBRW1DLGNBQWMsU0FBU3BDLEdBQUdBLEVBQUU3aEIsT0FBT3ZiLEtBQUssSUFBSSxJQUFJcTlCLEVBQUVDLEVBQUVwOUIsR0FBRUYsS0FBS29oQyxHQUFHaEUsRUFBRWpvQixTQUFTa29CLEVBQUVDLEtBQUszZ0IsT0FBTyxFQUFHMGdCLEVBQUVyd0IsT0FBT293QixFQUFHLEVBQUVDLEVBQUUrRCxHQUFHLFNBQVNoRSxHQUFHLE9BQU9wOUIsS0FBS21oQyxHQUFHenFCLElBQUkwbUIsSUFBSXA5QixLQUFLbWhDLEdBQUd2cUIsSUFBSXdtQixFQUFFLElBQUkza0IsS0FBS3pZLEtBQUttaEMsR0FBRzloQyxJQUFJKzlCLEVBQUUsRUFBRUEsQ0FBQyxDQUF6VywrU0NtQngxSixJQUFJaUUsR0FBZ0IzNkIsU0FBU0MsZUFBZSxpQkFFNUMsTUFBTSxHQUFxQyxJQUFJeWdCLGlCQUFpQixzQkE4S2hFLFNBQVNrYSxHQUEyQnJqQixHQUNWLFdBQWxCQSxFQUFNOWUsS0FBSzJ6QixLQVVuQixTQUE4QjdVLEVBQU9zakIsR0FDakMsSUFBSUMsRUFBYzk2QixTQUFTQyxlQUFlLGVBQ3RDNDZCLEVBQWdCLElBQ2hCQyxFQUFhbjRCLE1BQU1vNEIsTUFBUUYsRUFBZ0IsSUFDcENBLEdBQWlCLE1BQ3hCRixHQUFlaDRCLE1BQU1lLFFBQVUsT0FDckN0RixFQUFhNDhCLGtCQUFpQixHQUV4Qi80QixhQUFhZzVCLFFBQVExakIsRUFBTTllLEtBQUtBLEtBQUt5aUMsU0FBVSxRQUt2RCxTQUFzREEsR0FFbEQsR0FBSWxpQyxPQUFPbWlDLFFBQVMsQ0FDaEIsSUFBSUMsRUFBOEQsT0FBbkNuNUIsYUFBYUMsUUFBUWc1QixHQUVwRGxpQyxPQUFPbWlDLFFBQVFFLGFBQWFELEdBRXBDLENBWFFFLENBQTZDL2pCLEVBQU05ZSxLQUFLQSxLQUFLeWlDLFVBRXJFLENBbkJRSyxDQUFxQmhrQixFQUREblIsU0FBU21SLEVBQU05ZSxLQUFLQSxLQUFLK2lDLFdBRzNCLGVBQWxCamtCLEVBQU05ZSxLQUFLMnpCLE1BQ1h2ekIsUUFBUUMsSUFBSSw0Q0EyQnBCLFdBQ0ksSUFBSTJpQyxFQUFPLDBEQUNVLEdBQWpCQyxRQUFRRCxHQUNSemlDLE9BQU9DLFNBQVMwaUMsU0FFaEJGLEVBQU8sd0NBRWYsQ0FqQ1FHLEdBRVIsQ0FYQSxHQUFpQjErQixpQkFBaUIsVUFBVzA5QixJQTRDN0MsTUFBTXpoQixHQUFNLElBdE5MLE1BYU54TixjQUZBLEtBQUF1aEIsS0FBZSxVQUdkNXpCLEtBQUt1NEIsWUFBYyxJQUFJeUUsR0FFdkJ6OUIsUUFBUUMsSUFBSSx1QkFFWlEsS0FBS2dCLFFBQVU5QixJQUVmYyxLQUFLdWlDLFdBQWEsSUNsQ3BCLE1BS0lsd0IsWUFBWTBPLEVBQWlCeWhCLEVBQXlCQyxHQUNsRHppQyxLQUFLK2dCLFFBQVVBLEVBQ2YvZ0IsS0FBS3dpQyxnQkFBa0JBLEVBQ3ZCeGlDLEtBQUt5aUMscUJBQXVCQSxDQUNoQyxDQUVPQyxXQUFXM2hCLEdBQ2QvZ0IsS0FBSytnQixRQUFVQSxDQUNuQixDQUVPNGhCLG1CQUFtQkgsR0FDdEJ4aUMsS0FBS3dpQyxnQkFBa0JBLENBQzNCLENBRU9JLHdCQUF3QkgsR0FDM0J6aUMsS0FBS3lpQyxxQkFBdUJBLENBQ2hDLENBRU9JLDhCQUE4QjMvQixHQUM1QmxELEtBQUt5aUMscUJBQXFCL3JCLElBQUl4VCxJQUMvQmxELEtBQUt5aUMscUJBQXFCeDZCLElBQUkvRSxFQUV0QyxHRE8rQmxELEtBQUtnQixRQUFTaEIsS0FBS2dCLFFBQVMsSUFBSXlYLEtBSWpFLE1BWU1xcUIsRVR3NkJSLFNBQXNCampCLEVGM2dCdEIsU0FBZ0JqTixFQUFPLGFBQ25CLE1BQU1pTixFQUFNSCxHQUFNcmdCLElBQUl1VCxHQUN0QixJQUFLaU4sR0FBT2pOLElBQVMsR0FDakIsT0FBT29PLEtBRVgsSUFBS25CLEVBQ0QsTUFBTUssR0FBY2hOLE9BQU8sU0FBdUIsQ0FBRTZOLFFBQVNuTyxJQUVqRSxPQUFPaU4sQ0FDWCxDRWtnQjRCLElBR3hCLE1BQU1rakIsRUFBb0IsR0FGMUJsakIsRUFBTSxFQUFtQkEsR0FFbUI4TCxJQUM1QyxPQUFJb1gsRUFBa0Jsc0IsZ0JBQ1hrc0IsRUFBa0I5ckIsZUFXakMsU0FBNkI0SSxFQUFLM0ksRUFBVSxDQUFDLEdBRXpDLE1BQU02ckIsRUFBb0IsR0FBYWxqQixFQUFLOEwsSUFDNUMsR0FBSW9YLEVBQWtCbHNCLGdCQUFpQixDQUNuQyxNQUFNNkIsRUFBbUJxcUIsRUFBa0I5ckIsZUFDM0MsR0FBSXBELEVBQVVxRCxFQUFTNnJCLEVBQWtCM3FCLGNBQ3JDLE9BQU9NLEVBR1AsTUFBTSxHQUFjeEYsT0FBTyxzQkFFbkMsQ0FFQSxPQUQwQjZ2QixFQUFrQjFxQixXQUFXLENBQUVuQixXQUU3RCxDQXZCVzhyQixDQUFvQm5qQixFQUMvQixDU2g3QnFCb2pCLENBRE5qaUIsR0FYVSxDQUNyQjJFLE9BQVEsMENBQ1J1ZCxXQUFZLDRCQUNaQyxZQUFhLG1DQUNieGUsVUFBVyxZQUNYeWUsY0FBZSx3QkFDZkMsa0JBQW1CLGVBQ25CamhCLE1BQU8sNENBQ1BvSyxjQUFlLGtCQU1qQnhzQixLQUFLK3hCLFVBQVkrUSxFQUNqQnZSLEdBQVN1UixFQUFZLHlCQUNyQnZSLEdBQVN1UixFQUFXLDRCQUE0QixDQUFDLEdBRWpEdmpDLFFBQVFDLElBQUksdUJBQ2IsQ0FFYThqQyxtREFDWjVqQyxPQUFPa0UsaUJBQWlCLFFBQVEsS0FDL0JyRSxRQUFRQyxJQUFJLGtCQUNaLE1BQWEseUNwQm5FVCxTQUE0QlksNENBQ2xDLE9BQU9DLEVBQVNELEdBQUtJLE1BQUtyQixHQUFpQkEsR0FDNUMsSW9Ca0VVb2tDLENBQWF2akMsS0FBS2dCLFNBQVNSLE1BQUtyQixJQUNyQ0ksUUFBUUMsSUFBSSwwQ0FDWkQsUUFBUUMsSUFBSSxvQkFDWkQsUUFBUUMsSUFBSUwsR0FFWmEsS0FBS3VpQyxXQUFXSSxtQkFBbUJ4aUMsRUFBV0gsS0FBS2dCLFVBR25EOEQsRUFBYTArQixnQkFBZ0Jya0MsRUFBbUIsY0FFaEQsSUFBSXUwQixFQUFVdjBCLEVBQWMsUUFDeEIreUIsRUFBaUIveUIsRUFBcUIsZUFFMUMsR0FBZSxVQUFYdTBCLEVBQ0gxekIsS0FBS3lqQyxLQUFPLElBQUloTCxHQUFPejRCLEtBQUtnQixRQUFTaEIsS0FBS3U0QixrQkFDcEMsR0FBZSxjQUFYN0UsRUFBeUIsQ0FHbkMsSUFBSW9DLEVBQVUzMkIsRUFBYyxRQUU1QixJQUFLLElBQUl5RixFQUFJLEVBQUdBLEVBQUlreEIsRUFBUXB4QixPQUFRRSxJQUNuQyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSWl4QixFQUFRbHhCLEdBQUczQixNQUFNeUIsT0FBUUcsSUFBSyxDQUNqRCxJQUFJNitCLEVBR0hBLEVBREd2a0MsRUFBZSxTQUFFdUQsU0FBUyxZQUFjdkQsRUFBZSxTQUFFOEUsY0FBY3ZCLFNBQVMsd0JBQ3BFLFVBQVkxQyxLQUFLZ0IsUUFBVSxJQUFNODBCLEVBQVFseEIsR0FBRzNCLE1BQU00QixHQUFHMUIsU0FBU2MsY0FBY3JCLE9BQVMsT0FFckYsVUFBWTVDLEtBQUtnQixRQUFVLElBQU04MEIsRUFBUWx4QixHQUFHM0IsTUFBTTRCLEdBQUcxQixTQUFTUCxPQUFTLE9BR3ZGNUMsS0FBS3VpQyxXQUFXTSw4QkFBOEJhLEdBSWhEMWpDLEtBQUt1aUMsV0FBV00sOEJBQThCLFVBQVk3aUMsS0FBS2dCLFFBQVUsd0JBRXpFaEIsS0FBS3lqQyxLQUFPLElBQUlsSixHQUFXdjZCLEtBQUtnQixRQUFTaEIsS0FBS3U0QixhdEJsRzdDLElBRUZvTCxFc0JtR0EzakMsS0FBS3lqQyxLQUFLbEwsWUFBY3Y0QixLQUFLdTRCLFlBRTdCdEcsR0FBZ0IyUixTdEJwR1B0a0MsT0FEVHFrQyxFQURldmtDLElBQ0lDLElBQUksaUJBRTFCRSxRQUFRQyxJQUFJLG9CQUNabWtDLEVBQVEsZUFFRkEsR0FHRCxXQUVOLElBQUlBLEVBRGV2a0MsSUFDSUMsSUFBSSxjQUszQixPQUphQyxNQUFUcWtDLElBQ0hwa0MsUUFBUUMsSUFBSSwyQkFDWm1rQyxFQUFRLG1CQUVGQSxDQUNSLENzQnFGd0NFLElBQ25DNVIsR0FBZ0I2UixjQUFjOWpDLEtBQUsreEIsVUFBVy94QixLQUFLZ0IsU0FDbkRpeEIsR0FBZ0I4UixrQkFBa0I3UixHQUNsQ0QsR0FBZ0IrUixTQW5HTSxTQW1HZTdrQyxFQUFxQixnQkFHMURhLEtBQUt5akMsS0FBS2hLLElBQUl6NUIsS0FBSyxVQUdkQSxLQUFLaWtDLHNCQUFzQmprQyxLQUFLeWpDLEtBQ3ZDLEdBQUUsRUFwREYsRUFvREksR0FFTixJQUVNUSxzQkFBc0JSLDZDQUMzQmxrQyxRQUFRQyxJQUFJLGlDQUVSLGtCQUFtQjhvQixXQUNiLElBQUksR0FBUSxVQUFXLENBQUMsR0FFOUIrWCxXQUFXNy9CLE1BQU0wakMsSUFDbkIza0MsUUFBUUMsSUFBSSw4QkFDWlEsS0FBS21rQywrQkFBK0JELEVBQWEsSUFDL0NwZ0MsT0FBT21zQixJQUNUMXdCLFFBQVFDLElBQUksdUNBQXlDeXdCLEVBQUksSUFHMUQzSCxVQUFVc1gsY0FBY2g4QixpQkFBaUIsVUFBVzA5QixVQUU5Q2haLFVBQVVzWCxjQUFjd0UsTUFFOUI3a0MsUUFBUUMsSUFBSSxpQkFDWkQsUUFBUUMsSUFBSVEsS0FBS3VpQyxZQUVvQyxNQUFqRDU1QixhQUFhQyxRQUFRNUksS0FBS3VpQyxXQUFXeGhCLFVBQ3hDeGhCLFFBQVFDLElBQUksNkNBQ1o2aEMsR0FBZWg0QixNQUFNZSxRQUFVLE9BQ25CLEdBQWlCa2QsWUFBWSxDQUN6Qm1KLFFBQVMsUUFDVHR4QixLQUFNLENBQ0ZrbEMsUUFBU3JrQyxLQUFLdWlDLGVBSWxDbEIsR0FBZWg0QixNQUFNZSxRQUFVLE9BR2hDLEdBQWlCaWQsVUFBYXBKLElBQzdCMWUsUUFBUUMsSUFBSXllLEVBQU05ZSxLQUFLc3hCLFFBQVUsa0NBQ1AsYUFBdEJ4UyxFQUFNOWUsS0FBS3N4QixTQUEyRSxNQUFqRDluQixhQUFhQyxRQUFRNUksS0FBS3VpQyxXQUFXeGhCLFVBQzdFLEdBQWlCdUcsWUFBWSxDQUM1Qm1KLFFBQVMsUUFDVHR4QixLQUFNLENBQ0xrbEMsUUFBU3JrQyxLQUFLdWlDLGdCQU9sQmhqQyxRQUFRMkUsS0FBSyxxREFFZixJQUVBaWdDLCtCQUErQkQsU0FDOUIsSUFDeUIsUUFBeEIsRUFBQUEsYUFBWSxFQUFaQSxFQUFjdkYsa0JBQVUsU0FBRXJYLFlBQVksQ0FDckNuUyxLQUFNLGVBQ05uSSxNQUFPaE4sS0FBSzR6QixPQUVaLE1BQU8zRCxHQUNSMXdCLFFBQVFDLElBQUksdUNBQXlDeXdCLEdBRXZELENBRU8wSixhQUNOLE9BQU8zNUIsS0FBS2dCLE9BQ2IsR0FnREQ2ZSxHQUFJeWpCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy91cmxVdGlscy50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvanNvblV0aWxzLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvYXVkaW9Db250cm9sbGVyLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvbWF0aFV0aWxzLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvdWlDb250cm9sbGVyLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC93cmFwLWlkYi12YWx1ZS5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9pbnN0YWxsYXRpb25zL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FuYWx5dGljcy9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvYW5hbHl0aWNzRXZlbnRzLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL0Jhc2VRdWl6LnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL3N1cnZleS9zdXJ2ZXkudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy90Tm9kZS50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9hc3Nlc3NtZW50L2Fzc2Vzc21lbnQudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy91bml0eUJyaWRnZS50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9hcHAvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvd29ya2JveC13aW5kb3cvYnVpbGQvd29ya2JveC13aW5kb3cucHJvZC5lczUubWpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL0FwcC50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL2NhY2hlTW9kZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8qKlxuICogQ29udGFpbnMgdXRpbHMgZm9yIHdvcmtpbmcgd2l0aCBVUkwgc3RyaW5ncy5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBwVHlwZSgpOiBzdHJpbmcge1xuXHRjb25zdCBwYXRoUGFyYW1zID0gZ2V0UGF0aE5hbWUoKTtcblx0Y29uc3QgYXBwVHlwZSA9IHBhdGhQYXJhbXMuZ2V0KCdhcHBUeXBlJyk7XG5cdHJldHVybiBhcHBUeXBlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VVVJRCgpOiBzdHJpbmcge1xuXHRjb25zdCBwYXRoUGFyYW1zID0gZ2V0UGF0aE5hbWUoKTtcblx0dmFyIG51dWlkID0gcGF0aFBhcmFtcy5nZXQoJ2NyX3VzZXJfaWQnKTtcblx0aWYgKG51dWlkID09IHVuZGVmaW5lZCkge1xuXHRcdGNvbnNvbGUubG9nKFwibm8gdXVpZCBwcm92aWRlZFwiKTtcblx0XHRudXVpZCA9IFwiV2ViVXNlck5vSURcIlxuXHR9XG5cdHJldHVybiBudXVpZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJTb3VyY2UoKTogc3RyaW5nIHtcblx0Y29uc3QgcGF0aFBhcmFtcyA9IGdldFBhdGhOYW1lKCk7XG5cdHZhciBudXVpZCA9IHBhdGhQYXJhbXMuZ2V0KCd1c2VyU291cmNlJyk7XG5cdGlmIChudXVpZCA9PSB1bmRlZmluZWQpIHtcblx0XHRjb25zb2xlLmxvZyhcIm5vIHVzZXIgc291cmNlIHByb3ZpZGVkXCIpO1xuXHRcdG51dWlkID0gXCJXZWJVc2VyTm9Tb3VyY2VcIlxuXHR9XG5cdHJldHVybiBudXVpZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFGaWxlKCk6IHN0cmluZyB7XG5cdGNvbnN0IHBhdGhQYXJhbXMgPSBnZXRQYXRoTmFtZSgpO1xuXHR2YXIgZGF0YSA9IHBhdGhQYXJhbXMuZ2V0KCdkYXRhJyk7XG5cdGlmIChkYXRhID09IHVuZGVmaW5lZCkge1xuXHRcdGNvbnNvbGUubG9nKFwiZGVmYXVsdCBkYXRhIGZpbGVcIik7XG5cdFx0ZGF0YSA9IFwienVsdS1sZXR0ZXJzb3VuZHNcIjtcblx0XHQvL2RhdGEgPSBcInN1cnZleS16dWx1XCI7XG5cdH1cblx0cmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGdldFBhdGhOYW1lKCkge1xuXHRjb25zdCBxdWVyeVN0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG5cdGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlTdHJpbmcpO1xuXHRyZXR1cm4gdXJsUGFyYW1zO1xufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCIvKiogSnNvbiBVdGlscyAqL1xyXG5cclxuLy8gaW1wb3J0IHsgc2V0RmVlZGJhY2tUZXh0IH0gZnJvbSAnLi91aUNvbnRyb2xsZXInO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQXBwRGF0YSh1cmw6IHN0cmluZykge1xyXG5cdHJldHVybiBsb2FkRGF0YSh1cmwpLnRoZW4oZGF0YSA9PiB7IHJldHVybiBkYXRhOyB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQXBwVHlwZSh1cmw6IHN0cmluZykge1xyXG5cdHJldHVybiBsb2FkRGF0YSh1cmwpLnRoZW4oZGF0YSA9PiB7IFxyXG5cdFx0Ly8gc2V0RmVlZGJhY2tUZXh0KGRhdGFbXCJmZWVkYmFja1RleHRcIl0pOyBcclxuXHRcdHJldHVybiBkYXRhW1wiYXBwVHlwZVwiXTsgXHJcblx0fSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEZlZWRiYWNrKHVybDogc3RyaW5nKSB7XHJcblx0cmV0dXJuIGxvYWREYXRhKHVybCkudGhlbihkYXRhID0+IHsgcmV0dXJuIGRhdGFbXCJmZWVkYmFja1RleHRcIl07IH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hTdXJ2ZXlRdWVzdGlvbnModXJsOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gbG9hZERhdGEodXJsKS50aGVuKGRhdGEgPT4geyByZXR1cm4gZGF0YVtcInF1ZXN0aW9uc1wiXSB9KVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBc3Nlc3NtZW50QnVja2V0cyh1cmw6IHN0cmluZykge1xyXG5cdHJldHVybiBsb2FkRGF0YSh1cmwpLnRoZW4oZGF0YSA9PiB7IHJldHVybiBkYXRhW1wiYnVja2V0c1wiXSB9KVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YVVSTCh1cmw6IHN0cmluZykge1xyXG5cdHJldHVybiBcIi9kYXRhL1wiICsgdXJsICsgXCIuanNvblwiO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FzZUluZGVwZW5kZW50TGFuZ0xpc3QoKSB7XHJcblx0cmV0dXJuIFsnbHVnYW5kYSddO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBsb2FkRGF0YSh1cmw6IHN0cmluZykge1xyXG5cdHZhciBmdXJsID0gZ2V0RGF0YVVSTCh1cmwpO1xyXG5cdC8vIGNvbnNvbGUubG9nKGZ1cmwpO1xyXG5cdHJldHVybiBmZXRjaChmdXJsKS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XHJcbn1cclxuXHJcblxyXG4iLCIvL2NvZGUgZm9yIGxvYWRpbmcgYXVkaW9zXG5cbmltcG9ydCB7IHFEYXRhIH0gZnJvbSAnLi9xdWVzdGlvbkRhdGEnO1xuaW1wb3J0IHsgYnVja2V0LCBidWNrZXRJdGVtIH0gZnJvbSAnLi4vYXNzZXNzbWVudC9idWNrZXREYXRhJztcbmltcG9ydCB7IGdldENhc2VJbmRlcGVuZGVudExhbmdMaXN0IH0gZnJvbSAnLi9qc29uVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgQXVkaW9Db250cm9sbGVyIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBBdWRpb0NvbnRyb2xsZXIgfCBudWxsID0gbnVsbDtcblxuICAgIHB1YmxpYyBpbWFnZVRvQ2FjaGU6IHN0cmluZ1tdID0gW107XG4gICAgcHVibGljIHdhdlRvQ2FjaGU6IHN0cmluZ1tdID0gW107XG5cbiAgICBwdWJsaWMgYWxsQXVkaW9zOiBhbnkgPSB7fTtcbiAgICBwdWJsaWMgYWxsSW1hZ2VzOiBhbnkgPSB7fTtcbiAgICBwdWJsaWMgZGF0YVVSTDogc3RyaW5nID0gXCJcIjtcblxuICAgIHByaXZhdGUgY29ycmVjdFNvdW5kUGF0aCA9IFwiZGlzdC9hdWRpby9Db3JyZWN0LndhdlwiO1xuXG4gICAgcHJpdmF0ZSBmZWVkYmFja0F1ZGlvOiBhbnkgPSBudWxsO1xuICAgIHByaXZhdGUgY29ycmVjdEF1ZGlvOiBhbnkgPSBudWxsO1xuXG4gICAgcHJpdmF0ZSBpbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmZlZWRiYWNrQXVkaW8gPSBuZXcgQXVkaW8oKTtcbiAgICAgICAgdGhpcy5mZWVkYmFja0F1ZGlvLnNyYyA9IHRoaXMuY29ycmVjdFNvdW5kUGF0aDtcbiAgICAgICAgdGhpcy5jb3JyZWN0QXVkaW8gPSBuZXcgQXVkaW8oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFByZXBhcmVBdWRpb0FuZEltYWdlc0ZvclN1cnZleShxdWVzdGlvbnNEYXRhOiBxRGF0YVtdLCBkYXRhVVJMOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTCA9IGRhdGFVUkw7XG4gICAgICAgIGNvbnN0IGZlZWRiYWNrU291bmRQYXRoID0gIFwiYXVkaW8vXCIgKyBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMICsgXCIvYW5zd2VyX2ZlZWRiYWNrLm1wM1wiO1xuXG4gICAgICAgIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLndhdlRvQ2FjaGUucHVzaChmZWVkYmFja1NvdW5kUGF0aCk7XG4gICAgICAgIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmNvcnJlY3RBdWRpby5zcmMgPSBmZWVkYmFja1NvdW5kUGF0aDtcblxuICAgICAgICBmb3IgKHZhciBxdWVzdGlvbkluZGV4IGluIHF1ZXN0aW9uc0RhdGEpe1xuICAgICAgICAgICAgbGV0IHF1ZXN0aW9uRGF0YSA9IHF1ZXN0aW9uc0RhdGFbcXVlc3Rpb25JbmRleF07XG4gICAgICAgICAgICBpZiAocXVlc3Rpb25EYXRhLnByb21wdEF1ZGlvICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBBdWRpb0NvbnRyb2xsZXIuRmlsdGVyQW5kQWRkQXVkaW9Ub0FsbEF1ZGlvcyhxdWVzdGlvbkRhdGEucHJvbXB0QXVkaW8pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocXVlc3Rpb25EYXRhLnByb21wdEltZyAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIEF1ZGlvQ29udHJvbGxlci5BZGRJbWFnZVRvQWxsSW1hZ2VzKHF1ZXN0aW9uRGF0YS5wcm9tcHRJbWcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBhbnN3ZXJJbmRleCBpbiBxdWVzdGlvbkRhdGEuYW5zd2Vycykge1xuICAgICAgICAgICAgICAgIGxldCBhbnN3ZXJEYXRhID0gcXVlc3Rpb25EYXRhLmFuc3dlcnNbYW5zd2VySW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChhbnN3ZXJEYXRhLmFuc3dlckltZyAhPSBudWxsKXtcbiAgICAgICAgICAgICAgICAgICAgQXVkaW9Db250cm9sbGVyLkFkZEltYWdlVG9BbGxJbWFnZXMoYW5zd2VyRGF0YS5hbnN3ZXJJbWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxBdWRpb3MpO1xuICAgICAgICBjb25zb2xlLmxvZyhBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxJbWFnZXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgQWRkSW1hZ2VUb0FsbEltYWdlcyhuZXdJbWFnZVVSTDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWRkIGltYWdlOiBcIiArIG5ld0ltYWdlVVJMKTtcbiAgICAgICAgbGV0IG5ld0ltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIG5ld0ltYWdlLnNyYyA9IG5ld0ltYWdlVVJMO1xuICAgICAgICBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxJbWFnZXNbbmV3SW1hZ2VVUkxdID0gbmV3SW1hZ2U7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBGaWx0ZXJBbmRBZGRBdWRpb1RvQWxsQXVkaW9zKG5ld0F1ZGlvVVJMOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBZGRpbmcgYXVkaW86IFwiICsgbmV3QXVkaW9VUkwpO1xuICAgICAgICBpZiAobmV3QXVkaW9VUkwuaW5jbHVkZXMoXCIud2F2XCIpKXtcbiAgICAgICAgICAgIG5ld0F1ZGlvVVJMID0gbmV3QXVkaW9VUkwucmVwbGFjZShcIi53YXZcIiwgXCIubXAzXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld0F1ZGlvVVJMLmluY2x1ZGVzKFwiLm1wM1wiKSkge1xuICAgICAgICAgICAgLy8gQWxyZWFkeSBjb250YWlucyAubXAzIG5vdCBkb2luZyBhbnl0aGluZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3QXVkaW9VUkwgPSBuZXdBdWRpb1VSTC50cmltKCkgKyBcIi5tcDNcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRmlsdGVyZWQ6IFwiICsgbmV3QXVkaW9VUkwpO1xuICAgICAgIFxuICAgICAgICBsZXQgbmV3QXVkaW8gPSBuZXcgQXVkaW8oKTtcbiAgICAgICAgaWYoZ2V0Q2FzZUluZGVwZW5kZW50TGFuZ0xpc3QoKS5pbmNsdWRlcyhBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMLnNwbGl0KCctJylbMF0pICApXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5ld0F1ZGlvLnNyYyA9IFwiYXVkaW8vXCIgKyBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMICsgXCIvXCIgKyBuZXdBdWRpb1VSTDtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBuZXdBdWRpby5zcmMgPSBcImF1ZGlvL1wiICsgQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTCArIFwiL1wiICsgbmV3QXVkaW9VUkw7XG5cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsQXVkaW9zW25ld0F1ZGlvVVJMXSA9IG5ld0F1ZGlvO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2cobmV3QXVkaW8uc3JjKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFByZWxvYWRCdWNrZXQobmV3QnVja2V0OiBidWNrZXQsIGRhdGFVUkwpIHtcbiAgICAgICAgQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTCA9IGRhdGFVUkw7XG4gICAgICAgIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmNvcnJlY3RBdWRpby5zcmMgPSBcImF1ZGlvL1wiICsgQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTCArIFwiL2Fuc3dlcl9mZWVkYmFjay5tcDNcIjtcbiAgICAgICAgZm9yICh2YXIgaXRlbUluZGV4IGluIG5ld0J1Y2tldC5pdGVtcyl7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IG5ld0J1Y2tldC5pdGVtc1tpdGVtSW5kZXhdO1xuICAgICAgICAgICAgQXVkaW9Db250cm9sbGVyLkZpbHRlckFuZEFkZEF1ZGlvVG9BbGxBdWRpb3MoaXRlbS5pdGVtTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFBsYXlBdWRpbyhhdWRpb05hbWU6IHN0cmluZywgZmluaXNoZWRDYWxsYmFjaz86IEZ1bmN0aW9uLCBhdWRpb0FuaW0/OiBGdW5jdGlvbik6IHZvaWQge1xuICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcInRyeWluZyB0byBwbGF5IFwiICsgYXVkaW9OYW1lKTtcbiAgICAgICAgaWYgKGF1ZGlvTmFtZS5pbmNsdWRlcyhcIi5tcDNcIikpe1xuICAgICAgICAgICAgaWYgKGF1ZGlvTmFtZS5zbGljZSgtNCkgIT0gXCIubXAzXCIpe1xuICAgICAgICAgICAgICAgIGF1ZGlvTmFtZSA9IGF1ZGlvTmFtZS50cmltKCkgKyBcIi5tcDNcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF1ZGlvTmFtZSA9IGF1ZGlvTmFtZS50cmltKCkgKyBcIi5tcDNcIjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIlByZSBwbGF5IGFsbCBhdWRpb3M6IFwiKTtcbiAgICAgICAgY29uc29sZS5sb2coQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsQXVkaW9zKTtcbiAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBsYXlQcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGF1ZGlvID0gQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsQXVkaW9zW2F1ZGlvTmFtZV07XG4gICAgICAgICAgICBpZiAoYXVkaW8pIHtcbiAgICAgICAgICAgICAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKFwicGxheVwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZihhdWRpb0FuaW0pICE9PSAndW5kZWZpbmVkJyA/IGF1ZGlvQW5pbSh0cnVlKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcImVuZGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGF1ZGlvQW5pbSkgIT09ICd1bmRlZmluZWQnID8gYXVkaW9BbmltKGZhbHNlKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgYXVkaW8ucGxheSgpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIj4+Pj4+Pj4+PlwiKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxvd2VyQXVkaW8gPSBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxBdWRpb3NbYXVkaW9OYW1lLnRvTG93ZXJDYXNlKCldXG4gICAgICAgICAgICAgICAgICAgIGxvd2VyQXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlb2YoYXVkaW9BbmltKSAhPT0gJ3VuZGVmaW5lZCcgPyBhdWRpb0FuaW0odHJ1ZSkgOiBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIGxvd2VyQXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcImVuZGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mKGF1ZGlvQW5pbSkgIT09ICd1bmRlZmluZWQnID8gYXVkaW9BbmltKGZhbHNlKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgbG93ZXJBdWRpby5wbGF5KCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwbGF5aW5nIGF1ZGlvOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkF1ZGlvIGZpbGUgbm90IGZvdW5kOlwiLCBhdWRpb05hbWUpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICBcbiAgICAgICAgcGxheVByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0eXBlb2YoZmluaXNoZWRDYWxsYmFjaykgIT09ICd1bmRlZmluZWQnID8gZmluaXNoZWRDYWxsYmFjaygpIDogbnVsbDtcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlByb21pc2UgZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIFxuXG4gICAgcHVibGljIHN0YXRpYyBHZXRJbWFnZShpbWFnZU5hbWU6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIHJldHVybiBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxJbWFnZXNbaW1hZ2VOYW1lXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFBsYXlEaW5nKCk6IHZvaWQge1xuICAgICAgICBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0F1ZGlvLnBsYXkoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIFBsYXlDb3JyZWN0KCk6IHZvaWQge1xuICAgICAgICBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5jb3JyZWN0QXVkaW8ucGxheSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogQXVkaW9Db250cm9sbGVyIHtcbiAgICAgICAgaWYgKEF1ZGlvQ29udHJvbGxlci5pbnN0YW5jZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBBdWRpb0NvbnRyb2xsZXIuaW5zdGFuY2UgPSBuZXcgQXVkaW9Db250cm9sbGVyKCk7XG4gICAgICAgICAgICBBdWRpb0NvbnRyb2xsZXIuaW5zdGFuY2UuaW5pdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIEF1ZGlvQ29udHJvbGxlci5pbnN0YW5jZTtcbiAgICB9XG59IiwiXHJcbmV4cG9ydCBmdW5jdGlvbiByYW5kRnJvbShhcnJheSkge1xyXG5cdHJldHVybiBhcnJheVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpXVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2h1ZmZsZUFycmF5KGFycmF5KSB7XHJcblx0Zm9yIChsZXQgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuXHRcdGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcclxuXHRcdFthcnJheVtpXSwgYXJyYXlbal1dID0gW2FycmF5W2pdLCBhcnJheVtpXV07XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7IHFEYXRhLCBhbnN3ZXJEYXRhIH0gZnJvbSAnLi9xdWVzdGlvbkRhdGEnO1xyXG5pbXBvcnQgeyBBdWRpb0NvbnRyb2xsZXIgfSBmcm9tICcuL2F1ZGlvQ29udHJvbGxlcic7XHJcbmltcG9ydCB7IHJhbmRGcm9tLCBzaHVmZmxlQXJyYXkgfSBmcm9tICcuL21hdGhVdGlscyc7XHJcbmltcG9ydCB7IGdldERhdGFGaWxlIH0gZnJvbSAnLi91cmxVdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVUlDb250cm9sbGVyIHtcclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFVJQ29udHJvbGxlciB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRwcml2YXRlIGxhbmRpbmdDb250YWluZXJJZCA9IFwibGFuZFdyYXBcIjtcclxuXHRwdWJsaWMgbGFuZGluZ0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgZ2FtZUNvbnRhaW5lcklkID0gXCJnYW1lV3JhcFwiO1xyXG5cdHB1YmxpYyBnYW1lQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBlbmRDb250YWluZXJJZCA9IFwiZW5kV3JhcFwiO1xyXG5cdHB1YmxpYyBlbmRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIHN0YXJDb250YWluZXJJZCA9IFwic3RhcldyYXBwZXJcIjtcclxuXHRwdWJsaWMgc3RhckNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgY2hlc3RDb250YWluZXJJZCA9ICdjaGVzdFdyYXBwZXInO1xyXG5cdHB1YmxpYyBjaGVzdENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgcXVlc3Rpb25zQ29udGFpbmVySWQgPSBcInFXcmFwXCI7XHJcblx0cHVibGljIHF1ZXN0aW9uc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgZmVlZGJhY2tDb250YWluZXJJZCA9IFwiZmVlZGJhY2tXcmFwXCI7XHJcblx0cHVibGljIGZlZWRiYWNrQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBhbnN3ZXJzQ29udGFpbmVySWQgPSBcImFXcmFwXCI7XHJcblx0cHVibGljIGFuc3dlcnNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjFJZCA9IFwiYW5zd2VyQnV0dG9uMVwiO1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uMTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b24ySWQgPSBcImFuc3dlckJ1dHRvbjJcIjtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uM0lkID0gXCJhbnN3ZXJCdXR0b24zXCI7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b24zOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjRJZCA9IFwiYW5zd2VyQnV0dG9uNFwiO1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uNDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b241SWQgPSBcImFuc3dlckJ1dHRvbjVcIjtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uNklkID0gXCJhbnN3ZXJCdXR0b242XCI7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b242OiBIVE1MRWxlbWVudDtcclxuXHJcblxyXG5cdHByaXZhdGUgcGxheUJ1dHRvbklkID0gXCJwYnV0dG9uXCI7XHJcblx0cHJpdmF0ZSBwbGF5QnV0dG9uOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBjaGVzdEltZ0lkID0gXCJjaGVzdEltYWdlXCI7XHJcblx0cHJpdmF0ZSBjaGVzdEltZzogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHB1YmxpYyBuZXh0UXVlc3Rpb24gPSBudWxsO1xyXG5cclxuXHRwcml2YXRlIGNvbnRlbnRMb2FkZWQgPSBmYWxzZTtcclxuXHJcblx0cHVibGljIHFTdGFydDtcclxuXHRwdWJsaWMgc2hvd24gPSBmYWxzZTtcclxuXHJcblx0cHVibGljIHN0YXJzID0gW107XHJcblx0cHVibGljIHNob3duU3RhcnNDb3VudCA9IDA7XHJcblx0cHVibGljIHN0YXJQb3NpdGlvbnM6IEFycmF5PHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfT4gPSBBcnJheTx7IHg6IG51bWJlciwgeTogbnVtYmVyIH0+KCk7XHJcblx0cHVibGljIHFBbnNOdW0gPSAwO1xyXG5cclxuXHRwdWJsaWMgYWxsU3RhcnQ6IG51bWJlcjtcclxuXHJcblx0cHVibGljIGJ1dHRvbnMgPSBbXTtcclxuXHJcblx0cHJpdmF0ZSBidXR0b25QcmVzc0NhbGxiYWNrOiBGdW5jdGlvbjtcclxuXHRwcml2YXRlIHN0YXJ0UHJlc3NDYWxsYmFjazogRnVuY3Rpb247XHJcblxyXG5cdHB1YmxpYyBidXR0b25zQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcclxuXHRcdC8vIEluaXRpYWxpemUgcmVxdWlyZWQgY29udGFpbmVyc1xyXG5cdFx0dGhpcy5sYW5kaW5nQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5sYW5kaW5nQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5nYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5nYW1lQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5lbmRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVuZENvbnRhaW5lcklkKTtcclxuXHRcdHRoaXMuc3RhckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc3RhckNvbnRhaW5lcklkKTtcclxuXHRcdHRoaXMuY2hlc3RDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNoZXN0Q29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5xdWVzdGlvbnNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnF1ZXN0aW9uc0NvbnRhaW5lcklkKTtcclxuXHRcdHRoaXMuZmVlZGJhY2tDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmZlZWRiYWNrQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJzQ29udGFpbmVySWQpO1xyXG5cclxuXHRcdC8vIEluaXRpYWxpemUgcmVxdWlyZWQgYnV0dG9uc1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b24xID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b24xSWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b24yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b24ySWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b24zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b24zSWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b240ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b240SWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b241ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b241SWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b242ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b242SWQpO1xyXG5cclxuXHRcdHRoaXMucGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGxheUJ1dHRvbklkKTtcclxuXHJcblx0XHR0aGlzLmNoZXN0SW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jaGVzdEltZ0lkKTtcclxuXHJcblx0XHR0aGlzLmluaXRpYWxpemVTdGFycygpO1xyXG5cclxuXHRcdHRoaXMuaW5pdEV2ZW50TGlzdGVuZXJzKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGluaXRpYWxpemVTdGFycygpOiB2b2lkIHtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykge1xyXG5cdFx0XHRjb25zdCBuZXdTdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuXHJcblx0XHRcdC8vIG5ld1N0YXIuc3JjID0gXCJpbWcvc3Rhci5wbmdcIjtcclxuXHRcdFx0bmV3U3Rhci5pZCA9IFwic3RhclwiICsgaTtcclxuXHJcblx0XHRcdG5ld1N0YXIuY2xhc3NMaXN0LmFkZChcInRvcHN0YXJ2XCIpO1xyXG5cclxuXHRcdFx0dGhpcy5zdGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1N0YXIpO1xyXG5cclxuXHRcdFx0dGhpcy5zdGFyQ29udGFpbmVyLmlubmVySFRNTCArPSBcIlwiO1xyXG5cclxuXHRcdFx0aWYgKGkgPT0gOSkge1xyXG5cdFx0XHRcdHRoaXMuc3RhckNvbnRhaW5lci5pbm5lckhUTUwgKz0gXCI8YnI+XCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuc3RhcnMucHVzaChpKTtcclxuXHRcdH1cclxuXHJcblx0XHRzaHVmZmxlQXJyYXkodGhpcy5zdGFycyk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIE92ZXJsYXBwaW5nT3RoZXJTdGFycyhzdGFyUG9zaXRpb25zOiBBcnJheTx7IHg6IG51bWJlciwgeTogbnVtYmVyIH0+LCB4OiBudW1iZXIsIHk6IG51bWJlciwgbWluRGlzdGFuY2U6IG51bWJlcik6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKHN0YXJQb3NpdGlvbnMubGVuZ3RoIDwgMSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3RhclBvc2l0aW9ucy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBkeCA9IHN0YXJQb3NpdGlvbnNbaV0ueCAtIHg7XHJcblx0XHRcdGNvbnN0IGR5ID0gc3RhclBvc2l0aW9uc1tpXS55IC0geTtcclxuXHRcdFx0Y29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xyXG5cdFx0XHRpZiAoZGlzdGFuY2UgPCBtaW5EaXN0YW5jZSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGluaXRFdmVudExpc3RlbmVycygpOiB2b2lkIHtcclxuXHRcdC8vIFRPRE86IHJlZmFjdG9yIHRoaXNcclxuXHRcdHRoaXMuYW5zd2VyQnV0dG9uMS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmFuc3dlckJ1dHRvblByZXNzKDEpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5idXR0b25zLnB1c2godGhpcy5hbnN3ZXJCdXR0b24xKTtcclxuXHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5hbnN3ZXJCdXR0b25QcmVzcygyKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuYW5zd2VyQnV0dG9uMik7XHJcblxyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b24zLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuYW5zd2VyQnV0dG9uUHJlc3MoMyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbnMucHVzaCh0aGlzLmFuc3dlckJ1dHRvbjMpO1xyXG5cclxuXHRcdHRoaXMuYW5zd2VyQnV0dG9uNC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmFuc3dlckJ1dHRvblByZXNzKDQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5idXR0b25zLnB1c2godGhpcy5hbnN3ZXJCdXR0b240KTtcclxuXHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5hbnN3ZXJCdXR0b25QcmVzcyg1KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuYW5zd2VyQnV0dG9uNSk7XHJcblxyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b242LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuYW5zd2VyQnV0dG9uUHJlc3MoNik7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbnMucHVzaCh0aGlzLmFuc3dlckJ1dHRvbjYpO1xyXG5cclxuXHRcdHRoaXMubGFuZGluZ0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHRpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oZ2V0RGF0YUZpbGUoKSkpIHtcclxuXHRcdFx0XHR0aGlzLnNob3dHYW1lKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzaG93T3B0aW9ucygpOiB2b2lkIHtcclxuXHRcdGlmICghVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd24pIHtcclxuXHRcdFx0Y29uc3QgbmV3USA9IFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLm5leHRRdWVzdGlvbjtcclxuXHRcdFx0Y29uc3QgYnV0dG9ucyA9IFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnM7XHJcblx0XHRcdGxldCBhbmltYXRpb25EdXJhdGlvbiA9IDIyMDtcclxuXHRcdFx0Y29uc3QgZGVsYXlCZm9yZU9wdGlvbiA9IDE1MDtcclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd24gPSB0cnVlO1xyXG5cdFx0XHRsZXQgb3B0aW9uc0Rpc3BsYXllZCA9IDA7XHJcblx0XHRcdGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xyXG5cdFx0XHRcdGJ1dHRvbi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuXHRcdFx0XHRidXR0b24uc3R5bGUuYW5pbWF0aW9uID0gXCJcIjtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbmV3US5hbnN3ZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRjb25zdCBjdXJBbnN3ZXIgPSBuZXdRLmFuc3dlcnNbaV07XHJcblx0XHRcdFx0XHRjb25zdCBidXR0b24gPSBidXR0b25zW2ldO1xyXG5cclxuXHRcdFx0XHRcdGJ1dHRvbi5pbm5lckhUTUwgPSAnYW5zd2VyVGV4dCcgaW4gY3VyQW5zd2VyID8gY3VyQW5zd2VyLmFuc3dlclRleHQgOiAnJztcclxuXHRcdFx0XHRcdGJ1dHRvbi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zdHlsZS5ib3hTaGFkb3cgPSBcIjBweCAwcHggMHB4IDBweCByZ2JhKDAsMCwwLDApXCI7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnN0eWxlLmJveFNoYWRvdyA9IFwiMHB4IDZweCA4cHggIzYwNjA2MFwiO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc3R5bGUuYW5pbWF0aW9uID0gYHpvb21JbiAke2FuaW1hdGlvbkR1cmF0aW9ufW1zIGVhc2UgZm9yd2FyZHNgO1xyXG5cdFx0XHRcdFx0XHRpZiAoJ2Fuc3dlckltZycgaW4gY3VyQW5zd2VyKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgdG1waW1nID0gQXVkaW9Db250cm9sbGVyLkdldEltYWdlKGN1ckFuc3dlci5hbnN3ZXJJbWcpO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5hcHBlbmRDaGlsZCh0bXBpbWcpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0b3B0aW9uc0Rpc3BsYXllZCsrO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zRGlzcGxheWVkID09PSBuZXdRLmFuc3dlcnMubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5lbmFibGVBbnN3ZXJCdXR0b24oKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSwgKGkgKiBhbmltYXRpb25EdXJhdGlvbikgKiAwLjMpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0sIGRlbGF5QmZvcmVPcHRpb24pXHJcblxyXG5cclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucVN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZW5hYmxlQW5zd2VyQnV0dG9uKCk6IHZvaWQge1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYnV0dG9uc0FjdGl2ZSA9IHRydWU7XHJcblx0fVxyXG5cdHB1YmxpYyBzdGF0aWMgU2V0RmVlZGJhY2tUZXh0KG50OiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiRmVlZGJhY2sgdGV4dCBzZXQgdG8gXCIgKyBudCk7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5pbm5lckhUTUwgPSBudDtcclxuXHR9XHJcblxyXG5cdC8vZnVuY3Rpb25zIHRvIHNob3cvaGlkZSB0aGUgZGlmZmVyZW50IGNvbnRhaW5lcnNcclxuXHRwcml2YXRlIHNob3dMYW5kaW5nKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5sYW5kaW5nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHRcdHRoaXMuZ2FtZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0XHR0aGlzLmVuZENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFNob3dFbmQoKTogdm9pZCB7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5sYW5kaW5nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmdhbWVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZW5kQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2hvd0dhbWUoKTogdm9pZCB7XHJcblx0XHR0aGlzLmxhbmRpbmdDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdFx0dGhpcy5nYW1lQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImdyaWRcIjtcclxuXHRcdHRoaXMuZW5kQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdHRoaXMuYWxsU3RhcnQgPSBEYXRlLm5vdygpO1xyXG5cdFx0dGhpcy5zdGFydFByZXNzQ2FsbGJhY2soKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgU2V0RmVlZGJhY2tWaXNpYmlsZSh2aXNpYmxlOiBib29sZWFuKSB7XHJcblx0XHRpZiAodmlzaWJsZSkge1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZVwiKTtcclxuXHRcdFx0QXVkaW9Db250cm9sbGVyLlBsYXlDb3JyZWN0KCk7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnNBY3RpdmUgPSBmYWxzZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmZlZWRiYWNrQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpO1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zQWN0aXZlID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFJlYWR5Rm9yTmV4dChuZXdROiBxRGF0YSk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2coXCJyZWFkeSBmb3IgbmV4dCFcIik7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbnN3ZXJzQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG5cdFx0Zm9yICh2YXIgYiBpbiBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zKSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnNbYl0uc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcblx0XHR9XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5zaG93biA9IGZhbHNlO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkubmV4dFF1ZXN0aW9uID0gbmV3UTtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnF1ZXN0aW9uc0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucXVlc3Rpb25zQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdC8vIHBCLmlubmVySFRNTCA9IFwiPGJ1dHRvbiBpZD0nbmV4dHFCdXR0b24nPjxzdmcgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9J25vbmUnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTTkgMThMMTUgMTJMOSA2VjE4WicgZmlsbD0nY3VycmVudENvbG9yJyBzdHJva2U9J2N1cnJlbnRDb2xvcicgc3Ryb2tlLXdpZHRoPScyJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnPjwvcGF0aD48L3N2Zz48L2J1dHRvbj5cIjtcclxuXHRcdC8vIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnBsYXlCdXR0b24uY2xhc3NMaXN0LmFkZChcImF1ZGlvLWJ1dHRvblwiKTtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnBsYXlCdXR0b24uaW5uZXJIVE1MID0gXCI8YnV0dG9uIGlkPSduZXh0cUJ1dHRvbic+PGltZyBjbGFzcz1hdWRpby1idXR0b24gd2lkdGg9JzEwMHB4JyBoZWlnaHQ9JzEwMHB4JyBzcmM9Jy9pbWcvU291bmRCdXR0b25fSWRsZS5wbmcnIHR5cGU9J2ltYWdlL3N2Zyt4bWwnPiA8L2ltZz48L2J1dHRvbj5cIjtcclxuXHRcdHZhciBuZXh0UXVlc3Rpb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5leHRxQnV0dG9uXCIpO1xyXG5cdFx0bmV4dFF1ZXN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5TaG93UXVlc3Rpb24oKTtcclxuXHRcdFx0Ly9wbGF5cXVlc3Rpb25hdWRpb1xyXG5cdFx0XHRBdWRpb0NvbnRyb2xsZXIuUGxheUF1ZGlvKG5ld1EucHJvbXB0QXVkaW8sIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnNob3dPcHRpb25zLCBVSUNvbnRyb2xsZXIuU2hvd0F1ZGlvQW5pbWF0aW9uKTtcclxuXHJcblx0XHR9KTtcclxuXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFNob3dBdWRpb0FuaW1hdGlvbihwbGF5aW5nOiBib29sZWFuID0gZmFsc2UpIHtcclxuXHRcdGNvbnN0IHBsYXlCdXR0b25JbWcgPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5wbGF5QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG5cdFx0aWYgKHBsYXlpbmcpIHtcclxuXHRcdFx0cGxheUJ1dHRvbkltZy5zcmMgPSAnYW5pbWF0aW9uL1NvdW5kQnV0dG9uLmdpZic7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cGxheUJ1dHRvbkltZy5zcmMgPSAnL2ltZy9Tb3VuZEJ1dHRvbl9JZGxlLnBuZyc7XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgU2hvd1F1ZXN0aW9uKG5ld1F1ZXN0aW9uPzogcURhdGEpOiB2b2lkIHtcclxuXHJcblx0XHQvLyBwQi5pbm5lckhUTUwgPSBcIjxidXR0b24gaWQ9J25leHRxQnV0dG9uJz48c3ZnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSdub25lJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J005IDE4TDE1IDEyTDkgNlYxOFonIGZpbGw9J2N1cnJlbnRDb2xvcicgc3Ryb2tlPSdjdXJyZW50Q29sb3InIHN0cm9rZS13aWR0aD0nMicgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJz48L3BhdGg+PC9zdmc+PC9idXR0b24+XCI7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5wbGF5QnV0dG9uLmlubmVySFRNTCA9IFwiPGJ1dHRvbiBpZD0nbmV4dHFCdXR0b24nPjxpbWcgY2xhc3M9YXVkaW8tYnV0dG9uIHdpZHRoPScxMDBweCcgaGVpZ2h0PScxMDBweCcgc3JjPScvaW1nL1NvdW5kQnV0dG9uX0lkbGUucG5nJyB0eXBlPSdpbWFnZS9zdmcreG1sJz4gPC9pbWc+PC9idXR0b24+XCI7XHJcblxyXG5cdFx0dmFyIG5leHRRdWVzdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV4dHFCdXR0b25cIik7XHJcblx0XHRuZXh0UXVlc3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJuZXh0IHF1ZXN0aW9uIGJ1dHRvbiBwcmVzc2VkXCIpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhuZXdRdWVzdGlvbi5wcm9tcHRBdWRpbyk7XHJcblxyXG5cdFx0XHRpZiAoJ3Byb21wdEF1ZGlvJyBpbiBuZXdRdWVzdGlvbikge1xyXG5cdFx0XHRcdEF1ZGlvQ29udHJvbGxlci5QbGF5QXVkaW8obmV3UXVlc3Rpb24ucHJvbXB0QXVkaW8sIHVuZGVmaW5lZCwgVUlDb250cm9sbGVyLlNob3dBdWRpb0FuaW1hdGlvbik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblxyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYW5zd2Vyc0NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcblxyXG5cdFx0bGV0IHFDb2RlID0gXCJcIjtcclxuXHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcblx0XHRpZiAodHlwZW9mIChuZXdRdWVzdGlvbikgPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0bmV3UXVlc3Rpb24gPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5uZXh0UXVlc3Rpb247XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCdwcm9tcHRJbWcnIGluIG5ld1F1ZXN0aW9uKSB7XHJcblx0XHRcdHZhciB0bXBpbWcgPSBBdWRpb0NvbnRyb2xsZXIuR2V0SW1hZ2UobmV3UXVlc3Rpb24ucHJvbXB0SW1nKTtcclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucXVlc3Rpb25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHRtcGltZyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cUNvZGUgKz0gbmV3UXVlc3Rpb24ucHJvbXB0VGV4dDtcclxuXHJcblx0XHRxQ29kZSArPSBcIjxCUj5cIjtcclxuXHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuaW5uZXJIVE1MICs9IHFDb2RlO1xyXG5cclxuXHJcblx0XHRmb3IgKHZhciBidXR0b25JbmRleCBpbiBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zKSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnNbYnV0dG9uSW5kZXhdLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBBZGRTdGFyKCk6IHZvaWQge1xyXG5cdFx0dmFyIHN0YXJUb1Nob3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJcIiArIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnN0YXJzW1VJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnFBbnNOdW1dKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cdFx0c3RhclRvU2hvdy5zcmMgPSAnLi4vYW5pbWF0aW9uL1N0YXIuZ2lmJztcclxuXHRcdHN0YXJUb1Nob3cuY2xhc3NMaXN0LmFkZChcInRvcHN0YXJ2XCIpO1xyXG5cdFx0c3RhclRvU2hvdy5jbGFzc0xpc3QucmVtb3ZlKFwidG9wc3RhcmhcIik7XHJcblxyXG5cdFx0c3RhclRvU2hvdy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuXHJcblx0XHRsZXQgY29udGFpbmVyV2lkdGggPSBVSUNvbnRyb2xsZXIuaW5zdGFuY2Uuc3RhckNvbnRhaW5lci5vZmZzZXRXaWR0aDtcclxuXHRcdGxldCBjb250YWluZXJIZWlnaHQgPSBVSUNvbnRyb2xsZXIuaW5zdGFuY2Uuc3RhckNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coXCJTdGFycyBDb250YWluZXIgZGltZW5zaW9uczogXCIsIGNvbnRhaW5lcldpZHRoLCBjb250YWluZXJIZWlnaHQpO1xyXG5cclxuXHRcdGxldCByYW5kb21YID0gMDtcclxuXHRcdGxldCByYW5kb21ZID0gMDtcclxuXHJcblx0XHRkbyB7XHJcblx0XHRcdHJhbmRvbVggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoY29udGFpbmVyV2lkdGggLSA2MCkpO1xyXG5cdFx0XHRyYW5kb21ZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29udGFpbmVySGVpZ2h0KTtcclxuXHRcdH0gd2hpbGUgKFVJQ29udHJvbGxlci5PdmVybGFwcGluZ090aGVyU3RhcnMoVUlDb250cm9sbGVyLmluc3RhbmNlLnN0YXJQb3NpdGlvbnMsIHJhbmRvbVgsIHJhbmRvbVksIDMwKSk7XHJcblxyXG5cdFx0Ly8gU2F2ZSB0aGVzZSByYW5kb20geCBhbmQgeSB2YWx1ZXMsIG1ha2UgdGhlIHN0YXIgYXBwZWFyIGluIHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlbiwgbWFrZSBpdCAzIHRpbWVzIGJpZ2dlciB1c2luZyBzY2FsZSBhbmQgc2xvd2x5IHRyYW5zaXRpb24gdG8gdGhlIHJhbmRvbSB4IGFuZCB5IHZhbHVlc1xyXG5cdFx0c3RhclRvU2hvdy5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKDEwKVwiO1xyXG5cdFx0c3RhclRvU2hvdy5zdHlsZS50cmFuc2l0aW9uID0gXCJ0b3AgMXMgZWFzZSwgbGVmdCAxcyBlYXNlLCB0cmFuc2Zvcm0gMC41cyBlYXNlXCI7XHJcblx0XHRzdGFyVG9TaG93LnN0eWxlLnpJbmRleCA9IFwiNTAwXCI7XHJcblx0XHRzdGFyVG9TaG93LnN0eWxlLnRvcCA9IHdpbmRvdy5pbm5lckhlaWdodCAvIDIgKyBcInB4XCI7XHJcblx0XHRzdGFyVG9TaG93LnN0eWxlLmxlZnQgPSBVSUNvbnRyb2xsZXIuaW5zdGFuY2UuZ2FtZUNvbnRhaW5lci5vZmZzZXRXaWR0aCAvIDIgLSAoc3RhclRvU2hvdy5vZmZzZXRXaWR0aCAvIDIpICsgXCJweFwiO1xyXG5cclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRzdGFyVG9TaG93LnN0eWxlLnRyYW5zaXRpb24gPSBcInRvcCAycyBlYXNlLCBsZWZ0IDJzIGVhc2UsIHRyYW5zZm9ybSAycyBlYXNlXCI7XHJcblx0XHRcdGlmIChyYW5kb21YIDwgY29udGFpbmVyV2lkdGggLyAyKSB7XHJcblx0XHRcdFx0Ly8gUm90YXRlIHRoZSBzdGFyIHRvIHRoZSByaWdodCBhIGJpdFxyXG5cdFx0XHRcdGNvbnN0IHJvdGF0aW9uID0gNSArIChNYXRoLnJhbmRvbSgpICogOCk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJSb3RhdGluZyBzdGFyIHRvIHRoZSByaWdodFwiLCByb3RhdGlvbik7XHJcblx0XHRcdFx0c3RhclRvU2hvdy5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZSgtXCIgKyByb3RhdGlvbiArIFwiZGVnKSBzY2FsZSgxKVwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIFJvdGF0ZSB0aGUgc3RhciB0byB0aGUgbGVmdCBhIGJpdFxyXG5cdFx0XHRcdGNvbnN0IHJvdGF0aW9uID0gNSArIChNYXRoLnJhbmRvbSgpICogOCk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJSb3RhdGluZyBzdGFyIHRvIHRoZSBsZWZ0XCIsIHJvdGF0aW9uKTtcclxuXHRcdFx0XHRzdGFyVG9TaG93LnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlKFwiICsgcm90YXRpb24gKyBcImRlZykgc2NhbGUoMSlcIjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c3RhclRvU2hvdy5zdHlsZS5sZWZ0ID0gMjAgKyByYW5kb21YICsgXCJweFwiO1xyXG5cdFx0XHRzdGFyVG9TaG93LnN0eWxlLnRvcCA9IDYwICsgcmFuZG9tWSArIFwicHhcIjtcclxuXHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHN0YXJUb1Nob3cuc3R5bGUuZmlsdGVyID0gXCJkcm9wLXNoYWRvdygwcHggMHB4IDEwcHggeWVsbG93KVwiO1xyXG5cdFx0XHR9LCAxOTAwKTtcclxuXHRcdH0sIDEwMDApO1xyXG5cclxuXHRcdFVJQ29udHJvbGxlci5pbnN0YW5jZS5zdGFyUG9zaXRpb25zLnB1c2goeyB4OiByYW5kb21YLCB5OiByYW5kb21ZIH0pO1xyXG5cclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnFBbnNOdW0gKz0gMTtcclxuXHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5zaG93blN0YXJzQ291bnQgKz0gMTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgQ2hhbmdlU3RhckltYWdlQWZ0ZXJBbmltYXRpb24oKTogdm9pZCB7XHJcblx0XHR2YXIgc3RhclRvU2hvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhclwiICsgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc3RhcnNbVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucUFuc051bSAtIDFdKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cdFx0c3RhclRvU2hvdy5zcmMgPSAnLi4vaW1nL3N0YXJfYWZ0ZXJfYW5pbWF0aW9uLmdpZidcclxuXHR9XHJcblxyXG5cclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvblByZXNzKGJ1dHRvbk51bTogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBhbGxCdXR0b25zVmlzaWJsZSA9IHRoaXMuYnV0dG9ucy5ldmVyeShidXR0b24gPT4gYnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPT09IFwidmlzaWJsZVwiKTtcclxuXHRcdGNvbnNvbGUubG9nKHRoaXMuYnV0dG9uc0FjdGl2ZSwgYWxsQnV0dG9uc1Zpc2libGUpO1xyXG5cdFx0aWYgKHRoaXMuYnV0dG9uc0FjdGl2ZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRBdWRpb0NvbnRyb2xsZXIuUGxheURpbmcoKTtcclxuXHRcdFx0Y29uc3QgblByZXNzZWQgPSBEYXRlLm5vdygpO1xyXG5cdFx0XHRjb25zdCBkVGltZSA9IG5QcmVzc2VkIC0gdGhpcy5xU3RhcnQ7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiYW5zd2VyZWQgaW4gXCIgKyBkVGltZSk7XHJcblx0XHRcdHRoaXMuYnV0dG9uUHJlc3NDYWxsYmFjayhidXR0b25OdW0sIGRUaW1lKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgUHJvZ3Jlc3NDaGVzdCgpIHtcclxuXHRcdGNvbnN0IGNoZXN0SW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hlc3RJbWFnZScpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XHJcblx0XHRsZXQgY3VycmVudEltZ1NyYyA9IGNoZXN0SW1hZ2Uuc3JjXHJcblx0XHRjb25zb2xlLmxvZygnQ2hlc3QgUHJvZ3Jlc3Npb24tLT4nLCBjaGVzdEltYWdlKTtcclxuXHRcdGNvbnNvbGUubG9nKCdDaGVzdCBQcm9ncmVzc2lvbi0tPicsIGNoZXN0SW1hZ2Uuc3JjKTtcclxuXHRcdGNvbnN0IGN1cnJlbnRJbWFnZU51bWJlciA9IHBhcnNlSW50KGN1cnJlbnRJbWdTcmMuc2xpY2UoLTYsIC00KSwgMTApO1xyXG5cdFx0Y29uc29sZS5sb2coJ0NoZXN0IFByb2dyZXNzaW9uIG51bWJlci0tPicsIGN1cnJlbnRJbWFnZU51bWJlcik7XHJcblx0XHRjb25zdCBuZXh0SW1hZ2VOdW1iZXIgPSBjdXJyZW50SW1hZ2VOdW1iZXIgJSA0ICsgMTtcclxuXHRcdGNvbnN0IG5leHRJbWFnZVNyYyA9IGBpbWcvY2hlc3Rwcm9ncmVzc2lvbi9UcmVhc3VyZUNoZXN0T3BlbjAke25leHRJbWFnZU51bWJlcn0uc3ZnYDtcclxuXHRcdGNoZXN0SW1hZ2Uuc3JjID0gbmV4dEltYWdlU3JjO1xyXG5cclxuXHJcblxyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBTZXRDb250ZW50TG9hZGVkKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5jb250ZW50TG9hZGVkID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFNldEJ1dHRvblByZXNzQWN0aW9uKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYnV0dG9uUHJlc3NDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBTZXRTdGFydEFjdGlvbihjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnN0YXJ0UHJlc3NDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBVSUNvbnRyb2xsZXIge1xyXG5cdFx0aWYgKFVJQ29udHJvbGxlci5pbnN0YW5jZSA9PT0gbnVsbCkge1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuaW5zdGFuY2UgPSBuZXcgVUlDb250cm9sbGVyKCk7XHJcblx0XHRcdFVJQ29udHJvbGxlci5pbnN0YW5jZS5pbml0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIFVJQ29udHJvbGxlci5pbnN0YW5jZTtcclxuXHR9XHJcbn1cclxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgRmlyZWJhc2UgY29uc3RhbnRzLiAgU29tZSBvZiB0aGVzZSAoQGRlZmluZXMpIGNhbiBiZSBvdmVycmlkZGVuIGF0IGNvbXBpbGUtdGltZS5cclxuICovXHJcbmNvbnN0IENPTlNUQU5UUyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQ0xJRU5UOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBBZG1pbiBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9BRE1JTjogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEZpcmViYXNlIFNESyBWZXJzaW9uXHJcbiAgICAgKi9cclxuICAgIFNES19WRVJTSU9OOiAnJHtKU0NPUkVfVkVSU0lPTn0nXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHByb3ZpZGVkIGFzc2VydGlvbiBpcyBmYWxzeVxyXG4gKi9cclxuY29uc3QgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcihtZXNzYWdlKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gRXJyb3Igb2JqZWN0IHN1aXRhYmxlIGZvciB0aHJvd2luZy5cclxuICovXHJcbmNvbnN0IGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcclxuICAgICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xyXG4gICAgICAgICcpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6ICcgK1xyXG4gICAgICAgIG1lc3NhZ2UpO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSQxID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcclxuICAgICAgICAgICAgaSArIDEgPCBzdHIubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZjMDApID09PSAweGRjMDApIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgJiAweDAzZmYpIDw8IDEwKSArIChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHgwM2ZmKTtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxyXG4gKiBjaGFyYWN0ZXJzIHRvIHdoaWNoIHRoZSBudW1iZXJzIGNvcnJlc3BvbmQuXHJcbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxyXG4gKiBAcmV0dXJuIFN0cmluZ2lmaWNhdGlvbiBvZiB0aGUgYXJyYXkuXHJcbiAqL1xyXG5jb25zdCBieXRlQXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIChieXRlcykge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHBvcyA9IDAsIGMgPSAwO1xyXG4gICAgd2hpbGUgKHBvcyA8IGJ5dGVzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGMxID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAzMSkgPDwgNikgfCAoYzIgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDIzOSAmJiBjMSA8IDM2NSkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGM0ID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCB1ID0gKCgoYzEgJiA3KSA8PCAxOCkgfCAoKGMyICYgNjMpIDw8IDEyKSB8ICgoYzMgJiA2MykgPDwgNikgfCAoYzQgJiA2MykpIC1cclxuICAgICAgICAgICAgICAgIDB4MTAwMDA7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDAgKyAodSA+PiAxMCkpO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMTUpIDw8IDEyKSB8ICgoYzIgJiA2MykgPDwgNikgfCAoYzMgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQuam9pbignJyk7XHJcbn07XHJcbi8vIFdlIGRlZmluZSBpdCBhcyBhbiBvYmplY3QgbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY2xhc3MgYmVjYXVzZSBhIGNsYXNzIGNvbXBpbGVkIGRvd24gdG8gZXM1IGNhbid0XHJcbi8vIGJlIHRyZWVzaGFrZWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2xsdXAvcm9sbHVwL2lzc3Vlcy8xNjkxXHJcbi8vIFN0YXRpYyBsb29rdXAgbWFwcywgbGF6aWx5IHBvcHVsYXRlZCBieSBpbml0XygpXHJcbmNvbnN0IGJhc2U2NCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byBjaGFyYWN0ZXJzLlxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgd2Vic2FmZSBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldCwgc2hhcmVkIGJldHdlZW5cclxuICAgICAqIEVOQ09ERURfVkFMUyBhbmQgRU5DT0RFRF9WQUxTX1dFQlNBRkVcclxuICAgICAqL1xyXG4gICAgRU5DT0RFRF9WQUxTX0JBU0U6ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicgKyAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICsgJzAxMjM0NTY3ODknLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXHJcbiAgICAgKiBzdGFydGVkIGF0IE1vemlsbGEgYnV0IGlzIG5vdyBpbXBsZW1lbnRlZCBieSBtYW55IGJyb3dzZXJzLiBXZSB1c2UgdGhlXHJcbiAgICAgKiBBU1NVTUVfKiB2YXJpYWJsZXMgdG8gYXZvaWQgcHVsbGluZyBpbiB0aGUgZnVsbCB1c2VyYWdlbnQgZGV0ZWN0aW9uIGxpYnJhcnlcclxuICAgICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgSEFTX05BVElWRV9TVVBQT1JUOiB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhbiBhcnJheSBvZiBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQW4gYXJyYXkgb2YgYnl0ZXMgKG51bWJlcnMgd2l0aFxyXG4gICAgICogICAgIHZhbHVlIGluIFswLCAyNTVdKSB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGlucHV0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBieXRlVG9DaGFyTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5ieXRlVG9DaGFyTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gaW5wdXRbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgKyAyIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGlucHV0W2kgKyAyXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gYnl0ZTEgPj4gMjtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUxICYgMHgwMykgPDwgNCkgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlMyA9ICgoYnl0ZTIgJiAweDBmKSA8PCAyKSB8IChieXRlMyA+PiA2KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGU0ID0gYnl0ZTMgJiAweDNmO1xyXG4gICAgICAgICAgICBpZiAoIWhhdmVCeXRlMykge1xyXG4gICAgICAgICAgICAgICAgb3V0Qnl0ZTQgPSA2NDtcclxuICAgICAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Qnl0ZTMgPSA2NDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChieXRlVG9DaGFyTWFwW291dEJ5dGUxXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMl0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTNdLCBieXRlVG9DaGFyTWFwW291dEJ5dGU0XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQuam9pbignJyk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHN0cmluZyB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBJZiB0cnVlLCB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkkMShpbnB1dCksIHdlYlNhZmUpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0b2IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBJbiBiYXNlLTY0IGRlY29kaW5nLCBncm91cHMgb2YgZm91ciBjaGFyYWN0ZXJzIGFyZSBjb252ZXJ0ZWQgaW50byB0aHJlZVxyXG4gICAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxyXG4gICAgICogYmUgYSBtdWx0aXBsZSBvZiA0LlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcclxuICAgICAqIHBhZGRpbmcgd2lsbCBiZSBpbmZlcnJlZC4gIElmIHRoZSBncm91cCBoYXMgb25lIG9yIHR3byBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzXHJcbiAgICAgKiB0byBvbmUgYnl0ZS4gIElmIHRoZSBncm91cCBoYXMgdGhyZWUgY2hhcmFjdGVycywgaXQgZGVjb2RlcyB0byB0d28gYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IElucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGUgd2ViLXNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgY2hhclRvQnl0ZU1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuY2hhclRvQnl0ZU1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogMDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlNCA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGU0ID0gaGF2ZUJ5dGU0ID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUxID09IG51bGwgfHwgYnl0ZTIgPT0gbnVsbCB8fCBieXRlMyA9PSBudWxsIHx8IGJ5dGU0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXHJcbiAqL1xyXG5jb25zdCBiYXNlNjRFbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCB1dGY4Qnl0ZXMgPSBzdHJpbmdUb0J5dGVBcnJheSQxKHN0cik7XHJcbiAgICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheSh1dGY4Qnl0ZXMsIHRydWUpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nICh3aXRob3V0IFwiLlwiIHBhZGRpbmcgaW4gdGhlIGVuZCkuXHJcbiAqIGUuZy4gVXNlZCBpbiBKU09OIFdlYiBUb2tlbiAoSldUKSBwYXJ0cy5cclxuICovXHJcbmNvbnN0IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVXNlIGJhc2U2NHVybCBlbmNvZGluZyBhbmQgcmVtb3ZlIHBhZGRpbmcgaW4gdGhlIGVuZCAoZG90IGNoYXJhY3RlcnMpLlxyXG4gICAgcmV0dXJuIGJhc2U2NEVuY29kZShzdHIpLnJlcGxhY2UoL1xcLi9nLCAnJyk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZGVjb2RpbmdcclxuICpcclxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXHJcbiAqIGJhc2U2NFVybCB2YXJpYW50IGVuY29kaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RyIFRvIGJlIGRlY29kZWRcclxuICogQHJldHVybiBEZWNvZGVkIHJlc3VsdCwgaWYgcG9zc2libGVcclxuICovXHJcbmNvbnN0IGJhc2U2NERlY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGVTdHJpbmcoc3RyLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERvIGEgZGVlcC1jb3B5IG9mIGJhc2ljIEphdmFTY3JpcHQgT2JqZWN0cyBvciBBcnJheXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwQ29weSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSk7XHJcbn1cclxuLyoqXHJcbiAqIENvcHkgcHJvcGVydGllcyBmcm9tIHNvdXJjZSB0byB0YXJnZXQgKHJlY3Vyc2l2ZWx5IGFsbG93cyBleHRlbnNpb25cclxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxyXG4gKiBJZiB0YXJnZXQgaXMgdW5kZWZpbmVkLCBhbiBvYmplY3Qgb2YgdGhlIGFwcHJvcHJpYXRlIHR5cGUgd2lsbCBiZSBjcmVhdGVkXHJcbiAqIChhbmQgcmV0dXJuZWQpLlxyXG4gKlxyXG4gKiBXZSByZWN1cnNpdmVseSBjb3B5IGFsbCBjaGlsZCBwcm9wZXJ0aWVzIG9mIHBsYWluIE9iamVjdHMgaW4gdGhlIHNvdXJjZS0gc29cclxuICogdGhhdCBuYW1lc3BhY2UtIGxpa2UgZGljdGlvbmFyaWVzIGFyZSBtZXJnZWQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB0aGUgdGFyZ2V0IGNhbiBiZSBhIGZ1bmN0aW9uLCBpbiB3aGljaCBjYXNlIHRoZSBwcm9wZXJ0aWVzIGluXHJcbiAqIHRoZSBzb3VyY2UgT2JqZWN0IGFyZSBjb3BpZWQgb250byBpdCBhcyBzdGF0aWMgcHJvcGVydGllcyBvZiB0aGUgRnVuY3Rpb24uXHJcbiAqXHJcbiAqIE5vdGU6IHdlIGRvbid0IG1lcmdlIF9fcHJvdG9fXyB0byBwcmV2ZW50IHByb3RvdHlwZSBwb2xsdXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcclxuICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChzb3VyY2UuY29uc3RydWN0b3IpIHtcclxuICAgICAgICBjYXNlIERhdGU6XHJcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXHJcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgLSB0aGV5IHdpbGwgYmUgbG9zdCFcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVZhbHVlID0gc291cmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVZhbHVlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgY2FzZSBPYmplY3Q6XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBBcnJheTpcclxuICAgICAgICAgICAgLy8gQWx3YXlzIGNvcHkgdGhlIGFycmF5IHNvdXJjZSBhbmQgb3ZlcndyaXRlIHRoZSB0YXJnZXQuXHJcbiAgICAgICAgICAgIHRhcmdldCA9IFtdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAvLyBOb3QgYSBwbGFpbiBPYmplY3QgLSB0cmVhdCBpdCBhcyBhIHNjYWxhci5cclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcclxuICAgICAgICAvLyB1c2UgaXNWYWxpZEtleSB0byBndWFyZCBhZ2FpbnN0IHByb3RvdHlwZSBwb2xsdXRpb24uIFNlZSBodHRwczovL3NueWsuaW8vdnVsbi9TTllLLUpTLUxPREFTSC00NTAyMDJcclxuICAgICAgICBpZiAoIXNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSB8fCAhaXNWYWxpZEtleShwcm9wKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59XHJcbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5KSB7XHJcbiAgICByZXR1cm4ga2V5ICE9PSAnX19wcm90b19fJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbi8vIE5vZGUgZGV0ZWN0aW9uIGxvZ2ljIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pbGlha2FuL2RldGVjdC1ub2RlL1xyXG5mdW5jdGlvbiBpc05vZGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGY7XHJcbn1cclxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xyXG4gICAgY29uc3QgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyBjaHJvbWUucnVudGltZVxyXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXHJcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc0VsZWN0cm9uKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBJbnRlcm5ldCBFeHBsb3Jlci4gKi9cclxuZnVuY3Rpb24gaXNJRSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFICcpID49IDAgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzVVdQKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xyXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiZcclxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICovXHJcbmZ1bmN0aW9uIGdldEdsb2JhbCgpIHtcclxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gc2VsZjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tR2xvYmFsID0gKCkgPT4gZ2V0R2xvYmFsKCkuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xyXG4vKipcclxuICogQXR0ZW1wdCB0byByZWFkIGRlZmF1bHRzIGZyb20gYSBKU09OIHN0cmluZyBwcm92aWRlZCB0b1xyXG4gKiBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX18gb3IgYSBKU09OIGZpbGUgd2hvc2UgcGF0aCBpcyBpblxyXG4gKiBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX1BBVEhfX1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWZhdWx0c0pzb25TdHJpbmcgPSBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcclxuICAgICAgICAvLyBgZG9jdW1lbnRgIG9iamVjdCBidXQgZXJyb3Igb24gYWNjZXNzaW5nIGBkb2N1bWVudC5jb29raWVgLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZWQgPSBtYXRjaCAmJiBiYXNlNjREZWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcclxufTtcclxuLyoqXHJcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxyXG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXHJcbiAqICgyKSBpZiBzdWNoIGFuIG9iamVjdCB3YXMgcHJvdmlkZWQgb24gYSBzaGVsbCBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0cyA9ICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChnZXREZWZhdWx0c0Zyb21HbG9iYWwoKSB8fFxyXG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21FbnZWYXJpYWJsZSgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUNvb2tpZSgpKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2F0Y2gtYWxsIGZvciBiZWluZyB1bmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWVcclxuICAgICAgICAgKiB0byBhbnkgZW52aXJvbm1lbnQgY2FzZSB3ZSBoYXZlIG5vdCBhY2NvdW50ZWQgZm9yLiBMb2cgdG9cclxuICAgICAgICAgKiBpbmZvIGluc3RlYWQgb2Ygc3dhbGxvd2luZyBzbyB3ZSBjYW4gZmluZCB0aGVzZSB1bmtub3duIGNhc2VzXHJcbiAgICAgICAgICogYW5kIGFkZCBwYXRocyBmb3IgdGhlbSBpZiBuZWVkZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc29sZS5pbmZvKGBVbmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWUgdG86ICR7ZX1gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3Qgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBVUkwgaG9zdCBmb3JtYXR0ZWQgbGlrZSBgMTI3LjAuMC4xOjk5OTlgIG9yIGBbOjoxXTo0MDAwYCBpZiBhdmFpbGFibGVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCA9IChwcm9kdWN0TmFtZSkgPT4geyB2YXIgX2EsIF9iOyByZXR1cm4gKF9iID0gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtdWxhdG9ySG9zdHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYltwcm9kdWN0TmFtZV07IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3RuYW1lIGFuZCBwb3J0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxyXG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXHJcbiAqIEByZXR1cm5zIGEgcGFpciBvZiBob3N0bmFtZSBhbmQgcG9ydCBsaWtlIGBbXCI6OjFcIiwgNDAwMF1gIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQgPSAocHJvZHVjdE5hbWUpID0+IHtcclxuICAgIGNvbnN0IGhvc3QgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0KHByb2R1Y3ROYW1lKTtcclxuICAgIGlmICghaG9zdCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IGhvc3QubGFzdEluZGV4T2YoJzonKTsgLy8gRmluZGluZyB0aGUgbGFzdCBzaW5jZSBJUHY2IGFkZHIgYWxzbyBoYXMgY29sb25zLlxyXG4gICAgaWYgKHNlcGFyYXRvckluZGV4IDw9IDAgfHwgc2VwYXJhdG9ySW5kZXggKyAxID09PSBob3N0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBob3N0ICR7aG9zdH0gd2l0aCBubyBzZXBhcmF0ZSBob3N0bmFtZSBhbmQgcG9ydCFgKTtcclxuICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuICAgIGNvbnN0IHBvcnQgPSBwYXJzZUludChob3N0LnN1YnN0cmluZyhzZXBhcmF0b3JJbmRleCArIDEpLCAxMCk7XHJcbiAgICBpZiAoaG9zdFswXSA9PT0gJ1snKSB7XHJcbiAgICAgICAgLy8gQnJhY2tldC1xdW90ZWQgYFtpcHY2YWRkcl06cG9ydGAgPT4gcmV0dXJuIFwiaXB2NmFkZHJcIiAod2l0aG91dCBicmFja2V0cykuXHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygxLCBzZXBhcmF0b3JJbmRleCAtIDEpLCBwb3J0XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLCBwb3J0XTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgRmlyZWJhc2UgYXBwIGNvbmZpZyBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRBcHBDb25maWcgPSAoKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb25maWc7IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIGV4cGVyaW1lbnRhbCBzZXR0aW5nIG9uIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0IChwcm9wZXJ0aWVzXHJcbiAqIHByZWZpeGVkIGJ5IFwiX1wiKVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXRFeHBlcmltZW50YWxTZXR0aW5nID0gKG5hbWUpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2BfJHtuYW1lfWBdOyB9O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBEZWZlcnJlZCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICB3cmFwQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xyXG4gICAgaWYgKHRva2VuLnVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXHJcbiAgICBjb25zdCBoZWFkZXIgPSB7XHJcbiAgICAgICAgYWxnOiAnbm9uZScsXHJcbiAgICAgICAgdHlwZTogJ0pXVCdcclxuICAgIH07XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkIHx8ICdkZW1vLXByb2plY3QnO1xyXG4gICAgY29uc3QgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XHJcbiAgICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcclxuICAgIGlmICghc3ViKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKHsgXHJcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXHJcbiAgICAgICAgaXNzOiBgaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tLyR7cHJvamVjdH1gLCBhdWQ6IHByb2plY3QsIGlhdCwgZXhwOiBpYXQgKyAzNjAwLCBhdXRoX3RpbWU6IGlhdCwgc3ViLCB1c2VyX2lkOiBzdWIsIGZpcmViYXNlOiB7XHJcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0gfSwgdG9rZW4pO1xyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXHJcbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgXS5qb2luKCcuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjb2RlLCBtZXNzYWdlLCBcclxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmViYXNlRXJyb3JzLiAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlamVjdHMgaWYgdGhlIGdpdmVuIHByb21pc2UgZG9lc24ndCByZXNvbHZlIGluIHRpbWVJbk1TIG1pbGxpc2Vjb25kcy5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9taXNlV2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZUluTVMgPSAyMDAwKSB7XHJcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gZGVmZXJyZWRQcm9taXNlLnJlamVjdCgndGltZW91dCEnKSwgdGltZUluTVMpO1xyXG4gICAgcHJvbWlzZS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLCBkZWZlcnJlZFByb21pc2UucmVqZWN0KTtcclxuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvcGllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyB1dWlkLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCB1dWlkdjQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcclxuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlZmVycmVkLCBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IsIE1BWF9WQUxVRV9NSUxMSVMsIFJBTkRPTV9GQUNUT1IsIFNoYTEsIGFyZUNvb2tpZXNFbmFibGVkLCBhc3NlcnQsIGFzc2VydGlvbkVycm9yLCBhc3luYywgYmFzZTY0LCBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIGNvbnRhaW5zLCBjcmVhdGVNb2NrVXNlclRva2VuLCBjcmVhdGVTdWJzY3JpYmUsIGRlY29kZSwgZGVlcENvcHksIGRlZXBFcXVhbCwgZGVlcEV4dGVuZCwgZXJyb3JQcmVmaXgsIGV4dHJhY3RRdWVyeXN0cmluZywgZ2V0RGVmYXVsdEFwcENvbmZpZywgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCwgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0LCBnZXRFeHBlcmltZW50YWxTZXR0aW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0VsZWN0cm9uLCBpc0VtcHR5LCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc05vZGUsIGlzTm9kZVNkaywgaXNSZWFjdE5hdGl2ZSwgaXNTYWZhcmksIGlzVVdQLCBpc1ZhbGlkRm9ybWF0LCBpc1ZhbGlkVGltZXN0YW1wLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHByb21pc2VXaXRoVGltZW91dCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5LCBzdHJpbmdpZnksIHV1aWR2NCwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGV0aGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIExBWlkgKi87XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRNdWx0aXBsZUluc3RhbmNlcyhtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBjYWxsYmFjaztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbmNsYXNzIFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIGdldChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH1cclxuICAgIGdldEltbWVkaWF0ZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3B0aW9uYWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSW4gY2FzZSBhIGNvbXBvbmVudCBpcyBub3QgaW5pdGlhbGl6ZWQgYW5kIHNob3VsZC9jYW4gbm90IGJlIGF1dG8taW5pdGlhbGl6ZWQgYXQgdGhlIG1vbWVudCwgcmV0dXJuIG51bGwgaWYgdGhlIG9wdGlvbmFsIGZsYWcgaXMgc2V0LCBvciB0aHJvd1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFNlcnZpY2UgJHt0aGlzLm5hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldENvbXBvbmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc21hdGNoaW5nIENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmb3IgUHJvdmlkZXIgJHt0aGlzLm5hbWV9LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhckluc3RhbmNlKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlKSAvLyBsZWdhY3kgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKSksXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuX2RlbGV0ZSgpKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgaXNDb21wb25lbnRTZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpc0luaXRpYWxpemVkKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKG9wdHMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGAke3RoaXMubmFtZX0oJHtub3JtYWxpemVkSWRlbnRpZmllcn0pIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcclxuICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZSB3YWl0aW5nIGZvciB0aGUgc2VydmljZSBpbnN0YW5jZVxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gaXMgaW52b2tlZCBTWU5DSFJPTk9VU0xZLCBzbyBpdCBzaG91bGQgbm90IGV4ZWN1dGUgYW55IGxvbmdydW5uaW5nIHRhc2tzIGluIG9yZGVyIHRvIG5vdCBibG9jayB0aGUgcHJvZ3JhbS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXHJcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIG9uSW5pdChjYWxsYmFjaywgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gKF9hID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IFNldCgpO1xyXG4gICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3Muc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBleGlzdGluZ0NhbGxiYWNrcyk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcclxuICAgICAqL1xyXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgKiBOb3RlIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkIGlzIGRpZmZlcmVudCwgd2hpY2ggaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IGNyZWF0b3IsXHJcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAqIG9uSW5zdGFuY2VDcmVhdGVkKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7IHdoaWNoXHJcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIG5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3VsZEF1dG9Jbml0aWFsaXplKCkge1xyXG4gICAgICAgIHJldHVybiAoISF0aGlzLmNvbXBvbmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSAhPT0gXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKTtcclxuICAgIH1cclxufVxyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxyXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XHJcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcclxuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxyXG4gICAgICovXHJcbiAgICBhZGRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBhZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJvdmlkZXIobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH1cclxuICAgIGdldFByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJjb25zdCBpbnN0YW5jZU9mQW55ID0gKG9iamVjdCwgY29uc3RydWN0b3JzKSA9PiBjb25zdHJ1Y3RvcnMuc29tZSgoYykgPT4gb2JqZWN0IGluc3RhbmNlb2YgYyk7XG5cbmxldCBpZGJQcm94eWFibGVUeXBlcztcbmxldCBjdXJzb3JBZHZhbmNlTWV0aG9kcztcbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSB7XG4gICAgcmV0dXJuIChpZGJQcm94eWFibGVUeXBlcyB8fFxuICAgICAgICAoaWRiUHJveHlhYmxlVHlwZXMgPSBbXG4gICAgICAgICAgICBJREJEYXRhYmFzZSxcbiAgICAgICAgICAgIElEQk9iamVjdFN0b3JlLFxuICAgICAgICAgICAgSURCSW5kZXgsXG4gICAgICAgICAgICBJREJDdXJzb3IsXG4gICAgICAgICAgICBJREJUcmFuc2FjdGlvbixcbiAgICAgICAgXSkpO1xufVxuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpIHtcbiAgICByZXR1cm4gKGN1cnNvckFkdmFuY2VNZXRob2RzIHx8XG4gICAgICAgIChjdXJzb3JBZHZhbmNlTWV0aG9kcyA9IFtcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuYWR2YW5jZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWUsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlUHJpbWFyeUtleSxcbiAgICAgICAgXSkpO1xufVxuY29uc3QgY3Vyc29yUmVxdWVzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvbkRvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUod3JhcChyZXF1ZXN0LnJlc3VsdCkpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICB9KTtcbiAgICBwcm9taXNlXG4gICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyBTaW5jZSBjdXJzb3JpbmcgcmV1c2VzIHRoZSBJREJSZXF1ZXN0ICgqc2lnaCopLCB3ZSBjYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsXG4gICAgICAgIC8vIChzZWUgd3JhcEZ1bmN0aW9uKS5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCQ3Vyc29yKSB7XG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0TWFwLnNldCh2YWx1ZSwgcmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2F0Y2hpbmcgdG8gYXZvaWQgXCJVbmNhdWdodCBQcm9taXNlIGV4Y2VwdGlvbnNcIlxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIC8vIFRoaXMgbWFwcGluZyBleGlzdHMgaW4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGJ1dCBkb2Vzbid0IGRvZXNuJ3QgZXhpc3QgaW4gdHJhbnNmb3JtQ2FjaGUuIFRoaXNcbiAgICAvLyBpcyBiZWNhdXNlIHdlIGNyZWF0ZSBtYW55IHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdC5cbiAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KHByb21pc2UsIHJlcXVlc3QpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHR4KSB7XG4gICAgLy8gRWFybHkgYmFpbCBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBkb25lIHByb21pc2UgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgaWYgKHRyYW5zYWN0aW9uRG9uZU1hcC5oYXModHgpKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgZG9uZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QodHguZXJyb3IgfHwgbmV3IERPTUV4Y2VwdGlvbignQWJvcnRFcnJvcicsICdBYm9ydEVycm9yJykpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICB9KTtcbiAgICAvLyBDYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsLlxuICAgIHRyYW5zYWN0aW9uRG9uZU1hcC5zZXQodHgsIGRvbmUpO1xufVxubGV0IGlkYlByb3h5VHJhcHMgPSB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciB0cmFuc2FjdGlvbi5kb25lLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkb25lJylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Eb25lTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgLy8gUG9seWZpbGwgZm9yIG9iamVjdFN0b3JlTmFtZXMgYmVjYXVzZSBvZiBFZGdlLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdvYmplY3RTdG9yZU5hbWVzJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQub2JqZWN0U3RvcmVOYW1lcyB8fCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYWtlIHR4LnN0b3JlIHJldHVybiB0aGUgb25seSBzdG9yZSBpbiB0aGUgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbWFueS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc3RvcmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiByZWNlaXZlci5vYmplY3RTdG9yZShyZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIHRyYW5zZm9ybSB3aGF0ZXZlciB3ZSBnZXQgYmFjay5cbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0W3Byb3BdKTtcbiAgICB9LFxuICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uICYmXG4gICAgICAgICAgICAocHJvcCA9PT0gJ2RvbmUnIHx8IHByb3AgPT09ICdzdG9yZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcCBpbiB0YXJnZXQ7XG4gICAgfSxcbn07XG5mdW5jdGlvbiByZXBsYWNlVHJhcHMoY2FsbGJhY2spIHtcbiAgICBpZGJQcm94eVRyYXBzID0gY2FsbGJhY2soaWRiUHJveHlUcmFwcyk7XG59XG5mdW5jdGlvbiB3cmFwRnVuY3Rpb24oZnVuYykge1xuICAgIC8vIER1ZSB0byBleHBlY3RlZCBvYmplY3QgZXF1YWxpdHkgKHdoaWNoIGlzIGVuZm9yY2VkIGJ5IHRoZSBjYWNoaW5nIGluIGB3cmFwYCksIHdlXG4gICAgLy8gb25seSBjcmVhdGUgb25lIG5ldyBmdW5jIHBlciBmdW5jLlxuICAgIC8vIEVkZ2UgZG9lc24ndCBzdXBwb3J0IG9iamVjdFN0b3JlTmFtZXMgKGJvb28pLCBzbyB3ZSBwb2x5ZmlsbCBpdCBoZXJlLlxuICAgIGlmIChmdW5jID09PSBJREJEYXRhYmFzZS5wcm90b3R5cGUudHJhbnNhY3Rpb24gJiZcbiAgICAgICAgISgnb2JqZWN0U3RvcmVOYW1lcycgaW4gSURCVHJhbnNhY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0b3JlTmFtZXMsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZnVuYy5jYWxsKHVud3JhcCh0aGlzKSwgc3RvcmVOYW1lcywgLi4uYXJncyk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuc2V0KHR4LCBzdG9yZU5hbWVzLnNvcnQgPyBzdG9yZU5hbWVzLnNvcnQoKSA6IFtzdG9yZU5hbWVzXSk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcCh0eCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEN1cnNvciBtZXRob2RzIGFyZSBzcGVjaWFsLCBhcyB0aGUgYmVoYXZpb3VyIGlzIGEgbGl0dGxlIG1vcmUgZGlmZmVyZW50IHRvIHN0YW5kYXJkIElEQi4gSW5cbiAgICAvLyBJREIsIHlvdSBhZHZhbmNlIHRoZSBjdXJzb3IgYW5kIHdhaXQgZm9yIGEgbmV3ICdzdWNjZXNzJyBvbiB0aGUgSURCUmVxdWVzdCB0aGF0IGdhdmUgeW91IHRoZVxuICAgIC8vIGN1cnNvci4gSXQncyBraW5kYSBsaWtlIGEgcHJvbWlzZSB0aGF0IGNhbiByZXNvbHZlIHdpdGggbWFueSB2YWx1ZXMuIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlXG4gICAgLy8gd2l0aCByZWFsIHByb21pc2VzLCBzbyBlYWNoIGFkdmFuY2UgbWV0aG9kcyByZXR1cm5zIGEgbmV3IHByb21pc2UgZm9yIHRoZSBjdXJzb3Igb2JqZWN0LCBvclxuICAgIC8vIHVuZGVmaW5lZCBpZiB0aGUgZW5kIG9mIHRoZSBjdXJzb3IgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICBpZiAoZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKS5pbmNsdWRlcyhmdW5jKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgICAgICBmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcChjdXJzb3JSZXF1ZXN0TWFwLmdldCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgIHJldHVybiB3cmFwKGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICByZXR1cm4gd3JhcEZ1bmN0aW9uKHZhbHVlKTtcbiAgICAvLyBUaGlzIGRvZXNuJ3QgcmV0dXJuLCBpdCBqdXN0IGNyZWF0ZXMgYSAnZG9uZScgcHJvbWlzZSBmb3IgdGhlIHRyYW5zYWN0aW9uLFxuICAgIC8vIHdoaWNoIGlzIGxhdGVyIHJldHVybmVkIGZvciB0cmFuc2FjdGlvbi5kb25lIChzZWUgaWRiT2JqZWN0SGFuZGxlcikuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pXG4gICAgICAgIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih2YWx1ZSk7XG4gICAgaWYgKGluc3RhbmNlT2ZBbnkodmFsdWUsIGdldElkYlByb3h5YWJsZVR5cGVzKCkpKVxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHZhbHVlLCBpZGJQcm94eVRyYXBzKTtcbiAgICAvLyBSZXR1cm4gdGhlIHNhbWUgdmFsdWUgYmFjayBpZiB3ZSdyZSBub3QgZ29pbmcgdG8gdHJhbnNmb3JtIGl0LlxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHdyYXAodmFsdWUpIHtcbiAgICAvLyBXZSBzb21ldGltZXMgZ2VuZXJhdGUgbXVsdGlwbGUgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0IChlZyB3aGVuIGN1cnNvcmluZyksIGJlY2F1c2VcbiAgICAvLyBJREIgaXMgd2VpcmQgYW5kIGEgc2luZ2xlIElEQlJlcXVlc3QgY2FuIHlpZWxkIG1hbnkgcmVzcG9uc2VzLCBzbyB0aGVzZSBjYW4ndCBiZSBjYWNoZWQuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCUmVxdWVzdClcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QodmFsdWUpO1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgdHJhbnNmb3JtZWQgdGhpcyB2YWx1ZSBiZWZvcmUsIHJldXNlIHRoZSB0cmFuc2Zvcm1lZCB2YWx1ZS5cbiAgICAvLyBUaGlzIGlzIGZhc3RlciwgYnV0IGl0IGFsc28gcHJvdmlkZXMgb2JqZWN0IGVxdWFsaXR5LlxuICAgIGlmICh0cmFuc2Zvcm1DYWNoZS5oYXModmFsdWUpKVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpO1xuICAgIC8vIE5vdCBhbGwgdHlwZXMgYXJlIHRyYW5zZm9ybWVkLlxuICAgIC8vIFRoZXNlIG1heSBiZSBwcmltaXRpdmUgdHlwZXMsIHNvIHRoZXkgY2FuJ3QgYmUgV2Vha01hcCBrZXlzLlxuICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdHJhbnNmb3JtQ2FjaGUuc2V0KHZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQobmV3VmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuY29uc3QgdW53cmFwID0gKHZhbHVlKSA9PiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcblxuZXhwb3J0IHsgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGFzIGEsIGluc3RhbmNlT2ZBbnkgYXMgaSwgcmVwbGFjZVRyYXBzIGFzIHIsIHVud3JhcCBhcyB1LCB3cmFwIGFzIHcgfTtcbiIsImltcG9ydCB7IHcgYXMgd3JhcCwgciBhcyByZXBsYWNlVHJhcHMgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcbmV4cG9ydCB7IHUgYXMgdW53cmFwLCB3IGFzIHdyYXAgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcblxuLyoqXG4gKiBPcGVuIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKiBAcGFyYW0gdmVyc2lvbiBTY2hlbWEgdmVyc2lvbi5cbiAqIEBwYXJhbSBjYWxsYmFja3MgQWRkaXRpb25hbCBjYWxsYmFja3MuXG4gKi9cbmZ1bmN0aW9uIG9wZW5EQihuYW1lLCB2ZXJzaW9uLCB7IGJsb2NrZWQsIHVwZ3JhZGUsIGJsb2NraW5nLCB0ZXJtaW5hdGVkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcbiAgICBjb25zdCBvcGVuUHJvbWlzZSA9IHdyYXAocmVxdWVzdCk7XG4gICAgaWYgKHVwZ3JhZGUpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB1cGdyYWRlKHdyYXAocmVxdWVzdC5yZXN1bHQpLCBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCB3cmFwKHJlcXVlc3QudHJhbnNhY3Rpb24pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKVxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoKSA9PiBibG9ja2VkKCkpO1xuICAgIG9wZW5Qcm9taXNlXG4gICAgICAgIC50aGVuKChkYikgPT4ge1xuICAgICAgICBpZiAodGVybWluYXRlZClcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4gdGVybWluYXRlZCgpKTtcbiAgICAgICAgaWYgKGJsb2NraW5nKVxuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsICgpID0+IGJsb2NraW5nKCkpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKVxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoKSA9PiBibG9ja2VkKCkpO1xuICAgIHJldHVybiB3cmFwKHJlcXVlc3QpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbn1cblxuY29uc3QgcmVhZE1ldGhvZHMgPSBbJ2dldCcsICdnZXRLZXknLCAnZ2V0QWxsJywgJ2dldEFsbEtleXMnLCAnY291bnQnXTtcbmNvbnN0IHdyaXRlTWV0aG9kcyA9IFsncHV0JywgJ2FkZCcsICdkZWxldGUnLCAnY2xlYXInXTtcbmNvbnN0IGNhY2hlZE1ldGhvZHMgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB7XG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSURCRGF0YWJhc2UgJiZcbiAgICAgICAgIShwcm9wIGluIHRhcmdldCkgJiZcbiAgICAgICAgdHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYWNoZWRNZXRob2RzLmdldChwcm9wKSlcbiAgICAgICAgcmV0dXJuIGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApO1xuICAgIGNvbnN0IHRhcmdldEZ1bmNOYW1lID0gcHJvcC5yZXBsYWNlKC9Gcm9tSW5kZXgkLywgJycpO1xuICAgIGNvbnN0IHVzZUluZGV4ID0gcHJvcCAhPT0gdGFyZ2V0RnVuY05hbWU7XG4gICAgY29uc3QgaXNXcml0ZSA9IHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSk7XG4gICAgaWYgKFxuICAgIC8vIEJhaWwgaWYgdGhlIHRhcmdldCBkb2Vzbid0IGV4aXN0IG9uIHRoZSB0YXJnZXQuIEVnLCBnZXRBbGwgaXNuJ3QgaW4gRWRnZS5cbiAgICAhKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkgfHxcbiAgICAgICAgIShpc1dyaXRlIHx8IHJlYWRNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBhc3luYyBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6IHVuZGVmaW5lZCBnemlwcHMgYmV0dGVyLCBidXQgZmFpbHMgaW4gRWRnZSA6KFxuICAgICAgICBjb25zdCB0eCA9IHRoaXMudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKTtcbiAgICAgICAgbGV0IHRhcmdldCA9IHR4LnN0b3JlO1xuICAgICAgICBpZiAodXNlSW5kZXgpXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuaW5kZXgoYXJncy5zaGlmdCgpKTtcbiAgICAgICAgLy8gTXVzdCByZWplY3QgaWYgb3AgcmVqZWN0cy5cbiAgICAgICAgLy8gSWYgaXQncyBhIHdyaXRlIG9wZXJhdGlvbiwgbXVzdCByZWplY3QgaWYgdHguZG9uZSByZWplY3RzLlxuICAgICAgICAvLyBNdXN0IHJlamVjdCB3aXRoIG9wIHJlamVjdGlvbiBmaXJzdC5cbiAgICAgICAgLy8gTXVzdCByZXNvbHZlIHdpdGggb3AgdmFsdWUuXG4gICAgICAgIC8vIE11c3QgaGFuZGxlIGJvdGggcHJvbWlzZXMgKG5vIHVuaGFuZGxlZCByZWplY3Rpb25zKVxuICAgICAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRhcmdldFt0YXJnZXRGdW5jTmFtZV0oLi4uYXJncyksXG4gICAgICAgICAgICBpc1dyaXRlICYmIHR4LmRvbmUsXG4gICAgICAgIF0pKVswXTtcbiAgICB9O1xuICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XG4gICAgcmV0dXJuIG1ldGhvZDtcbn1cbnJlcGxhY2VUcmFwcygob2xkVHJhcHMpID0+ICh7XG4gICAgLi4ub2xkVHJhcHMsXG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLFxuICAgIGhhczogKHRhcmdldCwgcHJvcCkgPT4gISFnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5oYXModGFyZ2V0LCBwcm9wKSxcbn0pKTtcblxuZXhwb3J0IHsgZGVsZXRlREIsIG9wZW5EQiB9O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgc2V0VXNlckxvZ0hhbmRsZXIsIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsJDEgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgZ2V0RGVmYXVsdEFwcENvbmZpZywgZGVlcEVxdWFsLCBGaXJlYmFzZUVycm9yLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgaXNJbmRleGVkREJBdmFpbGFibGUsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5leHBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxyXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXHJcbiAgICBnZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxyXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlcnZpY2UubGlicmFyeX0vJHtzZXJ2aWNlLnZlcnNpb259YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihsb2dTdHJpbmcgPT4gbG9nU3RyaW5nKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuIChjb21wb25lbnQgPT09IG51bGwgfHwgY29tcG9uZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnQudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuOC4yXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYXBwLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3MtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbCA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2stY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkaiA9IFwiQGZpcmViYXNlL2FwcC1jaGVja1wiO1xuXG5jb25zdCBuYW1lJGkgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbmNvbnN0IG5hbWUkaCA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNvbnN0IG5hbWUkZiA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGUgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQyID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjkuMTIuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxuY29uc3QgUExBVEZPUk1fTE9HX1NUUklORyA9IHtcclxuICAgIFtuYW1lJG9dOiAnZmlyZS1jb3JlJyxcclxuICAgIFtuYW1lJG5dOiAnZmlyZS1jb3JlLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIFtuYW1lJG1dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hcHAtY2hlY2snLFxyXG4gICAgW25hbWUka106ICdmaXJlLWFwcC1jaGVjay1jb21wYXQnLFxyXG4gICAgW25hbWUkaV06ICdmaXJlLWF1dGgnLFxyXG4gICAgW25hbWUkaF06ICdmaXJlLWF1dGgtY29tcGF0JyxcclxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiJyxcclxuICAgIFtuYW1lJGZdOiAnZmlyZS1ydGRiLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4nLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWZuLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkJyxcclxuICAgIFtuYW1lJGJdOiAnZmlyZS1paWQtY29tcGF0JyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20nLFxyXG4gICAgW25hbWUkOV06ICdmaXJlLWZjbS1jb21wYXQnLFxyXG4gICAgW25hbWUkOF06ICdmaXJlLXBlcmYnLFxyXG4gICAgW25hbWUkN106ICdmaXJlLXBlcmYtY29tcGF0JyxcclxuICAgIFtuYW1lJDZdOiAnZmlyZS1yYycsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtcmMtY29tcGF0JyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MnLFxyXG4gICAgW25hbWUkM106ICdmaXJlLWdjcy1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLWZzdCcsXHJcbiAgICBbbmFtZSQxXTogJ2ZpcmUtZnN0LWNvbXBhdCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgIGZvciAoY29uc3QgYXBwIG9mIF9hcHBzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpIHtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdENvbnRyb2xsZXIgPSBhcHAuY29udGFpbmVyXHJcbiAgICAgICAgLmdldFByb3ZpZGVyKCdoZWFydGJlYXQnKVxyXG4gICAgICAgIC5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcclxuICAgIGlmIChoZWFydGJlYXRDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdm9pZCBoZWFydGJlYXRDb250cm9sbGVyLnRyaWdnZXJIZWFydGJlYXQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxufVxyXG4vKipcclxuICogVGVzdCBvbmx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcclxuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JTID0ge1xyXG4gICAgW1wibm8tYXBwXCIgLyogTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgRmlyZWJhc2UgQXBwLmluaXRpYWxpemVBcHAoKScsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcIm5vLW9wdGlvbnNcIiAvKiBOT19PUFRJT05TICovXTogJ05lZWQgdG8gcHJvdmlkZSBvcHRpb25zLCB3aGVuIG5vdCBiZWluZyBkZXBsb3llZCB0byBob3N0aW5nIHZpYSBzb3VyY2UuJyxcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nLFxyXG4gICAgW1wiaWRiLW9wZW5cIiAvKiBJREJfT1BFTiAqL106ICdFcnJvciB0aHJvd24gd2hlbiBvcGVuaW5nIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItZ2V0XCIgLyogSURCX0dFVCAqL106ICdFcnJvciB0aHJvd24gd2hlbiByZWFkaW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1zZXRcIiAvKiBJREJfV1JJVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gd3JpdGluZyB0byBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWRlbGV0ZVwiIC8qIElEQl9ERUxFVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gZGVsZXRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAoX29wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICBsZXQgb3B0aW9ucyA9IF9vcHRpb25zO1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSBnZXREZWZhdWx0QXBwQ29uZmlnKCkpO1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1vcHRpb25zXCIgLyogTk9fT1BUSU9OUyAqLyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCAmJiBuYW1lID09PSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIE5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLykpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBoYW5kbGVyIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICogQHBhcmFtIGxvZ0NhbGxiYWNrIC0gQW4gb3B0aW9uYWwgY3VzdG9tIGxvZyBoYW5kbGVyIHRoYXQgZXhlY3V0ZXMgdXNlciBjb2RlIHdoZW5ldmVyXHJcbiAqIHRoZSBGaXJlYmFzZSBTREsgbWFrZXMgYSBsb2dnaW5nIGNhbGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uTG9nKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIElOVkFMSURfTE9HX0FSR1VNRU5UICovKTtcclxuICAgIH1cclxuICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgbGV2ZWwgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgYXJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgaW5mb2AsIGVycm9ycyBhcmUgbG9nZ2VkLCBidXQgYGRlYnVnYCBhbmRcclxuICogYHZlcmJvc2VgIGxvZ3MgYXJlIG5vdCkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxvZ0xldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxvZ0xldmVsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1kYXRhYmFzZSc7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBTVE9SRV9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1zdG9yZSc7XHJcbmxldCBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQl9OQU1FLCBEQl9WRVJTSU9OLCB7XHJcbiAgICAgICAgICAgIHVwZ3JhZGU6IChkYiwgb2xkVmVyc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cclxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIElEQl9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIGRiXHJcbiAgICAgICAgICAgIC50cmFuc2FjdGlvbihTVE9SRV9OQU1FKVxyXG4gICAgICAgICAgICAub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLmdldChjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItZ2V0XCIgLyogSURCX0dFVCAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IChfYSA9IGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIoYXBwLCBoZWFydGJlYXRPYmplY3QpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dChoZWFydGJlYXRPYmplY3QsIGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgcmV0dXJuIHR4LmRvbmU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1zZXRcIiAvKiBJREJfV1JJVEUgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiAoX2EgPSBlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNvbXB1dGVLZXkoYXBwKSB7XHJcbiAgICByZXR1cm4gYCR7YXBwLm5hbWV9ISR7YXBwLm9wdGlvbnMuYXBwSWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBNQVhfSEVBREVSX0JZVEVTID0gMTAyNDtcclxuLy8gMzAgZGF5c1xyXG5jb25zdCBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTID0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBIZWFydGJlYXRTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbi1tZW1vcnkgY2FjaGUgZm9yIGhlYXJ0YmVhdHMsIHVzZWQgYnkgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHRvIGdlbmVyYXRlXHJcbiAgICAgICAgICogdGhlIGhlYWRlciBzdHJpbmcuXHJcbiAgICAgICAgICogU3RvcmVzIG9uZSByZWNvcmQgcGVyIGRhdGUuIFRoaXMgd2lsbCBiZSBjb25zb2xpZGF0ZWQgaW50byB0aGUgc3RhbmRhcmRcclxuICAgICAgICAgKiBmb3JtYXQgb2Ygb25lIHJlY29yZCBwZXIgdXNlciBhZ2VudCBzdHJpbmcgYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBoZWFkZXIuXHJcbiAgICAgICAgICogUG9wdWxhdGVkIGZyb20gaW5kZXhlZERCIHdoZW4gdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGFuZCBzaG91bGRcclxuICAgICAgICAgKiBiZSBrZXB0IGluIHN5bmMgd2l0aCBpbmRleGVkREIuXHJcbiAgICAgICAgICogTGVhdmUgcHVibGljIGZvciBlYXNpZXIgdGVzdGluZy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB0aGlzLl9zdG9yYWdlID0gbmV3IEhlYXJ0YmVhdFN0b3JhZ2VJbXBsKGFwcCk7XHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZSA9IHRoaXMuX3N0b3JhZ2UucmVhZCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgdG8gcmVwb3J0IGEgaGVhcnRiZWF0LiBUaGUgZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZVxyXG4gICAgICogYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgb2JqZWN0LCB1cGRhdGUgaGVhcnRiZWF0c0NhY2hlLCBhbmQgcGVyc2lzdCBpdFxyXG4gICAgICogdG8gSW5kZXhlZERCLlxyXG4gICAgICogTm90ZSB0aGF0IHdlIG9ubHkgc3RvcmUgb25lIGhlYXJ0YmVhdCBwZXIgZGF5LiBTbyBpZiBhIGhlYXJ0YmVhdCBmb3IgdG9kYXkgaXNcclxuICAgICAqIGFscmVhZHkgbG9nZ2VkLCBzdWJzZXF1ZW50IGNhbGxzIHRvIHRoaXMgZnVuY3Rpb24gaW4gdGhlIHNhbWUgZGF5IHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdHJpZ2dlckhlYXJ0YmVhdCgpIHtcclxuICAgICAgICBjb25zdCBwbGF0Zm9ybUxvZ2dlciA9IHRoaXMuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcigncGxhdGZvcm0tbG9nZ2VyJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIFwiRmlyZWJhc2UgdXNlciBhZ2VudFwiIHN0cmluZyBmcm9tIHRoZSBwbGF0Zm9ybSBsb2dnZXJcclxuICAgICAgICAvLyBzZXJ2aWNlLCBub3QgdGhlIGJyb3dzZXIgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBhZ2VudCA9IHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEbyBub3Qgc3RvcmUgYSBoZWFydGJlYXQgaWYgb25lIGlzIGFscmVhZHkgc3RvcmVkIGZvciB0aGlzIGRheVxyXG4gICAgICAgIC8vIG9yIGlmIGEgaGVhZGVyIGhhcyBhbHJlYWR5IGJlZW4gc2VudCB0b2RheS5cclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9PT0gZGF0ZSB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5zb21lKHNpbmdsZURhdGVIZWFydGJlYXQgPT4gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlID09PSBkYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBlbnRyeSBmb3IgdGhpcyBkYXRlLiBDcmVhdGUgb25lLlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5wdXNoKHsgZGF0ZSwgYWdlbnQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBlbnRyaWVzIG9sZGVyIHRoYW4gMzAgZGF5cy5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmZpbHRlcihzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGJUaW1lc3RhbXAgPSBuZXcgRGF0ZShzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpLnZhbHVlT2YoKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vdyAtIGhiVGltZXN0YW1wIDw9IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgd2hpY2ggY2FuIGJlIGF0dGFjaGVkIHRvIHRoZSBoZWFydGJlYXQtc3BlY2lmaWMgaGVhZGVyIGRpcmVjdGx5LlxyXG4gICAgICogSXQgYWxzbyBjbGVhcnMgYWxsIGhlYXJ0YmVhdHMgZnJvbSBtZW1vcnkgYXMgd2VsbCBhcyBpbiBJbmRleGVkREIuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogQ29uc3VtaW5nIHByb2R1Y3QgU0RLcyBzaG91bGQgbm90IHNlbmQgdGhlIGhlYWRlciBpZiB0aGlzIG1ldGhvZFxyXG4gICAgICogcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIC8vIEV4dHJhY3QgYXMgbWFueSBoZWFydGJlYXRzIGZyb20gdGhlIGNhY2hlIGFzIHdpbGwgZml0IHVuZGVyIHRoZSBzaXplIGxpbWl0LlxyXG4gICAgICAgIGNvbnN0IHsgaGVhcnRiZWF0c1RvU2VuZCwgdW5zZW50RW50cmllcyB9ID0gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIodGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlclN0cmluZyA9IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c1RvU2VuZCB9KSk7XHJcbiAgICAgICAgLy8gU3RvcmUgbGFzdCBzZW50IGRhdGUgdG8gcHJldmVudCBhbm90aGVyIGJlaW5nIGxvZ2dlZC9zZW50IGZvciB0aGUgc2FtZSBkYXkuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgaWYgKHVuc2VudEVudHJpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBTdG9yZSBhbnkgdW5zZW50IGVudHJpZXMgaWYgdGhleSBleGlzdC5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB1bnNlbnRFbnRyaWVzO1xyXG4gICAgICAgICAgICAvLyBUaGlzIHNlZW1zIG1vcmUgbGlrZWx5IHRoYW4gZW1wdHlpbmcgdGhlIGFycmF5IChiZWxvdykgdG8gbGVhZCB0byBzb21lIG9kZCBzdGF0ZVxyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgY2FjaGUgaXNuJ3QgZW1wdHkgYW5kIHRoaXMgd2lsbCBiZSBjYWxsZWQgYWdhaW4gb24gdGhlIG5leHQgcmVxdWVzdCxcclxuICAgICAgICAgICAgLy8gYW5kIGlzIHByb2JhYmx5IHNhZmVzdCBpZiB3ZSBhd2FpdCBpdC5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gW107XHJcbiAgICAgICAgICAgIC8vIERvIG5vdCB3YWl0IGZvciB0aGlzLCB0byByZWR1Y2UgbGF0ZW5jeS5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGVhZGVyU3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFVUQ0RhdGVTdHJpbmcoKSB7XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAvLyBSZXR1cm5zIGRhdGUgZm9ybWF0ICdZWVlZLU1NLUREJ1xyXG4gICAgcmV0dXJuIHRvZGF5LnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcihoZWFydGJlYXRzQ2FjaGUsIG1heFNpemUgPSBNQVhfSEVBREVSX0JZVEVTKSB7XHJcbiAgICAvLyBIZWFydGJlYXRzIGdyb3VwZWQgYnkgdXNlciBhZ2VudCBpbiB0aGUgc3RhbmRhcmQgZm9ybWF0IHRvIGJlIHNlbnQgaW5cclxuICAgIC8vIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRzVG9TZW5kID0gW107XHJcbiAgICAvLyBTaW5nbGUgZGF0ZSBmb3JtYXQgaGVhcnRiZWF0cyB0aGF0IGFyZSBub3Qgc2VudC5cclxuICAgIGxldCB1bnNlbnRFbnRyaWVzID0gaGVhcnRiZWF0c0NhY2hlLnNsaWNlKCk7XHJcbiAgICBmb3IgKGNvbnN0IHNpbmdsZURhdGVIZWFydGJlYXQgb2YgaGVhcnRiZWF0c0NhY2hlKSB7XHJcbiAgICAgICAgLy8gTG9vayBmb3IgYW4gZXhpc3RpbmcgZW50cnkgd2l0aCB0aGUgc2FtZSB1c2VyIGFnZW50LlxyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdEVudHJ5ID0gaGVhcnRiZWF0c1RvU2VuZC5maW5kKGhiID0+IGhiLmFnZW50ID09PSBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50KTtcclxuICAgICAgICBpZiAoIWhlYXJ0YmVhdEVudHJ5KSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGVudHJ5IGZvciB0aGlzIHVzZXIgYWdlbnQgZXhpc3RzLCBjcmVhdGUgb25lLlxyXG4gICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW3NpbmdsZURhdGVIZWFydGJlYXQuZGF0ZV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgaGVhcnRiZWF0XHJcbiAgICAgICAgICAgICAgICAvLyBlbnRyeSBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucHVzaChzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBkYXRlXHJcbiAgICAgICAgICAgIC8vIGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUG9wIHVuc2VudCBlbnRyeSBmcm9tIHF1ZXVlLiAoU2tpcHBlZCBpZiBhZGRpbmcgdGhlIGVudHJ5IGV4Y2VlZGVkXHJcbiAgICAgICAgLy8gcXVvdGEgYW5kIHRoZSBsb29wIGJyZWFrcyBlYXJseS4pXHJcbiAgICAgICAgdW5zZW50RW50cmllcyA9IHVuc2VudEVudHJpZXMuc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQsXHJcbiAgICAgICAgdW5zZW50RW50cmllc1xyXG4gICAgfTtcclxufVxyXG5jbGFzcyBIZWFydGJlYXRTdG9yYWdlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlID0gdGhpcy5ydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCkge1xyXG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgYWxsIGhlYXJ0YmVhdHMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJlYWQoKSB7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiSGVhcnRiZWF0T2JqZWN0ID0gYXdhaXQgcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkYkhlYXJ0YmVhdE9iamVjdCB8fCB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2hlYXJ0YmVhdCcsIGNvbnRhaW5lciA9PiBuZXcgSGVhcnRiZWF0U2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgdmFyaWFudCk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCAnZXNtMjAxNycpO1xyXG4gICAgLy8gUmVnaXN0ZXIgcGxhdGZvcm0gU0RLIGlkZW50aWZpZXIgKG5vIHZlcnNpb24pLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKCdmaXJlLWpzJywgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBBcHBcclxuICpcclxuICogQHJlbWFya3MgVGhpcyBwYWNrYWdlIGNvb3JkaW5hdGVzIHRoZSBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIGRpZmZlcmVudCBGaXJlYmFzZSBjb21wb25lbnRzXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygnJyk7XG5cbmV4cG9ydCB7IFNES19WRVJTSU9OLCBERUZBVUxUX0VOVFJZX05BTUUgYXMgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZENvbXBvbmVudCwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCBfYXBwcywgX2NsZWFyQ29tcG9uZW50cywgX2NvbXBvbmVudHMsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBkZWxldGVBcHAsIGdldEFwcCwgZ2V0QXBwcywgaW5pdGlhbGl6ZUFwcCwgb25Mb2csIHJlZ2lzdGVyVmVyc2lvbiwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBnZXRBcHAsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuNS4xNVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQRU5ESU5HX1RJTUVPVVRfTVMgPSAxMDAwMDtcclxuY29uc3QgUEFDS0FHRV9WRVJTSU9OID0gYHc6JHt2ZXJzaW9ufWA7XHJcbmNvbnN0IElOVEVSTkFMX0FVVEhfVkVSU0lPTiA9ICdGSVNfdjInO1xyXG5jb25zdCBJTlNUQUxMQVRJT05TX0FQSV9VUkwgPSAnaHR0cHM6Ly9maXJlYmFzZWluc3RhbGxhdGlvbnMuZ29vZ2xlYXBpcy5jb20vdjEnO1xyXG5jb25zdCBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUiA9IDYwICogNjAgKiAxMDAwOyAvLyBPbmUgaG91clxyXG5jb25zdCBTRVJWSUNFID0gJ2luc3RhbGxhdGlvbnMnO1xyXG5jb25zdCBTRVJWSUNFX05BTUUgPSAnSW5zdGFsbGF0aW9ucyc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SX0RFU0NSSVBUSU9OX01BUCA9IHtcclxuICAgIFtcIm1pc3NpbmctYXBwLWNvbmZpZy12YWx1ZXNcIiAvKiBNSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTICovXTogJ01pc3NpbmcgQXBwIGNvbmZpZ3VyYXRpb24gdmFsdWU6IFwieyR2YWx1ZU5hbWV9XCInLFxyXG4gICAgW1wibm90LXJlZ2lzdGVyZWRcIiAvKiBOT1RfUkVHSVNURVJFRCAqL106ICdGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQuJyxcclxuICAgIFtcImluc3RhbGxhdGlvbi1ub3QtZm91bmRcIiAvKiBJTlNUQUxMQVRJT05fTk9UX0ZPVU5EICovXTogJ0ZpcmViYXNlIEluc3RhbGxhdGlvbiBub3QgZm91bmQuJyxcclxuICAgIFtcInJlcXVlc3QtZmFpbGVkXCIgLyogUkVRVUVTVF9GQUlMRUQgKi9dOiAneyRyZXF1ZXN0TmFtZX0gcmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBcInskc2VydmVyQ29kZX0geyRzZXJ2ZXJTdGF0dXN9OiB7JHNlcnZlck1lc3NhZ2V9XCInLFxyXG4gICAgW1wiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqL106ICdDb3VsZCBub3QgcHJvY2VzcyByZXF1ZXN0LiBBcHBsaWNhdGlvbiBvZmZsaW5lLicsXHJcbiAgICBbXCJkZWxldGUtcGVuZGluZy1yZWdpc3RyYXRpb25cIiAvKiBERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04gKi9dOiBcIkNhbid0IGRlbGV0ZSBpbnN0YWxsYXRpb24gd2hpbGUgdGhlcmUgaXMgYSBwZW5kaW5nIHJlZ2lzdHJhdGlvbiByZXF1ZXN0LlwiXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KFNFUlZJQ0UsIFNFUlZJQ0VfTkFNRSwgRVJST1JfREVTQ1JJUFRJT05fTUFQKTtcclxuLyoqIFJldHVybnMgdHJ1ZSBpZiBlcnJvciBpcyBhIEZpcmViYXNlRXJyb3IgdGhhdCBpcyBiYXNlZCBvbiBhbiBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIuICovXHJcbmZ1bmN0aW9uIGlzU2VydmVyRXJyb3IoZXJyb3IpIHtcclxuICAgIHJldHVybiAoZXJyb3IgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yICYmXHJcbiAgICAgICAgZXJyb3IuY29kZS5pbmNsdWRlcyhcInJlcXVlc3QtZmFpbGVkXCIgLyogUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoeyBwcm9qZWN0SWQgfSkge1xyXG4gICAgcmV0dXJuIGAke0lOU1RBTExBVElPTlNfQVBJX1VSTH0vcHJvamVjdHMvJHtwcm9qZWN0SWR9L2luc3RhbGxhdGlvbnNgO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRva2VuOiByZXNwb25zZS50b2tlbixcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAyIC8qIENPTVBMRVRFRCAqLyxcclxuICAgICAgICBleHBpcmVzSW46IGdldEV4cGlyZXNJbkZyb21SZXNwb25zZUV4cGlyZXNJbihyZXNwb25zZS5leHBpcmVzSW4pLFxyXG4gICAgICAgIGNyZWF0aW9uVGltZTogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRFcnJvckZyb21SZXNwb25zZShyZXF1ZXN0TmFtZSwgcmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlSnNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGNvbnN0IGVycm9yRGF0YSA9IHJlc3BvbnNlSnNvbi5lcnJvcjtcclxuICAgIHJldHVybiBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInJlcXVlc3QtZmFpbGVkXCIgLyogUkVRVUVTVF9GQUlMRUQgKi8sIHtcclxuICAgICAgICByZXF1ZXN0TmFtZSxcclxuICAgICAgICBzZXJ2ZXJDb2RlOiBlcnJvckRhdGEuY29kZSxcclxuICAgICAgICBzZXJ2ZXJNZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSxcclxuICAgICAgICBzZXJ2ZXJTdGF0dXM6IGVycm9yRGF0YS5zdGF0dXNcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnMoeyBhcGlLZXkgfSkge1xyXG4gICAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgeyByZWZyZXNoVG9rZW4gfSkge1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgZ2V0QXV0aG9yaXphdGlvbkhlYWRlcihyZWZyZXNoVG9rZW4pKTtcclxuICAgIHJldHVybiBoZWFkZXJzO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxscyB0aGUgcGFzc2VkIGluIGZldGNoIHdyYXBwZXIgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlLlxyXG4gKiBJZiB0aGUgcmV0dXJuZWQgcmVzcG9uc2UgaGFzIGEgc3RhdHVzIG9mIDV4eCwgcmUtcnVucyB0aGUgZnVuY3Rpb24gb25jZSBhbmRcclxuICogcmV0dXJucyB0aGUgcmVzcG9uc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXRyeUlmU2VydmVyRXJyb3IoZm4pIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XHJcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA+PSA1MDAgJiYgcmVzdWx0LnN0YXR1cyA8IDYwMCkge1xyXG4gICAgICAgIC8vIEludGVybmFsIFNlcnZlciBFcnJvci4gUmV0cnkgcmVxdWVzdC5cclxuICAgICAgICByZXR1cm4gZm4oKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlRXhwaXJlc0luKSB7XHJcbiAgICAvLyBUaGlzIHdvcmtzIGJlY2F1c2UgdGhlIHNlcnZlciB3aWxsIG5ldmVyIHJlc3BvbmQgd2l0aCBmcmFjdGlvbnMgb2YgYSBzZWNvbmQuXHJcbiAgICByZXR1cm4gTnVtYmVyKHJlc3BvbnNlRXhwaXJlc0luLnJlcGxhY2UoJ3MnLCAnMDAwJykpO1xyXG59XHJcbmZ1bmN0aW9uIGdldEF1dGhvcml6YXRpb25IZWFkZXIocmVmcmVzaFRva2VuKSB7XHJcbiAgICByZXR1cm4gYCR7SU5URVJOQUxfQVVUSF9WRVJTSU9OfSAke3JlZnJlc2hUb2tlbn1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCB7IGZpZCB9KSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBmaWQsXHJcbiAgICAgICAgYXV0aFZlcnNpb246IElOVEVSTkFMX0FVVEhfVkVSU0lPTixcclxuICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkLFxyXG4gICAgICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IHtcclxuICAgICAgICAgICAgZmlkOiByZXNwb25zZVZhbHVlLmZpZCB8fCBmaWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMiAvKiBDT01QTEVURUQgKi8sXHJcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogcmVzcG9uc2VWYWx1ZS5yZWZyZXNoVG9rZW4sXHJcbiAgICAgICAgICAgIGF1dGhUb2tlbjogZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2VWYWx1ZS5hdXRoVG9rZW4pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgYXdhaXQgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0NyZWF0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgZ2l2ZW4gdGltZSBwYXNzZXMuICovXHJcbmZ1bmN0aW9uIHNsZWVwKG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBidWZmZXJUb0Jhc2U2NFVybFNhZmUoYXJyYXkpIHtcclxuICAgIGNvbnN0IGI2NCA9IGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi5hcnJheSkpO1xyXG4gICAgcmV0dXJuIGI2NC5yZXBsYWNlKC9cXCsvZywgJy0nKS5yZXBsYWNlKC9cXC8vZywgJ18nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBWQUxJRF9GSURfUEFUVEVSTiA9IC9eW2NkZWZdW1xcdy1dezIxfSQvO1xyXG5jb25zdCBJTlZBTElEX0ZJRCA9ICcnO1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgbmV3IEZJRCB1c2luZyByYW5kb20gdmFsdWVzIGZyb20gV2ViIENyeXB0byBBUEkuXHJcbiAqIFJldHVybnMgYW4gZW1wdHkgc3RyaW5nIGlmIEZJRCBnZW5lcmF0aW9uIGZhaWxzIGZvciBhbnkgcmVhc29uLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2VuZXJhdGVGaWQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEEgdmFsaWQgRklEIGhhcyBleGFjdGx5IDIyIGJhc2U2NCBjaGFyYWN0ZXJzLCB3aGljaCBpcyAxMzIgYml0cywgb3IgMTYuNVxyXG4gICAgICAgIC8vIGJ5dGVzLiBvdXIgaW1wbGVtZW50YXRpb24gZ2VuZXJhdGVzIGEgMTcgYnl0ZSBhcnJheSBpbnN0ZWFkLlxyXG4gICAgICAgIGNvbnN0IGZpZEJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KDE3KTtcclxuICAgICAgICBjb25zdCBjcnlwdG8gPSBzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvO1xyXG4gICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoZmlkQnl0ZUFycmF5KTtcclxuICAgICAgICAvLyBSZXBsYWNlIHRoZSBmaXJzdCA0IHJhbmRvbSBiaXRzIHdpdGggdGhlIGNvbnN0YW50IEZJRCBoZWFkZXIgb2YgMGIwMTExLlxyXG4gICAgICAgIGZpZEJ5dGVBcnJheVswXSA9IDBiMDExMTAwMDAgKyAoZmlkQnl0ZUFycmF5WzBdICUgMGIwMDAxMDAwMCk7XHJcbiAgICAgICAgY29uc3QgZmlkID0gZW5jb2RlKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAgICAgcmV0dXJuIFZBTElEX0ZJRF9QQVRURVJOLnRlc3QoZmlkKSA/IGZpZCA6IElOVkFMSURfRklEO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgLy8gRklEIGdlbmVyYXRpb24gZXJyb3JlZFxyXG4gICAgICAgIHJldHVybiBJTlZBTElEX0ZJRDtcclxuICAgIH1cclxufVxyXG4vKiogQ29udmVydHMgYSBGSUQgVWludDhBcnJheSB0byBhIGJhc2U2NCBzdHJpbmcgcmVwcmVzZW50YXRpb24uICovXHJcbmZ1bmN0aW9uIGVuY29kZShmaWRCeXRlQXJyYXkpIHtcclxuICAgIGNvbnN0IGI2NFN0cmluZyA9IGJ1ZmZlclRvQmFzZTY0VXJsU2FmZShmaWRCeXRlQXJyYXkpO1xyXG4gICAgLy8gUmVtb3ZlIHRoZSAyM3JkIGNoYXJhY3RlciB0aGF0IHdhcyBhZGRlZCBiZWNhdXNlIG9mIHRoZSBleHRyYSA0IGJpdHMgYXQgdGhlXHJcbiAgICAvLyBlbmQgb2Ygb3VyIDE3IGJ5dGUgYXJyYXksIGFuZCB0aGUgJz0nIHBhZGRpbmcuXHJcbiAgICByZXR1cm4gYjY0U3RyaW5nLnN1YnN0cigwLCAyMik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFJldHVybnMgYSBzdHJpbmcga2V5IHRoYXQgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgdGhlIGFwcC4gKi9cclxuZnVuY3Rpb24gZ2V0S2V5KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIGAke2FwcENvbmZpZy5hcHBOYW1lfSEke2FwcENvbmZpZy5hcHBJZH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGZpZENoYW5nZUNhbGxiYWNrcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIENhbGxzIHRoZSBvbklkQ2hhbmdlIGNhbGxiYWNrcyB3aXRoIHRoZSBuZXcgRklEIHZhbHVlLCBhbmQgYnJvYWRjYXN0cyB0aGVcclxuICogY2hhbmdlIHRvIG90aGVyIHRhYnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWRDaGFuZ2VkKGFwcENvbmZpZywgZmlkKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3Moa2V5LCBmaWQpO1xyXG4gICAgYnJvYWRjYXN0RmlkQ2hhbmdlKGtleSwgZmlkKTtcclxufVxyXG5mdW5jdGlvbiBhZGRDYWxsYmFjayhhcHBDb25maWcsIGNhbGxiYWNrKSB7XHJcbiAgICAvLyBPcGVuIHRoZSBicm9hZGNhc3QgY2hhbm5lbCBpZiBpdCdzIG5vdCBhbHJlYWR5IG9wZW4sXHJcbiAgICAvLyB0byBiZSBhYmxlIHRvIGxpc3RlbiB0byBjaGFuZ2UgZXZlbnRzIGZyb20gb3RoZXIgdGFicy5cclxuICAgIGdldEJyb2FkY2FzdENoYW5uZWwoKTtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgbGV0IGNhbGxiYWNrU2V0ID0gZmlkQ2hhbmdlQ2FsbGJhY2tzLmdldChrZXkpO1xyXG4gICAgaWYgKCFjYWxsYmFja1NldCkge1xyXG4gICAgICAgIGNhbGxiYWNrU2V0ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIGZpZENoYW5nZUNhbGxiYWNrcy5zZXQoa2V5LCBjYWxsYmFja1NldCk7XHJcbiAgICB9XHJcbiAgICBjYWxsYmFja1NldC5hZGQoY2FsbGJhY2spO1xyXG59XHJcbmZ1bmN0aW9uIHJlbW92ZUNhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgY2FsbGJhY2tTZXQgPSBmaWRDaGFuZ2VDYWxsYmFja3MuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWNhbGxiYWNrU2V0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY2FsbGJhY2tTZXQuZGVsZXRlKGNhbGxiYWNrKTtcclxuICAgIGlmIChjYWxsYmFja1NldC5zaXplID09PSAwKSB7XHJcbiAgICAgICAgZmlkQ2hhbmdlQ2FsbGJhY2tzLmRlbGV0ZShrZXkpO1xyXG4gICAgfVxyXG4gICAgLy8gQ2xvc2UgYnJvYWRjYXN0IGNoYW5uZWwgaWYgdGhlcmUgYXJlIG5vIG1vcmUgY2FsbGJhY2tzLlxyXG4gICAgY2xvc2VCcm9hZGNhc3RDaGFubmVsKCk7XHJcbn1cclxuZnVuY3Rpb24gY2FsbEZpZENoYW5nZUNhbGxiYWNrcyhrZXksIGZpZCkge1xyXG4gICAgY29uc3QgY2FsbGJhY2tzID0gZmlkQ2hhbmdlQ2FsbGJhY2tzLmdldChrZXkpO1xyXG4gICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgIGNhbGxiYWNrKGZpZCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gYnJvYWRjYXN0RmlkQ2hhbmdlKGtleSwgZmlkKSB7XHJcbiAgICBjb25zdCBjaGFubmVsID0gZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG4gICAgaWYgKGNoYW5uZWwpIHtcclxuICAgICAgICBjaGFubmVsLnBvc3RNZXNzYWdlKHsga2V5LCBmaWQgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZUJyb2FkY2FzdENoYW5uZWwoKTtcclxufVxyXG5sZXQgYnJvYWRjYXN0Q2hhbm5lbCA9IG51bGw7XHJcbi8qKiBPcGVucyBhbmQgcmV0dXJucyBhIEJyb2FkY2FzdENoYW5uZWwgaWYgaXQgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLiAqL1xyXG5mdW5jdGlvbiBnZXRCcm9hZGNhc3RDaGFubmVsKCkge1xyXG4gICAgaWYgKCFicm9hZGNhc3RDaGFubmVsICYmICdCcm9hZGNhc3RDaGFubmVsJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKCdbRmlyZWJhc2VdIEZJRCBDaGFuZ2UnKTtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9IGUgPT4ge1xyXG4gICAgICAgICAgICBjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzKGUuZGF0YS5rZXksIGUuZGF0YS5maWQpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYnJvYWRjYXN0Q2hhbm5lbDtcclxufVxyXG5mdW5jdGlvbiBjbG9zZUJyb2FkY2FzdENoYW5uZWwoKSB7XHJcbiAgICBpZiAoZmlkQ2hhbmdlQ2FsbGJhY2tzLnNpemUgPT09IDAgJiYgYnJvYWRjYXN0Q2hhbm5lbCkge1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwuY2xvc2UoKTtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsID0gbnVsbDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQVRBQkFTRV9OQU1FID0gJ2ZpcmViYXNlLWluc3RhbGxhdGlvbnMtZGF0YWJhc2UnO1xyXG5jb25zdCBEQVRBQkFTRV9WRVJTSU9OID0gMTtcclxuY29uc3QgT0JKRUNUX1NUT1JFX05BTUUgPSAnZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1zdG9yZSc7XHJcbmxldCBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQVRBQkFTRV9OQU1FLCBEQVRBQkFTRV9WRVJTSU9OLCB7XHJcbiAgICAgICAgICAgIHVwZ3JhZGU6IChkYiwgb2xkVmVyc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cclxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGJQcm9taXNlO1xyXG59XHJcbi8qKiBBc3NpZ25zIG9yIG92ZXJ3cml0ZXMgdGhlIHJlY29yZCBmb3IgdGhlIGdpdmVuIGtleSB3aXRoIHRoZSBnaXZlbiB2YWx1ZS4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0KGFwcENvbmZpZywgdmFsdWUpIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSAoYXdhaXQgb2JqZWN0U3RvcmUuZ2V0KGtleSkpO1xyXG4gICAgYXdhaXQgb2JqZWN0U3RvcmUucHV0KHZhbHVlLCBrZXkpO1xyXG4gICAgYXdhaXQgdHguZG9uZTtcclxuICAgIGlmICghb2xkVmFsdWUgfHwgb2xkVmFsdWUuZmlkICE9PSB2YWx1ZS5maWQpIHtcclxuICAgICAgICBmaWRDaGFuZ2VkKGFwcENvbmZpZywgdmFsdWUuZmlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG4vKiogUmVtb3ZlcyByZWNvcmQocykgZnJvbSB0aGUgb2JqZWN0U3RvcmUgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4ga2V5LiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZW1vdmUoYXBwQ29uZmlnKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICBhd2FpdCB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSkuZGVsZXRlKGtleSk7XHJcbiAgICBhd2FpdCB0eC5kb25lO1xyXG59XHJcbi8qKlxyXG4gKiBBdG9taWNhbGx5IHVwZGF0ZXMgYSByZWNvcmQgd2l0aCB0aGUgcmVzdWx0IG9mIHVwZGF0ZUZuLCB3aGljaCBnZXRzXHJcbiAqIGNhbGxlZCB3aXRoIHRoZSBjdXJyZW50IHZhbHVlLiBJZiBuZXdWYWx1ZSBpcyB1bmRlZmluZWQsIHRoZSByZWNvcmQgaXNcclxuICogZGVsZXRlZCBpbnN0ZWFkLlxyXG4gKiBAcmV0dXJuIFVwZGF0ZWQgdmFsdWVcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZShhcHBDb25maWcsIHVwZGF0ZUZuKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgIGNvbnN0IG9sZFZhbHVlID0gKGF3YWl0IHN0b3JlLmdldChrZXkpKTtcclxuICAgIGNvbnN0IG5ld1ZhbHVlID0gdXBkYXRlRm4ob2xkVmFsdWUpO1xyXG4gICAgaWYgKG5ld1ZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBhd2FpdCBzdG9yZS5kZWxldGUoa2V5KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGF3YWl0IHN0b3JlLnB1dChuZXdWYWx1ZSwga2V5KTtcclxuICAgIH1cclxuICAgIGF3YWl0IHR4LmRvbmU7XHJcbiAgICBpZiAobmV3VmFsdWUgJiYgKCFvbGRWYWx1ZSB8fCBvbGRWYWx1ZS5maWQgIT09IG5ld1ZhbHVlLmZpZCkpIHtcclxuICAgICAgICBmaWRDaGFuZ2VkKGFwcENvbmZpZywgbmV3VmFsdWUuZmlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXdWYWx1ZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVXBkYXRlcyBhbmQgcmV0dXJucyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAqIEFsc28gdHJpZ2dlcnMgYSByZWdpc3RyYXRpb24gcmVxdWVzdCBpZiBpdCBpcyBuZWNlc3NhcnkgYW5kIHBvc3NpYmxlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9uRW50cnkoaW5zdGFsbGF0aW9ucykge1xyXG4gICAgbGV0IHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25FbnRyeSA9IGF3YWl0IHVwZGF0ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgb2xkRW50cnkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGluc3RhbGxhdGlvbkVudHJ5ID0gdXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeShvbGRFbnRyeSk7XHJcbiAgICAgICAgY29uc3QgZW50cnlXaXRoUHJvbWlzZSA9IHRyaWdnZXJSZWdpc3RyYXRpb25JZk5lY2Vzc2FyeShpbnN0YWxsYXRpb25zLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IGVudHJ5V2l0aFByb21pc2UucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICByZXR1cm4gZW50cnlXaXRoUHJvbWlzZS5pbnN0YWxsYXRpb25FbnRyeTtcclxuICAgIH0pO1xyXG4gICAgaWYgKGluc3RhbGxhdGlvbkVudHJ5LmZpZCA9PT0gSU5WQUxJRF9GSUQpIHtcclxuICAgICAgICAvLyBGSUQgZ2VuZXJhdGlvbiBmYWlsZWQuIFdhaXRpbmcgZm9yIHRoZSBGSUQgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBhd2FpdCByZWdpc3RyYXRpb25Qcm9taXNlIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2VcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgSW5zdGFsbGF0aW9uIEVudHJ5IGlmIG9uZSBkb2VzIG5vdCBleGlzdC5cclxuICogQWxzbyBjbGVhcnMgdGltZWQgb3V0IHBlbmRpbmcgcmVxdWVzdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICBjb25zdCBlbnRyeSA9IG9sZEVudHJ5IHx8IHtcclxuICAgICAgICBmaWQ6IGdlbmVyYXRlRmlkKCksXHJcbiAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNsZWFyVGltZWRPdXRSZXF1ZXN0KGVudHJ5KTtcclxufVxyXG4vKipcclxuICogSWYgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCB5ZXQsIHRoaXMgd2lsbCB0cmlnZ2VyIHRoZVxyXG4gKiByZWdpc3RyYXRpb24gYW5kIHJldHVybiBhbiBJblByb2dyZXNzSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqXHJcbiAqIElmIHJlZ2lzdHJhdGlvblByb21pc2UgZG9lcyBub3QgZXhpc3QsIHRoZSBpbnN0YWxsYXRpb25FbnRyeSBpcyBndWFyYW50ZWVkXHJcbiAqIHRvIGJlIHJlZ2lzdGVyZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIGlmIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHJlcXVpcmVkIGJ1dCBhcHAgaXMgb2ZmbGluZS5cclxuICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvciA9IFByb21pc2UucmVqZWN0KEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLykpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlOiByZWdpc3RyYXRpb25Qcm9taXNlV2l0aEVycm9yXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRyeSByZWdpc3RlcmluZy4gQ2hhbmdlIHN0YXR1cyB0byBJTl9QUk9HUkVTUy5cclxuICAgICAgICBjb25zdCBpblByb2dyZXNzRW50cnkgPSB7XHJcbiAgICAgICAgICAgIGZpZDogaW5zdGFsbGF0aW9uRW50cnkuZmlkLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDEgLyogSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvblByb21pc2UgPSByZWdpc3Rlckluc3RhbGxhdGlvbihpbnN0YWxsYXRpb25zLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpblByb2dyZXNzRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlOiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucylcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaW5zdGFsbGF0aW9uRW50cnkgfTtcclxuICAgIH1cclxufVxyXG4vKiogVGhpcyB3aWxsIGJlIGV4ZWN1dGVkIG9ubHkgb25jZSBmb3IgZWFjaCBuZXcgRmlyZWJhc2UgSW5zdGFsbGF0aW9uLiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWdpc3Rlckluc3RhbGxhdGlvbihpbnN0YWxsYXRpb25zLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSBhd2FpdCBjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICByZXR1cm4gc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoaXNTZXJ2ZXJFcnJvcihlKSAmJiBlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDA5KSB7XHJcbiAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIGNhbiBub3QgYmUgdXNlZFwiIGVycm9yLlxyXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgIGF3YWl0IHJlbW92ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZWdpc3RyYXRpb24gZmFpbGVkLiBTZXQgRklEIGFzIG5vdCByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICBhd2FpdCBzZXQoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIHtcclxuICAgICAgICAgICAgICAgIGZpZDogaW5zdGFsbGF0aW9uRW50cnkuZmlkLFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcbi8qKiBDYWxsIGlmIEZJRCByZWdpc3RyYXRpb24gaXMgcGVuZGluZyBpbiBhbm90aGVyIHJlcXVlc3QuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zKSB7XHJcbiAgICAvLyBVbmZvcnR1bmF0ZWx5LCB0aGVyZSBpcyBubyB3YXkgb2YgcmVsaWFibHkgb2JzZXJ2aW5nIHdoZW4gYSB2YWx1ZSBpblxyXG4gICAgLy8gSW5kZXhlZERCIGNoYW5nZXMgKHlldCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL2luZGV4ZWQtZGItb2JzZXJ2ZXJzKSxcclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gcG9sbC5cclxuICAgIGxldCBlbnRyeSA9IGF3YWl0IHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcpO1xyXG4gICAgd2hpbGUgKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICAvLyBUaGUgcmVxdWVzdCB0aW1lZCBvdXQgb3IgZmFpbGVkIGluIGEgZGlmZmVyZW50IGNhbGwuIFRyeSBhZ2Fpbi5cclxuICAgICAgICBjb25zdCB7IGluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKTtcclxuICAgICAgICBpZiAocmVnaXN0cmF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIHJlZ2lzdHJhdGlvblByb21pc2UsIGVudHJ5IGlzIHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgIHJldHVybiBpbnN0YWxsYXRpb25FbnRyeTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW50cnk7XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgQ3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFVwZGF0ZXMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGluIHRoZSBEQiBiYXNlZCBvbiB0aGUgc3RhdHVzIG9mIHRoZVxyXG4gKiBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdC5cclxuICpcclxuICogUmV0dXJucyB0aGUgdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeS5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlKGFwcENvbmZpZywgb2xkRW50cnkgPT4ge1xyXG4gICAgICAgIGlmICghb2xkRW50cnkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChvbGRFbnRyeSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSkge1xyXG4gICAgaWYgKGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChlbnRyeSkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWQ6IGVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbnRyeTtcclxufVxyXG5mdW5jdGlvbiBoYXNJbnN0YWxsYXRpb25SZXF1ZXN0VGltZWRPdXQoaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovICYmXHJcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uVGltZSArIFBFTkRJTkdfVElNRU9VVF9NUyA8IERhdGUubm93KCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdCh7IGFwcENvbmZpZywgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyIH0sIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICBjb25zdCBoZWFkZXJzID0gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgLy8gSWYgaGVhcnRiZWF0IHNlcnZpY2UgZXhpc3RzLCBhZGQgdGhlIGhlYXJ0YmVhdCBzdHJpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgIGNvbnN0IGhlYXJ0YmVhdFNlcnZpY2UgPSBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICBvcHRpb25hbDogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0U2VydmljZSkge1xyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdHNIZWFkZXIgPSBhd2FpdCBoZWFydGJlYXRTZXJ2aWNlLmdldEhlYXJ0YmVhdHNIZWFkZXIoKTtcclxuICAgICAgICBpZiAoaGVhcnRiZWF0c0hlYWRlcikge1xyXG4gICAgICAgICAgICBoZWFkZXJzLmFwcGVuZCgneC1maXJlYmFzZS1jbGllbnQnLCBoZWFydGJlYXRzSGVhZGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgIGluc3RhbGxhdGlvbjoge1xyXG4gICAgICAgICAgICBzZGtWZXJzaW9uOiBQQUNLQUdFX1ZFUlNJT04sXHJcbiAgICAgICAgICAgIGFwcElkOiBhcHBDb25maWcuYXBwSWRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeUlmU2VydmVyRXJyb3IoKCkgPT4gZmV0Y2goZW5kcG9pbnQsIHJlcXVlc3QpKTtcclxuICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVmFsdWUgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgY29uc3QgY29tcGxldGVkQXV0aFRva2VuID0gZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2VWYWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlZEF1dGhUb2tlbjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IGF3YWl0IGdldEVycm9yRnJvbVJlc3BvbnNlKCdHZW5lcmF0ZSBBdXRoIFRva2VuJywgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQoYXBwQ29uZmlnLCB7IGZpZCB9KSB7XHJcbiAgICByZXR1cm4gYCR7Z2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyl9LyR7ZmlkfS9hdXRoVG9rZW5zOmdlbmVyYXRlYDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHZhbGlkIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZvciB0aGUgaW5zdGFsbGF0aW9uLiBHZW5lcmF0ZXMgYSBuZXdcclxuICogdG9rZW4gaWYgb25lIGRvZXNuJ3QgZXhpc3QsIGlzIGV4cGlyZWQgb3IgYWJvdXQgdG8gZXhwaXJlLlxyXG4gKlxyXG4gKiBTaG91bGQgb25seSBiZSBjYWxsZWQgaWYgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyByZWdpc3RlcmVkLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgbGV0IHRva2VuUHJvbWlzZTtcclxuICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgdXBkYXRlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKCFpc0VudHJ5UmVnaXN0ZXJlZChvbGRFbnRyeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJub3QtcmVnaXN0ZXJlZFwiIC8qIE5PVF9SRUdJU1RFUkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmIGlzQXV0aFRva2VuVmFsaWQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBhIHZhbGlkIHRva2VuIGluIHRoZSBEQi5cclxuICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvbGRBdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBhbHJlYWR5IGlzIGEgdG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgdG9rZW5Qcm9taXNlID0gd2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpO1xyXG4gICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyB0b2tlbiBvciB0b2tlbiBleHBpcmVkLlxyXG4gICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaW5Qcm9ncmVzc0VudHJ5ID0gbWFrZUF1dGhUb2tlblJlcXVlc3RJblByb2dyZXNzRW50cnkob2xkRW50cnkpO1xyXG4gICAgICAgICAgICB0b2tlblByb21pc2UgPSBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoaW5zdGFsbGF0aW9ucywgaW5Qcm9ncmVzc0VudHJ5KTtcclxuICAgICAgICAgICAgcmV0dXJuIGluUHJvZ3Jlc3NFbnRyeTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGF1dGhUb2tlbiA9IHRva2VuUHJvbWlzZVxyXG4gICAgICAgID8gYXdhaXQgdG9rZW5Qcm9taXNlXHJcbiAgICAgICAgOiBlbnRyeS5hdXRoVG9rZW47XHJcbiAgICByZXR1cm4gYXV0aFRva2VuO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxsIG9ubHkgaWYgRklEIGlzIHJlZ2lzdGVyZWQgYW5kIEF1dGggVG9rZW4gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy5cclxuICpcclxuICogV2FpdHMgdW50aWwgdGhlIGN1cnJlbnQgcGVuZGluZyByZXF1ZXN0IGZpbmlzaGVzLiBJZiB0aGUgcmVxdWVzdCB0aW1lcyBvdXQsXHJcbiAqIHRyaWVzIG9uY2UgaW4gdGhpcyB0aHJlYWQgYXMgd2VsbC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAvLyBVbmZvcnR1bmF0ZWx5LCB0aGVyZSBpcyBubyB3YXkgb2YgcmVsaWFibHkgb2JzZXJ2aW5nIHdoZW4gYSB2YWx1ZSBpblxyXG4gICAgLy8gSW5kZXhlZERCIGNoYW5nZXMgKHlldCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL2luZGV4ZWQtZGItb2JzZXJ2ZXJzKSxcclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gcG9sbC5cclxuICAgIGxldCBlbnRyeSA9IGF3YWl0IHVwZGF0ZUF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcpO1xyXG4gICAgd2hpbGUgKGVudHJ5LmF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSB7XHJcbiAgICAgICAgLy8gZ2VuZXJhdGVBdXRoVG9rZW4gc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgYXdhaXQgc2xlZXAoMTAwKTtcclxuICAgICAgICBlbnRyeSA9IGF3YWl0IHVwZGF0ZUF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXV0aFRva2VuID0gZW50cnkuYXV0aFRva2VuO1xyXG4gICAgaWYgKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgLy8gVGhlIHJlcXVlc3QgdGltZWQgb3V0IG9yIGZhaWxlZCBpbiBhIGRpZmZlcmVudCBjYWxsLiBUcnkgYWdhaW4uXHJcbiAgICAgICAgcmV0dXJuIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgR2VuZXJhdGVBdXRoVG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBpZiAoIWlzRW50cnlSZWdpc3RlcmVkKG9sZEVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgaWYgKGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChvbGRBdXRoVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9sZEVudHJ5KSwgeyBhdXRoVG9rZW46IHsgcmVxdWVzdFN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICBjb25zdCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc3RhbGxhdGlvbkVudHJ5KSwgeyBhdXRoVG9rZW4gfSk7XHJcbiAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc1NlcnZlckVycm9yKGUpICYmXHJcbiAgICAgICAgICAgIChlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDAxIHx8IGUuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDQpKSB7XHJcbiAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIG5vdCBmb3VuZFwiIG9yIGEgXCJJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXCIgZXJyb3IuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFsbGF0aW9uRW50cnkpLCB7IGF1dGhUb2tlbjogeyByZXF1ZXN0U3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovIH0gfSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VudHJ5UmVnaXN0ZXJlZChpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIChpbnN0YWxsYXRpb25FbnRyeSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLyk7XHJcbn1cclxuZnVuY3Rpb24gaXNBdXRoVG9rZW5WYWxpZChhdXRoVG9rZW4pIHtcclxuICAgIHJldHVybiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovICYmXHJcbiAgICAgICAgIWlzQXV0aFRva2VuRXhwaXJlZChhdXRoVG9rZW4pKTtcclxufVxyXG5mdW5jdGlvbiBpc0F1dGhUb2tlbkV4cGlyZWQoYXV0aFRva2VuKSB7XHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIChub3cgPCBhdXRoVG9rZW4uY3JlYXRpb25UaW1lIHx8XHJcbiAgICAgICAgYXV0aFRva2VuLmNyZWF0aW9uVGltZSArIGF1dGhUb2tlbi5leHBpcmVzSW4gPCBub3cgKyBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUik7XHJcbn1cclxuLyoqIFJldHVybnMgYW4gdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeSB3aXRoIGFuIEluUHJvZ3Jlc3NBdXRoVG9rZW4uICovXHJcbmZ1bmN0aW9uIG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICBjb25zdCBpblByb2dyZXNzQXV0aFRva2VuID0ge1xyXG4gICAgICAgIHJlcXVlc3RTdGF0dXM6IDEgLyogSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgcmVxdWVzdFRpbWU6IERhdGUubm93KClcclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiBpblByb2dyZXNzQXV0aFRva2VuIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChhdXRoVG9rZW4pIHtcclxuICAgIHJldHVybiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8gJiZcclxuICAgICAgICBhdXRoVG9rZW4ucmVxdWVzdFRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ3JlYXRlcyBhIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpZiB0aGVyZSBpc24ndCBvbmUgZm9yIHRoZSBhcHAgYW5kXHJcbiAqIHJldHVybnMgdGhlIEluc3RhbGxhdGlvbiBJRC5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRJZChpbnN0YWxsYXRpb25zKSB7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW1wbCA9IGluc3RhbGxhdGlvbnM7XHJcbiAgICBjb25zdCB7IGluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zSW1wbCk7XHJcbiAgICBpZiAocmVnaXN0cmF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBJZiB0aGUgaW5zdGFsbGF0aW9uIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCwgdXBkYXRlIHRoZSBhdXRoZW50aWNhdGlvblxyXG4gICAgICAgIC8vIHRva2VuIGlmIG5lZWRlZC5cclxuICAgICAgICByZWZyZXNoQXV0aFRva2VuKGluc3RhbGxhdGlvbnNJbXBsKS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbnN0YWxsYXRpb25FbnRyeS5maWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBGaXJlYmFzZSBJbnN0YWxsYXRpb25zIGF1dGggdG9rZW4sIGlkZW50aWZ5aW5nIHRoZSBjdXJyZW50XHJcbiAqIEZpcmViYXNlIEluc3RhbGxhdGlvbi5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFRva2VuKGluc3RhbGxhdGlvbnMsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW1wbCA9IGluc3RhbGxhdGlvbnM7XHJcbiAgICBhd2FpdCBjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zSW1wbCk7XHJcbiAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGVpdGhlciBoYXZlIGEgUmVnaXN0ZXJlZCBJbnN0YWxsYXRpb24gaW4gdGhlIERCLCBvciB3ZSd2ZVxyXG4gICAgLy8gYWxyZWFkeSB0aHJvd24gYW4gZXJyb3IuXHJcbiAgICBjb25zdCBhdXRoVG9rZW4gPSBhd2FpdCByZWZyZXNoQXV0aFRva2VuKGluc3RhbGxhdGlvbnNJbXBsLCBmb3JjZVJlZnJlc2gpO1xyXG4gICAgcmV0dXJuIGF1dGhUb2tlbi50b2tlbjtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zKSB7XHJcbiAgICBjb25zdCB7IHJlZ2lzdHJhdGlvblByb21pc2UgfSA9IGF3YWl0IGdldEluc3RhbGxhdGlvbkVudHJ5KGluc3RhbGxhdGlvbnMpO1xyXG4gICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICAvLyBBIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLiBXYWl0IHVudGlsIGl0IGZpbmlzaGVzLlxyXG4gICAgICAgIGF3YWl0IHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdldERlbGV0ZUVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICBoZWFkZXJzXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeUlmU2VydmVyRXJyb3IoKCkgPT4gZmV0Y2goZW5kcG9pbnQsIHJlcXVlc3QpKTtcclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnRGVsZXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIHsgZmlkIH0pIHtcclxuICAgIHJldHVybiBgJHtnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKX0vJHtmaWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVsZXRlcyB0aGUgRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGFuZCBhbGwgYXNzb2NpYXRlZCBkYXRhLlxyXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyAtIFRoZSBgSW5zdGFsbGF0aW9uc2AgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvbnMoaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgeyBhcHBDb25maWcgfSA9IGluc3RhbGxhdGlvbnM7XHJcbiAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBpZiAob2xkRW50cnkgJiYgb2xkRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdW5yZWdpc3RlcmVkIGVudHJ5IHdpdGhvdXQgc2VuZGluZyBhIGRlbGV0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAgICAgLy8gQ2FuJ3QgZGVsZXRlIHdoaWxlIHRyeWluZyB0byByZWdpc3Rlci5cclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkZWxldGUtcGVuZGluZy1yZWdpc3RyYXRpb25cIiAvKiBERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovKSB7XHJcbiAgICAgICAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBlbnRyeSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZW1vdmUoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2V0cyBhIG5ldyBjYWxsYmFjayB0aGF0IHdpbGwgZ2V0IGNhbGxlZCB3aGVuIEluc3RhbGxhdGlvbiBJRCBjaGFuZ2VzLlxyXG4gKiBSZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgdGhlIGNhbGxiYWNrIHdoZW4gY2FsbGVkLlxyXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyAtIFRoZSBgSW5zdGFsbGF0aW9uc2AgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGludm9rZWQgd2hlbiBGSUQgY2hhbmdlcy5cclxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uSWRDaGFuZ2UoaW5zdGFsbGF0aW9ucywgY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYWRkQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjayk7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIHJlbW92ZUNhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spO1xyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgSW5zdGFsbGF0aW9uc30gYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlblxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW1wbCA9IF9nZXRQcm92aWRlcihhcHAsICdpbnN0YWxsYXRpb25zJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uc0ltcGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdEFwcENvbmZpZyhhcHApIHtcclxuICAgIGlmICghYXBwIHx8ICFhcHAub3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgQ29uZmlndXJhdGlvbicpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHAubmFtZSkge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgTmFtZScpO1xyXG4gICAgfVxyXG4gICAgLy8gUmVxdWlyZWQgYXBwIGNvbmZpZyBrZXlzXHJcbiAgICBjb25zdCBjb25maWdLZXlzID0gW1xyXG4gICAgICAgICdwcm9qZWN0SWQnLFxyXG4gICAgICAgICdhcGlLZXknLFxyXG4gICAgICAgICdhcHBJZCdcclxuICAgIF07XHJcbiAgICBmb3IgKGNvbnN0IGtleU5hbWUgb2YgY29uZmlnS2V5cykge1xyXG4gICAgICAgIGlmICghYXBwLm9wdGlvbnNba2V5TmFtZV0pIHtcclxuICAgICAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3Ioa2V5TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhcHBOYW1lOiBhcHAubmFtZSxcclxuICAgICAgICBwcm9qZWN0SWQ6IGFwcC5vcHRpb25zLnByb2plY3RJZCxcclxuICAgICAgICBhcGlLZXk6IGFwcC5vcHRpb25zLmFwaUtleSxcclxuICAgICAgICBhcHBJZDogYXBwLm9wdGlvbnMuYXBwSWRcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0TWlzc2luZ1ZhbHVlRXJyb3IodmFsdWVOYW1lKSB7XHJcbiAgICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUyAqLywge1xyXG4gICAgICAgIHZhbHVlTmFtZVxyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSU5TVEFMTEFUSU9OU19OQU1FID0gJ2luc3RhbGxhdGlvbnMnO1xyXG5jb25zdCBJTlNUQUxMQVRJT05TX05BTUVfSU5URVJOQUwgPSAnaW5zdGFsbGF0aW9ucy1pbnRlcm5hbCc7XHJcbmNvbnN0IHB1YmxpY0ZhY3RvcnkgPSAoY29udGFpbmVyKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgLy8gVGhyb3dzIGlmIGFwcCBpc24ndCBjb25maWd1cmVkIHByb3Blcmx5LlxyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gZXh0cmFjdEFwcENvbmZpZyhhcHApO1xyXG4gICAgY29uc3QgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgJ2hlYXJ0YmVhdCcpO1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSB7XHJcbiAgICAgICAgYXBwLFxyXG4gICAgICAgIGFwcENvbmZpZyxcclxuICAgICAgICBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIsXHJcbiAgICAgICAgX2RlbGV0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKClcclxuICAgIH07XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uc0ltcGw7XHJcbn07XHJcbmNvbnN0IGludGVybmFsRmFjdG9yeSA9IChjb250YWluZXIpID0+IHtcclxuICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAvLyBJbnRlcm5hbCBGSVMgaW5zdGFuY2UgcmVsaWVzIG9uIHB1YmxpYyBGSVMgaW5zdGFuY2UuXHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zID0gX2dldFByb3ZpZGVyKGFwcCwgSU5TVEFMTEFUSU9OU19OQU1FKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbnNJbnRlcm5hbCA9IHtcclxuICAgICAgICBnZXRJZDogKCkgPT4gZ2V0SWQoaW5zdGFsbGF0aW9ucyksXHJcbiAgICAgICAgZ2V0VG9rZW46IChmb3JjZVJlZnJlc2gpID0+IGdldFRva2VuKGluc3RhbGxhdGlvbnMsIGZvcmNlUmVmcmVzaClcclxuICAgIH07XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uc0ludGVybmFsO1xyXG59O1xyXG5mdW5jdGlvbiByZWdpc3Rlckluc3RhbGxhdGlvbnMoKSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChJTlNUQUxMQVRJT05TX05BTUUsIHB1YmxpY0ZhY3RvcnksIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChJTlNUQUxMQVRJT05TX05BTUVfSU5URVJOQUwsIGludGVybmFsRmFjdG9yeSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG59XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBJbnN0YWxsYXRpb25zXHJcbiAqXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxucmVnaXN0ZXJJbnN0YWxsYXRpb25zKCk7XHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxuLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XG5cbmV4cG9ydCB7IGRlbGV0ZUluc3RhbGxhdGlvbnMsIGdldElkLCBnZXRJbnN0YWxsYXRpb25zLCBnZXRUb2tlbiwgb25JZENoYW5nZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IGdldEFwcCwgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIEZpcmViYXNlRXJyb3IsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGFyZUNvb2tpZXNFbmFibGVkLCBnZXRNb2R1bGFySW5zdGFuY2UsIGRlZXBFcXVhbCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0ICdAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucyc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUeXBlIGNvbnN0YW50IGZvciBGaXJlYmFzZSBBbmFseXRpY3MuXHJcbiAqL1xyXG5jb25zdCBBTkFMWVRJQ1NfVFlQRSA9ICdhbmFseXRpY3MnO1xyXG4vLyBLZXkgdG8gYXR0YWNoIEZJRCB0byBpbiBndGFnIHBhcmFtcy5cclxuY29uc3QgR0FfRklEX0tFWSA9ICdmaXJlYmFzZV9pZCc7XHJcbmNvbnN0IE9SSUdJTl9LRVkgPSAnb3JpZ2luJztcclxuY29uc3QgRkVUQ0hfVElNRU9VVF9NSUxMSVMgPSA2MCAqIDEwMDA7XHJcbmNvbnN0IERZTkFNSUNfQ09ORklHX1VSTCA9ICdodHRwczovL2ZpcmViYXNlLmdvb2dsZWFwaXMuY29tL3YxYWxwaGEvcHJvamVjdHMvLS9hcHBzL3thcHAtaWR9L3dlYkNvbmZpZyc7XHJcbmNvbnN0IEdUQUdfVVJMID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYW5hbHl0aWNzJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYWtlc2hpZnQgcG9seWZpbGwgZm9yIFByb21pc2UuYWxsU2V0dGxlZCgpLiBSZXNvbHZlcyB3aGVuIGFsbCBwcm9taXNlc1xyXG4gKiBoYXZlIGVpdGhlciByZXNvbHZlZCBvciByZWplY3RlZC5cclxuICpcclxuICogQHBhcmFtIHByb21pc2VzIEFycmF5IG9mIHByb21pc2VzIHRvIHdhaXQgZm9yLlxyXG4gKi9cclxuZnVuY3Rpb24gcHJvbWlzZUFsbFNldHRsZWQocHJvbWlzZXMpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAocHJvbWlzZSA9PiBwcm9taXNlLmNhdGNoKGUgPT4gZSkpKTtcclxufVxyXG4vKipcclxuICogSW5zZXJ0cyBndGFnIHNjcmlwdCB0YWcgaW50byB0aGUgcGFnZSB0byBhc3luY2hyb25vdXNseSBkb3dubG9hZCBndGFnLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGRhdGFsYXllciAobW9zdCBvZnRlbiB0aGUgZGVmYXVsdCwgXCJfZGF0YUxheWVyXCIpLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUsIG1lYXN1cmVtZW50SWQpIHtcclxuICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgLy8gV2UgYXJlIG5vdCBwcm92aWRpbmcgYW4gYW5hbHl0aWNzSWQgaW4gdGhlIFVSTCBiZWNhdXNlIGl0IHdvdWxkIHRyaWdnZXIgYSBgcGFnZV92aWV3YFxyXG4gICAgLy8gd2l0aG91dCBmaWQuIFdlIHdpbGwgaW5pdGlhbGl6ZSBnYS1pZCB1c2luZyBndGFnIChjb25maWcpIGNvbW1hbmQgdG9nZXRoZXIgd2l0aCBmaWQuXHJcbiAgICBzY3JpcHQuc3JjID0gYCR7R1RBR19VUkx9P2w9JHtkYXRhTGF5ZXJOYW1lfSZpZD0ke21lYXN1cmVtZW50SWR9YDtcclxuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XHJcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbn1cclxuLyoqXHJcbiAqIEdldCByZWZlcmVuY2UgdG8sIG9yIGNyZWF0ZSwgZ2xvYmFsIGRhdGFsYXllci5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBkYXRhbGF5ZXIgKG1vc3Qgb2Z0ZW4gdGhlIGRlZmF1bHQsIFwiX2RhdGFMYXllclwiKS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE9yQ3JlYXRlRGF0YUxheWVyKGRhdGFMYXllck5hbWUpIHtcclxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBkYXRhTGF5ZXIgYW5kIGNyZWF0ZSBpZiBuZWVkZWQuXHJcbiAgICBsZXQgZGF0YUxheWVyID0gW107XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh3aW5kb3dbZGF0YUxheWVyTmFtZV0pKSB7XHJcbiAgICAgICAgZGF0YUxheWVyID0gd2luZG93W2RhdGFMYXllck5hbWVdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93W2RhdGFMYXllck5hbWVdID0gZGF0YUxheWVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGFMYXllcjtcclxufVxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGxvZ2ljIHdoZW4gZ3RhZyBpcyBjYWxsZWQgd2l0aCAnY29uZmlnJyBjb21tYW5kLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgQmFzaWMgZ3RhZyBmdW5jdGlvbiB0aGF0IGp1c3QgYXBwZW5kcyB0byBkYXRhTGF5ZXIuXHJcbiAqIEBwYXJhbSBpbml0aWFsaXphdGlvblByb21pc2VzTWFwIE1hcCBvZiBhcHBJZHMgdG8gdGhlaXIgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IEFycmF5IG9mIGR5bmFtaWMgY29uZmlnIGZldGNoIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZFRvQXBwSWQgTWFwIG9mIEdBIG1lYXN1cmVtZW50SURzIHRvIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2UgYXBwSWQuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkIEdBIE1lYXN1cmVtZW50IElEIHRvIHNldCBjb25maWcgZm9yLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBHdGFnIGNvbmZpZyBwYXJhbXMgdG8gc2V0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ3RhZ09uQ29uZmlnKGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgbWVhc3VyZW1lbnRJZCwgZ3RhZ1BhcmFtcykge1xyXG4gICAgLy8gSWYgY29uZmlnIGlzIGFscmVhZHkgZmV0Y2hlZCwgd2Uga25vdyB0aGUgYXBwSWQgYW5kIGNhbiB1c2UgaXQgdG8gbG9vayB1cCB3aGF0IEZJRCBwcm9taXNlIHdlXHJcbiAgICAvLy8gYXJlIHdhaXRpbmcgZm9yLCBhbmQgd2FpdCBvbmx5IG9uIHRoYXQgb25lLlxyXG4gICAgY29uc3QgY29ycmVzcG9uZGluZ0FwcElkID0gbWVhc3VyZW1lbnRJZFRvQXBwSWRbbWVhc3VyZW1lbnRJZF07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChjb3JyZXNwb25kaW5nQXBwSWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFtjb3JyZXNwb25kaW5nQXBwSWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgY29uZmlnIGlzIG5vdCBmZXRjaGVkIHlldCwgd2FpdCBmb3IgYWxsIGNvbmZpZ3MgKHdlIGRvbid0IGtub3cgd2hpY2ggb25lIHdlIG5lZWQpIGFuZFxyXG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBhcHBJZCAoaWYgYW55KSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgbWVhc3VyZW1lbnRJZC4gSWYgdGhlcmUgaXMgb25lLCB3YWl0IG9uXHJcbiAgICAgICAgICAgIC8vIHRoYXQgYXBwSWQncyBpbml0aWFsaXphdGlvbiBwcm9taXNlLiBJZiB0aGVyZSBpcyBub25lLCBwcm9taXNlIHJlc29sdmVzIGFuZCBndGFnXHJcbiAgICAgICAgICAgIC8vIGNhbGwgZ29lcyB0aHJvdWdoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBjb25zdCBmb3VuZENvbmZpZyA9IGR5bmFtaWNDb25maWdSZXN1bHRzLmZpbmQoY29uZmlnID0+IGNvbmZpZy5tZWFzdXJlbWVudElkID09PSBtZWFzdXJlbWVudElkKTtcclxuICAgICAgICAgICAgaWYgKGZvdW5kQ29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2ZvdW5kQ29uZmlnLmFwcElkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gICAgZ3RhZ0NvcmUoXCJjb25maWdcIiAvKiBDT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMpO1xyXG59XHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgbG9naWMgd2hlbiBndGFnIGlzIGNhbGxlZCB3aXRoICdldmVudCcgY29tbWFuZC5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWQgR0EgTWVhc3VyZW1lbnQgSUQgdG8gbG9nIGV2ZW50IHRvLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBQYXJhbXMgdG8gbG9nIHdpdGggdGhpcyBldmVudC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGxldCBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yID0gW107XHJcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhICdzZW5kX3RvJyBwYXJhbSwgY2hlY2sgaWYgYW55IElEIHNwZWNpZmllZCBtYXRjaGVzXHJcbiAgICAgICAgLy8gYW4gaW5pdGlhbGl6ZUlkcygpIHByb21pc2Ugd2UgYXJlIHdhaXRpbmcgZm9yLlxyXG4gICAgICAgIGlmIChndGFnUGFyYW1zICYmIGd0YWdQYXJhbXNbJ3NlbmRfdG8nXSkge1xyXG4gICAgICAgICAgICBsZXQgZ2FTZW5kVG9MaXN0ID0gZ3RhZ1BhcmFtc1snc2VuZF90byddO1xyXG4gICAgICAgICAgICAvLyBNYWtlIGl0IGFuIGFycmF5IGlmIGlzIGlzbid0LCBzbyBpdCBjYW4gYmUgZGVhbHQgd2l0aCB0aGUgc2FtZSB3YXkuXHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShnYVNlbmRUb0xpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICBnYVNlbmRUb0xpc3QgPSBbZ2FTZW5kVG9MaXN0XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVja2luZyAnc2VuZF90bycgZmllbGRzIHJlcXVpcmVzIGhhdmluZyBhbGwgbWVhc3VyZW1lbnQgSUQgcmVzdWx0cyBiYWNrIGZyb21cclxuICAgICAgICAgICAgLy8gdGhlIGR5bmFtaWMgY29uZmlnIGZldGNoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlbmRUb0lkIG9mIGdhU2VuZFRvTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQW55IGZldGNoZWQgZHluYW1pYyBtZWFzdXJlbWVudCBJRCB0aGF0IG1hdGNoZXMgdGhpcyAnc2VuZF90bycgSURcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kQ29uZmlnID0gZHluYW1pY0NvbmZpZ1Jlc3VsdHMuZmluZChjb25maWcgPT4gY29uZmlnLm1lYXN1cmVtZW50SWQgPT09IHNlbmRUb0lkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxpemF0aW9uUHJvbWlzZSA9IGZvdW5kQ29uZmlnICYmIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbZm91bmRDb25maWcuYXBwSWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IucHVzaChpbml0aWFsaXphdGlvblByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgYW4gaXRlbSBpbiAnc2VuZF90bycgdGhhdCBpcyBub3QgYXNzb2NpYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5IHdpdGggYW4gRklELCBwb3NzaWJseSBhIGdyb3VwLiAgRW1wdHkgdGhpcyBhcnJheSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBleGl0IHRoZSBsb29wIGVhcmx5LCBhbmQgbGV0IGl0IGdldCBwb3B1bGF0ZWQgYmVsb3cuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSB1bnBvcHVsYXRlZCBpZiB0aGVyZSB3YXMgbm8gJ3NlbmRfdG8nIGZpZWxkICwgb3JcclxuICAgICAgICAvLyBpZiBub3QgYWxsIGVudHJpZXMgaW4gdGhlICdzZW5kX3RvJyBmaWVsZCBjb3VsZCBiZSBtYXBwZWQgdG9cclxuICAgICAgICAvLyBhIEZJRC4gSW4gdGhlc2UgY2FzZXMsIHdhaXQgb24gYWxsIHBlbmRpbmcgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBPYmplY3QudmFsdWVzKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSdW4gY29yZSBndGFnIGZ1bmN0aW9uIHdpdGggYXJncyBhZnRlciBhbGwgcmVsZXZhbnQgaW5pdGlhbGl6YXRpb25cclxuICAgICAgICAvLyBwcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQuXHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvcik7XHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cDovL2IvMTQxMzcwNDQ5IC0gdGhpcmQgYXJndW1lbnQgY2Fubm90IGJlIHVuZGVmaW5lZC5cclxuICAgICAgICBndGFnQ29yZShcImV2ZW50XCIgLyogRVZFTlQgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMgfHwge30pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiB3aXRoIGV4dHJhIGNvZGUgdG8gd2FpdCBmb3IgY29tcGxldGlvbiBvZlxyXG4gKiByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBiZWZvcmUgc2VuZGluZyByZXF1ZXN0cy5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcCBvZiBHQSBtZWFzdXJlbWVudElEcyB0byBjb3JyZXNwb25kaW5nIEZpcmViYXNlIGFwcElkLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcEd0YWcoZ3RhZ0NvcmUsIFxyXG4vKipcclxuICogQWxsb3dzIHdyYXBwZWQgZ3RhZyBjYWxscyB0byB3YWl0IG9uIHdoaWNoZXZlciBpbnRpYWxpemF0aW9uIHByb21pc2VzIGFyZSByZXF1aXJlZCxcclxuICogZGVwZW5kaW5nIG9uIHRoZSBjb250ZW50cyBvZiB0aGUgZ3RhZyBwYXJhbXMnIGBzZW5kX3RvYCBmaWVsZCwgaWYgYW55LlxyXG4gKi9cclxuaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgXHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgY2FsbHMgc29tZXRpbWVzIHJlcXVpcmUgYWxsIGR5bmFtaWMgY29uZmlnIGZldGNoZXMgdG8gaGF2ZSByZXR1cm5lZFxyXG4gKiBiZWZvcmUgZGV0ZXJtaW5pbmcgd2hhdCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyAod2hpY2ggaW5jbHVkZSBGSURzKSB0byB3YWl0IGZvci5cclxuICovXHJcbmR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIFxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGNvbmZpZyBjYWxscyBjYW4gbmFycm93IGRvd24gd2hpY2ggaW5pdGlhbGl6YXRpb24gcHJvbWlzZSAod2l0aCBGSUQpXHJcbiAqIHRvIHdhaXQgZm9yIGlmIHRoZSBtZWFzdXJlbWVudElkIGlzIGFscmVhZHkgZmV0Y2hlZCwgYnkgZ2V0dGluZyB0aGUgY29ycmVzcG9uZGluZyBhcHBJZCxcclxuICogd2hpY2ggaXMgdGhlIGtleSBmb3IgdGhlIGluaXRpYWxpemF0aW9uIHByb21pc2VzIG1hcC5cclxuICovXHJcbm1lYXN1cmVtZW50SWRUb0FwcElkKSB7XHJcbiAgICAvKipcclxuICAgICAqIFdyYXBwZXIgYXJvdW5kIGd0YWcgdGhhdCBlbnN1cmVzIEZJRCBpcyBzZW50IHdpdGggZ3RhZyBjYWxscy5cclxuICAgICAqIEBwYXJhbSBjb21tYW5kIEd0YWcgY29tbWFuZCB0eXBlLlxyXG4gICAgICogQHBhcmFtIGlkT3JOYW1lT3JQYXJhbXMgTWVhc3VyZW1lbnQgSUQgaWYgY29tbWFuZCBpcyBFVkVOVC9DT05GSUcsIHBhcmFtcyBpZiBjb21tYW5kIGlzIFNFVC5cclxuICAgICAqIEBwYXJhbSBndGFnUGFyYW1zIFBhcmFtcyBpZiBldmVudCBpcyBFVkVOVC9DT05GSUcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGZ1bmN0aW9uIGd0YWdXcmFwcGVyKGNvbW1hbmQsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBJZiBldmVudCwgY2hlY2sgdGhhdCByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZC5cclxuICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT09IFwiZXZlbnRcIiAvKiBFVkVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgRVZFTlQsIHNlY29uZCBhcmcgbXVzdCBiZSBtZWFzdXJlbWVudElkLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgZ3RhZ09uRXZlbnQoZ3RhZ0NvcmUsIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwiY29uZmlnXCIgLyogQ09ORklHICovKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBDT05GSUcsIHNlY29uZCBhcmcgbXVzdCBiZSBtZWFzdXJlbWVudElkLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgZ3RhZ09uQ29uZmlnKGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgaWRPck5hbWVPclBhcmFtcywgZ3RhZ1BhcmFtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY29tbWFuZCA9PT0gXCJjb25zZW50XCIgLyogQ09OU0VOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgQ09ORklHLCBzZWNvbmQgYXJnIG11c3QgYmUgbWVhc3VyZW1lbnRJZC5cclxuICAgICAgICAgICAgICAgIGd0YWdDb3JlKFwiY29uc2VudFwiIC8qIENPTlNFTlQgKi8sICd1cGRhdGUnLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIFNFVCwgc2Vjb25kIGFyZyBtdXN0IGJlIHBhcmFtcy5cclxuICAgICAgICAgICAgICAgIGd0YWdDb3JlKFwic2V0XCIgLyogU0VUICovLCBpZE9yTmFtZU9yUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGd0YWdXcmFwcGVyO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGdsb2JhbCBndGFnIGZ1bmN0aW9uIG9yIHdyYXBzIGV4aXN0aW5nIG9uZSBpZiBmb3VuZC5cclxuICogVGhpcyB3cmFwcGVkIGZ1bmN0aW9uIGF0dGFjaGVzIEZpcmViYXNlIGluc3RhbmNlIElEIChGSUQpIHRvIGd0YWcgJ2NvbmZpZycgYW5kXHJcbiAqICdldmVudCcgY2FsbHMgdGhhdCBiZWxvbmcgdG8gdGhlIEdBSUQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgRmlyZWJhc2UgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBpbml0aWFsaXphdGlvblByb21pc2VzTWFwIE1hcCBvZiBhcHBJZHMgdG8gdGhlaXIgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IEFycmF5IG9mIGR5bmFtaWMgY29uZmlnIGZldGNoIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZFRvQXBwSWQgTWFwIG9mIEdBIG1lYXN1cmVtZW50SURzIHRvIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2UgYXBwSWQuXHJcbiAqIEBwYXJhbSBkYXRhTGF5ZXJOYW1lIE5hbWUgb2YgZ2xvYmFsIEdBIGRhdGFsYXllciBhcnJheS5cclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbk5hbWUgTmFtZSBvZiBnbG9iYWwgZ3RhZyBmdW5jdGlvbiAoXCJndGFnXCIgaWYgbm90IHVzZXItc3BlY2lmaWVkKS5cclxuICovXHJcbmZ1bmN0aW9uIHdyYXBPckNyZWF0ZUd0YWcoaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGRhdGFMYXllck5hbWUsIGd0YWdGdW5jdGlvbk5hbWUpIHtcclxuICAgIC8vIENyZWF0ZSBhIGJhc2ljIGNvcmUgZ3RhZyBmdW5jdGlvblxyXG4gICAgbGV0IGd0YWdDb3JlID0gZnVuY3Rpb24gKC4uLl9hcmdzKSB7XHJcbiAgICAgICAgLy8gTXVzdCBwdXNoIElBcmd1bWVudHMgb2JqZWN0LCBub3QgYW4gYXJyYXkuXHJcbiAgICAgICAgd2luZG93W2RhdGFMYXllck5hbWVdLnB1c2goYXJndW1lbnRzKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXBsYWNlIGl0IHdpdGggZXhpc3Rpbmcgb25lIGlmIGZvdW5kXHJcbiAgICBpZiAod2luZG93W2d0YWdGdW5jdGlvbk5hbWVdICYmXHJcbiAgICAgICAgdHlwZW9mIHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBndGFnQ29yZSA9IHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXTtcclxuICAgIH1cclxuICAgIHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSA9IHdyYXBHdGFnKGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGd0YWdDb3JlLFxyXG4gICAgICAgIHdyYXBwZWRHdGFnOiB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV1cclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHNjcmlwdCB0YWcgaW4gdGhlIERPTSBtYXRjaGluZyBib3RoIHRoZSBndGFnIHVybCBwYXR0ZXJuXHJcbiAqIGFuZCB0aGUgcHJvdmlkZWQgZGF0YSBsYXllciBuYW1lLlxyXG4gKi9cclxuZnVuY3Rpb24gZmluZEd0YWdTY3JpcHRPblBhZ2UoZGF0YUxheWVyTmFtZSkge1xyXG4gICAgY29uc3Qgc2NyaXB0VGFncyA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XHJcbiAgICBmb3IgKGNvbnN0IHRhZyBvZiBPYmplY3QudmFsdWVzKHNjcmlwdFRhZ3MpKSB7XHJcbiAgICAgICAgaWYgKHRhZy5zcmMgJiZcclxuICAgICAgICAgICAgdGFnLnNyYy5pbmNsdWRlcyhHVEFHX1VSTCkgJiZcclxuICAgICAgICAgICAgdGFnLnNyYy5pbmNsdWRlcyhkYXRhTGF5ZXJOYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcImFscmVhZHktZXhpc3RzXCIgLyogQUxSRUFEWV9FWElTVFMgKi9dOiAnQSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2Ugd2l0aCB0aGUgYXBwSWQgeyRpZH0gJyArXHJcbiAgICAgICAgJyBhbHJlYWR5IGV4aXN0cy4gJyArXHJcbiAgICAgICAgJ09ubHkgb25lIEZpcmViYXNlIEFuYWx5dGljcyBpbnN0YW5jZSBjYW4gYmUgY3JlYXRlZCBmb3IgZWFjaCBhcHBJZC4nLFxyXG4gICAgW1wiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi9dOiAnaW5pdGlhbGl6ZUFuYWx5dGljcygpIGNhbm5vdCBiZSBjYWxsZWQgYWdhaW4gd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyB0aGFuIHRob3NlICcgK1xyXG4gICAgICAgICdpdCB3YXMgaW5pdGlhbGx5IGNhbGxlZCB3aXRoLiBJdCBjYW4gYmUgY2FsbGVkIGFnYWluIHdpdGggdGhlIHNhbWUgb3B0aW9ucyB0byAnICtcclxuICAgICAgICAncmV0dXJuIHRoZSBleGlzdGluZyBpbnN0YW5jZSwgb3IgZ2V0QW5hbHl0aWNzKCkgY2FuIGJlIHVzZWQgJyArXHJcbiAgICAgICAgJ3RvIGdldCBhIHJlZmVyZW5jZSB0byB0aGUgYWxyZWFkeS1pbnRpYWxpemVkIGluc3RhbmNlLicsXHJcbiAgICBbXCJhbHJlYWR5LWluaXRpYWxpemVkLXNldHRpbmdzXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRF9TRVRUSU5HUyAqL106ICdGaXJlYmFzZSBBbmFseXRpY3MgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC4nICtcclxuICAgICAgICAnc2V0dGluZ3MoKSBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgaW5pdGlhbGl6aW5nIGFueSBBbmFseXRpY3MgaW5zdGFuY2UnICtcclxuICAgICAgICAnb3IgaXQgd2lsbCBoYXZlIG5vIGVmZmVjdC4nLFxyXG4gICAgW1wiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIElOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi9dOiAnRmlyZWJhc2UgQW5hbHl0aWNzIEludGVyb3AgQ29tcG9uZW50IGZhaWxlZCB0byBpbnN0YW50aWF0ZTogeyRyZWFzb259JyxcclxuICAgIFtcImludmFsaWQtYW5hbHl0aWNzLWNvbnRleHRcIiAvKiBJTlZBTElEX0FOQUxZVElDU19DT05URVhUICovXTogJ0ZpcmViYXNlIEFuYWx5dGljcyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQuICcgK1xyXG4gICAgICAgICdXcmFwIGluaXRpYWxpemF0aW9uIG9mIGFuYWx5dGljcyBpbiBhbmFseXRpY3MuaXNTdXBwb3J0ZWQoKSAnICtcclxuICAgICAgICAndG8gcHJldmVudCBpbml0aWFsaXphdGlvbiBpbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudHMuIERldGFpbHM6IHskZXJyb3JJbmZvfScsXHJcbiAgICBbXCJpbmRleGVkZGItdW5hdmFpbGFibGVcIiAvKiBJTkRFWEVEREJfVU5BVkFJTEFCTEUgKi9dOiAnSW5kZXhlZERCIHVuYXZhaWxhYmxlIG9yIHJlc3RyaWN0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC4gJyArXHJcbiAgICAgICAgJ1dyYXAgaW5pdGlhbGl6YXRpb24gb2YgYW5hbHl0aWNzIGluIGFuYWx5dGljcy5pc1N1cHBvcnRlZCgpICcgK1xyXG4gICAgICAgICd0byBwcmV2ZW50IGluaXRpYWxpemF0aW9uIGluIHVuc3VwcG9ydGVkIGVudmlyb25tZW50cy4gRGV0YWlsczogeyRlcnJvckluZm99JyxcclxuICAgIFtcImZldGNoLXRocm90dGxlXCIgLyogRkVUQ0hfVEhST1RUTEUgKi9dOiAnVGhlIGNvbmZpZyBmZXRjaCByZXF1ZXN0IHRpbWVkIG91dCB3aGlsZSBpbiBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIHN0YXRlLicgK1xyXG4gICAgICAgICcgVW5peCB0aW1lc3RhbXAgaW4gbWlsbGlzZWNvbmRzIHdoZW4gZmV0Y2ggcmVxdWVzdCB0aHJvdHRsaW5nIGVuZHM6IHskdGhyb3R0bGVFbmRUaW1lTWlsbGlzfS4nLFxyXG4gICAgW1wiY29uZmlnLWZldGNoLWZhaWxlZFwiIC8qIENPTkZJR19GRVRDSF9GQUlMRUQgKi9dOiAnRHluYW1pYyBjb25maWcgZmV0Y2ggZmFpbGVkOiBbeyRodHRwU3RhdHVzfV0geyRyZXNwb25zZU1lc3NhZ2V9JyxcclxuICAgIFtcIm5vLWFwaS1rZXlcIiAvKiBOT19BUElfS0VZICovXTogJ1RoZSBcImFwaUtleVwiIGZpZWxkIGlzIGVtcHR5IGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIEZpcmViYXNlIEFuYWx5dGljcyByZXF1aXJlcyB0aGlzIGZpZWxkIHRvJyArXHJcbiAgICAgICAgJ2NvbnRhaW4gYSB2YWxpZCBBUEkga2V5LicsXHJcbiAgICBbXCJuby1hcHAtaWRcIiAvKiBOT19BUFBfSUQgKi9dOiAnVGhlIFwiYXBwSWRcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBGaXJlYmFzZSBBbmFseXRpY3MgcmVxdWlyZXMgdGhpcyBmaWVsZCB0bycgK1xyXG4gICAgICAgICdjb250YWluIGEgdmFsaWQgYXBwIElELidcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FuYWx5dGljcycsICdBbmFseXRpY3MnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQmFja29mZiBmYWN0b3IgZm9yIDUwMyBlcnJvcnMsIHdoaWNoIHdlIHdhbnQgdG8gYmUgY29uc2VydmF0aXZlIGFib3V0XHJcbiAqIHRvIGF2b2lkIG92ZXJsb2FkaW5nIHNlcnZlcnMuIEVhY2ggcmV0cnkgaW50ZXJ2YWwgd2lsbCBiZVxyXG4gKiBCQVNFX0lOVEVSVkFMX01JTExJUyAqIExPTkdfUkVUUllfRkFDVE9SIF4gcmV0cnlDb3VudCwgc28gdGhlIHNlY29uZCBvbmVcclxuICogd2lsbCBiZSB+MzAgc2Vjb25kcyAod2l0aCBmdXp6aW5nKS5cclxuICovXHJcbmNvbnN0IExPTkdfUkVUUllfRkFDVE9SID0gMzA7XHJcbi8qKlxyXG4gKiBCYXNlIHdhaXQgaW50ZXJ2YWwgdG8gbXVsdGlwbGllZCBieSBiYWNrb2ZmRmFjdG9yXmJhY2tvZmZDb3VudC5cclxuICovXHJcbmNvbnN0IEJBU0VfSU5URVJWQUxfTUlMTElTID0gMTAwMDtcclxuLyoqXHJcbiAqIFN0dWJiYWJsZSByZXRyeSBkYXRhIHN0b3JhZ2UgY2xhc3MuXHJcbiAqL1xyXG5jbGFzcyBSZXRyeURhdGEge1xyXG4gICAgY29uc3RydWN0b3IodGhyb3R0bGVNZXRhZGF0YSA9IHt9LCBpbnRlcnZhbE1pbGxpcyA9IEJBU0VfSU5URVJWQUxfTUlMTElTKSB7XHJcbiAgICAgICAgdGhpcy50aHJvdHRsZU1ldGFkYXRhID0gdGhyb3R0bGVNZXRhZGF0YTtcclxuICAgICAgICB0aGlzLmludGVydmFsTWlsbGlzID0gaW50ZXJ2YWxNaWxsaXM7XHJcbiAgICB9XHJcbiAgICBnZXRUaHJvdHRsZU1ldGFkYXRhKGFwcElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGhyb3R0bGVNZXRhZGF0YVthcHBJZF07XHJcbiAgICB9XHJcbiAgICBzZXRUaHJvdHRsZU1ldGFkYXRhKGFwcElkLCBtZXRhZGF0YSkge1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGVNZXRhZGF0YVthcHBJZF0gPSBtZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy50aHJvdHRsZU1ldGFkYXRhW2FwcElkXTtcclxuICAgIH1cclxufVxyXG5jb25zdCBkZWZhdWx0UmV0cnlEYXRhID0gbmV3IFJldHJ5RGF0YSgpO1xyXG4vKipcclxuICogU2V0IEdFVCByZXF1ZXN0IGhlYWRlcnMuXHJcbiAqIEBwYXJhbSBhcGlLZXkgQXBwIEFQSSBrZXkuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRIZWFkZXJzKGFwaUtleSkge1xyXG4gICAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAneC1nb29nLWFwaS1rZXknOiBhcGlLZXlcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBGZXRjaGVzIGR5bmFtaWMgY29uZmlnIGZyb20gYmFja2VuZC5cclxuICogQHBhcmFtIGFwcCBGaXJlYmFzZSBhcHAgdG8gZmV0Y2ggY29uZmlnIGZvci5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoRHluYW1pY0NvbmZpZyhhcHBGaWVsZHMpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHsgYXBwSWQsIGFwaUtleSB9ID0gYXBwRmllbGRzO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IGdldEhlYWRlcnMoYXBpS2V5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGFwcFVybCA9IERZTkFNSUNfQ09ORklHX1VSTC5yZXBsYWNlKCd7YXBwLWlkfScsIGFwcElkKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBwVXJsLCByZXF1ZXN0KTtcclxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgIT09IDMwNCkge1xyXG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnJztcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBUcnkgdG8gZ2V0IGFueSBlcnJvciBtZXNzYWdlIHRleHQgZnJvbSBzZXJ2ZXIgcmVzcG9uc2UuXHJcbiAgICAgICAgICAgIGNvbnN0IGpzb25SZXNwb25zZSA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xyXG4gICAgICAgICAgICBpZiAoKF9hID0ganNvblJlc3BvbnNlLmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0ganNvblJlc3BvbnNlLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9pZ25vcmVkKSB7IH1cclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImNvbmZpZy1mZXRjaC1mYWlsZWRcIiAvKiBDT05GSUdfRkVUQ0hfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgIGh0dHBTdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcclxuICAgICAgICAgICAgcmVzcG9uc2VNZXNzYWdlOiBlcnJvck1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbn1cclxuLyoqXHJcbiAqIEZldGNoZXMgZHluYW1pYyBjb25maWcgZnJvbSBiYWNrZW5kLCByZXRyeWluZyBpZiBmYWlsZWQuXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwIHRvIGZldGNoIGNvbmZpZyBmb3IuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwLCBcclxuLy8gcmV0cnlEYXRhIGFuZCB0aW1lb3V0TWlsbGlzIGFyZSBwYXJhbWV0ZXJpemVkIHRvIGFsbG93IHBhc3NpbmcgYSBkaWZmZXJlbnQgdmFsdWUgZm9yIHRlc3RpbmcuXHJcbnJldHJ5RGF0YSA9IGRlZmF1bHRSZXRyeURhdGEsIHRpbWVvdXRNaWxsaXMpIHtcclxuICAgIGNvbnN0IHsgYXBwSWQsIGFwaUtleSwgbWVhc3VyZW1lbnRJZCB9ID0gYXBwLm9wdGlvbnM7XHJcbiAgICBpZiAoIWFwcElkKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHAtaWRcIiAvKiBOT19BUFBfSUQgKi8pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgICBpZiAobWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbWVhc3VyZW1lbnRJZCxcclxuICAgICAgICAgICAgICAgIGFwcElkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBpLWtleVwiIC8qIE5PX0FQSV9LRVkgKi8pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGhyb3R0bGVNZXRhZGF0YSA9IHJldHJ5RGF0YS5nZXRUaHJvdHRsZU1ldGFkYXRhKGFwcElkKSB8fCB7XHJcbiAgICAgICAgYmFja29mZkNvdW50OiAwLFxyXG4gICAgICAgIHRocm90dGxlRW5kVGltZU1pbGxpczogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNpZ25hbCA9IG5ldyBBbmFseXRpY3NBYm9ydFNpZ25hbCgpO1xyXG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgLy8gTm90ZSBhIHZlcnkgbG93IGRlbGF5LCBlZyA8IDEwbXMsIGNhbiBlbGFwc2UgYmVmb3JlIGxpc3RlbmVycyBhcmUgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgc2lnbmFsLmFib3J0KCk7XHJcbiAgICB9LCB0aW1lb3V0TWlsbGlzICE9PSB1bmRlZmluZWQgPyB0aW1lb3V0TWlsbGlzIDogRkVUQ0hfVElNRU9VVF9NSUxMSVMpO1xyXG4gICAgcmV0dXJuIGF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoeyBhcHBJZCwgYXBpS2V5LCBtZWFzdXJlbWVudElkIH0sIHRocm90dGxlTWV0YWRhdGEsIHNpZ25hbCwgcmV0cnlEYXRhKTtcclxufVxyXG4vKipcclxuICogUnVucyBvbmUgcmV0cnkgYXR0ZW1wdC5cclxuICogQHBhcmFtIGFwcEZpZWxkcyBOZWNlc3NhcnkgYXBwIGNvbmZpZyBmaWVsZHMuXHJcbiAqIEBwYXJhbSB0aHJvdHRsZU1ldGFkYXRhIE9uZ29pbmcgbWV0YWRhdGEgdG8gZGV0ZXJtaW5lIHRocm90dGxpbmcgdGltZXMuXHJcbiAqIEBwYXJhbSBzaWduYWwgQWJvcnQgc2lnbmFsLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeShhcHBGaWVsZHMsIHsgdGhyb3R0bGVFbmRUaW1lTWlsbGlzLCBiYWNrb2ZmQ291bnQgfSwgc2lnbmFsLCByZXRyeURhdGEgPSBkZWZhdWx0UmV0cnlEYXRhIC8vIGZvciB0ZXN0aW5nXHJcbikge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIGNvbnN0IHsgYXBwSWQsIG1lYXN1cmVtZW50SWQgfSA9IGFwcEZpZWxkcztcclxuICAgIC8vIFN0YXJ0cyB3aXRoIGEgKHBvdGVudGlhbGx5IHplcm8pIHRpbWVvdXQgdG8gc3VwcG9ydCByZXN1bXB0aW9uIGZyb20gc3RvcmVkIHN0YXRlLlxyXG4gICAgLy8gRW5zdXJlcyB0aGUgdGhyb3R0bGUgZW5kIHRpbWUgaXMgaG9ub3JlZCBpZiB0aGUgbGFzdCBhdHRlbXB0IHRpbWVkIG91dC5cclxuICAgIC8vIE5vdGUgdGhlIFNESyB3aWxsIG5ldmVyIG1ha2UgYSByZXF1ZXN0IGlmIHRoZSBmZXRjaCB0aW1lb3V0IGV4cGlyZXMgYXQgdGhpcyBwb2ludC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc2V0QWJvcnRhYmxlVGltZW91dChzaWduYWwsIHRocm90dGxlRW5kVGltZU1pbGxpcyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChtZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaW1lZCBvdXQgZmV0Y2hpbmcgdGhpcyBGaXJlYmFzZSBhcHAncyBtZWFzdXJlbWVudCBJRCBmcm9tIHRoZSBzZXJ2ZXIuYCArXHJcbiAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgYCBwcm92aWRlZCBpbiB0aGUgXCJtZWFzdXJlbWVudElkXCIgZmllbGQgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gWyR7KF9hID0gZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2V9XWApO1xyXG4gICAgICAgICAgICByZXR1cm4geyBhcHBJZCwgbWVhc3VyZW1lbnRJZCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoRHluYW1pY0NvbmZpZyhhcHBGaWVsZHMpO1xyXG4gICAgICAgIC8vIE5vdGUgdGhlIFNESyBvbmx5IGNsZWFycyB0aHJvdHRsZSBzdGF0ZSBpZiByZXNwb25zZSBpcyBzdWNjZXNzIG9yIG5vbi1yZXRyaWFibGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBlO1xyXG4gICAgICAgIGlmICghaXNSZXRyaWFibGVFcnJvcihlcnJvcikpIHtcclxuICAgICAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgICAgICBpZiAobWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBmZXRjaCB0aGlzIEZpcmViYXNlIGFwcCdzIG1lYXN1cmVtZW50IElEIGZyb20gdGhlIHNlcnZlci5gICtcclxuICAgICAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGAgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFske2Vycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5tZXNzYWdlfV1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGFwcElkLCBtZWFzdXJlbWVudElkIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJhY2tvZmZNaWxsaXMgPSBOdW1iZXIoKF9iID0gZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmN1c3RvbURhdGEpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5odHRwU3RhdHVzKSA9PT0gNTAzXHJcbiAgICAgICAgICAgID8gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcywgTE9OR19SRVRSWV9GQUNUT1IpXHJcbiAgICAgICAgICAgIDogY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcyk7XHJcbiAgICAgICAgLy8gSW5jcmVtZW50cyBiYWNrb2ZmIHN0YXRlLlxyXG4gICAgICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRocm90dGxlRW5kVGltZU1pbGxpczogRGF0ZS5ub3coKSArIGJhY2tvZmZNaWxsaXMsXHJcbiAgICAgICAgICAgIGJhY2tvZmZDb3VudDogYmFja29mZkNvdW50ICsgMVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gUGVyc2lzdHMgc3RhdGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLnNldFRocm90dGxlTWV0YWRhdGEoYXBwSWQsIHRocm90dGxlTWV0YWRhdGEpO1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2FsbGluZyBhdHRlbXB0RmV0Y2ggYWdhaW4gaW4gJHtiYWNrb2ZmTWlsbGlzfSBtaWxsaXNgKTtcclxuICAgICAgICByZXR1cm4gYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeShhcHBGaWVsZHMsIHRocm90dGxlTWV0YWRhdGEsIHNpZ25hbCwgcmV0cnlEYXRhKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU3VwcG9ydHMgd2FpdGluZyBvbiBhIGJhY2tvZmYgYnk6XHJcbiAqXHJcbiAqIDx1bD5cclxuICogICA8bGk+UHJvbWlzaWZ5aW5nIHNldFRpbWVvdXQsIHNvIHdlIGNhbiBzZXQgYSB0aW1lb3V0IGluIG91ciBQcm9taXNlIGNoYWluPC9saT5cclxuICogICA8bGk+TGlzdGVuaW5nIG9uIGEgc2lnbmFsIGJ1cyBmb3IgYWJvcnQgZXZlbnRzLCBqdXN0IGxpa2UgdGhlIEZldGNoIEFQSTwvbGk+XHJcbiAqICAgPGxpPkZhaWxpbmcgaW4gdGhlIHNhbWUgd2F5IHRoZSBGZXRjaCBBUEkgZmFpbHMsIHNvIHRpbWluZyBvdXQgYSBsaXZlIHJlcXVlc3QgYW5kIGEgdGhyb3R0bGVkXHJcbiAqICAgICAgIHJlcXVlc3QgYXBwZWFyIHRoZSBzYW1lLjwvbGk+XHJcbiAqIDwvdWw+XHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRBYm9ydGFibGVUaW1lb3V0KHNpZ25hbCwgdGhyb3R0bGVFbmRUaW1lTWlsbGlzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIC8vIERlcml2ZXMgYmFja29mZiBmcm9tIGdpdmVuIGVuZCB0aW1lLCBub3JtYWxpemluZyBuZWdhdGl2ZSBudW1iZXJzIHRvIHplcm8uXHJcbiAgICAgICAgY29uc3QgYmFja29mZk1pbGxpcyA9IE1hdGgubWF4KHRocm90dGxlRW5kVGltZU1pbGxpcyAtIERhdGUubm93KCksIDApO1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIGJhY2tvZmZNaWxsaXMpO1xyXG4gICAgICAgIC8vIEFkZHMgbGlzdGVuZXIsIHJhdGhlciB0aGFuIHNldHMgb25hYm9ydCwgYmVjYXVzZSBzaWduYWwgaXMgYSBzaGFyZWQgb2JqZWN0LlxyXG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBjb21wbGV0ZXMgYmVmb3JlIHRoaXMgdGltZW91dCwgdGhlIHJlamVjdGlvbiBoYXMgbm8gZWZmZWN0LlxyXG4gICAgICAgICAgICByZWplY3QoRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJmZXRjaC10aHJvdHRsZVwiIC8qIEZFVENIX1RIUk9UVExFICovLCB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXNcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUge0BsaW5rIEVycm9yfSBpbmRpY2F0ZXMgYSBmZXRjaCByZXF1ZXN0IG1heSBzdWNjZWVkIGxhdGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZXRyaWFibGVFcnJvcihlKSB7XHJcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikgfHwgIWUuY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIFVzZXMgc3RyaW5nIGluZGV4IGRlZmluZWQgYnkgRXJyb3JEYXRhLCB3aGljaCBGaXJlYmFzZUVycm9yIGltcGxlbWVudHMuXHJcbiAgICBjb25zdCBodHRwU3RhdHVzID0gTnVtYmVyKGUuY3VzdG9tRGF0YVsnaHR0cFN0YXR1cyddKTtcclxuICAgIHJldHVybiAoaHR0cFN0YXR1cyA9PT0gNDI5IHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAwIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAzIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTA0KTtcclxufVxyXG4vKipcclxuICogU2hpbXMgYSBtaW5pbWFsIEFib3J0U2lnbmFsIChjb3BpZWQgZnJvbSBSZW1vdGUgQ29uZmlnKS5cclxuICpcclxuICogPHA+QWJvcnRDb250cm9sbGVyJ3MgQWJvcnRTaWduYWwgY29udmVuaWVudGx5IGRlY291cGxlcyBmZXRjaCB0aW1lb3V0IGxvZ2ljIGZyb20gb3RoZXIgYXNwZWN0c1xyXG4gKiBvZiBuZXR3b3JraW5nLCBzdWNoIGFzIHJldHJpZXMuIEZpcmViYXNlIGRvZXNuJ3QgdXNlIEFib3J0Q29udHJvbGxlciBlbm91Z2ggdG8ganVzdGlmeSBhXHJcbiAqIHBvbHlmaWxsIHJlY29tbWVuZGF0aW9uLCBsaWtlIHdlIGRvIHdpdGggdGhlIEZldGNoIEFQSSwgYnV0IHRoaXMgbWluaW1hbCBzaGltIGNhbiBlYXNpbHkgYmVcclxuICogc3dhcHBlZCBvdXQgaWYvd2hlbiB3ZSBkby5cclxuICovXHJcbmNsYXNzIEFuYWx5dGljc0Fib3J0U2lnbmFsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcbiAgICBhZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBhYm9ydCgpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKCkpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmVudCBwYXJhbWV0ZXJzIHRvIHNldCBvbiAnZ3RhZycgZHVyaW5nIGluaXRpYWxpemF0aW9uLlxyXG4gKi9cclxubGV0IGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0O1xyXG4vKipcclxuICogTG9ncyBhbiBhbmFseXRpY3MgZXZlbnQgdGhyb3VnaCB0aGUgRmlyZWJhc2UgU0RLLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBldmVudE5hbWUgR29vZ2xlIEFuYWx5dGljcyBldmVudCBuYW1lLCBjaG9vc2UgZnJvbSBzdGFuZGFyZCBsaXN0IG9yIHVzZSBhIGN1c3RvbSBzdHJpbmcuXHJcbiAqIEBwYXJhbSBldmVudFBhcmFtcyBBbmFseXRpY3MgZXZlbnQgcGFyYW1ldGVycy5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvZ0V2ZW50JDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBFVkVOVCAqLywgZXZlbnROYW1lLCBldmVudFBhcmFtcyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGV2ZW50UGFyYW1zKSwgeyAnc2VuZF90byc6IG1lYXN1cmVtZW50SWQgfSk7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBFVkVOVCAqLywgZXZlbnROYW1lLCBwYXJhbXMpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgc2NyZWVuX25hbWUgcGFyYW1ldGVyIGZvciB0aGlzIEdvb2dsZSBBbmFseXRpY3MgSUQuXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgbG9nRXZlbnR9IHdpdGggYGV2ZW50TmFtZWAgYXMgJ3NjcmVlbl92aWV3JyBhbmQgYWRkIHJlbGV2YW50IGBldmVudFBhcmFtc2AuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYW5hbHl0aWNzL3NjcmVlbnZpZXdzIHwgVHJhY2sgU2NyZWVudmlld3N9LlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBzY3JlZW5OYW1lIFNjcmVlbiBuYW1lIHN0cmluZyB0byBzZXQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuJDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogU0VUICovLCB7ICdzY3JlZW5fbmFtZSc6IHNjcmVlbk5hbWUgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBDT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCB1c2VyX2lkIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBpZCBVc2VyIElEIHN0cmluZyB0byBzZXRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldFVzZXJJZCQxKGd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBpZCwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJzZXRcIiAvKiBTRVQgKi8sIHsgJ3VzZXJfaWQnOiBpZCB9KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBtZWFzdXJlbWVudElkID0gYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcImNvbmZpZ1wiIC8qIENPTkZJRyAqLywgbWVhc3VyZW1lbnRJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICd1c2VyX2lkJzogaWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IGFsbCBvdGhlciB1c2VyIHByb3BlcnRpZXMgb3RoZXIgdGhhbiB1c2VyX2lkIGFuZCBzY3JlZW5fbmFtZS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gcHJvcGVydGllcyBNYXAgb2YgdXNlciBwcm9wZXJ0aWVzIHRvIHNldFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0VXNlclByb3BlcnRpZXMkMShndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSwgcHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBjb25zdCBmbGF0UHJvcGVydGllcyA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHByb3BlcnRpZXMpKSB7XHJcbiAgICAgICAgICAgIC8vIHVzZSBkb3Qgbm90YXRpb24gZm9yIG1lcmdlIGJlaGF2aW9yIGluIGd0YWcuanNcclxuICAgICAgICAgICAgZmxhdFByb3BlcnRpZXNbYHVzZXJfcHJvcGVydGllcy4ke2tleX1gXSA9IHByb3BlcnRpZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogU0VUICovLCBmbGF0UHJvcGVydGllcyk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBDT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndXNlcl9wcm9wZXJ0aWVzJzogcHJvcGVydGllc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgd2hldGhlciBjb2xsZWN0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgSUQuXHJcbiAqXHJcbiAqIEBwYXJhbSBlbmFibGVkIElmIHRydWUsIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBJRC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkJDEoaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBlbmFibGVkKSB7XHJcbiAgICBjb25zdCBtZWFzdXJlbWVudElkID0gYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgd2luZG93W2BnYS1kaXNhYmxlLSR7bWVhc3VyZW1lbnRJZH1gXSA9ICFlbmFibGVkO1xyXG59XHJcbi8qKlxyXG4gKiBDb25zZW50IHBhcmFtZXRlcnMgdG8gZGVmYXVsdCB0byBkdXJpbmcgJ2d0YWcnIGluaXRpYWxpemF0aW9uLlxyXG4gKi9cclxubGV0IGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0O1xyXG4vKipcclxuICogU2V0cyB0aGUgdmFyaWFibGUge0BsaW5rIGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0fSBmb3IgdXNlIGluIHRoZSBpbml0aWFsaXphdGlvbiBvZlxyXG4gKiBhbmFseXRpY3MuXHJcbiAqXHJcbiAqIEBwYXJhbSBjb25zZW50U2V0dGluZ3MgTWFwcyB0aGUgYXBwbGljYWJsZSBlbmQgdXNlciBjb25zZW50IHN0YXRlIGZvciBndGFnLmpzLlxyXG4gKi9cclxuZnVuY3Rpb24gX3NldENvbnNlbnREZWZhdWx0Rm9ySW5pdChjb25zZW50U2V0dGluZ3MpIHtcclxuICAgIGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0ID0gY29uc2VudFNldHRpbmdzO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSB2YXJpYWJsZSBgZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXRgIGZvciB1c2UgaW4gdGhlIGluaXRpYWxpemF0aW9uIG9mXHJcbiAqIGFuYWx5dGljcy5cclxuICpcclxuICogQHBhcmFtIGN1c3RvbVBhcmFtcyBBbnkgY3VzdG9tIHBhcmFtcyB0aGUgdXNlciBtYXkgcGFzcyB0byBndGFnLmpzLlxyXG4gKi9cclxuZnVuY3Rpb24gX3NldERlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KGN1c3RvbVBhcmFtcykge1xyXG4gICAgZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQgPSBjdXN0b21QYXJhbXM7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREIoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICBsb2dnZXIud2FybihFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImluZGV4ZWRkYi11bmF2YWlsYWJsZVwiIC8qIElOREVYRUREQl9VTkFWQUlMQUJMRSAqLywge1xyXG4gICAgICAgICAgICBlcnJvckluZm86ICdJbmRleGVkREIgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LidcclxuICAgICAgICB9KS5tZXNzYWdlKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogSU5ERVhFRERCX1VOQVZBSUxBQkxFICovLCB7XHJcbiAgICAgICAgICAgICAgICBlcnJvckluZm86IChfYSA9IGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGFuYWx5dGljcyBpbnN0YW5jZSBpbiBndGFnLmpzIGJ5IGNhbGxpbmcgY29uZmlnIGNvbW1hbmQgd2l0aCBmaWQuXHJcbiAqXHJcbiAqIE5PVEU6IFdlIGNvbWJpbmUgYW5hbHl0aWNzIGluaXRpYWxpemF0aW9uIGFuZCBzZXR0aW5nIGZpZCB0b2dldGhlciBiZWNhdXNlIHdlIHdhbnQgZmlkIHRvIGJlXHJcbiAqIHBhcnQgb2YgdGhlIGBwYWdlX3ZpZXdgIGV2ZW50IHRoYXQncyBzZW50IGR1cmluZyB0aGUgaW5pdGlhbGl6YXRpb25cclxuICogQHBhcmFtIGFwcCBGaXJlYmFzZSBhcHBcclxuICogQHBhcmFtIGd0YWdDb3JlIFRoZSBndGFnIGZ1bmN0aW9uIHRoYXQncyBub3Qgd3JhcHBlZC5cclxuICogQHBhcmFtIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgQXJyYXkgb2YgYWxsIGR5bmFtaWMgY29uZmlnIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZFRvQXBwSWQgTWFwcyBtZWFzdXJlbWVudElEIHRvIGFwcElELlxyXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyBfRmlyZWJhc2VJbnN0YWxsYXRpb25zSW50ZXJuYWwgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEByZXR1cm5zIE1lYXN1cmVtZW50IElELlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2luaXRpYWxpemVBbmFseXRpY3MoYXBwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgaW5zdGFsbGF0aW9ucywgZ3RhZ0NvcmUsIGRhdGFMYXllck5hbWUsIG9wdGlvbnMpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGR5bmFtaWNDb25maWdQcm9taXNlID0gZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KGFwcCk7XHJcbiAgICAvLyBPbmNlIGZldGNoZWQsIG1hcCBtZWFzdXJlbWVudElkcyB0byBhcHBJZCwgZm9yIGVhc2Ugb2YgbG9va3VwIGluIHdyYXBwZWQgZ3RhZyBmdW5jdGlvbi5cclxuICAgIGR5bmFtaWNDb25maWdQcm9taXNlXHJcbiAgICAgICAgLnRoZW4oY29uZmlnID0+IHtcclxuICAgICAgICBtZWFzdXJlbWVudElkVG9BcHBJZFtjb25maWcubWVhc3VyZW1lbnRJZF0gPSBjb25maWcuYXBwSWQ7XHJcbiAgICAgICAgaWYgKGFwcC5vcHRpb25zLm1lYXN1cmVtZW50SWQgJiZcclxuICAgICAgICAgICAgY29uZmlnLm1lYXN1cmVtZW50SWQgIT09IGFwcC5vcHRpb25zLm1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRoZSBtZWFzdXJlbWVudCBJRCBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnICgke2FwcC5vcHRpb25zLm1lYXN1cmVtZW50SWR9KWAgK1xyXG4gICAgICAgICAgICAgICAgYCBkb2VzIG5vdCBtYXRjaCB0aGUgbWVhc3VyZW1lbnQgSUQgZmV0Y2hlZCBmcm9tIHRoZSBzZXJ2ZXIgKCR7Y29uZmlnLm1lYXN1cmVtZW50SWR9KS5gICtcclxuICAgICAgICAgICAgICAgIGAgVG8gZW5zdXJlIGFuYWx5dGljcyBldmVudHMgYXJlIGFsd2F5cyBzZW50IHRvIHRoZSBjb3JyZWN0IEFuYWx5dGljcyBwcm9wZXJ0eSxgICtcclxuICAgICAgICAgICAgICAgIGAgdXBkYXRlIHRoZWAgK1xyXG4gICAgICAgICAgICAgICAgYCBtZWFzdXJlbWVudCBJRCBmaWVsZCBpbiB0aGUgbG9jYWwgY29uZmlnIG9yIHJlbW92ZSBpdCBmcm9tIHRoZSBsb2NhbCBjb25maWcuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG4gICAgLy8gQWRkIHRvIGxpc3QgdG8gdHJhY2sgc3RhdGUgb2YgYWxsIGR5bmFtaWMgY29uZmlnIHByb21pc2VzLlxyXG4gICAgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdC5wdXNoKGR5bmFtaWNDb25maWdQcm9taXNlKTtcclxuICAgIGNvbnN0IGZpZFByb21pc2UgPSB2YWxpZGF0ZUluZGV4ZWREQigpLnRoZW4oZW52SXNWYWxpZCA9PiB7XHJcbiAgICAgICAgaWYgKGVudklzVmFsaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbGxhdGlvbnMuZ2V0SWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBbZHluYW1pY0NvbmZpZywgZmlkXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICBkeW5hbWljQ29uZmlnUHJvbWlzZSxcclxuICAgICAgICBmaWRQcm9taXNlXHJcbiAgICBdKTtcclxuICAgIC8vIERldGVjdCBpZiB1c2VyIGhhcyBhbHJlYWR5IHB1dCB0aGUgZ3RhZyA8c2NyaXB0PiB0YWcgb24gdGhpcyBwYWdlIHdpdGggdGhlIHBhc3NlZCBpblxyXG4gICAgLy8gZGF0YSBsYXllciBuYW1lLlxyXG4gICAgaWYgKCFmaW5kR3RhZ1NjcmlwdE9uUGFnZShkYXRhTGF5ZXJOYW1lKSkge1xyXG4gICAgICAgIGluc2VydFNjcmlwdFRhZyhkYXRhTGF5ZXJOYW1lLCBkeW5hbWljQ29uZmlnLm1lYXN1cmVtZW50SWQpO1xyXG4gICAgfVxyXG4gICAgLy8gRGV0ZWN0cyBpZiB0aGVyZSBhcmUgY29uc2VudCBzZXR0aW5ncyB0aGF0IG5lZWQgdG8gYmUgY29uZmlndXJlZC5cclxuICAgIGlmIChkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCkge1xyXG4gICAgICAgIGd0YWdDb3JlKFwiY29uc2VudFwiIC8qIENPTlNFTlQgKi8sICdkZWZhdWx0JywgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQpO1xyXG4gICAgICAgIF9zZXRDb25zZW50RGVmYXVsdEZvckluaXQodW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgY29tbWFuZCBpbml0aWFsaXplcyBndGFnLmpzIGFuZCBvbmx5IG5lZWRzIHRvIGJlIGNhbGxlZCBvbmNlIGZvciB0aGUgZW50aXJlIHdlYiBhcHAsXHJcbiAgICAvLyBidXQgc2luY2UgaXQgaXMgaWRlbXBvdGVudCwgd2UgY2FuIGNhbGwgaXQgbXVsdGlwbGUgdGltZXMuXHJcbiAgICAvLyBXZSBrZWVwIGl0IHRvZ2V0aGVyIHdpdGggb3RoZXIgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGJldHRlciBjb2RlIHN0cnVjdHVyZS5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICBndGFnQ29yZSgnanMnLCBuZXcgRGF0ZSgpKTtcclxuICAgIC8vIFVzZXIgY29uZmlnIGFkZGVkIGZpcnN0LiBXZSBkb24ndCB3YW50IHVzZXJzIHRvIGFjY2lkZW50YWxseSBvdmVyd3JpdGVcclxuICAgIC8vIGJhc2UgRmlyZWJhc2UgY29uZmlnIHByb3BlcnRpZXMuXHJcbiAgICBjb25zdCBjb25maWdQcm9wZXJ0aWVzID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNvbmZpZykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XHJcbiAgICAvLyBndWFyZCBhZ2FpbnN0IGRldmVsb3BlcnMgYWNjaWRlbnRhbGx5IHNldHRpbmcgcHJvcGVydGllcyB3aXRoIHByZWZpeCBgZmlyZWJhc2VfYFxyXG4gICAgY29uZmlnUHJvcGVydGllc1tPUklHSU5fS0VZXSA9ICdmaXJlYmFzZSc7XHJcbiAgICBjb25maWdQcm9wZXJ0aWVzLnVwZGF0ZSA9IHRydWU7XHJcbiAgICBpZiAoZmlkICE9IG51bGwpIHtcclxuICAgICAgICBjb25maWdQcm9wZXJ0aWVzW0dBX0ZJRF9LRVldID0gZmlkO1xyXG4gICAgfVxyXG4gICAgLy8gSXQgc2hvdWxkIGJlIHRoZSBmaXJzdCBjb25maWcgY29tbWFuZCBjYWxsZWQgb24gdGhpcyBHQS1JRFxyXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGlzIEdBLUlEIGFuZCBzZXQgRklEIG9uIGl0IHVzaW5nIHRoZSBndGFnIGNvbmZpZyBBUEkuXHJcbiAgICAvLyBOb3RlOiBUaGlzIHdpbGwgdHJpZ2dlciBhIHBhZ2VfdmlldyBldmVudCB1bmxlc3MgJ3NlbmRfcGFnZV92aWV3JyBpcyBzZXQgdG8gZmFsc2UgaW5cclxuICAgIC8vIGBjb25maWdQcm9wZXJ0aWVzYC5cclxuICAgIGd0YWdDb3JlKFwiY29uZmlnXCIgLyogQ09ORklHICovLCBkeW5hbWljQ29uZmlnLm1lYXN1cmVtZW50SWQsIGNvbmZpZ1Byb3BlcnRpZXMpO1xyXG4gICAgLy8gRGV0ZWN0cyBpZiB0aGVyZSBpcyBkYXRhIHRoYXQgd2lsbCBiZSBzZXQgb24gZXZlcnkgZXZlbnQgbG9nZ2VkIGZyb20gdGhlIFNESy5cclxuICAgIGlmIChkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCkge1xyXG4gICAgICAgIGd0YWdDb3JlKFwic2V0XCIgLyogU0VUICovLCBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCk7XHJcbiAgICAgICAgX3NldERlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZHluYW1pY0NvbmZpZy5tZWFzdXJlbWVudElkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBbmFseXRpY3MgU2VydmljZSBjbGFzcy5cclxuICovXHJcbmNsYXNzIEFuYWx5dGljc1NlcnZpY2Uge1xyXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICB9XHJcbiAgICBfZGVsZXRlKCkge1xyXG4gICAgICAgIGRlbGV0ZSBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW3RoaXMuYXBwLm9wdGlvbnMuYXBwSWRdO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogTWFwcyBhcHBJZCB0byBmdWxsIGluaXRpYWxpemF0aW9uIHByb21pc2UuIFdyYXBwZWQgZ3RhZyBjYWxscyBtdXN0IHdhaXQgb25cclxuICogYWxsIG9yIHNvbWUgb2YgdGhlc2UsIGRlcGVuZGluZyBvbiB0aGUgY2FsbCdzIGBzZW5kX3RvYCBwYXJhbSBhbmQgdGhlIHN0YXR1c1xyXG4gKiBvZiB0aGUgZHluYW1pYyBjb25maWcgZmV0Y2hlcyAoc2VlIGJlbG93KS5cclxuICovXHJcbmxldCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwID0ge307XHJcbi8qKlxyXG4gKiBMaXN0IG9mIGR5bmFtaWMgY29uZmlnIGZldGNoIHByb21pc2VzLiBJbiBjZXJ0YWluIGNhc2VzLCB3cmFwcGVkIGd0YWcgY2FsbHNcclxuICogd2FpdCBvbiBhbGwgdGhlc2UgdG8gYmUgY29tcGxldGUgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIGlmIGl0IGNhbiBzZWxlY3RpdmVseVxyXG4gKiB3YWl0IGZvciBvbmx5IGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gKEZJRCkgcHJvbWlzZXMgb3IgaWYgaXQgbXVzdCB3YWl0IGZvciBhbGwuXHJcbiAqL1xyXG5sZXQgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCA9IFtdO1xyXG4vKipcclxuICogTWFwcyBmZXRjaGVkIG1lYXN1cmVtZW50SWRzIHRvIGFwcElkLiBQb3B1bGF0ZWQgd2hlbiB0aGUgYXBwJ3MgZHluYW1pYyBjb25maWdcclxuICogZmV0Y2ggY29tcGxldGVzLiBJZiBhbHJlYWR5IHBvcHVsYXRlZCwgZ3RhZyBjb25maWcgY2FsbHMgY2FuIHVzZSB0aGlzIHRvXHJcbiAqIHNlbGVjdGl2ZWx5IHdhaXQgZm9yIG9ubHkgdGhpcyBhcHAncyBpbml0aWFsaXphdGlvbiBwcm9taXNlIChGSUQpIGluc3RlYWQgb2YgYWxsXHJcbiAqIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKi9cclxuY29uc3QgbWVhc3VyZW1lbnRJZFRvQXBwSWQgPSB7fTtcclxuLyoqXHJcbiAqIE5hbWUgZm9yIHdpbmRvdyBnbG9iYWwgZGF0YSBsYXllciBhcnJheSB1c2VkIGJ5IEdBOiBkZWZhdWx0cyB0byAnZGF0YUxheWVyJy5cclxuICovXHJcbmxldCBkYXRhTGF5ZXJOYW1lID0gJ2RhdGFMYXllcic7XHJcbi8qKlxyXG4gKiBOYW1lIGZvciB3aW5kb3cgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gdXNlZCBieSBHQTogZGVmYXVsdHMgdG8gJ2d0YWcnLlxyXG4gKi9cclxubGV0IGd0YWdOYW1lID0gJ2d0YWcnO1xyXG4vKipcclxuICogUmVwcm9kdWN0aW9uIG9mIHN0YW5kYXJkIGd0YWcgZnVuY3Rpb24gb3IgcmVmZXJlbmNlIHRvIGV4aXN0aW5nXHJcbiAqIGd0YWcgZnVuY3Rpb24gb24gd2luZG93IG9iamVjdC5cclxuICovXHJcbmxldCBndGFnQ29yZUZ1bmN0aW9uO1xyXG4vKipcclxuICogV3JhcHBlciBhcm91bmQgZ3RhZyBmdW5jdGlvbiB0aGF0IGVuc3VyZXMgRklEIGlzIHNlbnQgd2l0aCBhbGxcclxuICogcmVsZXZhbnQgZXZlbnQgYW5kIGNvbmZpZyBjYWxscy5cclxuICovXHJcbmxldCB3cmFwcGVkR3RhZ0Z1bmN0aW9uO1xyXG4vKipcclxuICogRmxhZyB0byBlbnN1cmUgcGFnZSBpbml0aWFsaXphdGlvbiBzdGVwcyAoY3JlYXRpb24gb3Igd3JhcHBpbmcgb2ZcclxuICogZGF0YUxheWVyIGFuZCBndGFnIHNjcmlwdCkgYXJlIG9ubHkgcnVuIG9uY2UgcGVyIHBhZ2UgbG9hZC5cclxuICovXHJcbmxldCBnbG9iYWxJbml0RG9uZSA9IGZhbHNlO1xyXG4vKipcclxuICogQ29uZmlndXJlcyBGaXJlYmFzZSBBbmFseXRpY3MgdG8gdXNlIGN1c3RvbSBgZ3RhZ2Agb3IgYGRhdGFMYXllcmAgbmFtZXMuXHJcbiAqIEludGVuZGVkIHRvIGJlIHVzZWQgaWYgYGd0YWcuanNgIHNjcmlwdCBoYXMgYmVlbiBpbnN0YWxsZWQgb25cclxuICogdGhpcyBwYWdlIGluZGVwZW5kZW50bHkgb2YgRmlyZWJhc2UgQW5hbHl0aWNzLCBhbmQgaXMgdXNpbmcgbm9uLWRlZmF1bHRcclxuICogbmFtZXMgZm9yIGVpdGhlciB0aGUgYGd0YWdgIGZ1bmN0aW9uIG9yIGZvciBgZGF0YUxheWVyYC5cclxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGNhbGxpbmcgYGdldEFuYWx5dGljcygpYCBvciBpdCB3b24ndFxyXG4gKiBoYXZlIGFueSBlZmZlY3QuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIG9wdGlvbnMgLSBDdXN0b20gZ3RhZyBhbmQgZGF0YUxheWVyIG5hbWVzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0dGluZ3Mob3B0aW9ucykge1xyXG4gICAgaWYgKGdsb2JhbEluaXREb25lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5kYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICAgICAgZGF0YUxheWVyTmFtZSA9IG9wdGlvbnMuZGF0YUxheWVyTmFtZTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmd0YWdOYW1lKSB7XHJcbiAgICAgICAgZ3RhZ05hbWUgPSBvcHRpb25zLmd0YWdOYW1lO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgbm8gZW52aXJvbm1lbnQgbWlzbWF0Y2ggaXMgZm91bmQuXHJcbiAqIElmIGVudmlyb25tZW50IG1pc21hdGNoZXMgYXJlIGZvdW5kLCB0aHJvd3MgYW4gSU5WQUxJRF9BTkFMWVRJQ1NfQ09OVEVYVFxyXG4gKiBlcnJvciB0aGF0IGFsc28gbGlzdHMgZGV0YWlscyBmb3IgZWFjaCBtaXNtYXRjaCBmb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIHdhcm5PbkJyb3dzZXJDb250ZXh0TWlzbWF0Y2goKSB7XHJcbiAgICBjb25zdCBtaXNtYXRjaGVkRW52TWVzc2FnZXMgPSBbXTtcclxuICAgIGlmIChpc0Jyb3dzZXJFeHRlbnNpb24oKSkge1xyXG4gICAgICAgIG1pc21hdGNoZWRFbnZNZXNzYWdlcy5wdXNoKCdUaGlzIGlzIGEgYnJvd3NlciBleHRlbnNpb24gZW52aXJvbm1lbnQuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFyZUNvb2tpZXNFbmFibGVkKCkpIHtcclxuICAgICAgICBtaXNtYXRjaGVkRW52TWVzc2FnZXMucHVzaCgnQ29va2llcyBhcmUgbm90IGF2YWlsYWJsZS4nKTtcclxuICAgIH1cclxuICAgIGlmIChtaXNtYXRjaGVkRW52TWVzc2FnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSBtaXNtYXRjaGVkRW52TWVzc2FnZXNcclxuICAgICAgICAgICAgLm1hcCgobWVzc2FnZSwgaW5kZXgpID0+IGAoJHtpbmRleCArIDF9KSAke21lc3NhZ2V9YClcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgICAgICBjb25zdCBlcnIgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtYW5hbHl0aWNzLWNvbnRleHRcIiAvKiBJTlZBTElEX0FOQUxZVElDU19DT05URVhUICovLCB7XHJcbiAgICAgICAgICAgIGVycm9ySW5mbzogZGV0YWlsc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxvZ2dlci53YXJuKGVyci5tZXNzYWdlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQW5hbHl0aWNzIGluc3RhbmNlIGZhY3RvcnkuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gZmFjdG9yeShhcHAsIGluc3RhbGxhdGlvbnMsIG9wdGlvbnMpIHtcclxuICAgIHdhcm5PbkJyb3dzZXJDb250ZXh0TWlzbWF0Y2goKTtcclxuICAgIGNvbnN0IGFwcElkID0gYXBwLm9wdGlvbnMuYXBwSWQ7XHJcbiAgICBpZiAoIWFwcElkKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHAtaWRcIiAvKiBOT19BUFBfSUQgKi8pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHAub3B0aW9ucy5hcGlLZXkpIHtcclxuICAgICAgICBpZiAoYXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgVGhlIFwiYXBpS2V5XCIgZmllbGQgaXMgZW1wdHkgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gVGhpcyBpcyBuZWVkZWQgdG8gZmV0Y2ggdGhlIGxhdGVzdGAgK1xyXG4gICAgICAgICAgICAgICAgYCBtZWFzdXJlbWVudCBJRCBmb3IgdGhpcyBGaXJlYmFzZSBhcHAuIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHthcHAub3B0aW9ucy5tZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgYCBwcm92aWRlZCBpbiB0aGUgXCJtZWFzdXJlbWVudElkXCIgZmllbGQgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBpLWtleVwiIC8qIE5PX0FQSV9LRVkgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FwcElkXSAhPSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhbHJlYWR5LWV4aXN0c1wiIC8qIEFMUkVBRFlfRVhJU1RTICovLCB7XHJcbiAgICAgICAgICAgIGlkOiBhcHBJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFnbG9iYWxJbml0RG9uZSkge1xyXG4gICAgICAgIC8vIFN0ZXBzIGhlcmUgc2hvdWxkIG9ubHkgYmUgZG9uZSBvbmNlIHBlciBwYWdlOiBjcmVhdGlvbiBvciB3cmFwcGluZ1xyXG4gICAgICAgIC8vIG9mIGRhdGFMYXllciBhbmQgZ2xvYmFsIGd0YWcgZnVuY3Rpb24uXHJcbiAgICAgICAgZ2V0T3JDcmVhdGVEYXRhTGF5ZXIoZGF0YUxheWVyTmFtZSk7XHJcbiAgICAgICAgY29uc3QgeyB3cmFwcGVkR3RhZywgZ3RhZ0NvcmUgfSA9IHdyYXBPckNyZWF0ZUd0YWcoaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGRhdGFMYXllck5hbWUsIGd0YWdOYW1lKTtcclxuICAgICAgICB3cmFwcGVkR3RhZ0Z1bmN0aW9uID0gd3JhcHBlZEd0YWc7XHJcbiAgICAgICAgZ3RhZ0NvcmVGdW5jdGlvbiA9IGd0YWdDb3JlO1xyXG4gICAgICAgIGdsb2JhbEluaXREb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIEFzeW5jIGJ1dCBub24tYmxvY2tpbmcuXHJcbiAgICAvLyBUaGlzIG1hcCByZWZsZWN0cyB0aGUgY29tcGxldGlvbiBzdGF0ZSBvZiBhbGwgcHJvbWlzZXMgZm9yIGVhY2ggYXBwSWQuXHJcbiAgICBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FwcElkXSA9IF9pbml0aWFsaXplQW5hbHl0aWNzKGFwcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGluc3RhbGxhdGlvbnMsIGd0YWdDb3JlRnVuY3Rpb24sIGRhdGFMYXllck5hbWUsIG9wdGlvbnMpO1xyXG4gICAgY29uc3QgYW5hbHl0aWNzSW5zdGFuY2UgPSBuZXcgQW5hbHl0aWNzU2VydmljZShhcHApO1xyXG4gICAgcmV0dXJuIGFuYWx5dGljc0luc3RhbmNlO1xyXG59XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYW4ge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UgZm9yIHRoZSBnaXZlbiBhcHAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gdG8gdXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QW5hbHl0aWNzKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBhcHAgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXBwKTtcclxuICAgIC8vIERlcGVuZGVuY2llc1xyXG4gICAgY29uc3QgYW5hbHl0aWNzUHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCBBTkFMWVRJQ1NfVFlQRSk7XHJcbiAgICBpZiAoYW5hbHl0aWNzUHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGFuYWx5dGljc1Byb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluaXRpYWxpemVBbmFseXRpY3MoYXBwKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhbiB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZSBmb3IgdGhlIGdpdmVuIGFwcC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB0byB1c2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQW5hbHl0aWNzKGFwcCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAvLyBEZXBlbmRlbmNpZXNcclxuICAgIGNvbnN0IGFuYWx5dGljc1Byb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgQU5BTFlUSUNTX1RZUEUpO1xyXG4gICAgaWYgKGFuYWx5dGljc1Byb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSBhbmFseXRpY3NQcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGFuYWx5dGljc1Byb3ZpZGVyLmdldE9wdGlvbnMoKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nSW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBhbmFseXRpY3NJbnN0YW5jZSA9IGFuYWx5dGljc1Byb3ZpZGVyLmluaXRpYWxpemUoeyBvcHRpb25zIH0pO1xyXG4gICAgcmV0dXJuIGFuYWx5dGljc0luc3RhbmNlO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIGlzIGEgcHVibGljIHN0YXRpYyBtZXRob2QgcHJvdmlkZWQgdG8gdXNlcnMgdGhhdCB3cmFwcyBmb3VyIGRpZmZlcmVudCBjaGVja3M6XHJcbiAqXHJcbiAqIDEuIENoZWNrIGlmIGl0J3Mgbm90IGEgYnJvd3NlciBleHRlbnNpb24gZW52aXJvbm1lbnQuXHJcbiAqIDIuIENoZWNrIGlmIGNvb2tpZXMgYXJlIGVuYWJsZWQgaW4gY3VycmVudCBicm93c2VyLlxyXG4gKiAzLiBDaGVjayBpZiBJbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyIGVudmlyb25tZW50LlxyXG4gKiA0LiBDaGVjayBpZiB0aGUgY3VycmVudCBicm93c2VyIGNvbnRleHQgaXMgdmFsaWQgZm9yIHVzaW5nIGBJbmRleGVkREIub3BlbigpYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XHJcbiAgICBpZiAoaXNCcm93c2VyRXh0ZW5zaW9uKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFyZUNvb2tpZXNFbmFibGVkKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGlzREJPcGVuYWJsZSA9IGF3YWl0IHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKTtcclxuICAgICAgICByZXR1cm4gaXNEQk9wZW5hYmxlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVc2UgZ3RhZyBgY29uZmlnYCBjb21tYW5kIHRvIHNldCBgc2NyZWVuX25hbWVgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgbG9nRXZlbnR9IHdpdGggYGV2ZW50TmFtZWAgYXMgJ3NjcmVlbl92aWV3JyBhbmQgYWRkIHJlbGV2YW50IGBldmVudFBhcmFtc2AuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYW5hbHl0aWNzL3NjcmVlbnZpZXdzIHwgVHJhY2sgU2NyZWVudmlld3N9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYW5hbHl0aWNzSW5zdGFuY2UgLSBUaGUge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBzY3JlZW5OYW1lIC0gU2NyZWVuIG5hbWUgdG8gc2V0LlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0Q3VycmVudFNjcmVlbihhbmFseXRpY3NJbnN0YW5jZSwgc2NyZWVuTmFtZSwgb3B0aW9ucykge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgc2V0Q3VycmVudFNjcmVlbiQxKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBzY3JlZW5OYW1lLCBvcHRpb25zKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIFVzZSBndGFnIGBjb25maWdgIGNvbW1hbmQgdG8gc2V0IGB1c2VyX2lkYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gYW5hbHl0aWNzSW5zdGFuY2UgLSBUaGUge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBpZCAtIFVzZXIgSUQgdG8gc2V0LlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0VXNlcklkKGFuYWx5dGljc0luc3RhbmNlLCBpZCwgb3B0aW9ucykge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgc2V0VXNlcklkJDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIGlkLCBvcHRpb25zKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIFVzZSBndGFnIGBjb25maWdgIGNvbW1hbmQgdG8gc2V0IGFsbCBwYXJhbXMgc3BlY2lmaWVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRVc2VyUHJvcGVydGllcyhhbmFseXRpY3NJbnN0YW5jZSwgcHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgc2V0VXNlclByb3BlcnRpZXMkMSh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgcHJvcGVydGllcywgb3B0aW9ucykuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHdoZXRoZXIgR29vZ2xlIEFuYWx5dGljcyBjb2xsZWN0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgYXBwIG9uIHRoaXMgZGV2aWNlLlxyXG4gKiBTZXRzIGdsb2JhbCBgd2luZG93WydnYS1kaXNhYmxlLWFuYWx5dGljc0lkJ10gPSB0cnVlO2BcclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gYW5hbHl0aWNzSW5zdGFuY2UgLSBUaGUge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbmFibGVkIC0gSWYgdHJ1ZSwgZW5hYmxlcyBjb2xsZWN0aW9uLCBpZiBmYWxzZSwgZGlzYWJsZXMgaXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZChhbmFseXRpY3NJbnN0YW5jZSwgZW5hYmxlZCkge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQkMShpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgZW5hYmxlZCkuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGRhdGEgdGhhdCB3aWxsIGJlIHNldCBvbiBldmVyeSBldmVudCBsb2dnZWQgZnJvbSB0aGUgU0RLLCBpbmNsdWRpbmcgYXV0b21hdGljIG9uZXMuXHJcbiAqIFdpdGggZ3RhZydzIFwic2V0XCIgY29tbWFuZCwgdGhlIHZhbHVlcyBwYXNzZWQgcGVyc2lzdCBvbiB0aGUgY3VycmVudCBwYWdlIGFuZCBhcmUgcGFzc2VkIHdpdGhcclxuICogYWxsIHN1YnNlcXVlbnQgZXZlbnRzLlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSBjdXN0b21QYXJhbXMgLSBBbnkgY3VzdG9tIHBhcmFtcyB0aGUgdXNlciBtYXkgcGFzcyB0byBndGFnLmpzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycyhjdXN0b21QYXJhbXMpIHtcclxuICAgIC8vIENoZWNrIGlmIHJlZmVyZW5jZSB0byBleGlzdGluZyBndGFnIGZ1bmN0aW9uIG9uIHdpbmRvdyBvYmplY3QgZXhpc3RzXHJcbiAgICBpZiAod3JhcHBlZEd0YWdGdW5jdGlvbikge1xyXG4gICAgICAgIHdyYXBwZWRHdGFnRnVuY3Rpb24oXCJzZXRcIiAvKiBTRVQgKi8sIGN1c3RvbVBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBfc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQoY3VzdG9tUGFyYW1zKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2VuZHMgYSBHb29nbGUgQW5hbHl0aWNzIGV2ZW50IHdpdGggZ2l2ZW4gYGV2ZW50UGFyYW1zYC4gVGhpcyBtZXRob2RcclxuICogYXV0b21hdGljYWxseSBhc3NvY2lhdGVzIHRoaXMgbG9nZ2VkIGV2ZW50IHdpdGggdGhpcyBGaXJlYmFzZSB3ZWJcclxuICogYXBwIGluc3RhbmNlIG9uIHRoaXMgZGV2aWNlLlxyXG4gKiBMaXN0IG9mIG9mZmljaWFsIGV2ZW50IHBhcmFtZXRlcnMgY2FuIGJlIGZvdW5kIGluIHRoZSBndGFnLmpzXHJcbiAqIHJlZmVyZW5jZSBkb2N1bWVudGF0aW9uOlxyXG4gKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZ3RhZ2pzL3JlZmVyZW5jZS9nYTQtZXZlbnRzXHJcbiAqIHwgdGhlIEdBNCByZWZlcmVuY2UgZG9jdW1lbnRhdGlvbn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGxvZ0V2ZW50KGFuYWx5dGljc0luc3RhbmNlLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBsb2dFdmVudCQxKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgdGhlIGFwcGxpY2FibGUgZW5kIHVzZXIgY29uc2VudCBzdGF0ZSBmb3IgdGhpcyB3ZWIgYXBwIGFjcm9zcyBhbGwgZ3RhZyByZWZlcmVuY2VzIG9uY2VcclxuICogRmlyZWJhc2UgQW5hbHl0aWNzIGlzIGluaXRpYWxpemVkLlxyXG4gKlxyXG4gKiBVc2UgdGhlIHtAbGluayBDb25zZW50U2V0dGluZ3N9IHRvIHNwZWNpZnkgaW5kaXZpZHVhbCBjb25zZW50IHR5cGUgdmFsdWVzLiBCeSBkZWZhdWx0IGNvbnNlbnRcclxuICogdHlwZXMgYXJlIHNldCB0byBcImdyYW50ZWRcIi5cclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0gY29uc2VudFNldHRpbmdzIC0gTWFwcyB0aGUgYXBwbGljYWJsZSBlbmQgdXNlciBjb25zZW50IHN0YXRlIGZvciBndGFnLmpzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0Q29uc2VudChjb25zZW50U2V0dGluZ3MpIHtcclxuICAgIC8vIENoZWNrIGlmIHJlZmVyZW5jZSB0byBleGlzdGluZyBndGFnIGZ1bmN0aW9uIG9uIHdpbmRvdyBvYmplY3QgZXhpc3RzXHJcbiAgICBpZiAod3JhcHBlZEd0YWdGdW5jdGlvbikge1xyXG4gICAgICAgIHdyYXBwZWRHdGFnRnVuY3Rpb24oXCJjb25zZW50XCIgLyogQ09OU0VOVCAqLywgJ3VwZGF0ZScsIGNvbnNlbnRTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBfc2V0Q29uc2VudERlZmF1bHRGb3JJbml0KGNvbnNlbnRTZXR0aW5ncyk7XHJcbiAgICB9XHJcbn1cblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuY29uc3QgdmVyc2lvbiA9IFwiMC44LjNcIjtcblxuLyoqXHJcbiAqIEZpcmViYXNlIEFuYWx5dGljc1xyXG4gKlxyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQW5hbHl0aWNzKCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoQU5BTFlUSUNTX1RZUEUsIChjb250YWluZXIsIHsgb3B0aW9uczogYW5hbHl0aWNzT3B0aW9ucyB9KSA9PiB7XHJcbiAgICAgICAgLy8gZ2V0SW1tZWRpYXRlIGZvciBGaXJlYmFzZUFwcCB3aWxsIGFsd2F5cyBzdWNjZWVkXHJcbiAgICAgICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBpbnN0YWxsYXRpb25zID0gY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcignaW5zdGFsbGF0aW9ucy1pbnRlcm5hbCcpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICByZXR1cm4gZmFjdG9yeShhcHAsIGluc3RhbGxhdGlvbnMsIGFuYWx5dGljc09wdGlvbnMpO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhbmFseXRpY3MtaW50ZXJuYWwnLCBpbnRlcm5hbEZhY3RvcnksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2VzbTIwMTcnKTtcclxuICAgIGZ1bmN0aW9uIGludGVybmFsRmFjdG9yeShjb250YWluZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhbmFseXRpY3MgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoQU5BTFlUSUNTX1RZUEUpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbG9nRXZlbnQ6IChldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSA9PiBsb2dFdmVudChhbmFseXRpY3MsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIElOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxucmVnaXN0ZXJBbmFseXRpY3MoKTtcblxuZXhwb3J0IHsgZ2V0QW5hbHl0aWNzLCBpbml0aWFsaXplQW5hbHl0aWNzLCBpc1N1cHBvcnRlZCwgbG9nRXZlbnQsIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkLCBzZXRDb25zZW50LCBzZXRDdXJyZW50U2NyZWVuLCBzZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzLCBzZXRVc2VySWQsIHNldFVzZXJQcm9wZXJ0aWVzLCBzZXR0aW5ncyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8vIHRoaXMgaXMgd2hlcmUgd2UgY2FuIGhhdmUgdGhlIGNsYXNzZXMgYW5kIGZ1bmN0aW9ucyBmb3IgYnVpbGRpbmcgdGhlIGV2ZW50c1xyXG4vLyB0byBzZW5kIHRvIGFuIGFuYWx5dGljcyByZWNvcmRlciAoZmlyZWJhc2U/IGxycz8pXHJcblxyXG5pbXBvcnQgeyBxRGF0YSwgYW5zd2VyRGF0YSB9IGZyb20gJy4vcXVlc3Rpb25EYXRhJztcclxuaW1wb3J0IHsgbG9nRXZlbnQgfSBmcm9tICdmaXJlYmFzZS9hbmFseXRpY3MnO1xyXG5pbXBvcnQgeyBidWNrZXQgfSBmcm9tICcuLi9hc3Nlc3NtZW50L2J1Y2tldERhdGEnXHJcblxyXG5cclxuLy8gQ3JlYXRlIGEgc2luZ2xldG9uIGNsYXNzIGZvciB0aGUgYW5hbHl0aWNzIGV2ZW50c1xyXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzRXZlbnRzIHtcclxuXHJcblx0cHJvdGVjdGVkIHN0YXRpYyB1dWlkOiBzdHJpbmc7XHJcblx0cHJvdGVjdGVkIHN0YXRpYyB1c2VyU291cmNlOiBzdHJpbmc7XHJcblx0cHJvdGVjdGVkIHN0YXRpYyBjbGF0O1xyXG5cdHByb3RlY3RlZCBzdGF0aWMgY2xvbjtcclxuXHRwcm90ZWN0ZWQgc3RhdGljIGdhbmE7XHJcblx0cHJvdGVjdGVkIHN0YXRpYyBsYXRsb25nO1xyXG5cdC8vIHZhciBjaXR5LCByZWdpb24sIGNvdW50cnk7XHJcblx0cHJvdGVjdGVkIHN0YXRpYyBkYXRhVVJMO1xyXG5cclxuXHRwcm90ZWN0ZWQgc3RhdGljIGFwcFZlcnNpb247XHJcblx0cHJvdGVjdGVkIHN0YXRpYyBjb250ZW50VmVyc2lvbjtcclxuXHJcblx0cHJvdGVjdGVkIHN0YXRpYyBhc3Nlc3NtZW50VHlwZTogc3RyaW5nO1xyXG5cclxuXHRzdGF0aWMgaW5zdGFuY2U6IEFuYWx5dGljc0V2ZW50cztcclxuXHJcblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8vIEluaXRpYWxpemUgdGhlIGNsYXNzXHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZ2V0SW5zdGFuY2UoKTogQW5hbHl0aWNzRXZlbnRzIHtcclxuXHRcdGlmICghQW5hbHl0aWNzRXZlbnRzLmluc3RhbmNlKSB7XHJcblx0XHRcdEFuYWx5dGljc0V2ZW50cy5pbnN0YW5jZSA9IG5ldyBBbmFseXRpY3NFdmVudHMoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gQW5hbHl0aWNzRXZlbnRzLmluc3RhbmNlO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIHNldEFzc2Vzc21lbnRUeXBlKGFzc2Vzc21lbnRUeXBlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdEFuYWx5dGljc0V2ZW50cy5hc3Nlc3NtZW50VHlwZSA9IGFzc2Vzc21lbnRUeXBlO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IExvY2F0aW9uXHJcblx0c3RhdGljIGdldExvY2F0aW9uKCk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2coXCJzdGFydGluZyB0byBnZXQgbG9jYXRpb25cIik7XHJcblx0XHRmZXRjaChgaHR0cHM6Ly9pcGluZm8uaW8vanNvbj90b2tlbj1iNjI2ODcyNzE3ODYxMGApLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiZ290IGxvY2F0aW9uIHJlc3BvbnNlXCIpO1xyXG5cdFx0XHRpZighcmVzcG9uc2Uub2spIHtcclxuXHRcdFx0XHR0aHJvdyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcblx0XHR9KS50aGVuKChqc29uUmVzcG9uc2UpICA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGpzb25SZXNwb25zZSk7XHJcblx0XHRcdEFuYWx5dGljc0V2ZW50cy5sYXRsb25nID0ganNvblJlc3BvbnNlLmxvYztcclxuXHRcdFx0dmFyIGxwaWVjZXMgPSBBbmFseXRpY3NFdmVudHMubGF0bG9uZy5zcGxpdChcIixcIik7XHJcblx0XHRcdHZhciBsYXQgPSBwYXJzZUZsb2F0KGxwaWVjZXNbMF0pLnRvRml4ZWQoMik7XHJcblx0XHRcdHZhciBsb24gPSBwYXJzZUZsb2F0KGxwaWVjZXNbMV0pLnRvRml4ZWQoMSk7XHJcblx0XHRcdEFuYWx5dGljc0V2ZW50cy5jbGF0ID0gbGF0O1xyXG5cdFx0XHRBbmFseXRpY3NFdmVudHMuY2xvbiA9IGxvbjtcclxuXHRcdFx0QW5hbHl0aWNzRXZlbnRzLmxhdGxvbmcgPSBcIlwiO1xyXG5cdFx0XHRscGllY2VzID0gW107XHJcblx0XHRcdC8vIGNpdHkgPSBqc29uUmVzcG9uc2UuY2l0eTtcclxuXHRcdFx0Ly8gcmVnaW9uID0ganNvblJlc3BvbnNlLnJlZ2lvbjtcclxuXHRcdFx0Ly8gY291bnRyeSA9IGpzb25SZXNwb25zZS5jb3VudHJ5O1xyXG5cdFx0XHRBbmFseXRpY3NFdmVudHMuc2VuZExvY2F0aW9uKCk7XHJcblxyXG5cdFx0XHRyZXR1cm4ge307XHJcblx0XHR9KS5jYXRjaCgoZXJyKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUud2FybihgbG9jYXRpb24gZmFpbGVkIHRvIHVwZGF0ZSEgZW5jb3VudGVyZWQgZXJyb3IgJHtlcnIubXNnfWApO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIExpbmsgQW5hbHl0aWNzXHJcblx0c3RhdGljIGxpbmtBbmFseXRpY3MobmV3Z2FuYSwgZGF0YXVybCk6IHZvaWQge1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmdhbmEgPSBuZXdnYW5hO1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwgPSBkYXRhdXJsO1xyXG5cdH1cclxuXHJcblx0Ly8gU2V0IFVVSURcclxuXHRzdGF0aWMgc2V0VXVpZChuZXdVdWlkOiBzdHJpbmcsIG5ld1VzZXJTb3VyY2U6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLnV1aWQgPSBuZXdVdWlkO1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLnVzZXJTb3VyY2UgPSBuZXdVc2VyU291cmNlO1xyXG5cdH1cclxuXHJcblx0Ly8gU2VuZCBJbml0XHJcblx0c3RhdGljIHNlbmRJbml0KGFwcFZlcnNpb246IHN0cmluZywgY29udGVudFZlcnNpb246IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmFwcFZlcnNpb24gPSBhcHBWZXJzaW9uO1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uID0gY29udGVudFZlcnNpb247XHJcblxyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmdldExvY2F0aW9uKCk7XHJcblxyXG5cdFx0dmFyIGV2ZW50U3RyaW5nID0gXCJ1c2VyIFwiICsgQW5hbHl0aWNzRXZlbnRzLnV1aWQgKyBcIiBvcGVuZWQgdGhlIGFzc2Vzc21lbnRcIjtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJvcGVuZWRcIiwge1xyXG5cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IEFwcCBMYW5ndWFnZSBGcm9tIERhdGEgVVJMXHJcblx0c3RhdGljIGdldEFwcExhbmd1YWdlRnJvbURhdGFVUkwoYXBwVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdC8vIENoZWNrIGlmIGFwcCB0eXBlIGlzIG5vdCBlbXB0eSBhbmQgc3BsaXQgdGhlIHN0cmluZyBieSB0aGUgaHlwaGVuIHRoZW4gcmV0dXJuIHRoZSBmaXJzdCBlbGVtZW50XHJcblx0XHRpZiAoYXBwVHlwZSAmJiBhcHBUeXBlICE9PSBcIlwiICYmIGFwcFR5cGUuaW5jbHVkZXMoXCItXCIpKSB7XHJcblx0XHRcdHJldHVybiBhcHBUeXBlLnNwbGl0KFwiLVwiKVswXTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gXCJOb3RBdmFpbGFibGVcIjtcclxuXHR9XHJcblxyXG5cdC8vIEdldCBBcHAgVHlwZSBGcm9tIERhdGEgVVJMXHJcblx0c3RhdGljIGdldEFwcFR5cGVGcm9tRGF0YVVSTChhcHBUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgYXBwIHR5cGUgaXMgbm90IGVtcHR5IGFuZCBzcGxpdCB0aGUgc3RyaW5nIGJ5IHRoZSBoeXBoZW4gdGhlbiByZXR1cm4gdGhlIGxhc3QgZWxlbWVudFxyXG5cdFx0aWYgKGFwcFR5cGUgJiYgYXBwVHlwZSAhPT0gXCJcIiAmJiBhcHBUeXBlLmluY2x1ZGVzKFwiLVwiKSkge1xyXG5cdFx0XHRyZXR1cm4gYXBwVHlwZS5zcGxpdChcIi1cIilbMV07XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIFwiTm90QXZhaWxhYmxlXCI7XHJcblx0fVxyXG5cclxuXHQvLyBTZW5kIExvY2F0aW9uXHJcblx0c3RhdGljIHNlbmRMb2NhdGlvbigpOiB2b2lkIHtcclxuXHRcdHZhciBldmVudFN0cmluZyA9IFwiU2VuZGluZyBVc2VyIGNvb3JkaW5hdGVzOiBcIiArIEFuYWx5dGljc0V2ZW50cy51dWlkICsgXCIgOiBcIiArIEFuYWx5dGljc0V2ZW50cy5jbGF0ICsgXCIsIFwiICsgQW5hbHl0aWNzRXZlbnRzLmNsb247XHJcblx0XHRjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJ1c2VyX2xvY2F0aW9uXCIsIHtcclxuXHRcdFx0dXNlcjogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXHJcblx0XHRcdGxhbmc6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0YXBwOiBBbmFseXRpY3NFdmVudHMuZ2V0QXBwVHlwZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0bGF0bG9uZzogQW5hbHl0aWNzRXZlbnRzLmpvaW5MYXRMb25nKEFuYWx5dGljc0V2ZW50cy5jbGF0LCBBbmFseXRpY3NFdmVudHMuY2xvbiksXHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIklOSVRJQUxJWkVEIEVWRU5UIFNFTlRcIik7XHJcblx0XHRjb25zb2xlLmxvZyhcIkFwcCBMYW5ndWFnZTogXCIgKyBBbmFseXRpY3NFdmVudHMuZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCkpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJBcHAgVHlwZTogXCIgKyBBbmFseXRpY3NFdmVudHMuZ2V0QXBwVHlwZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSk7XHJcblx0XHRjb25zb2xlLmxvZyhcIkFwcCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ29udGVudCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbik7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJpbml0aWFsaXplZFwiLCB7XHJcblx0XHRcdHR5cGU6IFwiaW5pdGlhbGl6ZWRcIixcclxuXHRcdFx0Y2xVc2VySWQ6IEFuYWx5dGljc0V2ZW50cy51dWlkLFxyXG5cdFx0XHR1c2VyU291cmNlOiBBbmFseXRpY3NFdmVudHMudXNlclNvdXJjZSxcclxuXHRcdFx0bGF0TG9uZzogQW5hbHl0aWNzRXZlbnRzLmpvaW5MYXRMb25nKEFuYWx5dGljc0V2ZW50cy5jbGF0LCBBbmFseXRpY3NFdmVudHMuY2xvbiksXHJcblx0XHRcdGFwcFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uLFxyXG5cdFx0XHRjb250ZW50VmVyc2lvbjogQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uLFxyXG5cdFx0XHQvLyBjaXR5OiBjaXR5LFxyXG5cdFx0XHQvLyByZWdpb246IHJlZ2lvbixcclxuXHRcdFx0Ly8gY291bnRyeTogY291bnRyeSxcclxuXHRcdFx0YXBwOiBBbmFseXRpY3NFdmVudHMuZ2V0QXBwVHlwZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0bGFuZzogQW5hbHl0aWNzRXZlbnRzLmdldEFwcExhbmd1YWdlRnJvbURhdGFVUkwoQW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwpXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vIFNlbmQgQW5zd2VyZWRcclxuXHRzdGF0aWMgc2VuZEFuc3dlcmVkKHRoZVE6IHFEYXRhLCB0aGVBOiBudW1iZXIsIGVsYXBzZWQ6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0dmFyIGFucyA9IHRoZVEuYW5zd2Vyc1t0aGVBIC0gMV07XHJcblxyXG5cdFx0dmFyIGlzY29ycmVjdCA9IG51bGw7XHJcblx0XHR2YXIgYnVja2V0ID0gbnVsbDtcclxuXHRcdGlmIChcImNvcnJlY3RcIiBpbiB0aGVRKXtcclxuXHRcdFx0aWYgKHRoZVEuY29ycmVjdCAhPSBudWxsKXtcclxuXHRcdFx0XHRpZiAodGhlUS5jb3JyZWN0ID09IGFucy5hbnN3ZXJOYW1lKXtcclxuXHRcdFx0XHRcdGlzY29ycmVjdCA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2V7XHJcblx0XHRcdFx0XHRpc2NvcnJlY3QgPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmIChcImJ1Y2tldFwiIGluIHRoZVEpe1xyXG5cdFx0XHRidWNrZXQgPSB0aGVRLmJ1Y2tldDtcclxuXHRcdH1cclxuXHRcdHZhciBldmVudFN0cmluZyA9IFwidXNlciBcIiArIEFuYWx5dGljc0V2ZW50cy51dWlkICsgXCIgYW5zd2VyZWQgXCIgKyB0aGVRLnFOYW1lICsgXCIgd2l0aCBcIiArIGFucy5hbnN3ZXJOYW1lO1xyXG5cdFx0ZXZlbnRTdHJpbmcgKz0gXCIsIGFsbCBhbnN3ZXJzIHdlcmUgW1wiO1xyXG5cdFx0dmFyIG9wdHMgPSBcIlwiO1xyXG5cdFx0Zm9yICh2YXIgYU51bSBpbiB0aGVRLmFuc3dlcnMpIHtcclxuXHRcdFx0ZXZlbnRTdHJpbmcgKz0gdGhlUS5hbnN3ZXJzW2FOdW1dLmFuc3dlck5hbWUgKyBcIixcIjtcclxuXHRcdFx0b3B0cyArPSB0aGVRLmFuc3dlcnNbYU51bV0uYW5zd2VyTmFtZSArIFwiLFwiO1xyXG5cclxuXHRcdH1cclxuXHRcdGV2ZW50U3RyaW5nICs9IFwiXSBcIjtcclxuXHRcdGV2ZW50U3RyaW5nICs9IGlzY29ycmVjdDtcclxuXHRcdGV2ZW50U3RyaW5nICs9IGJ1Y2tldDtcclxuXHRcdGNvbnNvbGUubG9nKGV2ZW50U3RyaW5nKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQW5zd2VyZWQgQXBwIFZlcnNpb246IFwiICsgQW5hbHl0aWNzRXZlbnRzLmFwcFZlcnNpb24pO1xyXG5cdFx0Y29uc29sZS5sb2coXCJDb250ZW50IFZlcnNpb246IFwiICsgQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uKTtcclxuXHJcblx0XHRsb2dFdmVudChBbmFseXRpY3NFdmVudHMuZ2FuYSxcImFuc3dlcmVkXCIsIHtcclxuXHRcdFx0dHlwZTogXCJhbnN3ZXJlZFwiLFxyXG5cdFx0XHRjbFVzZXJJZDogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXHJcblx0XHRcdHVzZXJTb3VyY2U6IEFuYWx5dGljc0V2ZW50cy51c2VyU291cmNlLFxyXG5cdFx0XHRsYXRMb25nOiBBbmFseXRpY3NFdmVudHMuam9pbkxhdExvbmcoQW5hbHl0aWNzRXZlbnRzLmNsYXQsIEFuYWx5dGljc0V2ZW50cy5jbG9uKSxcclxuXHRcdFx0Ly8gY2l0eTogY2l0eSxcclxuXHRcdFx0Ly8gcmVnaW9uOiByZWdpb24sXHJcblx0XHRcdC8vIGNvdW50cnk6IGNvdW50cnksXHJcblx0XHRcdGFwcDogQW5hbHl0aWNzRXZlbnRzLmdldEFwcFR5cGVGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXHJcblx0XHRcdGxhbmc6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0ZHQ6IGVsYXBzZWQsXHJcblx0XHRcdHF1ZXN0aW9uX251bWJlcjogdGhlUS5xTnVtYmVyLFxyXG5cdFx0XHR0YXJnZXQ6IHRoZVEucVRhcmdldCxcclxuXHRcdFx0cXVlc3Rpb246IHRoZVEucHJvbXB0VGV4dCxcclxuXHRcdFx0c2VsZWN0ZWRfYW5zd2VyOiBhbnMuYW5zd2VyTmFtZSxcclxuXHRcdFx0aXNjb3JyZWN0OiBpc2NvcnJlY3QsXHJcblx0XHRcdG9wdGlvbnM6IG9wdHMsXHJcblx0XHRcdGJ1Y2tldDogYnVja2V0LFxyXG5cdFx0XHRhcHBWZXJzaW9uOiBBbmFseXRpY3NFdmVudHMuYXBwVmVyc2lvbixcclxuXHRcdFx0Y29udGVudFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvblxyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcblx0Ly8gU2VuZCBCdWNrZXRcclxuXHRzdGF0aWMgc2VuZEJ1Y2tldCh0YjogYnVja2V0LCBwYXNzZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHZhciBibiA9IHRiLmJ1Y2tldElEO1xyXG5cdFx0dmFyIGJ0cmllZCA9IHRiLm51bVRyaWVkO1xyXG5cdFx0dmFyIGJjb3JyZWN0ID0gdGIubnVtQ29ycmVjdDtcclxuXHRcdFxyXG5cdFx0dmFyIGV2ZW50U3RyaW5nID0gXCJ1c2VyIFwiICsgQW5hbHl0aWNzRXZlbnRzLnV1aWQgKyBcIiBmaW5pc2hlZCB0aGUgYnVja2V0IFwiICsgYm4gKyBcIiB3aXRoIFwiICsgYmNvcnJlY3QgKyBcIiBjb3JyZWN0IGFuc3dlcnMgb3V0IG9mIFwiICsgYnRyaWVkICsgXCIgdHJpZWRcIiArIFwiIGFuZCBwYXNzZWQ6IFwiICsgcGFzc2VkO1xyXG5cdFx0Y29uc29sZS5sb2coZXZlbnRTdHJpbmcpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJCdWNrZXQgQ29tcGxldGVkIEFwcCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ29udGVudCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbik7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJidWNrZXRDb21wbGV0ZWRcIiwge1xyXG5cdFx0XHR0eXBlOiBcImJ1Y2tldENvbXBsZXRlZFwiLFxyXG5cdFx0XHRjbFVzZXJJZDogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXHJcblx0XHRcdHVzZXJTb3VyY2U6IEFuYWx5dGljc0V2ZW50cy51c2VyU291cmNlLFxyXG5cdFx0XHRsYXRMb25nOiBBbmFseXRpY3NFdmVudHMuam9pbkxhdExvbmcoQW5hbHl0aWNzRXZlbnRzLmNsYXQsIEFuYWx5dGljc0V2ZW50cy5jbG9uKSxcclxuXHRcdFx0Ly8gY2l0eTogY2l0eSxcclxuXHRcdFx0Ly8gcmVnaW9uOiByZWdpb24sXHJcblx0XHRcdC8vIGNvdW50cnk6IGNvdW50cnksXHJcblx0XHRcdGFwcDogQW5hbHl0aWNzRXZlbnRzLmdldEFwcFR5cGVGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXHJcblx0XHRcdGxhbmc6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0YnVja2V0TnVtYmVyOiBibixcclxuXHRcdFx0bnVtYmVyVHJpZWRJbkJ1Y2tldDpidHJpZWQsXHJcblx0XHRcdG51bWJlckNvcnJlY3RJbkJ1Y2tldDpiY29ycmVjdCxcclxuXHRcdFx0cGFzc2VkQnVja2V0OiBwYXNzZWQsXHJcblx0XHRcdGFwcFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uLFxyXG5cdFx0XHRjb250ZW50VmVyc2lvbjogQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vIFNlbmQgRmluaXNoZWRcclxuXHRzdGF0aWMgc2VuZEZpbmlzaGVkKGJ1Y2tldHM6IGJ1Y2tldFtdID0gbnVsbCwgYmFzYWxCdWNrZXQ6IG51bWJlciwgY2VpbGluZ0J1Y2tldDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRsZXQgZXZlbnRTdHJpbmcgPSBcInVzZXIgXCIgKyBBbmFseXRpY3NFdmVudHMudXVpZCArIFwiIGZpbmlzaGVkIHRoZSBhc3Nlc3NtZW50XCI7XHJcblx0XHRjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XHJcblxyXG5cdFx0bGV0IGJhc2FsQnVja2V0SUQgPSBBbmFseXRpY3NFdmVudHMuZ2V0QmFzYWxCdWNrZXRJRChidWNrZXRzKTtcclxuXHRcdGxldCBjZWlsaW5nQnVja2V0SUQgPSBBbmFseXRpY3NFdmVudHMuZ2V0Q2VpbGluZ0J1Y2tldElEKGJ1Y2tldHMpO1xyXG5cclxuXHRcdGlmIChiYXNhbEJ1Y2tldElEID09IDApIHtcclxuXHRcdFx0YmFzYWxCdWNrZXRJRCA9IGNlaWxpbmdCdWNrZXRJRDtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgc2NvcmUgPSBBbmFseXRpY3NFdmVudHMuY2FsY3VsYXRlU2NvcmUoYnVja2V0cywgYmFzYWxCdWNrZXRJRCk7XHJcblx0XHRjb25zdCBtYXhTY29yZSA9IGJ1Y2tldHMubGVuZ3RoICogMTAwO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiU2VuZGluZyBjb21wbGV0ZWQgZXZlbnRcIik7XHJcblx0XHRjb25zb2xlLmxvZyhcIlNjb3JlOiBcIiArIHNjb3JlKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiTWF4IFNjb3JlOiBcIiArIG1heFNjb3JlKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQmFzYWwgQnVja2V0OiBcIiArIGJhc2FsQnVja2V0SUQpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJCQVNBTCBGUk9NIEFTU0VTU01FTlQ6IFwiICsgYmFzYWxCdWNrZXQpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJDZWlsaW5nIEJ1Y2tldDogXCIgKyBjZWlsaW5nQnVja2V0SUQpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJDRUlMSU5HIEZST00gQVNTRVNTTUVOVDogXCIgKyBjZWlsaW5nQnVja2V0KTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ29tcGxldGVkIEFwcCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ29udGVudCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbik7XHJcblxyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmREYXRhVG9UaGlyZFBhcnR5KHNjb3JlLCBBbmFseXRpY3NFdmVudHMudXVpZCk7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJjb21wbGV0ZWRcIiwge1xyXG5cdFx0XHR0eXBlOiBcImNvbXBsZXRlZFwiLFxyXG5cdFx0XHRjbFVzZXJJZDogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXHJcblx0XHRcdHVzZXJTb3VyY2U6IEFuYWx5dGljc0V2ZW50cy51c2VyU291cmNlLFxyXG5cdFx0XHRhcHA6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBUeXBlRnJvbURhdGFVUkwoQW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwpLFxyXG5cdFx0XHRsYW5nOiBBbmFseXRpY3NFdmVudHMuZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXHJcblx0XHRcdGxhdExvbmc6IEFuYWx5dGljc0V2ZW50cy5qb2luTGF0TG9uZyhBbmFseXRpY3NFdmVudHMuY2xhdCwgQW5hbHl0aWNzRXZlbnRzLmNsb24pLFxyXG5cdFx0XHQvLyBjaXR5OiBjaXR5LFxyXG5cdFx0XHQvLyByZWdpb246IHJlZ2lvbixcclxuXHRcdFx0Ly8gY291bnRyeTogY291bnRyeSxcclxuXHRcdFx0c2NvcmU6IHNjb3JlLFxyXG5cdFx0XHRtYXhTY29yZTogbWF4U2NvcmUsXHJcblx0XHRcdGJhc2FsQnVja2V0OiBiYXNhbEJ1Y2tldElELFxyXG5cdFx0XHRjZWlsaW5nQnVja2V0OiBjZWlsaW5nQnVja2V0SUQsXHJcblx0XHRcdGFwcFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uLFxyXG5cdFx0XHRjb250ZW50VmVyc2lvbjogQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBzZW5kRGF0YVRvVGhpcmRQYXJ0eShzY29yZTogbnVtYmVyLCB1dWlkOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdC8vIFNlbmQgZGF0YSB0byB0aGUgdGhpcmQgcGFydHlcclxuXHRcdGNvbnNvbGUubG9nKFwiQXR0ZW1wdGluZyB0byBzZW5kIHNjb3JlIHRvIGEgdGhpcmQgcGFydHkhIFNjb3JlOiBcIiwgc2NvcmUpO1xyXG5cclxuXHRcdC8vIFJlYWQgdGhlIFVSTCBmcm9tIHV0bSBwYXJhbWV0ZXJzXHJcblx0XHRjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG5cdFx0Y29uc3QgdGFyZ2V0UGFydHlVUkwgPSB1cmxQYXJhbXMuZ2V0KCdlbmRwb2ludCcpO1xyXG5cdFx0Y29uc3Qgb3JnYW5pemF0aW9uID0gdXJsUGFyYW1zLmdldCgnb3JnYW5pemF0aW9uJyk7XHJcbiAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG5cdFx0aWYgKCF0YXJnZXRQYXJ0eVVSTCkge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiTm8gdGFyZ2V0IHBhcnR5IFVSTCBmb3VuZCFcIik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAgICAgICAgIFwidXNlclwiOiB1dWlkLFxyXG4gICAgICAgICAgXCJwYWdlXCI6IFwiMTExMTA4MTIxMzYzNjE1XCIsIFxyXG4gICAgICAgICAgXCJldmVudFwiOiB7IFxyXG4gICAgICAgICAgICBcInR5cGVcIjogXCJleHRlcm5hbFwiLCBcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB7ICBcclxuICAgICAgICAgICAgICBcInR5cGVcIjogXCJhc3Nlc3NtZW50XCIsXHJcblx0XHRcdCAgXCJzdWJUeXBlXCI6IEFuYWx5dGljc0V2ZW50cy5hc3Nlc3NtZW50VHlwZSxcclxuICAgICAgICAgICAgICBcInNjb3JlXCI6IHNjb3JlLFxyXG4gICAgICAgICAgICAgIFwiY29tcGxldGVkXCI6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHBheWxvYWRTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHR4aHIub3BlbihcIlBPU1RcIiwgdGFyZ2V0UGFydHlVUkwsIHRydWUpO1xyXG5cdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuXHRcclxuXHRcdFx0eGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkge1xyXG5cdFx0XHRcdFx0Ly8gUmVxdWVzdCB3YXMgc3VjY2Vzc2Z1bCwgaGFuZGxlIHRoZSByZXNwb25zZSBoZXJlXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBPU1Qgc3VjY2VzcyFcIiArIHhoci5yZXNwb25zZVRleHQpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBSZXF1ZXN0IGZhaWxlZFxyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICcgKyB4aHIuc3RhdHVzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHJcblx0XHRcdHhoci5zZW5kKHBheWxvYWRTdHJpbmcpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIGRhdGEgdG8gdGFyZ2V0IHBhcnR5OiBcIiwgZXJyb3IpO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdC8vIENhbGN1bGF0ZSBTY29yZVxyXG5cdHN0YXRpYyBjYWxjdWxhdGVTY29yZShidWNrZXRzOiBidWNrZXRbXSwgYmFzYWxCdWNrZXRJRDogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ2FsY3VsYXRpbmcgc2NvcmVcIik7XHJcblx0XHRjb25zb2xlLmxvZyhidWNrZXRzKTtcclxuXHRcdFxyXG5cdFx0bGV0IHNjb3JlID0gMDtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIkJhc2FsIEJ1Y2tldCBJRDogXCIgKyBiYXNhbEJ1Y2tldElEKTtcclxuXHJcblx0XHQvLyBHZXQgdGhlIG51bWNvcnJlY3QgZnJvbSB0aGUgYmFzYWwgYnVja2V0IGJhc2VkIG9uIGxvb3BpbmcgdGhyb3VnaCBhbmQgZmluZGluZyB0aGUgYnVja2V0IGlkXHJcblx0XHRsZXQgbnVtQ29ycmVjdCA9IDA7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBpbmRleCBpbiBidWNrZXRzKSB7XHJcblx0XHRcdGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNbaW5kZXhdO1xyXG5cdFx0XHRpZiAoYnVja2V0LmJ1Y2tldElEID09IGJhc2FsQnVja2V0SUQpIHtcclxuXHRcdFx0XHRudW1Db3JyZWN0ID0gYnVja2V0Lm51bUNvcnJlY3Q7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIk51bSBDb3JyZWN0OiBcIiArIG51bUNvcnJlY3QsIFwiIGJhc2FsOiBcIiArIGJhc2FsQnVja2V0SUQsIFwiIGJ1Y2tldHM6IFwiICsgYnVja2V0cy5sZW5ndGgpO1xyXG5cdFx0XHJcblx0XHRpZiAoYmFzYWxCdWNrZXRJRCA9PT0gYnVja2V0cy5sZW5ndGggJiYgbnVtQ29ycmVjdCA+PSA0KSB7XHJcblx0XHRcdC8vIElmIHRoZSB1c2VyIGhhcyBlbm91Z2ggY29ycmVjdCBhbnN3ZXJzIGluIHRoZSBsYXN0IGJ1Y2tldCwgZ2l2ZSB0aGVtIGEgcGVyZmVjdCBzY29yZVxyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlBlcmZlY3Qgc2NvcmVcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gYnVja2V0cy5sZW5ndGggKiAxMDA7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHNjb3JlID0gTWF0aC5yb3VuZCgoKGJhc2FsQnVja2V0SUQgLSAxKSAqIDEwMCkgKyAobnVtQ29ycmVjdCAvIDUpICogMTAwKSB8IDA7XHJcblxyXG5cdFx0cmV0dXJuIHNjb3JlO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IEJhc2FsIEJ1Y2tldCBJRFxyXG5cdHN0YXRpYyBnZXRCYXNhbEJ1Y2tldElEKGJ1Y2tldHM6IGJ1Y2tldFtdKTogbnVtYmVyIHtcclxuXHRcdGxldCBidWNrZXRJRCA9IDA7XHJcblx0XHRcclxuXHRcdC8vIFNlbGVjdCB0aGUgbG93ZXN0IGJ1Y2tldElEIGJ1Y2tldCB0aGF0IHRoZSB1c2VyIGhhcyBmYWlsZWRcclxuXHRcdGZvciAoY29uc3QgaW5kZXggaW4gYnVja2V0cykge1xyXG5cdFx0XHRjb25zdCBidWNrZXQgPSBidWNrZXRzW2luZGV4XTtcclxuXHRcdFx0aWYgKGJ1Y2tldC50ZXN0ZWQgJiYgIWJ1Y2tldC5wYXNzZWQpIHtcclxuXHRcdFx0XHRpZiAoYnVja2V0SUQgPT0gMCB8fCBidWNrZXQuYnVja2V0SUQgPCBidWNrZXRJRCkge1xyXG5cdFx0XHRcdFx0YnVja2V0SUQgPSBidWNrZXQuYnVja2V0SUQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGJ1Y2tldElEO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IENlaWxpbmcgQnVja2V0IElEXHJcblx0c3RhdGljIGdldENlaWxpbmdCdWNrZXRJRChidWNrZXRzOiBidWNrZXRbXSk6IG51bWJlciB7XHJcblx0XHRsZXQgYnVja2V0SUQgPSAwO1xyXG5cdFx0XHJcblx0XHQvLyBTZWxlY3QgdGhlIGhpdWdoZXN0IGJ1Y2tldElEIGJ1Y2tldCB0aGF0IHRoZSB1c2VyIGhhcyBwYXNzZWRcclxuXHRcdGZvciAoY29uc3QgaW5kZXggaW4gYnVja2V0cykge1xyXG5cdFx0XHRjb25zdCBidWNrZXQgPSBidWNrZXRzW2luZGV4XTtcclxuXHRcdFx0aWYgKGJ1Y2tldC50ZXN0ZWQgJiYgYnVja2V0LnBhc3NlZCkge1xyXG5cdFx0XHRcdGlmIChidWNrZXRJRCA9PSAwIHx8IGJ1Y2tldC5idWNrZXRJRCA+IGJ1Y2tldElEKSB7XHJcblx0XHRcdFx0XHRidWNrZXRJRCA9IGJ1Y2tldC5idWNrZXRJRDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYnVja2V0SUQ7XHJcblx0fVxyXG5cclxuXHQvLyBKb2luIExhdCBMb25nXHJcblx0c3RhdGljIGpvaW5MYXRMb25nKGxhdDogc3RyaW5nLCBsb246IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gbGF0ICsgXCIsXCIgKyBsb247XHJcblx0fVxyXG59IiwiaW1wb3J0IHsgQXBwIH0gZnJvbSAnLi9BcHAnO1xyXG5pbXBvcnQgeyBBbmFseXRpY3NFdmVudHMgfSBmcm9tICcuL2NvbXBvbmVudHMvYW5hbHl0aWNzRXZlbnRzJztcclxuaW1wb3J0IHsgVUlDb250cm9sbGVyIH0gZnJvbSAnLi9jb21wb25lbnRzL3VpQ29udHJvbGxlcic7XHJcbmltcG9ydCB7IFVuaXR5QnJpZGdlIH0gZnJvbSAnLi9jb21wb25lbnRzL3VuaXR5QnJpZGdlJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUXVpeiB7XHJcblx0cHJvdGVjdGVkIGFwcDogQXBwO1xyXG5cdHB1YmxpYyBkYXRhVVJMOiBzdHJpbmc7XHJcblx0cHVibGljIHVuaXR5QnJpZGdlOiBVbml0eUJyaWRnZTtcclxuXHRcclxuXHRwdWJsaWMgZGV2TW9kZUF2YWlsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHB1YmxpYyBpc0luRGV2TW9kZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHRwdWJsaWMgZGV2TW9kZVRvZ2dsZUJ1dHRvbkNvbnRhaW5lcklkOiBzdHJpbmcgPSBcImRldk1vZGVNb2RhbFRvZ2dsZUJ1dHRvbkNvbnRhaW5lclwiO1xyXG5cdHB1YmxpYyBkZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHVibGljIGRldk1vZGVUb2dnbGVCdXR0b25JZDogc3RyaW5nID0gXCJkZXZNb2RlTW9kYWxUb2dnbGVCdXR0b25cIjtcclxuXHRwdWJsaWMgZGV2TW9kZVRvZ2dsZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdHB1YmxpYyBkZXZNb2RlTW9kYWxJZDogc3RyaW5nID0gXCJkZXZNb2RlU2V0dGluZ3NNb2RhbFwiO1xyXG5cdHB1YmxpYyBkZXZNb2RlU2V0dGluZ3NNb2RhbDogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHB1YmxpYyBkZXZNb2RlQnVja2V0R2VuU2VsZWN0SWQ6IHN0cmluZyA9IFwiZGV2TW9kZUJ1Y2tldEdlblNlbGVjdFwiO1xyXG5cdHB1YmxpYyBkZXZNb2RlQnVja2V0R2VuU2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLmlzSW5EZXZNb2RlID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCJsb2NhbGhvc3RcIikgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCIxMjcuMC4wLjFcIikgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCJhc3Nlc3NtZW50ZGV2XCIpO1xyXG5cdFx0dGhpcy5kZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5kZXZNb2RlU2V0dGluZ3NNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGV2TW9kZU1vZGFsSWQpO1xyXG5cclxuXHRcdHRoaXMuZGV2TW9kZUJ1Y2tldEdlblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGV2TW9kZUJ1Y2tldEdlblNlbGVjdElkKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuXHRcdHRoaXMuZGV2TW9kZUJ1Y2tldEdlblNlbGVjdC5vbmNoYW5nZSA9IChldmVudCkgPT4geyB0aGlzLmhhbmRsZUJ1Y2tldEdlbk1vZGVDaGFuZ2UoZXZlbnQpIH07XHJcblx0XHRcclxuXHRcdHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbklkKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHRcdHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbi5vbmNsaWNrID0gdGhpcy50b2dnbGVEZXZNb2RlTW9kYWw7XHJcblxyXG5cdFx0aWYgKCF0aGlzLmlzSW5EZXZNb2RlKSB7XHJcblx0XHRcdHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmRldk1vZGVUb2dnbGVCdXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBoaWRlRGV2TW9kZUJ1dHRvbigpIHtcclxuXHRcdHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYWJzdHJhY3QgaGFuZGxlQnVja2V0R2VuTW9kZUNoYW5nZShldmVudDogRXZlbnQpOiB2b2lkO1xyXG5cclxuXHRwdWJsaWMgdG9nZ2xlRGV2TW9kZU1vZGFsID0gKCkgPT4ge1xyXG5cdFx0aWYgKHRoaXMuZGV2TW9kZVNldHRpbmdzTW9kYWwuc3R5bGUuZGlzcGxheSA9PSBcImJsb2NrXCIpIHtcclxuXHRcdFx0dGhpcy5kZXZNb2RlU2V0dGluZ3NNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmRldk1vZGVTZXR0aW5nc01vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYWJzdHJhY3QgUnVuKGFwcGxpbms6IEFwcCk6IHZvaWQ7XHJcblx0cHVibGljIGFic3RyYWN0IFRyeUFuc3dlcihhbnM6IG51bWJlciwgZWxhcHNlZDogbnVtYmVyKTogdm9pZDtcclxuXHRwdWJsaWMgYWJzdHJhY3QgSGFzUXVlc3Rpb25zTGVmdCgpOiBib29sZWFuO1xyXG5cclxuXHRwdWJsaWMgb25FbmQoKTogdm9pZCB7XHJcblx0XHQvLyBzZW5kRmluaXNoZWQoKTtcclxuXHRcdFVJQ29udHJvbGxlci5TaG93RW5kKCk7XHJcblx0XHR0aGlzLmFwcC51bml0eUJyaWRnZS5TZW5kQ2xvc2UoKTtcclxuXHR9XHJcbn1cclxuIiwiLy90aGlzIGlzIHdoZXJlIHRoZSBjb2RlIHdpbGwgZ28gZm9yIGxpbmVhcmx5IGl0ZXJhdGluZyB0aHJvdWdoIHRoZVxyXG4vL3F1ZXN0aW9ucyBpbiBhIGRhdGEuanNvbiBmaWxlIHRoYXQgaWRlbnRpZmllcyBpdHNlbGYgYXMgYSBzdXJ2ZXlcclxuXHJcbmltcG9ydCB7IFVJQ29udHJvbGxlciB9IGZyb20gJy4uL2NvbXBvbmVudHMvdWlDb250cm9sbGVyJztcclxuaW1wb3J0IHsgQXVkaW9Db250cm9sbGVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9hdWRpb0NvbnRyb2xsZXInO1xyXG5pbXBvcnQgeyBxRGF0YSwgYW5zd2VyRGF0YSB9IGZyb20gJy4uL2NvbXBvbmVudHMvcXVlc3Rpb25EYXRhJztcclxuaW1wb3J0IHsgQW5hbHl0aWNzRXZlbnRzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9hbmFseXRpY3NFdmVudHMnXHJcbmltcG9ydCB7IEFwcCB9IGZyb20gJy4uL0FwcCc7XHJcbmltcG9ydCB7IEJhc2VRdWl6IH0gZnJvbSAnLi4vQmFzZVF1aXonO1xyXG5pbXBvcnQgeyBmZXRjaFN1cnZleVF1ZXN0aW9ucyB9IGZyb20gJy4uL2NvbXBvbmVudHMvanNvblV0aWxzJztcclxuaW1wb3J0IHsgVW5pdHlCcmlkZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL3VuaXR5QnJpZGdlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTdXJ2ZXkgZXh0ZW5kcyBCYXNlUXVpeiB7XHJcblxyXG5cdHB1YmxpYyBxdWVzdGlvbnNEYXRhOiBxRGF0YVtdO1xyXG5cdHB1YmxpYyBjdXJyZW50UXVlc3Rpb25JbmRleDogbnVtYmVyO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihkYXRhVVJMOiBzdHJpbmcsIHVuaXR5QnJpZGdlKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJTdXJ2ZXkgaW5pdGlhbGl6ZWRcIik7XHJcblxyXG5cdFx0dGhpcy5kYXRhVVJMID0gZGF0YVVSTDtcclxuXHRcdHRoaXMudW5pdHlCcmlkZ2UgPSB1bml0eUJyaWRnZTtcclxuXHRcdHRoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXggPSAwO1xyXG5cdFx0VUlDb250cm9sbGVyLlNldEJ1dHRvblByZXNzQWN0aW9uKHRoaXMuVHJ5QW5zd2VyKTtcclxuXHRcdFVJQ29udHJvbGxlci5TZXRTdGFydEFjdGlvbih0aGlzLnN0YXJ0U3VydmV5KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBoYW5kbGVCdWNrZXRHZW5Nb2RlQ2hhbmdlID0gKCkgPT4ge1xyXG5cdFx0Y29uc29sZS5sb2coXCJCdWNrZXQgR2VuIE1vZGUgQ2hhbmdlZFwiKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhc3luYyBSdW4oYXBwOiBBcHApIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5idWlsZFF1ZXN0aW9uTGlzdCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuXHRcdFx0dGhpcy5xdWVzdGlvbnNEYXRhID0gcmVzdWx0O1xyXG5cdFx0XHRBdWRpb0NvbnRyb2xsZXIuUHJlcGFyZUF1ZGlvQW5kSW1hZ2VzRm9yU3VydmV5KHRoaXMucXVlc3Rpb25zRGF0YSwgdGhpcy5hcHAuR2V0RGF0YVVSTCgpKTtcclxuXHRcdFx0dGhpcy51bml0eUJyaWRnZS5TZW5kTG9hZGVkKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGFydFN1cnZleSA9ICgpID0+e1xyXG5cdFx0VUlDb250cm9sbGVyLlJlYWR5Rm9yTmV4dCh0aGlzLmdldE5leHRRdWVzdGlvbigpKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBvblF1ZXN0aW9uRW5kID0gKCkgPT4ge1xyXG5cdFx0VUlDb250cm9sbGVyLlNldEZlZWRiYWNrVmlzaWJpbGUoZmFsc2UpO1xyXG5cclxuXHRcdHRoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXggKz0gMTtcclxuXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuSGFzUXVlc3Rpb25zTGVmdCgpKSB7XHJcblx0XHRcdFx0VUlDb250cm9sbGVyLlJlYWR5Rm9yTmV4dCh0aGlzLmdldE5leHRRdWVzdGlvbigpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlRoZXJlIGFyZSBubyBxdWVzdGlvbnMgbGVmdC5cIik7XHJcblx0XHRcdFx0dGhpcy5vbkVuZCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCA1MDApO1xyXG5cdH1cclxuXHJcblx0cHVibGljIFRyeUFuc3dlciA9IChhbnN3ZXI6IG51bWJlciwgZWxhcHNlZDogbnVtYmVyKSA9PiB7XHJcblx0XHRBbmFseXRpY3NFdmVudHMuc2VuZEFuc3dlcmVkKHRoaXMucXVlc3Rpb25zRGF0YVt0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4XSwgYW5zd2VyLCBlbGFwc2VkKVxyXG5cdFx0VUlDb250cm9sbGVyLlNldEZlZWRiYWNrVmlzaWJpbGUodHJ1ZSk7XHJcblx0XHRVSUNvbnRyb2xsZXIuQWRkU3RhcigpO1xyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7IHRoaXMub25RdWVzdGlvbkVuZCgpIH0sIDIwMDApO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGJ1aWxkUXVlc3Rpb25MaXN0ID0gKCkgPT4ge1xyXG5cdFx0Y29uc3Qgc3VydmV5UXVlc3Rpb25zID0gZmV0Y2hTdXJ2ZXlRdWVzdGlvbnModGhpcy5hcHAuZGF0YVVSTCk7XHJcblx0XHRyZXR1cm4gc3VydmV5UXVlc3Rpb25zO1xyXG5cdH1cclxuXHJcblx0cHVibGljIEhhc1F1ZXN0aW9uc0xlZnQoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleCA8PSAodGhpcy5xdWVzdGlvbnNEYXRhLmxlbmd0aCAtIDEpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGdldE5leHRRdWVzdGlvbigpOiBxRGF0YSB7XHJcblx0XHR2YXIgcXVlc3Rpb25EYXRhID0gdGhpcy5xdWVzdGlvbnNEYXRhW3RoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXhdO1xyXG5cdFx0cmV0dXJuIHF1ZXN0aW9uRGF0YTtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgYnVja2V0IH0gZnJvbSBcIi4uL2Fzc2Vzc21lbnQvYnVja2V0RGF0YVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRyZWVOb2RlIHtcclxuICAgIHZhbHVlOiBudW1iZXIgfCBidWNrZXQ7XHJcbiAgICBsZWZ0OiBUcmVlTm9kZSB8IG51bGw7XHJcbiAgICByaWdodDogVHJlZU5vZGUgfCBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5sZWZ0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqIEdlbmVyYXRlcyBhIHJhbmRvbSBiaW5hcnkgc2VhcmNoIHRyZWUgZnJvbSBhXHJcbiAtIElmIHRoZSBzdGFydCBhbmQgZW5kIGluZGljZXMgYXJlIHRoZSBzYW1lLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBudWxsXHJcbiAtIElmIHRoZSBtaWRkbGUgaW5kZXggaXMgZXZlbiwgdGhlIGZ1bmN0aW9uIHVzZXMgdGhlIGV4YWN0IG1pZGRsZSBwb2ludFxyXG4gLSBPdGhlcndpc2UsIHRoZSBmdW5jdGlvbiByYW5kb21seSBhZGRzIDAgb3IgMSB0byB0aGUgbWlkZGxlIGluZGV4XHJcbiAtIFJldHVybnMgdGhlIHJvb3Qgbm9kZSBvZiB0aGUgZ2VuZXJhdGVkIGJpbmFyeSBzZWFyY2ggdHJlZSB3aGljaCBjb250YWlucyB0aGUgYnVja2V0SWRzIGlmIGNhbGxlZCBwcm9wZXJseVxyXG4gLSBleDogbGV0IHJvb3RPZklkcyA9IHNvcnRlZEFycmF5VG9CU1QodGhpcy5idWNrZXRzLCB0aGlzLmJ1Y2tldHNbMF0uYnVja2V0SUQgLSAxLCB0aGlzLmJ1Y2tldHNbdGhpcy5idWNrZXRzLmxlbmd0aCAtIDFdLmJ1Y2tldElELCB1c2VkSW5kaWNlcyk7XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc29ydGVkQXJyYXlUb0lEc0JTVChzdGFydCwgZW5kLCB1c2VkSW5kaWNlcykge1xyXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAvLyBSYW5kb21pemUgbWlkZGxlIHBvaW50IHdpdGhpbiB1bnVzZWQgaW5kaWNlc1xyXG4gICAgbGV0IG1pZDtcclxuXHJcbiAgICBpZiAoKHN0YXJ0ICsgZW5kKSAlIDIgPT09IDAgJiYgdXNlZEluZGljZXMuc2l6ZSAhPT0gMSkge1xyXG4gICAgICAgIG1pZCA9IE1hdGguZmxvb3IoKHN0YXJ0ICsgZW5kKSAvIDIpOyAvLyBVc2UgdGhlIGV4YWN0IG1pZGRsZSBwb2ludFxyXG4gICAgICAgIGlmIChtaWQgPT09IDApIHJldHVybiBudWxsO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIG1pZCA9IE1hdGguZmxvb3IoKHN0YXJ0ICsgZW5kKSAvIDIpO1xyXG4gICAgICAgICAgICBtaWQgKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMik7IC8vIFJhbmRvbWx5IGFkZCAwIG9yIDEgdG8gbWlkXHJcbiAgICAgICAgfSB3aGlsZSAobWlkID4gZW5kIHx8IHVzZWRJbmRpY2VzLmhhcyhtaWQpKTtcclxuICAgIH1cclxuXHJcbiAgICB1c2VkSW5kaWNlcy5hZGQobWlkKTtcclxuICAgIFxyXG4gICAgbGV0IG5vZGUgPSBuZXcgVHJlZU5vZGUobWlkKTtcclxuXHJcbiAgICBub2RlLmxlZnQgPSBzb3J0ZWRBcnJheVRvSURzQlNUKHN0YXJ0LCBtaWQgLSAxLCB1c2VkSW5kaWNlcyk7XHJcbiAgICBub2RlLnJpZ2h0ID0gc29ydGVkQXJyYXlUb0lEc0JTVChtaWQgKyAxLCBlbmQsIHVzZWRJbmRpY2VzKTtcclxuXHJcbiAgICByZXR1cm4gbm9kZTtcclxufVxyXG4iLCIvL3RoaXMgaXMgd2hlcmUgdGhlIGxvZ2ljIGZvciBoYW5kbGluZyB0aGUgYnVja2V0cyB3aWxsIGdvXHJcbi8vXHJcbi8vb25jZSB3ZSBzdGFydCBhZGRpbmcgaW4gdGhlIGFzc2Vzc21lbnQgZnVuY3Rpb25hbGl0eVxyXG5pbXBvcnQgeyBVSUNvbnRyb2xsZXIgfSBmcm9tICcuLi9jb21wb25lbnRzL3VpQ29udHJvbGxlcic7XHJcbmltcG9ydCB7IHFEYXRhLCBhbnN3ZXJEYXRhIH0gZnJvbSAnLi4vY29tcG9uZW50cy9xdWVzdGlvbkRhdGEnO1xyXG5pbXBvcnQgeyBBbmFseXRpY3NFdmVudHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2FuYWx5dGljc0V2ZW50cydcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnLi4vQXBwJztcclxuaW1wb3J0IHsgYnVja2V0LCBidWNrZXRJdGVtIH0gZnJvbSAnLi9idWNrZXREYXRhJztcclxuaW1wb3J0IHsgQmFzZVF1aXogfSBmcm9tICcuLi9CYXNlUXVpeic7XHJcbmltcG9ydCB7IGZldGNoQXNzZXNzbWVudEJ1Y2tldHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2pzb25VdGlscyc7XHJcbmltcG9ydCB7IFRyZWVOb2RlLCBzb3J0ZWRBcnJheVRvSURzQlNUIH0gZnJvbSAnLi4vY29tcG9uZW50cy90Tm9kZSc7XHJcbmltcG9ydCB7IHJhbmRGcm9tLCBzaHVmZmxlQXJyYXkgfSBmcm9tICcuLi9jb21wb25lbnRzL21hdGhVdGlscyc7XHJcbmltcG9ydCB7IEF1ZGlvQ29udHJvbGxlciB9IGZyb20gJy4uL2NvbXBvbmVudHMvYXVkaW9Db250cm9sbGVyJztcclxuXHJcbmVudW0gc2VhcmNoU3RhZ2Uge1xyXG5cdEJpbmFyeVNlYXJjaCxcclxuXHRMaW5lYXJTZWFyY2hVcCxcclxuXHRMaW5lYXJTZWFyY2hEb3duXHJcbn1cclxuXHJcbmVudW0gQnVja2V0R2VuTW9kZSB7XHJcblx0UmFuZG9tQlNULFxyXG5cdExpbmVhckFycmF5QmFzZWQsXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBc3Nlc3NtZW50IGV4dGVuZHMgQmFzZVF1aXoge1xyXG5cclxuXHRwdWJsaWMgdW5pdHlCcmlkZ2U7XHJcblxyXG5cdHB1YmxpYyBjdXJyZW50Tm9kZTogVHJlZU5vZGU7XHJcblx0cHVibGljIGN1cnJlbnRRdWVzdGlvbjogcURhdGE7XHJcblx0cHVibGljIGJ1Y2tldEFycmF5OiBudW1iZXJbXTtcclxuXHRwdWJsaWMgcXVlc3Rpb25OdW1iZXI6IG51bWJlcjtcclxuXHRcclxuXHRwdWJsaWMgYnVja2V0czogYnVja2V0W107XHJcblx0cHVibGljIGN1cnJlbnRCdWNrZXQ6IGJ1Y2tldDtcclxuXHRwdWJsaWMgbnVtQnVja2V0czogbnVtYmVyO1xyXG5cdHB1YmxpYyBiYXNhbEJ1Y2tldDogbnVtYmVyO1xyXG5cdHB1YmxpYyBjZWlsaW5nQnVja2V0OiBudW1iZXI7XHJcblxyXG5cdHB1YmxpYyBjdXJyZW50TGluZWFyQnVja2V0SW5kZXg6IG51bWJlcjtcclxuXHJcblx0cHJvdGVjdGVkIGJ1Y2tldEdlbk1vZGU6IEJ1Y2tldEdlbk1vZGUgPSBCdWNrZXRHZW5Nb2RlLlJhbmRvbUJTVDtcclxuXHJcblx0cHJpdmF0ZSBNQVhfU1RBUlNfQ09VTlRfSU5fTElORUFSX01PREUgPSAyMDtcclxuXHJcblx0Y29uc3RydWN0b3IoZGF0YVVSTDogc3RyaW5nLCB1bml0eUJyaWRnZTogYW55KSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0dGhpcy5kYXRhVVJMID0gZGF0YVVSTDtcclxuXHRcdHRoaXMudW5pdHlCcmlkZ2UgPSB1bml0eUJyaWRnZTtcclxuXHRcdHRoaXMucXVlc3Rpb25OdW1iZXIgPSAwO1xyXG5cdFx0Y29uc29sZS5sb2coXCJhcHAgaW5pdGlhbGl6ZWRcIik7XHJcblx0XHRVSUNvbnRyb2xsZXIuU2V0QnV0dG9uUHJlc3NBY3Rpb24odGhpcy5UcnlBbnN3ZXIpO1xyXG5cdFx0VUlDb250cm9sbGVyLlNldFN0YXJ0QWN0aW9uKHRoaXMuc3RhcnRBc3Nlc3NtZW50KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBSdW4oYXBwbGluazogQXBwKTogdm9pZCB7XHJcblx0XHR0aGlzLmFwcCA9IGFwcGxpbms7XHJcblx0XHR0aGlzLmJ1aWxkQnVja2V0cyh0aGlzLmJ1Y2tldEdlbk1vZGUpLnRoZW4ocmVzdWx0ID0+IHtcclxuXHRcdFx0Y29uc29sZS5sb2codGhpcy5jdXJyZW50QnVja2V0KTtcclxuXHRcdFx0dGhpcy51bml0eUJyaWRnZS5TZW5kTG9hZGVkKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBoYW5kbGVCdWNrZXRHZW5Nb2RlQ2hhbmdlKGV2ZW50OiBFdmVudCk6IHZvaWQge1xyXG5cdFx0Ly8gVE9ETzogSW1wbGVtZW50IGhhbmRsZUJ1Y2tldEdlbk1vZGVDaGFuZ2VcclxuXHRcdHRoaXMuYnVja2V0R2VuTW9kZSA9IHBhcnNlSW50KHRoaXMuZGV2TW9kZUJ1Y2tldEdlblNlbGVjdC52YWx1ZSkgYXMgQnVja2V0R2VuTW9kZTtcclxuXHRcdHRoaXMuYnVpbGRCdWNrZXRzKHRoaXMuYnVja2V0R2VuTW9kZSkudGhlbigoKSA9PiB7XHJcblx0XHRcdC8vIEZpbmlzaGVkIGJ1aWxkaW5nIGJ1Y2tldHNcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXJ0QXNzZXNzbWVudCA9ICgpID0+IHtcclxuXHRcdFVJQ29udHJvbGxlci5SZWFkeUZvck5leHQodGhpcy5nZXROZXh0UXVlc3Rpb24oKSk7XHJcblx0XHRpZiAodGhpcy5pc0luRGV2TW9kZSkge1xyXG5cdFx0XHR0aGlzLmhpZGVEZXZNb2RlQnV0dG9uKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYnVpbGRCdWNrZXRzID0gYXN5bmMgKGJ1Y2tldEdlbk1vZGU6IEJ1Y2tldEdlbk1vZGUpID0+IHtcclxuXHRcdC8vIElmIHdlIGRvbid0IGhhdmUgdGhlIGJ1Y2tldHMgbG9hZGVkLCBsb2FkIHRoZW0gYW5kIGluaXRpYWxpemUgdGhlIGN1cnJlbnQgbm9kZSwgd2hpY2ggaXMgdGhlIHN0YXJ0aW5nIHBvaW50XHJcblx0XHRpZiAodGhpcy5idWNrZXRzID09PSB1bmRlZmluZWQgfHwgdGhpcy5idWNrZXRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHR2YXIgcmVzID0gZmV0Y2hBc3Nlc3NtZW50QnVja2V0cyh0aGlzLmFwcC5HZXREYXRhVVJMKCkpLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuYnVja2V0cyA9IHJlc3VsdDtcclxuXHRcdFx0XHR0aGlzLm51bUJ1Y2tldHMgPSByZXN1bHQubGVuZ3RoO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiYnVja2V0czogXCIgKyB0aGlzLmJ1Y2tldHMpO1xyXG5cdFx0XHRcdHRoaXMuYnVja2V0QXJyYXkgPSBBcnJheS5mcm9tKEFycmF5KHRoaXMubnVtQnVja2V0cyksIChfLCBpKSA9PiBpKzEpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiZW1wdHkgYXJyYXkgXCIgKyAgdGhpcy5idWNrZXRBcnJheSk7XHJcblx0XHRcdFx0bGV0IHVzZWRJbmRpY2VzID0gbmV3IFNldDxudW1iZXI+KCk7XHJcblx0XHRcdFx0dXNlZEluZGljZXMuYWRkKDApO1xyXG5cdFx0XHRcdGxldCByb290T2ZJRHMgPSBzb3J0ZWRBcnJheVRvSURzQlNUKHRoaXMuYnVja2V0c1swXS5idWNrZXRJRCAtIDEsIHRoaXMuYnVja2V0c1t0aGlzLmJ1Y2tldHMubGVuZ3RoIC0gMV0uYnVja2V0SUQsIHVzZWRJbmRpY2VzKTtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIkdlbmVyYXRlZCB0aGUgYnVja2V0cyByb290IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2cocm9vdE9mSURzKTtcclxuXHRcdFx0XHRsZXQgYnVja2V0c1Jvb3QgPSB0aGlzLmNvbnZlcnRUb0J1Y2tldEJTVChyb290T2ZJRHMsIHRoaXMuYnVja2V0cyk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJHZW5lcmF0ZWQgdGhlIGJ1Y2tldHMgcm9vdCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGJ1Y2tldHNSb290KTtcclxuXHRcdFx0XHR0aGlzLmJhc2FsQnVja2V0ID0gdGhpcy5udW1CdWNrZXRzICsgMTtcclxuXHRcdFx0XHR0aGlzLmNlaWxpbmdCdWNrZXQgPSAtMTtcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnROb2RlID0gYnVja2V0c1Jvb3Q7XHJcblx0XHRcdFx0dGhpcy50cnlNb3ZlQnVja2V0KGZhbHNlKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybiByZXM7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAoYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcclxuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIHRoZSBidWNrZXRzIGxvYWRlZCwgd2UgY2FuIGluaXRpYWxpemUgdGhlIGN1cnJlbnQgbm9kZSwgd2hpY2ggaXMgdGhlIHN0YXJ0aW5nIHBvaW50XHJcblx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0XHRcdGxldCB1c2VkSW5kaWNlcyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xyXG5cdFx0XHRcdFx0dXNlZEluZGljZXMuYWRkKDApO1xyXG5cdFx0XHRcdFx0bGV0IHJvb3RPZklEcyA9IHNvcnRlZEFycmF5VG9JRHNCU1QodGhpcy5idWNrZXRzWzBdLmJ1Y2tldElEIC0gMSwgdGhpcy5idWNrZXRzW3RoaXMuYnVja2V0cy5sZW5ndGggLSAxXS5idWNrZXRJRCwgdXNlZEluZGljZXMpO1xyXG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCJHZW5lcmF0ZWQgdGhlIGJ1Y2tldHMgcm9vdCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xyXG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2cocm9vdE9mSURzKTtcclxuXHRcdFx0XHRcdGxldCBidWNrZXRzUm9vdCA9IHRoaXMuY29udmVydFRvQnVja2V0QlNUKHJvb3RPZklEcywgdGhpcy5idWNrZXRzKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiR2VuZXJhdGVkIHRoZSBidWNrZXRzIHJvb3QgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGJ1Y2tldHNSb290KTtcclxuXHRcdFx0XHRcdHRoaXMuYmFzYWxCdWNrZXQgPSB0aGlzLm51bUJ1Y2tldHMgKyAxO1xyXG5cdFx0XHRcdFx0dGhpcy5jZWlsaW5nQnVja2V0ID0gLTE7XHJcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnROb2RlID0gYnVja2V0c1Jvb3Q7XHJcblx0XHRcdFx0XHR0aGlzLnRyeU1vdmVCdWNrZXQoZmFsc2UpO1xyXG5cdFx0XHRcdFx0cmVzb2x2ZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuTGluZWFyQXJyYXlCYXNlZCkge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRMaW5lYXJCdWNrZXRJbmRleCA9IDA7XHJcblx0XHRcdFx0XHR0aGlzLnRyeU1vdmVCdWNrZXQoZmFsc2UpO1xyXG5cdFx0XHRcdFx0cmVzb2x2ZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb252ZXJ0cyBhIGJpbmFyeSBzZWFyY2ggdHJlZSBvZiBudW1iZXJzIHRvIGEgYmluYXJ5IHNlYXJjaCB0cmVlIG9mIGJ1Y2tldCBvYmplY3RzXHJcblx0ICogQHBhcmFtIG5vZGUgSXMgYSByb290IG5vZGUgb2YgYSBiaW5hcnkgc2VhcmNoIHRyZWVcclxuXHQgKiBAcGFyYW0gYnVja2V0cyBJcyBhbiBhcnJheSBvZiBidWNrZXQgb2JqZWN0c1xyXG5cdCAqIEByZXR1cm5zIEEgcm9vdCBub2RlIG9mIGEgYmluYXJ5IHNlYXJjaCB0cmVlIHdoZXJlIHRoZSB2YWx1ZSBvZiBlYWNoIG5vZGUgaXMgYSBidWNrZXQgb2JqZWN0XHJcblx0ICovXHJcblx0cHVibGljIGNvbnZlcnRUb0J1Y2tldEJTVCA9IChub2RlOiBUcmVlTm9kZSwgYnVja2V0czogYnVja2V0W10pID0+IHtcclxuXHRcdC8vIFRyYXZlcnNlIGVhY2ggZWxlbWVudCB0YWtlIHRoZSB2YWx1ZSBhbmQgZmluZCB0aGF0IGJ1Y2tldCBpbiB0aGUgYnVja2V0cyBhcnJheSBhbmQgYXNzaWduIHRoYXQgYnVja2V0IGluc3RlYWQgb2YgdGhlIG51bWJlciB2YWx1ZVxyXG5cdFx0aWYgKG5vZGUgPT09IG51bGwpIHJldHVybiBub2RlO1xyXG5cclxuXHRcdGxldCBidWNrZXRJZCA9IG5vZGUudmFsdWU7XHJcblx0XHRub2RlLnZhbHVlID0gYnVja2V0cy5maW5kKGJ1Y2tldCA9PiBidWNrZXQuYnVja2V0SUQgPT09IGJ1Y2tldElkKTtcclxuXHRcdGlmIChub2RlLmxlZnQgIT09IG51bGwpIG5vZGUubGVmdCA9IHRoaXMuY29udmVydFRvQnVja2V0QlNUKG5vZGUubGVmdCwgYnVja2V0cyk7XHJcblx0XHRpZiAobm9kZS5yaWdodCAhPT0gbnVsbCkgbm9kZS5yaWdodCA9IHRoaXMuY29udmVydFRvQnVja2V0QlNUKG5vZGUucmlnaHQsIGJ1Y2tldHMpO1xyXG5cclxuXHRcdHJldHVybiBub2RlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGluaXRCdWNrZXQgPSAoYnVja2V0OiBidWNrZXQpID0+IHtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldCA9IGJ1Y2tldDtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC51c2VkSXRlbXMgPSBbXTtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1UcmllZCA9IDA7XHJcblx0XHR0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29ycmVjdCA9IDA7XHJcblx0XHR0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyA9IDA7XHJcblx0XHR0aGlzLmN1cnJlbnRCdWNrZXQudGVzdGVkID0gdHJ1ZTtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBUcnlBbnN3ZXIgPSAoYW5zd2VyOiBudW1iZXIsIGVsYXBzZWQ6IG51bWJlcikgPT4ge1xyXG5cdFx0aWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcclxuXHRcdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmRBbnN3ZXJlZCh0aGlzLmN1cnJlbnRRdWVzdGlvbiwgYW5zd2VyLCBlbGFwc2VkKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1UcmllZCArPSAxO1xyXG5cdFx0aWYgKHRoaXMuY3VycmVudFF1ZXN0aW9uLmFuc3dlcnNbYW5zd2VyIC0gMV0uYW5zd2VyTmFtZSA9PSB0aGlzLmN1cnJlbnRRdWVzdGlvbi5jb3JyZWN0KXtcclxuXHRcdFx0dGhpcy5jdXJyZW50QnVja2V0Lm51bUNvcnJlY3QgKz0gMTtcclxuXHRcdFx0dGhpcy5jdXJyZW50QnVja2V0Lm51bUNvbnNlY3V0aXZlV3JvbmcgPSAwO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkFuc3dlcmVkIGNvcnJlY3RseVwiKTtcclxuXHRcdH1lbHNle1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyArPSAxO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkFuc3dlcmVkIGluY29ycmVjdGx5LCBcIiArIHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db25zZWN1dGl2ZVdyb25nKTtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuTGluZWFyQXJyYXlCYXNlZCAmJiBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5zaG93blN0YXJzQ291bnQgPCB0aGlzLk1BWF9TVEFSU19DT1VOVF9JTl9MSU5FQVJfTU9ERSkge1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuQWRkU3RhcigpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuUmFuZG9tQlNUKSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5BZGRTdGFyKCk7XHJcblx0XHR9XHJcblx0XHRVSUNvbnRyb2xsZXIuU2V0RmVlZGJhY2tWaXNpYmlsZSh0cnVlKTtcclxuXHRcdHNldFRpbWVvdXQoKCkgPT4geyBcclxuXHRcdFx0Y29uc29sZS5sb2coJ0NvbXBsZXRlZCBmaXJzdCBUaW1lb3V0Jyk7XHJcblx0XHRcdHRoaXMub25RdWVzdGlvbkVuZCgpXHJcblx0XHR9LCAyMDAwKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBvblF1ZXN0aW9uRW5kID0gKCkgPT4ge1xyXG5cdFx0bGV0IHF1ZXN0aW9uRW5kVGltZW91dCA9ICh0aGlzLkhhc1F1ZXN0aW9uc0xlZnQoKSkgPyA1MDAgOiA0MDAwO1xyXG5cdFxyXG5cdFx0Y29uc3QgZW5kT3BlcmF0aW9ucyA9ICgpID0+IHtcclxuXHRcdFx0VUlDb250cm9sbGVyLlNldEZlZWRiYWNrVmlzaWJpbGUoZmFsc2UpO1xyXG5cdFx0XHRpZiAodGhpcy5idWNrZXRHZW5Nb2RlID09PSBCdWNrZXRHZW5Nb2RlLkxpbmVhckFycmF5QmFzZWQgJiYgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd25TdGFyc0NvdW50IDwgdGhpcy5NQVhfU1RBUlNfQ09VTlRfSU5fTElORUFSX01PREUpIHtcclxuXHRcdFx0XHRVSUNvbnRyb2xsZXIuQ2hhbmdlU3RhckltYWdlQWZ0ZXJBbmltYXRpb24oKTtcclxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuUmFuZG9tQlNUKSB7XHJcblx0XHRcdFx0VUlDb250cm9sbGVyLkNoYW5nZVN0YXJJbWFnZUFmdGVyQW5pbWF0aW9uKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuSGFzUXVlc3Rpb25zTGVmdCgpKSB7XHJcblx0XHRcdFx0VUlDb250cm9sbGVyLlJlYWR5Rm9yTmV4dCh0aGlzLmdldE5leHRRdWVzdGlvbigpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIk5vIHF1ZXN0aW9ucyBsZWZ0XCIpO1xyXG5cdFx0XHRcdHRoaXMub25FbmQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcclxuXHRcdC8vIENyZWF0ZSBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB0aGUgc3BlY2lmaWVkIHRpbWVvdXRcclxuXHRcdGNvbnN0IHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB7XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHJlc29sdmUoKTtcclxuXHRcdFx0fSwgcXVlc3Rpb25FbmRUaW1lb3V0KTtcclxuXHRcdH0pO1xyXG5cdFxyXG5cdFx0Ly8gRXhlY3V0ZSBlbmRPcGVyYXRpb25zIGFmdGVyIHRpbWVvdXRQcm9taXNlIHJlc29sdmVzXHJcblx0XHR0aW1lb3V0UHJvbWlzZS50aGVuKCgpID0+IHtcclxuXHRcdFx0ZW5kT3BlcmF0aW9ucygpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cclxuXHRwdWJsaWMgZ2V0TmV4dFF1ZXN0aW9uID0gKCkgPT4ge1xyXG5cdFx0dmFyIHRhcmdldEl0ZW0sIGZvaWwxLCBmb2lsMiwgZm9pbDM7XHJcblxyXG5cdFx0ZG8ge1xyXG5cdFx0XHR0YXJnZXRJdGVtID0gcmFuZEZyb20odGhpcy5jdXJyZW50QnVja2V0Lml0ZW1zKTtcclxuXHRcdH0gd2hpbGUgKHRoaXMuY3VycmVudEJ1Y2tldC51c2VkSXRlbXMuaW5jbHVkZXModGFyZ2V0SXRlbSkpO1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRCdWNrZXQudXNlZEl0ZW1zLnB1c2godGFyZ2V0SXRlbSk7XHJcblx0XHRkbyB7XHJcblx0XHRcdGZvaWwxID0gcmFuZEZyb20odGhpcy5jdXJyZW50QnVja2V0Lml0ZW1zKTtcclxuXHRcdH0gd2hpbGUgKHRhcmdldEl0ZW0gPT0gZm9pbDEpO1xyXG5cdFx0ZG8ge1xyXG5cdFx0XHRmb2lsMiA9IHJhbmRGcm9tKHRoaXMuY3VycmVudEJ1Y2tldC5pdGVtcyk7XHJcblx0XHR9IHdoaWxlICh0YXJnZXRJdGVtID09IGZvaWwyIHx8IGZvaWwxID09IGZvaWwyKTtcclxuXHRcdGRvIHtcclxuXHRcdFx0Zm9pbDMgPSByYW5kRnJvbSh0aGlzLmN1cnJlbnRCdWNrZXQuaXRlbXMpO1xyXG5cdFx0fSB3aGlsZSAodGFyZ2V0SXRlbSA9PSBmb2lsMyB8fCBmb2lsMSA9PSBmb2lsMyB8fCBmb2lsMiA9PSBmb2lsMyk7XHJcblxyXG5cdFx0dmFyIGFuc3dlck9wdGlvbnMgPSBbdGFyZ2V0SXRlbSwgZm9pbDEsIGZvaWwyLCBmb2lsM107XHJcblx0XHRzaHVmZmxlQXJyYXkoYW5zd2VyT3B0aW9ucyk7XHJcblxyXG5cdFx0dmFyIHJlc3VsdCA9IHtcclxuXHRcdFx0cU5hbWU6IFwicXVlc3Rpb24tXCIgKyB0aGlzLnF1ZXN0aW9uTnVtYmVyICsgXCItXCIgKyB0YXJnZXRJdGVtLml0ZW1OYW1lLFxyXG5cdFx0XHRxTnVtYmVyOiB0aGlzLnF1ZXN0aW9uTnVtYmVyLFxyXG5cdFx0XHRxVGFyZ2V0OiB0YXJnZXRJdGVtLml0ZW1OYW1lLFxyXG5cdFx0XHRwcm9tcHRUZXh0OiBcIlwiLFxyXG5cdFx0XHRidWNrZXQ6IHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCxcclxuXHRcdFx0cHJvbXB0QXVkaW86IHRhcmdldEl0ZW0uaXRlbU5hbWUsXHJcblx0XHRcdGNvcnJlY3Q6IHRhcmdldEl0ZW0uaXRlbVRleHQsXHJcblx0XHRcdGFuc3dlcnM6IFtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRhbnN3ZXJOYW1lOiBhbnN3ZXJPcHRpb25zWzBdLml0ZW1OYW1lLFxyXG5cdFx0XHRcdFx0YW5zd2VyVGV4dDogYW5zd2VyT3B0aW9uc1swXS5pdGVtVGV4dFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0YW5zd2VyTmFtZTogYW5zd2VyT3B0aW9uc1sxXS5pdGVtTmFtZSxcclxuXHRcdFx0XHRcdGFuc3dlclRleHQ6IGFuc3dlck9wdGlvbnNbMV0uaXRlbVRleHRcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGFuc3dlck5hbWU6IGFuc3dlck9wdGlvbnNbMl0uaXRlbU5hbWUsXHJcblx0XHRcdFx0XHRhbnN3ZXJUZXh0OiBhbnN3ZXJPcHRpb25zWzJdLml0ZW1UZXh0XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRhbnN3ZXJOYW1lOiBhbnN3ZXJPcHRpb25zWzNdLml0ZW1OYW1lLFxyXG5cdFx0XHRcdFx0YW5zd2VyVGV4dDogYW5zd2VyT3B0aW9uc1szXS5pdGVtVGV4dFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XVxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmN1cnJlbnRRdWVzdGlvbiA9IHJlc3VsdDtcclxuXHRcdHRoaXMucXVlc3Rpb25OdW1iZXIgKz0gMTtcclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgdHJ5TW92ZUJ1Y2tldCA9IChwYXNzZWQ6IGJvb2xlYW4pID0+IHtcclxuXHRcdGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuUmFuZG9tQlNUKSB7XHJcblx0XHRcdHRoaXMudHJ5TW92ZUJ1Y2tldFJhbmRvbUJTVChwYXNzZWQpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuTGluZWFyQXJyYXlCYXNlZCkge1xyXG5cdFx0XHR0aGlzLnRyeU1vdmVCdWNrZXRMaW5lYXJBcnJheUJhc2VkKHBhc3NlZCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgdHJ5TW92ZUJ1Y2tldFJhbmRvbUJTVCA9IChwYXNzZWQ6IGJvb2xlYW4pID0+IHtcclxuXHRcdGNvbnN0IG5ld0J1Y2tldCA9ICh0aGlzLmN1cnJlbnROb2RlLnZhbHVlIGFzIGJ1Y2tldCk7XHJcblx0XHRpZiAodGhpcy5jdXJyZW50QnVja2V0ICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IHBhc3NlZDtcclxuXHRcdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCBwYXNzZWQpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc29sZS5sb2coXCJuZXcgIGJ1Y2tldCBpcyBcIiArIG5ld0J1Y2tldC5idWNrZXRJRCk7XHJcblx0XHRBdWRpb0NvbnRyb2xsZXIuUHJlbG9hZEJ1Y2tldChuZXdCdWNrZXQsIHRoaXMuYXBwLkdldERhdGFVUkwoKSk7XHJcblx0XHR0aGlzLmluaXRCdWNrZXQobmV3QnVja2V0KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyB0cnlNb3ZlQnVja2V0TGluZWFyQXJyYXlCYXNlZCA9IChwYXNzZWQ6IGJvb2xlYW4pID0+IHtcclxuXHRcdGNvbnN0IG5ld0J1Y2tldCA9IHRoaXMuYnVja2V0c1t0aGlzLmN1cnJlbnRMaW5lYXJCdWNrZXRJbmRleF07XHJcblx0XHQvLyBBdm9pZCBwYXNzaW5nIGJ1Y2tldFBhc3NlZCBldmVudCB0byB0aGUgYW5hbHl0aWNzIHdoZW4gd2UgYXJlIGluIGxpbmVhciBkZXYgbW9kZVxyXG5cdFx0Ly8gaWYgKHRoaXMuY3VycmVudEJ1Y2tldCAhPSBudWxsKSB7XHJcblx0XHQvLyBcdHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSBwYXNzZWQ7XHJcblx0XHQvLyBcdEFuYWx5dGljc0V2ZW50cy5zZW5kQnVja2V0KHRoaXMuY3VycmVudEJ1Y2tldCwgcGFzc2VkKTtcclxuXHRcdC8vIH1cclxuXHRcdGNvbnNvbGUubG9nKFwiTmV3IEJ1Y2tldDogXCIgKyBuZXdCdWNrZXQuYnVja2V0SUQpO1xyXG5cdFx0QXVkaW9Db250cm9sbGVyLlByZWxvYWRCdWNrZXQobmV3QnVja2V0LCB0aGlzLmFwcC5HZXREYXRhVVJMKCkpO1xyXG5cdFx0dGhpcy5pbml0QnVja2V0KG5ld0J1Y2tldCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgSGFzUXVlc3Rpb25zTGVmdCA9ICgpID0+IHtcclxuXHRcdC8vLy8gVE9ETzogY2hlY2sgYnVja2V0cywgY2hlY2sgaWYgZG9uZVxyXG5cdFx0dmFyIGhhc1F1ZXN0aW9uc0xlZnQgPSB0cnVlO1xyXG5cclxuXHRcdGlmICh0aGlzLmN1cnJlbnRCdWNrZXQucGFzc2VkKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdFxyXG5cdFx0aWYgKHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db3JyZWN0ID49IDQpIHtcclxuXHRcdFx0Ly9wYXNzZWQgdGhpcyBidWNrZXRcclxuXHRcdFx0Y29uc29sZS5sb2coXCJQYXNzZWQgdGhpcyBidWNrZXQgXCIgKyB0aGlzLmN1cnJlbnRCdWNrZXQuYnVja2V0SUQpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCA+PSB0aGlzLm51bUJ1Y2tldHMpIHtcclxuXHRcdFx0XHQvL3Bhc3NlZCBoaWdoZXN0IGJ1Y2tldFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiUGFzc2VkIGhpZ2hlc3QgYnVja2V0XCIpO1xyXG5cdFx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSB0cnVlO1xyXG5cdFx0XHRcdGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuUmFuZG9tQlNUKSB7XHJcblx0XHRcdFx0XHRBbmFseXRpY3NFdmVudHMuc2VuZEJ1Y2tldCh0aGlzLmN1cnJlbnRCdWNrZXQsIHRydWUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRVSUNvbnRyb2xsZXIuUHJvZ3Jlc3NDaGVzdCgpO1xyXG5cdFx0XHRcdGhhc1F1ZXN0aW9uc0xlZnQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvL21vdmVkIHVwIHRvIG5leHQgYnVja2V0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJNb3ZpbmcgdXAgYnVja2V0XCIpO1xyXG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnROb2RlLnJpZ2h0ICE9IG51bGwpe1xyXG5cdFx0XHRcdFx0Ly9tb3ZlIGRvd24gdG8gcmlnaHRcclxuXHRcdFx0XHRcdFVJQ29udHJvbGxlci5Qcm9ncmVzc0NoZXN0KCk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIk1vdmluZyB0byByaWdodCBub2RlXCIpO1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5jdXJyZW50Tm9kZSA9IHRoaXMuY3VycmVudE5vZGUucmlnaHQ7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmN1cnJlbnRMaW5lYXJCdWNrZXRJbmRleCsrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dGhpcy50cnlNb3ZlQnVja2V0KHRydWUpO1xyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0Ly8gUmVhY2hlZCByb290IG5vZGVcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUmVhY2hlZCByb290IG5vZGVcIik7XHJcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnRCdWNrZXQucGFzc2VkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGlmICh0aGlzLmJ1Y2tldEdlbk1vZGUgPT09IEJ1Y2tldEdlbk1vZGUuUmFuZG9tQlNUKSB7XHJcblx0XHRcdFx0XHRcdEFuYWx5dGljc0V2ZW50cy5zZW5kQnVja2V0KHRoaXMuY3VycmVudEJ1Y2tldCwgdHJ1ZSlcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFVJQ29udHJvbGxlci5Qcm9ncmVzc0NoZXN0KCk7XHJcblx0XHRcdFx0XHRoYXNRdWVzdGlvbnNMZWZ0ID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db25zZWN1dGl2ZVdyb25nID49IDIgfHwgdGhpcy5jdXJyZW50QnVja2V0Lm51bVRyaWVkID49IDUpIHtcclxuXHRcdFx0Ly8gRmFpbGVkIHRoaXMgYnVja2V0XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiRmFpbGVkIHRoaXMgYnVja2V0IFwiICsgdGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEKTtcclxuXHRcdFx0aWYgKHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCA8IHRoaXMuYmFzYWxCdWNrZXQpIHtcclxuXHRcdFx0XHQvLyBVcGRhdGUgYmFzYWwgYnVja2V0IG51bWJlclxyXG5cdFx0XHRcdHRoaXMuYmFzYWxCdWNrZXQgPSB0aGlzLmN1cnJlbnRCdWNrZXQuYnVja2V0SUQ7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCA8PSAxKSB7XHJcblx0XHRcdFx0Ly8gRmFpbGVkIHRoZSBsb3dlc3QgYnVja2V0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJGYWlsZWQgbG93ZXN0IGJ1Y2tldCAhXCIpO1xyXG5cdFx0XHRcdGhhc1F1ZXN0aW9uc0xlZnQgPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnRCdWNrZXQucGFzc2VkID0gZmFsc2U7XHJcblx0XHRcdFx0aWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcclxuXHRcdFx0XHRcdEFuYWx5dGljc0V2ZW50cy5zZW5kQnVja2V0KHRoaXMuY3VycmVudEJ1Y2tldCwgZmFsc2UpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIk1vdmluZyBkb3duIGJ1Y2tldCAhXCIpO1xyXG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnROb2RlLmxlZnQgIT0gbnVsbCl7XHJcblx0XHRcdFx0XHQvLyBNb3ZlIGRvd24gdG8gbGVmdFxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJNb3ZpbmcgdG8gbGVmdCBub2RlXCIpO1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5jdXJyZW50Tm9kZSA9IHRoaXMuY3VycmVudE5vZGUubGVmdDtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuY3VycmVudExpbmVhckJ1Y2tldEluZGV4Kys7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR0aGlzLnRyeU1vdmVCdWNrZXQoZmFsc2UpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBSZWFjaGVkIHJvb3Qgbm9kZVxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJSZWFjaGVkIHJvb3Qgbm9kZSAhXCIpO1xyXG5cdFx0XHRcdFx0aGFzUXVlc3Rpb25zTGVmdCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuYnVja2V0R2VuTW9kZSA9PT0gQnVja2V0R2VuTW9kZS5SYW5kb21CU1QpIHtcclxuXHRcdFx0XHRcdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCBmYWxzZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGhhc1F1ZXN0aW9uc0xlZnQ7XHJcblxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgb3ZlcnJpZGUgb25FbmQoKTogdm9pZCB7XHJcblx0XHRBbmFseXRpY3NFdmVudHMuc2VuZEZpbmlzaGVkKHRoaXMuYnVja2V0cywgdGhpcy5iYXNhbEJ1Y2tldCwgdGhpcy5jZWlsaW5nQnVja2V0KTtcclxuXHRcdFVJQ29udHJvbGxlci5TaG93RW5kKCk7XHJcblx0XHR0aGlzLmFwcC51bml0eUJyaWRnZS5TZW5kQ2xvc2UoKTtcclxuXHR9XHJcbn1cclxuIiwiLyoqXG4gKiBNb2R1bGUgdGhhdCB3cmFwcyBVbml0eSBjYWxscyBmb3Igc2VuZGluZyBtZXNzYWdlcyBmcm9tIHRoZSB3ZWJ2aWV3IHRvIFVuaXR5LlxuICovXG5cbmRlY2xhcmUgY29uc3QgVW5pdHk7XG5cbmV4cG9ydCBjbGFzcyBVbml0eUJyaWRnZSB7XG5cblx0cHJpdmF0ZSB1bml0eVJlZmVyZW5jZTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRpZiAodHlwZW9mIFVuaXR5ICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhpcy51bml0eVJlZmVyZW5jZSA9IFVuaXR5O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnVuaXR5UmVmZXJlbmNlID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgU2VuZE1lc3NhZ2UobWVzc2FnZTogc3RyaW5nKSB7XG5cdFx0aWYgKHRoaXMudW5pdHlSZWZlcmVuY2UgIT09IG51bGwpIHtcblx0XHRcdHRoaXMudW5pdHlSZWZlcmVuY2UuY2FsbChtZXNzYWdlKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgU2VuZExvYWRlZCgpIHtcblx0XHRpZiAodGhpcy51bml0eVJlZmVyZW5jZSAhPT0gbnVsbCkge1xuXHRcdFx0dGhpcy51bml0eVJlZmVyZW5jZS5jYWxsKFwibG9hZGVkXCIpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNvbnNvbGUubG9nKFwid291bGQgY2FsbCBVbml0eSBsb2FkZWQgbm93XCIpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBTZW5kQ2xvc2UoKSB7XG5cdFx0aWYgKHRoaXMudW5pdHlSZWZlcmVuY2UgIT09IG51bGwpIHtcblx0XHRcdHRoaXMudW5pdHlSZWZlcmVuY2UuY2FsbChcImNsb3NlXCIpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNvbnNvbGUubG9nKFwid291bGQgY2xvc2UgVW5pdHkgbm93XCIpO1xuXHRcdH1cblx0fVxuXG59XG4iLCJpbXBvcnQgeyByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmV4cG9ydCAqIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI5LjEyLjFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAnKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsInRyeXtzZWxmW1wid29ya2JveDp3aW5kb3c6Ny4wLjBcIl0mJl8oKX1jYXRjaChuKXt9ZnVuY3Rpb24gbihuLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocil7dmFyIGU9bmV3IE1lc3NhZ2VDaGFubmVsO2UucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKG4pe3Iobi5kYXRhKX0sbi5wb3N0TWVzc2FnZSh0LFtlLnBvcnQyXSl9KSl9ZnVuY3Rpb24gdChuLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgZT10W3JdO2UuZW51bWVyYWJsZT1lLmVudW1lcmFibGV8fCExLGUuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGUmJihlLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixlLmtleSxlKX19ZnVuY3Rpb24gcihuLHQpeyhudWxsPT10fHx0Pm4ubGVuZ3RoKSYmKHQ9bi5sZW5ndGgpO2Zvcih2YXIgcj0wLGU9bmV3IEFycmF5KHQpO3I8dDtyKyspZVtyXT1uW3JdO3JldHVybiBlfWZ1bmN0aW9uIGUobix0KXt2YXIgZTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHxudWxsPT1uW1N5bWJvbC5pdGVyYXRvcl0pe2lmKEFycmF5LmlzQXJyYXkobil8fChlPWZ1bmN0aW9uKG4sdCl7aWYobil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pcmV0dXJuIHIobix0KTt2YXIgZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobikuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PWUmJm4uY29uc3RydWN0b3ImJihlPW4uY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PWV8fFwiU2V0XCI9PT1lP0FycmF5LmZyb20obik6XCJBcmd1bWVudHNcIj09PWV8fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KGUpP3Iobix0KTp2b2lkIDB9fShuKSl8fHQmJm4mJlwibnVtYmVyXCI9PXR5cGVvZiBuLmxlbmd0aCl7ZSYmKG49ZSk7dmFyIGk9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gaT49bi5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOm5baSsrXX19fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX1yZXR1cm4oZT1uW1N5bWJvbC5pdGVyYXRvcl0oKSkubmV4dC5iaW5kKGUpfXRyeXtzZWxmW1wid29ya2JveDpjb3JlOjcuMC4wXCJdJiZfKCl9Y2F0Y2gobil7fXZhciBpPWZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQscil7bi5yZXNvbHZlPXQsbi5yZWplY3Q9cn0pKX07ZnVuY3Rpb24gbyhuLHQpe3ZhciByPWxvY2F0aW9uLmhyZWY7cmV0dXJuIG5ldyBVUkwobixyKS5ocmVmPT09bmV3IFVSTCh0LHIpLmhyZWZ9dmFyIHU9ZnVuY3Rpb24obix0KXt0aGlzLnR5cGU9bixPYmplY3QuYXNzaWduKHRoaXMsdCl9O2Z1bmN0aW9uIGEobix0LHIpe3JldHVybiByP3Q/dChuKTpuOihuJiZuLnRoZW58fChuPVByb21pc2UucmVzb2x2ZShuKSksdD9uLnRoZW4odCk6bil9ZnVuY3Rpb24gYygpe312YXIgZj17dHlwZTpcIlNLSVBfV0FJVElOR1wifTtmdW5jdGlvbiBzKG4sdCl7aWYoIXQpcmV0dXJuIG4mJm4udGhlbj9uLnRoZW4oYyk6UHJvbWlzZS5yZXNvbHZlKCl9dmFyIHY9ZnVuY3Rpb24ocil7dmFyIGUsYztmdW5jdGlvbiB2KG4sdCl7dmFyIGUsYztyZXR1cm4gdm9pZCAwPT09dCYmKHQ9e30pLChlPXIuY2FsbCh0aGlzKXx8dGhpcykubm49e30sZS50bj0wLGUucm49bmV3IGksZS5lbj1uZXcgaSxlLm9uPW5ldyBpLGUudW49MCxlLmFuPW5ldyBTZXQsZS5jbj1mdW5jdGlvbigpe3ZhciBuPWUuZm4sdD1uLmluc3RhbGxpbmc7ZS50bj4wfHwhbyh0LnNjcmlwdFVSTCxlLnNuLnRvU3RyaW5nKCkpfHxwZXJmb3JtYW5jZS5ub3coKT5lLnVuKzZlND8oZS52bj10LG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbikpOihlLmhuPXQsZS5hbi5hZGQodCksZS5ybi5yZXNvbHZlKHQpKSwrK2UudG4sdC5hZGRFdmVudExpc3RlbmVyKFwic3RhdGVjaGFuZ2VcIixlLmxuKX0sZS5sbj1mdW5jdGlvbihuKXt2YXIgdD1lLmZuLHI9bi50YXJnZXQsaT1yLnN0YXRlLG89cj09PWUudm4sYT17c3c6cixpc0V4dGVybmFsOm8sb3JpZ2luYWxFdmVudDpufTshbyYmZS5tbiYmKGEuaXNVcGRhdGU9ITApLGUuZGlzcGF0Y2hFdmVudChuZXcgdShpLGEpKSxcImluc3RhbGxlZFwiPT09aT9lLnduPXNlbGYuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcImluc3RhbGxlZFwiPT09aSYmdC53YWl0aW5nPT09ciYmZS5kaXNwYXRjaEV2ZW50KG5ldyB1KFwid2FpdGluZ1wiLGEpKX0pLDIwMCk6XCJhY3RpdmF0aW5nXCI9PT1pJiYoY2xlYXJUaW1lb3V0KGUud24pLG98fGUuZW4ucmVzb2x2ZShyKSl9LGUuZG49ZnVuY3Rpb24obil7dmFyIHQ9ZS5obixyPXQhPT1uYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyO2UuZGlzcGF0Y2hFdmVudChuZXcgdShcImNvbnRyb2xsaW5nXCIse2lzRXh0ZXJuYWw6cixvcmlnaW5hbEV2ZW50Om4sc3c6dCxpc1VwZGF0ZTplLm1ufSkpLHJ8fGUub24ucmVzb2x2ZSh0KX0sZS5nbj0oYz1mdW5jdGlvbihuKXt2YXIgdD1uLmRhdGEscj1uLnBvcnRzLGk9bi5zb3VyY2U7cmV0dXJuIGEoZS5nZXRTVygpLChmdW5jdGlvbigpe2UuYW4uaGFzKGkpJiZlLmRpc3BhdGNoRXZlbnQobmV3IHUoXCJtZXNzYWdlXCIse2RhdGE6dCxvcmlnaW5hbEV2ZW50Om4scG9ydHM6cixzdzppfSkpfSkpfSxmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyluW3RdPWFyZ3VtZW50c1t0XTt0cnl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjLmFwcGx5KHRoaXMsbikpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19KSxlLnNuPW4sZS5ubj10LG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZS5nbiksZX1jPXIsKGU9dikucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5fX3Byb3RvX189Yzt2YXIgaCxsLG0sdz12LnByb3RvdHlwZTtyZXR1cm4gdy5yZWdpc3Rlcj1mdW5jdGlvbihuKXt2YXIgdD0odm9pZCAwPT09bj97fTpuKS5pbW1lZGlhdGUscj12b2lkIDAhPT10JiZ0O3RyeXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3ZhciByPW4oKTtpZihyJiZyLnRoZW4pcmV0dXJuIHIudGhlbih0KTtyZXR1cm4gdChyKX0oKGZ1bmN0aW9uKCl7aWYoIXImJlwiY29tcGxldGVcIiE9PWRvY3VtZW50LnJlYWR5U3RhdGUpcmV0dXJuIHMobmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3JldHVybiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixuKX0pKSl9KSwoZnVuY3Rpb24oKXtyZXR1cm4gZS5tbj1Cb29sZWFuKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpLGUueW49ZS5wbigpLGEoZS5ibigpLChmdW5jdGlvbihuKXtlLmZuPW4sZS55biYmKGUuaG49ZS55bixlLmVuLnJlc29sdmUoZS55biksZS5vbi5yZXNvbHZlKGUueW4pLGUueW4uYWRkRXZlbnRMaXN0ZW5lcihcInN0YXRlY2hhbmdlXCIsZS5sbix7b25jZTohMH0pKTt2YXIgdD1lLmZuLndhaXRpbmc7cmV0dXJuIHQmJm8odC5zY3JpcHRVUkwsZS5zbi50b1N0cmluZygpKSYmKGUuaG49dCxQcm9taXNlLnJlc29sdmUoKS50aGVuKChmdW5jdGlvbigpe2UuZGlzcGF0Y2hFdmVudChuZXcgdShcIndhaXRpbmdcIix7c3c6dCx3YXNXYWl0aW5nQmVmb3JlUmVnaXN0ZXI6ITB9KSl9KSkudGhlbigoZnVuY3Rpb24oKXt9KSkpLGUuaG4mJihlLnJuLnJlc29sdmUoZS5obiksZS5hbi5hZGQoZS5obikpLGUuZm4uYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbiksbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRyb2xsZXJjaGFuZ2VcIixlLmRuKSxlLmZufSkpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcudXBkYXRlPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmZuP3ModGhpcy5mbi51cGRhdGUoKSk6dm9pZCAwfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcuZ2V0U1c9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5obj9Qcm9taXNlLnJlc29sdmUodGhpcy5obik6dGhpcy5ybi5wcm9taXNlfSx3Lm1lc3NhZ2VTVz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIGEodGhpcy5nZXRTVygpLChmdW5jdGlvbihyKXtyZXR1cm4gbihyLHQpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcubWVzc2FnZVNraXBXYWl0aW5nPWZ1bmN0aW9uKCl7dGhpcy5mbiYmdGhpcy5mbi53YWl0aW5nJiZuKHRoaXMuZm4ud2FpdGluZyxmKX0sdy5wbj1mdW5jdGlvbigpe3ZhciBuPW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXI7cmV0dXJuIG4mJm8obi5zY3JpcHRVUkwsdGhpcy5zbi50b1N0cmluZygpKT9uOnZvaWQgMH0sdy5ibj1mdW5jdGlvbigpe3RyeXt2YXIgbj10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3RyeXt2YXIgcj1uKCl9Y2F0Y2gobil7cmV0dXJuIHQobil9aWYociYmci50aGVuKXJldHVybiByLnRoZW4odm9pZCAwLHQpO3JldHVybiByfSgoZnVuY3Rpb24oKXtyZXR1cm4gYShuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihuLnNuLG4ubm4pLChmdW5jdGlvbih0KXtyZXR1cm4gbi51bj1wZXJmb3JtYW5jZS5ub3coKSx0fSkpfSksKGZ1bmN0aW9uKG4pe3Rocm93IG59KSl9Y2F0Y2gobil7cmV0dXJuIFByb21pc2UucmVqZWN0KG4pfX0saD12LChsPVt7a2V5OlwiYWN0aXZlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW4ucHJvbWlzZX19LHtrZXk6XCJjb250cm9sbGluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uLnByb21pc2V9fV0pJiZ0KGgucHJvdG90eXBlLGwpLG0mJnQoaCxtKSx2fShmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt0aGlzLlBuPW5ldyBNYXB9dmFyIHQ9bi5wcm90b3R5cGU7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihuLHQpe3RoaXMuU24obikuYWRkKHQpfSx0LnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24obix0KXt0aGlzLlNuKG4pLmRlbGV0ZSh0KX0sdC5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKG4pe24udGFyZ2V0PXRoaXM7Zm9yKHZhciB0LHI9ZSh0aGlzLlNuKG4udHlwZSkpOyEodD1yKCkpLmRvbmU7KXsoMCx0LnZhbHVlKShuKX19LHQuU249ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuUG4uaGFzKG4pfHx0aGlzLlBuLnNldChuLG5ldyBTZXQpLHRoaXMuUG4uZ2V0KG4pfSxufSgpKTtleHBvcnR7diBhcyBXb3JrYm94LHUgYXMgV29ya2JveEV2ZW50LG4gYXMgbWVzc2FnZVNXfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtib3gtd2luZG93LnByb2QuZXM1Lm1qcy5tYXBcbiIsIi8qKlxyXG4gKiBBcHAgY2xhc3MgdGhhdCByZXByZXNlbnRzIGFuIGVudHJ5IHBvaW50IG9mIHRoZSBhcHBsaWNhdGlvbi5cclxuICovXHJcblxyXG5pbXBvcnQgeyBnZXRVVUlELCBnZXRVc2VyU291cmNlLCBnZXREYXRhRmlsZSB9IGZyb20gJy4vY29tcG9uZW50cy91cmxVdGlscyc7XHJcbmltcG9ydCB7IFN1cnZleSB9IGZyb20gJy4vc3VydmV5L3N1cnZleSc7XHJcbmltcG9ydCB7IEFzc2Vzc21lbnQgfSBmcm9tICcuL2Fzc2Vzc21lbnQvYXNzZXNzbWVudCc7XHJcbmltcG9ydCB7IFVuaXR5QnJpZGdlIH0gZnJvbSAnLi9jb21wb25lbnRzL3VuaXR5QnJpZGdlJztcclxuaW1wb3J0IHsgQW5hbHl0aWNzRXZlbnRzIH0gZnJvbSAnLi9jb21wb25lbnRzL2FuYWx5dGljc0V2ZW50cyc7XHJcbmltcG9ydCB7IEJhc2VRdWl6IH0gZnJvbSAnLi9CYXNlUXVpeic7XHJcbmltcG9ydCB7IGZldGNoQXBwRGF0YSwgZ2V0RGF0YVVSTCB9IGZyb20gJy4vY29tcG9uZW50cy9qc29uVXRpbHMnO1xyXG5pbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSAnZmlyZWJhc2UvYXBwJztcclxuaW1wb3J0IHsgZ2V0QW5hbHl0aWNzLCBsb2dFdmVudCB9IGZyb20gJ2ZpcmViYXNlL2FuYWx5dGljcyc7XHJcbmltcG9ydCB7IFdvcmtib3ggfSBmcm9tICd3b3JrYm94LXdpbmRvdyc7XHJcbmltcG9ydCBDYWNoZU1vZGVsIGZyb20gJy4vY29tcG9uZW50cy9jYWNoZU1vZGVsJztcclxuaW1wb3J0IHsgVUlDb250cm9sbGVyIH0gZnJvbSAnLi9jb21wb25lbnRzL3VpQ29udHJvbGxlcic7XHJcblxyXG5jb25zdCBhcHBWZXJzaW9uOiBzdHJpbmcgPSBcInYxLjAuNVwiO1xyXG5cclxubGV0IGxvYWRpbmdTY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdTY3JlZW5cIik7XHJcblxyXG5jb25zdCBicm9hZGNhc3RDaGFubmVsOiBCcm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoJ2FzLW1lc3NhZ2UtY2hhbm5lbCcpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcblxyXG5cdC8qKiBDb3VsZCBiZSAnYXNzZXNzbWVudCcgb3IgJ3N1cnZleScgYmFzZWQgb24gdGhlIGRhdGEgZmlsZSAqL1xyXG5cdHB1YmxpYyBkYXRhVVJMOiBzdHJpbmc7XHJcblxyXG5cdHB1YmxpYyB1bml0eUJyaWRnZTtcclxuXHRwdWJsaWMgYW5hbHl0aWNzO1xyXG5cdHB1YmxpYyBnYW1lOiBCYXNlUXVpejtcclxuXHJcblx0Y2FjaGVNb2RlbDogQ2FjaGVNb2RlbDtcclxuXHJcblx0bGFuZzogc3RyaW5nID0gXCJlbmdsaXNoXCI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy51bml0eUJyaWRnZSA9IG5ldyBVbml0eUJyaWRnZSgpO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIGFwcC4uLlwiKTtcclxuXHJcblx0XHR0aGlzLmRhdGFVUkwgPSBnZXREYXRhRmlsZSgpO1xyXG5cclxuXHRcdHRoaXMuY2FjaGVNb2RlbCA9IG5ldyBDYWNoZU1vZGVsKHRoaXMuZGF0YVVSTCwgdGhpcy5kYXRhVVJMLCBuZXcgU2V0PHN0cmluZz4oKSk7XHJcblxyXG5cdFx0Ly8gY29uc29sZS5sb2coXCJEYXRhIGZpbGU6IFwiICsgdGhpcy5kYXRhVVJMKTtcclxuXHJcblx0XHRjb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuXHRcdCAgYXBpS2V5OiBcIkFJemFTeUI4YzJsQlZpMjZ1N1lSTDlzeE9QOTdVYXEzeU44aFRsNFwiLFxyXG5cdFx0ICBhdXRoRG9tYWluOiBcImZ0bS1iOWQ5OS5maXJlYmFzZWFwcC5jb21cIixcclxuXHRcdCAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9mdG0tYjlkOTkuZmlyZWJhc2Vpby5jb21cIixcclxuXHRcdCAgcHJvamVjdElkOiBcImZ0bS1iOWQ5OVwiLFxyXG5cdFx0ICBzdG9yYWdlQnVja2V0OiBcImZ0bS1iOWQ5OS5hcHBzcG90LmNvbVwiLFxyXG5cdFx0ICBtZXNzYWdpbmdTZW5kZXJJZDogXCI2MDI0MDIzODc5NDFcIixcclxuXHRcdCAgYXBwSWQ6IFwiMTo2MDI0MDIzODc5NDE6d2ViOjdiMWIxMTgxODY0ZDI4YjQ5ZGUxMGNcIixcclxuXHRcdCAgbWVhc3VyZW1lbnRJZDogXCJHLUZGMTE1OVRHQ0ZcIlxyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBmYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcblx0XHRjb25zdCBmYW5hbHl0aWNzID0gZ2V0QW5hbHl0aWNzKGZhcHApO1xyXG5cclxuXHRcdHRoaXMuYW5hbHl0aWNzID0gZmFuYWx5dGljcztcclxuXHRcdGxvZ0V2ZW50KGZhbmFseXRpY3MsICdub3RpZmljYXRpb25fcmVjZWl2ZWQnKTtcclxuXHRcdGxvZ0V2ZW50KGZhbmFseXRpY3MsXCJ0ZXN0IGluaXRpYWxpemF0aW9uIGV2ZW50XCIse30pO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiZmlyZWJhc2UgaW5pdGlhbGl6ZWRcIik7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYXN5bmMgc3BpblVwKCkge1xyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiV2luZG93IExvYWRlZCFcIik7XHJcblx0XHRcdChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0YXdhaXQgZmV0Y2hBcHBEYXRhKHRoaXMuZGF0YVVSTCkudGhlbihkYXRhID0+IHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiQXNzZXNzbWVudC9TdXJ2ZXkgXCIgKyBhcHBWZXJzaW9uICsgXCIgaW5pdGlhbGl6aW5nIVwiKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiQXBwIGRhdGEgbG9hZGVkIVwiKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuXHRcdFx0XHRcdHRoaXMuY2FjaGVNb2RlbC5zZXRDb250ZW50RmlsZVBhdGgoZ2V0RGF0YVVSTCh0aGlzLmRhdGFVUkwpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBUT0RPOiBXaHkgZG8gd2UgbmVlZCB0byBzZXQgdGhlIGZlZWRiYWNrIHRleHQgaGVyZT9cclxuXHRcdFx0XHRcdFVJQ29udHJvbGxlci5TZXRGZWVkYmFja1RleHQoZGF0YVtcImZlZWRiYWNrVGV4dFwiXSk7XHJcblxyXG5cdFx0XHRcdFx0bGV0IGFwcFR5cGUgPSBkYXRhW1wiYXBwVHlwZVwiXTtcclxuXHRcdFx0XHRcdGxldCBhc3Nlc3NtZW50VHlwZSA9IGRhdGFbXCJhc3Nlc3NtZW50VHlwZVwiXTtcclxuXHJcblx0XHRcdFx0XHRpZiAoYXBwVHlwZSA9PSBcInN1cnZleVwiKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZ2FtZSA9IG5ldyBTdXJ2ZXkodGhpcy5kYXRhVVJMLCB0aGlzLnVuaXR5QnJpZGdlKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoYXBwVHlwZSA9PSBcImFzc2Vzc21lbnRcIikge1xyXG5cdFx0XHRcdFx0XHQvLyBHZXQgYW5kIGFkZCBhbGwgdGhlIGF1ZGlvIGFzc2V0cyB0byB0aGUgY2FjaGUgbW9kZWxcclxuXHJcblx0XHRcdFx0XHRcdGxldCBidWNrZXRzID0gZGF0YVtcImJ1Y2tldHNcIl07XHJcblxyXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGJ1Y2tldHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMDsgaiA8IGJ1Y2tldHNbaV0uaXRlbXMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0XHRcdGxldCBhdWRpb0l0ZW1VUkw7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2UgdG8gbG93ZXIgY2FzZSBmb3IgdGhlIEx1Z2FuZGFuIGRhdGFcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChkYXRhW1wicXVpek5hbWVcIl0uaW5jbHVkZXMoXCJMdWdhbmRhXCIpIHx8IGRhdGFbXCJxdWl6TmFtZVwiXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwid2VzdCBhZnJpY2FuIGVuZ2xpc2hcIikpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXVkaW9JdGVtVVJMID0gXCIvYXVkaW8vXCIgKyB0aGlzLmRhdGFVUkwgKyBcIi9cIiArIGJ1Y2tldHNbaV0uaXRlbXNbal0uaXRlbU5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgKyBcIi5tcDNcIjtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF1ZGlvSXRlbVVSTCA9IFwiL2F1ZGlvL1wiICsgdGhpcy5kYXRhVVJMICsgXCIvXCIgKyBidWNrZXRzW2ldLml0ZW1zW2pdLml0ZW1OYW1lLnRyaW0oKSArIFwiLm1wM1wiO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY2FjaGVNb2RlbC5hZGRJdGVtVG9BdWRpb1Zpc3VhbFJlc291cmNlcyhhdWRpb0l0ZW1VUkwpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0dGhpcy5jYWNoZU1vZGVsLmFkZEl0ZW1Ub0F1ZGlvVmlzdWFsUmVzb3VyY2VzKFwiL2F1ZGlvL1wiICsgdGhpcy5kYXRhVVJMICsgXCIvYW5zd2VyX2ZlZWRiYWNrLm1wM1wiKTtcclxuXHJcblx0XHRcdFx0XHRcdHRoaXMuZ2FtZSA9IG5ldyBBc3Nlc3NtZW50KHRoaXMuZGF0YVVSTCwgdGhpcy51bml0eUJyaWRnZSk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0dGhpcy5nYW1lLnVuaXR5QnJpZGdlID0gdGhpcy51bml0eUJyaWRnZTtcclxuXHJcblx0XHRcdFx0XHRBbmFseXRpY3NFdmVudHMuc2V0VXVpZChnZXRVVUlEKCksIGdldFVzZXJTb3VyY2UoKSk7XHJcblx0XHRcdFx0XHRBbmFseXRpY3NFdmVudHMubGlua0FuYWx5dGljcyh0aGlzLmFuYWx5dGljcywgdGhpcy5kYXRhVVJMKTtcclxuXHRcdFx0XHRcdEFuYWx5dGljc0V2ZW50cy5zZXRBc3Nlc3NtZW50VHlwZShhc3Nlc3NtZW50VHlwZSk7IFxyXG5cdFx0XHRcdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmRJbml0KGFwcFZlcnNpb24sIGRhdGFbXCJjb250ZW50VmVyc2lvblwiXSk7XHJcblx0XHRcdFx0XHQvLyB0aGlzLmNhY2hlTW9kZWwuc2V0QXBwTmFtZSh0aGlzLmNhY2hlTW9kZWwuYXBwTmFtZSArICc6JyArIGRhdGFbXCJjb250ZW50VmVyc2lvblwiXSk7XHJcblxyXG5cdFx0XHRcdFx0dGhpcy5nYW1lLlJ1bih0aGlzKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnJlZ2lzdGVyU2VydmljZVdvcmtlcih0aGlzLmdhbWUpO1xyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZWdpc3RlclNlcnZpY2VXb3JrZXIoZ2FtZTogQmFzZVF1aXopIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiUmVnaXN0ZXJpbmcgc2VydmljZSB3b3JrZXIuLi5cIik7XHJcblxyXG5cdFx0aWYgKFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvcikge1xyXG5cdFx0XHRsZXQgd2IgPSBuZXcgV29ya2JveCgnLi9zdy5qcycsIHt9KTtcclxuXHJcblx0XHRcdHdiLnJlZ2lzdGVyKCkudGhlbigocmVnaXN0cmF0aW9uKSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTZXJ2aWNlIHdvcmtlciByZWdpc3RlcmVkIVwiKTtcclxuXHRcdFx0XHR0aGlzLmhhbmRsZVNlcnZpY2VXb3JrZXJSZWdpc3RhdGlvbihyZWdpc3RyYXRpb24pO1xyXG5cdFx0XHR9KS5jYXRjaCgoZXJyKSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiBcIiArIGVycik7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UpO1xyXG5cclxuXHRcdFx0YXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkNhY2hlIE1vZGVsOiBcIik7XHJcblx0XHRcdGNvbnNvbGUubG9nKHRoaXMuY2FjaGVNb2RlbCk7XHJcblxyXG5cdFx0XHRpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5jYWNoZU1vZGVsLmFwcE5hbWUpID09IG51bGwpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIldFIERPTlQgSEFWRSBUSElTIEFTU0VTU01FTlQ8IENBQ0hJTkcgSVQhXCIpO1xyXG5cdFx0XHRcdGxvYWRpbmdTY3JlZW4hLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgICAgIGJyb2FkY2FzdENoYW5uZWwucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ2FjaGVcIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcERhdGE6IHRoaXMuY2FjaGVNb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHRcdFx0XHRsb2FkaW5nU2NyZWVuIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGJyb2FkY2FzdENoYW5uZWwub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXZlbnQuZGF0YS5jb21tYW5kICsgXCIgcmVjZWl2ZWQgZnJvbSBzZXJ2aWNlIHdvcmtlciFcIik7XHJcblx0XHRcdFx0aWYgKGV2ZW50LmRhdGEuY29tbWFuZCA9PSBcIkFjdGl2YXRlZFwiICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuY2FjaGVNb2RlbC5hcHBOYW1lKSA9PSBudWxsKSB7XHJcblx0XHRcdFx0XHRicm9hZGNhc3RDaGFubmVsLnBvc3RNZXNzYWdlKHtcclxuXHRcdFx0XHRcdFx0Y29tbWFuZDogXCJDYWNoZVwiLFxyXG5cdFx0XHRcdFx0XHRkYXRhOiB7XHJcblx0XHRcdFx0XHRcdFx0YXBwRGF0YTogdGhpcy5jYWNoZU1vZGVsLFxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKFwiU2VydmljZSB3b3JrZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3Nlci5cIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRoYW5kbGVTZXJ2aWNlV29ya2VyUmVnaXN0YXRpb24ocmVnaXN0cmF0aW9uOiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIHwgdW5kZWZpbmVkKTogdm9pZCB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRyZWdpc3RyYXRpb24/Lmluc3RhbGxpbmc/LnBvc3RNZXNzYWdlKHtcclxuXHRcdFx0XHR0eXBlOiAnUmVnaXN0YXJ0aW9uJyxcclxuXHRcdFx0XHR2YWx1ZTogdGhpcy5sYW5nXHJcblx0XHRcdH0pXHJcblx0XHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJTZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiBcIiArIGVycik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgR2V0RGF0YVVSTCgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuZGF0YVVSTDtcclxuXHR9XHJcbn1cclxuXHJcbmJyb2FkY2FzdENoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UoZXZlbnQpOiB2b2lkIHtcclxuICAgIGlmIChldmVudC5kYXRhLm1zZyA9PSBcIkxvYWRpbmdcIikge1xyXG4gICAgICAgIGxldCBwcm9ncmVzc1ZhbHVlID0gcGFyc2VJbnQoZXZlbnQuZGF0YS5kYXRhLnByb2dyZXNzKTtcclxuICAgICAgICBoYW5kbGVMb2FkaW5nTWVzc2FnZShldmVudCwgcHJvZ3Jlc3NWYWx1ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQuZGF0YS5tc2cgPT0gXCJVcGRhdGVGb3VuZFwiKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCI+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pi4sdXBkYXRlIEZvdW5kXCIpO1xyXG4gICAgICAgIGhhbmRsZVVwZGF0ZUZvdW5kTWVzc2FnZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMb2FkaW5nTWVzc2FnZShldmVudCwgcHJvZ3Jlc3NWYWx1ZSk6IHZvaWQge1xyXG4gICAgbGV0IHByb2dyZXNzQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9ncmVzc0JhclwiKTtcclxuICAgIGlmIChwcm9ncmVzc1ZhbHVlIDwgMTAwKSB7XHJcbiAgICAgICAgcHJvZ3Jlc3NCYXIhLnN0eWxlLndpZHRoID0gcHJvZ3Jlc3NWYWx1ZSArIFwiJVwiO1xyXG4gICAgfSBlbHNlIGlmIChwcm9ncmVzc1ZhbHVlID49IDEwMCkge1xyXG4gICAgICAgIGxvYWRpbmdTY3JlZW4hLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdFVJQ29udHJvbGxlci5TZXRDb250ZW50TG9hZGVkKHRydWUpO1xyXG4gICAgICAgIC8vIGFkZCBib29rIHdpdGggYSBuYW1lIHRvIGxvY2FsIHN0b3JhZ2UgYXMgY2FjaGVkXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZXZlbnQuZGF0YS5kYXRhLmJvb2tOYW1lLCBcInRydWVcIik7XHJcbiAgICAgICAgcmVhZExhbmd1YWdlRGF0YUZyb21DYWNoZUFuZE5vdGlmeUFuZHJvaWRBcHAoZXZlbnQuZGF0YS5kYXRhLmJvb2tOYW1lKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZExhbmd1YWdlRGF0YUZyb21DYWNoZUFuZE5vdGlmeUFuZHJvaWRBcHAoYm9va05hbWU6IHN0cmluZykge1xyXG4gICAgLy9AdHMtaWdub3JlXHJcbiAgICBpZiAod2luZG93LkFuZHJvaWQpIHtcclxuICAgICAgICBsZXQgaXNDb250ZW50Q2FjaGVkOiBib29sZWFuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYm9va05hbWUpICE9PSBudWxsO1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHdpbmRvdy5BbmRyb2lkLmNhY2hlZFN0YXR1cyhpc0NvbnRlbnRDYWNoZWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVVcGRhdGVGb3VuZE1lc3NhZ2UoKTogdm9pZCB7XHJcbiAgICBsZXQgdGV4dCA9IFwiVXBkYXRlIEZvdW5kLlxcblBsZWFzZSBhY2NlcHQgdGhlIHVwZGF0ZSBieSBwcmVzc2luZyBPay5cIjtcclxuICAgIGlmIChjb25maXJtKHRleHQpID09IHRydWUpIHtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRleHQgPSBcIlVwZGF0ZSB3aWxsIGhhcHBlbiBvbiB0aGUgbmV4dCBsYXVuY2guXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcclxuYXBwLnNwaW5VcCgpO1xyXG4iLCIvLyBJbnRlcmZhY2UgdGhhdCBnZXRzIHBhc3NlZCBhcm91bmQgdGhlIGFwcCBjb21wb25lbnRzIHRvIGdhdGhlciBhbGwgcmVxdXJpZWQgcmVzb3VyY2VzXG4vLyBhbmQgdGhhdCBnZXRzIHNlbnQgdG8gdGhlIHNlcnZpY2Ugd29ya2VyIGZvciBjYWNoaW5nXG5cbmludGVyZmFjZSBJQ2FjaGVNb2RlbCB7XG4gICAgYXBwTmFtZTogc3RyaW5nO1xuICAgIGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nO1xuICAgIGF1ZGlvVmlzdWFsUmVzb3VyY2VzOiBTZXQ8c3RyaW5nPjtcbn1cblxuY2xhc3MgQ2FjaGVNb2RlbCBpbXBsZW1lbnRzIElDYWNoZU1vZGVsIHtcbiAgICBhcHBOYW1lOiBzdHJpbmc7XG4gICAgY29udGVudEZpbGVQYXRoOiBzdHJpbmc7XG4gICAgYXVkaW9WaXN1YWxSZXNvdXJjZXM6IFNldDxzdHJpbmc+O1xuXG4gICAgY29uc3RydWN0b3IoYXBwTmFtZTogc3RyaW5nLCBjb250ZW50RmlsZVBhdGg6IHN0cmluZywgYXVkaW9WaXN1YWxSZXNvdXJjZXM6IFNldDxzdHJpbmc+KSB7XG4gICAgICAgIHRoaXMuYXBwTmFtZSA9IGFwcE5hbWU7XG4gICAgICAgIHRoaXMuY29udGVudEZpbGVQYXRoID0gY29udGVudEZpbGVQYXRoO1xuICAgICAgICB0aGlzLmF1ZGlvVmlzdWFsUmVzb3VyY2VzID0gYXVkaW9WaXN1YWxSZXNvdXJjZXM7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEFwcE5hbWUoYXBwTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwTmFtZSA9IGFwcE5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldENvbnRlbnRGaWxlUGF0aChjb250ZW50RmlsZVBhdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmNvbnRlbnRGaWxlUGF0aCA9IGNvbnRlbnRGaWxlUGF0aDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0QXVkaW9WaXN1YWxSZXNvdXJjZXMoYXVkaW9WaXN1YWxSZXNvdXJjZXM6IFNldDxzdHJpbmc+KSB7XG4gICAgICAgIHRoaXMuYXVkaW9WaXN1YWxSZXNvdXJjZXMgPSBhdWRpb1Zpc3VhbFJlc291cmNlcztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkSXRlbVRvQXVkaW9WaXN1YWxSZXNvdXJjZXMoaXRlbTogc3RyaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5hdWRpb1Zpc3VhbFJlc291cmNlcy5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9WaXN1YWxSZXNvdXJjZXMuYWRkKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IENhY2hlTW9kZWw7XG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZ2V0RGF0YUZpbGUiLCJkYXRhIiwiZ2V0UGF0aE5hbWUiLCJnZXQiLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwibG9nIiwicXVlcnlTdHJpbmciLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsIlVSTFNlYXJjaFBhcmFtcyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsImdldERhdGFVUkwiLCJ1cmwiLCJsb2FkRGF0YSIsImZ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJBdWRpb0NvbnRyb2xsZXIiLCJpbWFnZVRvQ2FjaGUiLCJ3YXZUb0NhY2hlIiwiYWxsQXVkaW9zIiwiYWxsSW1hZ2VzIiwiZGF0YVVSTCIsImNvcnJlY3RTb3VuZFBhdGgiLCJmZWVkYmFja0F1ZGlvIiwiY29ycmVjdEF1ZGlvIiwiaW5pdCIsIkF1ZGlvIiwic3JjIiwic3RhdGljIiwicXVlc3Rpb25zRGF0YSIsImdldEluc3RhbmNlIiwiZmVlZGJhY2tTb3VuZFBhdGgiLCJxdWVzdGlvbkluZGV4IiwicHVzaCIsInF1ZXN0aW9uRGF0YSIsImFuc3dlckluZGV4IiwicHJvbXB0QXVkaW8iLCJGaWx0ZXJBbmRBZGRBdWRpb1RvQWxsQXVkaW9zIiwicHJvbXB0SW1nIiwiQWRkSW1hZ2VUb0FsbEltYWdlcyIsImFuc3dlcnMiLCJhbnN3ZXJEYXRhIiwiYW5zd2VySW1nIiwibmV3SW1hZ2VVUkwiLCJuZXdJbWFnZSIsIkltYWdlIiwibmV3QXVkaW9VUkwiLCJpbmNsdWRlcyIsInJlcGxhY2UiLCJ0cmltIiwibmV3QXVkaW8iLCJzcGxpdCIsIm5ld0J1Y2tldCIsIml0ZW1JbmRleCIsIml0ZW1zIiwiaXRlbSIsIml0ZW1OYW1lIiwiYXVkaW9OYW1lIiwiZmluaXNoZWRDYWxsYmFjayIsImF1ZGlvQW5pbSIsInNsaWNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJhdWRpbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5IiwiY2F0Y2giLCJlcnJvciIsImxvd2VyQXVkaW8iLCJ0b0xvd2VyQ2FzZSIsIndhcm4iLCJpbWFnZU5hbWUiLCJpbnN0YW5jZSIsInJhbmRGcm9tIiwiYXJyYXkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJzaHVmZmxlQXJyYXkiLCJpIiwiaiIsIlVJQ29udHJvbGxlciIsImxhbmRpbmdDb250YWluZXJJZCIsImdhbWVDb250YWluZXJJZCIsImVuZENvbnRhaW5lcklkIiwic3RhckNvbnRhaW5lcklkIiwiY2hlc3RDb250YWluZXJJZCIsInF1ZXN0aW9uc0NvbnRhaW5lcklkIiwiZmVlZGJhY2tDb250YWluZXJJZCIsImFuc3dlcnNDb250YWluZXJJZCIsImFuc3dlckJ1dHRvbjFJZCIsImFuc3dlckJ1dHRvbjJJZCIsImFuc3dlckJ1dHRvbjNJZCIsImFuc3dlckJ1dHRvbjRJZCIsImFuc3dlckJ1dHRvbjVJZCIsImFuc3dlckJ1dHRvbjZJZCIsInBsYXlCdXR0b25JZCIsImNoZXN0SW1nSWQiLCJuZXh0UXVlc3Rpb24iLCJjb250ZW50TG9hZGVkIiwic2hvd24iLCJzdGFycyIsInNob3duU3RhcnNDb3VudCIsInN0YXJQb3NpdGlvbnMiLCJBcnJheSIsInFBbnNOdW0iLCJidXR0b25zIiwiYnV0dG9uc0FjdGl2ZSIsImxhbmRpbmdDb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2FtZUNvbnRhaW5lciIsImVuZENvbnRhaW5lciIsInN0YXJDb250YWluZXIiLCJjaGVzdENvbnRhaW5lciIsInF1ZXN0aW9uc0NvbnRhaW5lciIsImZlZWRiYWNrQ29udGFpbmVyIiwiYW5zd2Vyc0NvbnRhaW5lciIsImFuc3dlckJ1dHRvbjEiLCJhbnN3ZXJCdXR0b24yIiwiYW5zd2VyQnV0dG9uMyIsImFuc3dlckJ1dHRvbjQiLCJhbnN3ZXJCdXR0b241IiwiYW5zd2VyQnV0dG9uNiIsInBsYXlCdXR0b24iLCJjaGVzdEltZyIsImluaXRpYWxpemVTdGFycyIsImluaXRFdmVudExpc3RlbmVycyIsIm5ld1N0YXIiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsIngiLCJ5IiwibWluRGlzdGFuY2UiLCJkeCIsImR5Iiwic3FydCIsImFuc3dlckJ1dHRvblByZXNzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNob3dHYW1lIiwic2hvd09wdGlvbnMiLCJuZXdRIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJkZWxheUJmb3JlT3B0aW9uIiwib3B0aW9uc0Rpc3BsYXllZCIsImZvckVhY2giLCJidXR0b24iLCJzdHlsZSIsInZpc2liaWxpdHkiLCJhbmltYXRpb24iLCJzZXRUaW1lb3V0IiwiY3VyQW5zd2VyIiwiYW5zd2VyVGV4dCIsImJveFNoYWRvdyIsInRtcGltZyIsIkdldEltYWdlIiwiZW5hYmxlQW5zd2VyQnV0dG9uIiwicVN0YXJ0IiwiRGF0ZSIsIm5vdyIsIm50Iiwic2hvd0xhbmRpbmciLCJkaXNwbGF5IiwiYWxsU3RhcnQiLCJzdGFydFByZXNzQ2FsbGJhY2siLCJ2aXNpYmxlIiwicmVtb3ZlIiwiUGxheUNvcnJlY3QiLCJiIiwiU2hvd1F1ZXN0aW9uIiwiUGxheUF1ZGlvIiwiU2hvd0F1ZGlvQW5pbWF0aW9uIiwicGxheWluZyIsInF1ZXJ5U2VsZWN0b3IiLCJuZXdRdWVzdGlvbiIsInFDb2RlIiwiYnV0dG9uSW5kZXgiLCJwcm9tcHRUZXh0Iiwic3RhclRvU2hvdyIsInBvc2l0aW9uIiwiY29udGFpbmVyV2lkdGgiLCJvZmZzZXRXaWR0aCIsImNvbnRhaW5lckhlaWdodCIsIm9mZnNldEhlaWdodCIsInJhbmRvbVgiLCJyYW5kb21ZIiwiT3ZlcmxhcHBpbmdPdGhlclN0YXJzIiwidHJhbnNmb3JtIiwidHJhbnNpdGlvbiIsInpJbmRleCIsInRvcCIsImlubmVySGVpZ2h0IiwibGVmdCIsInJvdGF0aW9uIiwiZmlsdGVyIiwiYnV0dG9uTnVtIiwiYWxsQnV0dG9uc1Zpc2libGUiLCJldmVyeSIsIlBsYXlEaW5nIiwiZFRpbWUiLCJidXR0b25QcmVzc0NhbGxiYWNrIiwiY2hlc3RJbWFnZSIsImN1cnJlbnRJbWdTcmMiLCJjdXJyZW50SW1hZ2VOdW1iZXIiLCJwYXJzZUludCIsIm5leHRJbWFnZVNyYyIsInZhbHVlIiwiY2FsbGJhY2siLCJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwicCIsImMiLCJjaGFyQ29kZUF0IiwiYmFzZTY0IiwiYnl0ZVRvQ2hhck1hcF8iLCJjaGFyVG9CeXRlTWFwXyIsImJ5dGVUb0NoYXJNYXBXZWJTYWZlXyIsImNoYXJUb0J5dGVNYXBXZWJTYWZlXyIsIkVOQ09ERURfVkFMU19CQVNFIiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJIQVNfTkFUSVZFX1NVUFBPUlQiLCJhdG9iIiwiZW5jb2RlQnl0ZUFycmF5IiwiaW5wdXQiLCJ3ZWJTYWZlIiwiaXNBcnJheSIsIkVycm9yIiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsImluZGV4ZWREQiIsInByZUV4aXN0IiwiREJfQ0hFQ0tfTkFNRSIsInJlcXVlc3QiLCJzZWxmIiwib3BlbiIsIm9uc3VjY2VzcyIsInJlc3VsdCIsImNsb3NlIiwiZGVsZXRlRGF0YWJhc2UiLCJvbnVwZ3JhZGVuZWVkZWQiLCJvbmVycm9yIiwiX2EiLCJtZXNzYWdlIiwiZ2V0RGVmYXVsdHMiLCJnZXRHbG9iYWwiLCJfX0ZJUkVCQVNFX0RFRkFVTFRTX18iLCJwcm9jZXNzIiwiZW52IiwiZGVmYXVsdHNKc29uU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwiZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUiLCJtYXRjaCIsImNvb2tpZSIsImRlY29kZWQiLCJiYXNlNjREZWNvZGUiLCJnZXREZWZhdWx0c0Zyb21Db29raWUiLCJpbmZvIiwiRGVmZXJyZWQiLCJjb25zdHJ1Y3RvciIsInByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJGaXJlYmFzZUVycm9yIiwiY29kZSIsImN1c3RvbURhdGEiLCJzdXBlciIsIm5hbWUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhcHR1cmVTdGFja1RyYWNlIiwiRXJyb3JGYWN0b3J5IiwiY3JlYXRlIiwic2VydmljZSIsInNlcnZpY2VOYW1lIiwiZXJyb3JzIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsIlBBVFRFUk4iLCJfIiwia2V5IiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJkZWVwRXF1YWwiLCJhIiwiYUtleXMiLCJrZXlzIiwiYktleXMiLCJrIiwiYVByb3AiLCJiUHJvcCIsImlzT2JqZWN0IiwidGhpbmciLCJjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzIiwiYmFja29mZkNvdW50IiwiaW50ZXJ2YWxNaWxsaXMiLCJiYWNrb2ZmRmFjdG9yIiwiY3VyckJhc2VWYWx1ZSIsInBvdyIsInJhbmRvbVdhaXQiLCJyb3VuZCIsIm1pbiIsIl9kZWxlZ2F0ZSIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsIm1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInByb3BzIiwic2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2siLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsImlkZW50aWZpZXIiLCJub3JtYWxpemVkSWRlbnRpZmllciIsIm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciIsImhhcyIsImRlZmVycmVkIiwic2V0IiwiaXNJbml0aWFsaXplZCIsInNob3VsZEF1dG9Jbml0aWFsaXplIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsImdldEltbWVkaWF0ZSIsIm9wdGlvbnMiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiZW50cmllcyIsImNsZWFySW5zdGFuY2UiLCJkZWxldGUiLCJhc3luYyIsInNlcnZpY2VzIiwiZnJvbSIsInZhbHVlcyIsImFsbCIsIm1hcCIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvcHRzIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJTZXQiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwidG9JU09TdHJpbmciLCJtZXRob2QiLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJpZGJQcm94eWFibGVUeXBlcyIsImN1cnNvckFkdmFuY2VNZXRob2RzIiwiY3Vyc29yUmVxdWVzdE1hcCIsIldlYWtNYXAiLCJ0cmFuc2FjdGlvbkRvbmVNYXAiLCJ0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAiLCJ0cmFuc2Zvcm1DYWNoZSIsInJldmVyc2VUcmFuc2Zvcm1DYWNoZSIsImlkYlByb3h5VHJhcHMiLCJ0YXJnZXQiLCJwcm9wIiwicmVjZWl2ZXIiLCJJREJUcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJvYmplY3RTdG9yZSIsInRyYW5zZm9ybUNhY2hhYmxlVmFsdWUiLCJmdW5jIiwiSURCRGF0YWJhc2UiLCJ0cmFuc2FjdGlvbiIsIklEQkN1cnNvciIsImFkdmFuY2UiLCJjb250aW51ZSIsImNvbnRpbnVlUHJpbWFyeUtleSIsImFwcGx5IiwidW53cmFwIiwic3RvcmVOYW1lcyIsInR4IiwiY2FsbCIsInNvcnQiLCJkb25lIiwidW5saXN0ZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29tcGxldGUiLCJET01FeGNlcHRpb24iLCJjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24iLCJvYmplY3QiLCJJREJPYmplY3RTdG9yZSIsIklEQkluZGV4Iiwic29tZSIsIlByb3h5IiwiSURCUmVxdWVzdCIsInN1Y2Nlc3MiLCJwcm9taXNpZnlSZXF1ZXN0IiwibmV3VmFsdWUiLCJvcGVuREIiLCJ2ZXJzaW9uIiwiYmxvY2tlZCIsInVwZ3JhZGUiLCJibG9ja2luZyIsInRlcm1pbmF0ZWQiLCJvcGVuUHJvbWlzZSIsImV2ZW50Iiwib2xkVmVyc2lvbiIsIm5ld1ZlcnNpb24iLCJkYiIsInJlYWRNZXRob2RzIiwid3JpdGVNZXRob2RzIiwiY2FjaGVkTWV0aG9kcyIsImdldE1ldGhvZCIsInRhcmdldEZ1bmNOYW1lIiwidXNlSW5kZXgiLCJpc1dyaXRlIiwic3RvcmVOYW1lIiwic3RvcmUiLCJpbmRleCIsInNoaWZ0Iiwib2xkVHJhcHMiLCJQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibGlicmFyeSIsImxvZ1N0cmluZyIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsIkVSUk9SX0ZBQ1RPUlkiLCJGaXJlYmFzZUFwcEltcGwiLCJjb25maWciLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJhc3NpZ24iLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsImluaXRpYWxpemVBcHAiLCJyYXdDb25maWciLCJleGlzdGluZ0FwcCIsIm5ld0FwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIlNUT1JFX05BTUUiLCJkYlByb21pc2UiLCJnZXREYlByb21pc2UiLCJjcmVhdGVPYmplY3RTdG9yZSIsIm9yaWdpbmFsRXJyb3JNZXNzYWdlIiwid3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIiLCJoZWFydGJlYXRPYmplY3QiLCJwdXQiLCJjb21wdXRlS2V5IiwiaWRiR2V0RXJyb3IiLCJhcHBJZCIsIkhlYXJ0YmVhdFNlcnZpY2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZSIsIl9zdG9yYWdlIiwiSGVhcnRiZWF0U3RvcmFnZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlUHJvbWlzZSIsInJlYWQiLCJhZ2VudCIsImRhdGUiLCJnZXRVVENEYXRlU3RyaW5nIiwibGFzdFNlbnRIZWFydGJlYXREYXRlIiwiaGVhcnRiZWF0cyIsInNpbmdsZURhdGVIZWFydGJlYXQiLCJoYlRpbWVzdGFtcCIsInZhbHVlT2YiLCJvdmVyd3JpdGUiLCJoZWFydGJlYXRzVG9TZW5kIiwidW5zZW50RW50cmllcyIsImhlYXJ0YmVhdHNDYWNoZSIsIm1heFNpemUiLCJoZWFydGJlYXRFbnRyeSIsImZpbmQiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwic3RyaW5naWZ5Iiwic3Vic3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwiaWRiSGVhcnRiZWF0T2JqZWN0IiwicmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCIiwiaGVhcnRiZWF0c09iamVjdCIsImV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCIsIlBBQ0tBR0VfVkVSU0lPTiIsImlzU2VydmVyRXJyb3IiLCJnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQiLCJwcm9qZWN0SWQiLCJleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZSIsInRva2VuIiwicmVxdWVzdFN0YXR1cyIsImV4cGlyZXNJbiIsInJlc3BvbnNlRXhwaXJlc0luIiwiTnVtYmVyIiwiY3JlYXRpb25UaW1lIiwiZ2V0RXJyb3JGcm9tUmVzcG9uc2UiLCJyZXF1ZXN0TmFtZSIsImVycm9yRGF0YSIsInNlcnZlckNvZGUiLCJzZXJ2ZXJNZXNzYWdlIiwic2VydmVyU3RhdHVzIiwic3RhdHVzIiwiZ2V0SGVhZGVycyIsImFwaUtleSIsIkhlYWRlcnMiLCJBY2NlcHQiLCJyZXRyeUlmU2VydmVyRXJyb3IiLCJmbiIsInNsZWVwIiwibXMiLCJWQUxJRF9GSURfUEFUVEVSTiIsImdlbmVyYXRlRmlkIiwiZmlkQnl0ZUFycmF5IiwiVWludDhBcnJheSIsImNyeXB0byIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiZmlkIiwic3Vic3RyIiwiZW5jb2RlIiwidGVzdCIsImdldEtleSIsImFwcENvbmZpZyIsImZpZENoYW5nZUNhbGxiYWNrcyIsImZpZENoYW5nZWQiLCJjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzIiwiY2hhbm5lbCIsImJyb2FkY2FzdENoYW5uZWwiLCJCcm9hZGNhc3RDaGFubmVsIiwib25tZXNzYWdlIiwicG9zdE1lc3NhZ2UiLCJzaXplIiwiYnJvYWRjYXN0RmlkQ2hhbmdlIiwiT0JKRUNUX1NUT1JFX05BTUUiLCJvbGRWYWx1ZSIsInVwZGF0ZSIsInVwZGF0ZUZuIiwiZ2V0SW5zdGFsbGF0aW9uRW50cnkiLCJpbnN0YWxsYXRpb25zIiwicmVnaXN0cmF0aW9uUHJvbWlzZSIsImluc3RhbGxhdGlvbkVudHJ5Iiwib2xkRW50cnkiLCJjbGVhclRpbWVkT3V0UmVxdWVzdCIsInJlZ2lzdHJhdGlvblN0YXR1cyIsInVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkiLCJlbnRyeVdpdGhQcm9taXNlIiwibmF2aWdhdG9yIiwib25MaW5lIiwiaW5Qcm9ncmVzc0VudHJ5IiwicmVnaXN0cmF0aW9uVGltZSIsInJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSIsImhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciIsImVuZHBvaW50IiwiaGVhZGVycyIsImhlYXJ0YmVhdFNlcnZpY2UiLCJoZWFydGJlYXRzSGVhZGVyIiwiZ2V0SGVhcnRiZWF0c0hlYWRlciIsImFwcGVuZCIsImJvZHkiLCJhdXRoVmVyc2lvbiIsInNka1ZlcnNpb24iLCJvayIsInJlc3BvbnNlVmFsdWUiLCJyZWZyZXNoVG9rZW4iLCJhdXRoVG9rZW4iLCJjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0IiwicmVnaXN0ZXJJbnN0YWxsYXRpb24iLCJ3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24iLCJ0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkiLCJlbnRyeSIsInVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QiLCJnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QiLCJnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50IiwiZ2V0QXV0aG9yaXphdGlvbkhlYWRlciIsImdldEhlYWRlcnNXaXRoQXV0aCIsImluc3RhbGxhdGlvbiIsInJlZnJlc2hBdXRoVG9rZW4iLCJmb3JjZVJlZnJlc2giLCJ0b2tlblByb21pc2UiLCJpc0VudHJ5UmVnaXN0ZXJlZCIsIm9sZEF1dGhUb2tlbiIsImlzQXV0aFRva2VuRXhwaXJlZCIsInVwZGF0ZUF1dGhUb2tlblJlcXVlc3QiLCJ3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0IiwiaW5Qcm9ncmVzc0F1dGhUb2tlbiIsInJlcXVlc3RUaW1lIiwibWFrZUF1dGhUb2tlblJlcXVlc3RJblByb2dyZXNzRW50cnkiLCJ1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkiLCJmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIiLCJnZXRNaXNzaW5nVmFsdWVFcnJvciIsInZhbHVlTmFtZSIsIklOU1RBTExBVElPTlNfTkFNRSIsImNvbmZpZ0tleXMiLCJrZXlOYW1lIiwiZXh0cmFjdEFwcENvbmZpZyIsImdldElkIiwiaW5zdGFsbGF0aW9uc0ltcGwiLCJnZXRUb2tlbiIsImNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uIiwiQU5BTFlUSUNTX1RZUEUiLCJHVEFHX1VSTCIsInByb21pc2VBbGxTZXR0bGVkIiwicHJvbWlzZXMiLCJkZWZhdWx0UmV0cnlEYXRhIiwidGhyb3R0bGVNZXRhZGF0YSIsImdldFRocm90dGxlTWV0YWRhdGEiLCJzZXRUaHJvdHRsZU1ldGFkYXRhIiwibWV0YWRhdGEiLCJkZWxldGVUaHJvdHRsZU1ldGFkYXRhIiwiZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5IiwicmV0cnlEYXRhIiwidGltZW91dE1pbGxpcyIsIm1lYXN1cmVtZW50SWQiLCJ0aHJvdHRsZUVuZFRpbWVNaWxsaXMiLCJzaWduYWwiLCJBbmFseXRpY3NBYm9ydFNpZ25hbCIsImFib3J0IiwiYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeSIsImFwcEZpZWxkcyIsIl9iIiwiYmFja29mZk1pbGxpcyIsIm1heCIsInRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJzZXRBYm9ydGFibGVUaW1lb3V0IiwiYXBwVXJsIiwiZXJyb3JNZXNzYWdlIiwianNvblJlc3BvbnNlIiwiX2lnbm9yZWQiLCJodHRwU3RhdHVzIiwicmVzcG9uc2VNZXNzYWdlIiwiZmV0Y2hEeW5hbWljQ29uZmlnIiwiaXNSZXRyaWFibGVFcnJvciIsImxpc3RlbmVycyIsImxpc3RlbmVyIiwiZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQiLCJkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCIsIl9pbml0aWFsaXplQW5hbHl0aWNzIiwiZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCIsIm1lYXN1cmVtZW50SWRUb0FwcElkIiwiZ3RhZ0NvcmUiLCJkYXRhTGF5ZXJOYW1lIiwiZHluYW1pY0NvbmZpZ1Byb21pc2UiLCJmaWRQcm9taXNlIiwiZXJyb3JJbmZvIiwidG9TdHJpbmciLCJ2YWxpZGF0ZUluZGV4ZWREQiIsImVudklzVmFsaWQiLCJkeW5hbWljQ29uZmlnIiwic2NyaXB0VGFncyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGFnIiwiZmluZEd0YWdTY3JpcHRPblBhZ2UiLCJzY3JpcHQiLCJoZWFkIiwiaW5zZXJ0U2NyaXB0VGFnIiwiY29uZmlnUHJvcGVydGllcyIsIkFuYWx5dGljc1NlcnZpY2UiLCJpbml0aWFsaXphdGlvblByb21pc2VzTWFwIiwiZ3RhZ0NvcmVGdW5jdGlvbiIsIndyYXBwZWRHdGFnRnVuY3Rpb24iLCJnbG9iYWxJbml0RG9uZSIsImZhY3RvcnkiLCJtaXNtYXRjaGVkRW52TWVzc2FnZXMiLCJydW50aW1lIiwiY2hyb21lIiwiYnJvd3NlciIsImNvb2tpZUVuYWJsZWQiLCJkZXRhaWxzIiwiZXJyIiwid2Fybk9uQnJvd3NlckNvbnRleHRNaXNtYXRjaCIsImRhdGFMYXllciIsImdldE9yQ3JlYXRlRGF0YUxheWVyIiwid3JhcHBlZEd0YWciLCJndGFnRnVuY3Rpb25OYW1lIiwiX2FyZ3MiLCJhcmd1bWVudHMiLCJjb21tYW5kIiwiaWRPck5hbWVPclBhcmFtcyIsImd0YWdQYXJhbXMiLCJpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yIiwiZ2FTZW5kVG9MaXN0IiwiZHluYW1pY0NvbmZpZ1Jlc3VsdHMiLCJzZW5kVG9JZCIsImZvdW5kQ29uZmlnIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiZ3RhZ09uRXZlbnQiLCJjb3JyZXNwb25kaW5nQXBwSWQiLCJndGFnT25Db25maWciLCJ3cmFwR3RhZyIsIndyYXBPckNyZWF0ZUd0YWciLCJsb2dFdmVudCIsImFuYWx5dGljc0luc3RhbmNlIiwiZXZlbnROYW1lIiwiZXZlbnRQYXJhbXMiLCJndGFnRnVuY3Rpb24iLCJnbG9iYWwiLCJsb2dFdmVudCQxIiwiYW5hbHl0aWNzT3B0aW9ucyIsImFuYWx5dGljcyIsInJlYXNvbiIsIkFuYWx5dGljc0V2ZW50cyIsImFzc2Vzc21lbnRUeXBlIiwic3RhdHVzVGV4dCIsImxhdGxvbmciLCJsb2MiLCJscGllY2VzIiwibGF0IiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJsb24iLCJjbGF0IiwiY2xvbiIsInNlbmRMb2NhdGlvbiIsIm1zZyIsIm5ld2dhbmEiLCJkYXRhdXJsIiwiZ2FuYSIsIm5ld1V1aWQiLCJuZXdVc2VyU291cmNlIiwidXVpZCIsInVzZXJTb3VyY2UiLCJhcHBWZXJzaW9uIiwiY29udGVudFZlcnNpb24iLCJnZXRMb2NhdGlvbiIsImV2ZW50U3RyaW5nIiwiYXBwVHlwZSIsInVzZXIiLCJsYW5nIiwiZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTCIsImdldEFwcFR5cGVGcm9tRGF0YVVSTCIsImpvaW5MYXRMb25nIiwiY2xVc2VySWQiLCJsYXRMb25nIiwidGhlUSIsInRoZUEiLCJlbGFwc2VkIiwiYW5zIiwiaXNjb3JyZWN0IiwiYnVja2V0IiwiY29ycmVjdCIsImFuc3dlck5hbWUiLCJxTmFtZSIsImFOdW0iLCJkdCIsInF1ZXN0aW9uX251bWJlciIsInFOdW1iZXIiLCJxVGFyZ2V0IiwicXVlc3Rpb24iLCJzZWxlY3RlZF9hbnN3ZXIiLCJ0YiIsInBhc3NlZCIsImJuIiwiYnVja2V0SUQiLCJidHJpZWQiLCJudW1UcmllZCIsImJjb3JyZWN0IiwibnVtQ29ycmVjdCIsImJ1Y2tldE51bWJlciIsIm51bWJlclRyaWVkSW5CdWNrZXQiLCJudW1iZXJDb3JyZWN0SW5CdWNrZXQiLCJwYXNzZWRCdWNrZXQiLCJidWNrZXRzIiwiYmFzYWxCdWNrZXQiLCJjZWlsaW5nQnVja2V0IiwiYmFzYWxCdWNrZXRJRCIsImdldEJhc2FsQnVja2V0SUQiLCJjZWlsaW5nQnVja2V0SUQiLCJnZXRDZWlsaW5nQnVja2V0SUQiLCJzY29yZSIsImNhbGN1bGF0ZVNjb3JlIiwibWF4U2NvcmUiLCJzZW5kRGF0YVRvVGhpcmRQYXJ0eSIsInVybFBhcmFtcyIsInRhcmdldFBhcnR5VVJMIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJwYXlsb2FkIiwicGF5bG9hZFN0cmluZyIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwidGVzdGVkIiwiQmFzZVF1aXoiLCJkZXZNb2RlQXZhaWxhYmxlIiwiaXNJbkRldk1vZGUiLCJkZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVySWQiLCJkZXZNb2RlVG9nZ2xlQnV0dG9uSWQiLCJkZXZNb2RlTW9kYWxJZCIsImRldk1vZGVCdWNrZXRHZW5TZWxlY3RJZCIsInRvZ2dsZURldk1vZGVNb2RhbCIsImRldk1vZGVTZXR0aW5nc01vZGFsIiwiaHJlZiIsImRldk1vZGVUb2dnbGVCdXR0b25Db250YWluZXIiLCJkZXZNb2RlQnVja2V0R2VuU2VsZWN0Iiwib25jaGFuZ2UiLCJoYW5kbGVCdWNrZXRHZW5Nb2RlQ2hhbmdlIiwiZGV2TW9kZVRvZ2dsZUJ1dHRvbiIsIm9uY2xpY2siLCJoaWRlRGV2TW9kZUJ1dHRvbiIsIm9uRW5kIiwiU2hvd0VuZCIsInVuaXR5QnJpZGdlIiwiU2VuZENsb3NlIiwiU3VydmV5Iiwic3RhcnRTdXJ2ZXkiLCJSZWFkeUZvck5leHQiLCJnZXROZXh0UXVlc3Rpb24iLCJvblF1ZXN0aW9uRW5kIiwiU2V0RmVlZGJhY2tWaXNpYmlsZSIsImN1cnJlbnRRdWVzdGlvbkluZGV4IiwiSGFzUXVlc3Rpb25zTGVmdCIsIlRyeUFuc3dlciIsImFuc3dlciIsInNlbmRBbnN3ZXJlZCIsIkFkZFN0YXIiLCJidWlsZFF1ZXN0aW9uTGlzdCIsImZldGNoU3VydmV5UXVlc3Rpb25zIiwiU2V0QnV0dG9uUHJlc3NBY3Rpb24iLCJTZXRTdGFydEFjdGlvbiIsIlJ1biIsIlByZXBhcmVBdWRpb0FuZEltYWdlc0ZvclN1cnZleSIsIkdldERhdGFVUkwiLCJTZW5kTG9hZGVkIiwiVHJlZU5vZGUiLCJyaWdodCIsInNvcnRlZEFycmF5VG9JRHNCU1QiLCJzdGFydCIsImVuZCIsInVzZWRJbmRpY2VzIiwibWlkIiwibm9kZSIsInNlYXJjaFN0YWdlIiwiQnVja2V0R2VuTW9kZSIsIkFzc2Vzc21lbnQiLCJidWNrZXRHZW5Nb2RlIiwiUmFuZG9tQlNUIiwiTUFYX1NUQVJTX0NPVU5UX0lOX0xJTkVBUl9NT0RFIiwic3RhcnRBc3Nlc3NtZW50IiwiYnVpbGRCdWNrZXRzIiwicmVzIiwiZmV0Y2hBc3Nlc3NtZW50QnVja2V0cyIsIm51bUJ1Y2tldHMiLCJidWNrZXRBcnJheSIsInJvb3RPZklEcyIsImJ1Y2tldHNSb290IiwiY29udmVydFRvQnVja2V0QlNUIiwiY3VycmVudE5vZGUiLCJ0cnlNb3ZlQnVja2V0IiwiTGluZWFyQXJyYXlCYXNlZCIsImN1cnJlbnRMaW5lYXJCdWNrZXRJbmRleCIsImJ1Y2tldElkIiwiaW5pdEJ1Y2tldCIsImN1cnJlbnRCdWNrZXQiLCJ1c2VkSXRlbXMiLCJudW1Db25zZWN1dGl2ZVdyb25nIiwiY3VycmVudFF1ZXN0aW9uIiwicXVlc3Rpb25FbmRUaW1lb3V0IiwiZW5kT3BlcmF0aW9ucyIsIkNoYW5nZVN0YXJJbWFnZUFmdGVyQW5pbWF0aW9uIiwidGFyZ2V0SXRlbSIsImZvaWwxIiwiZm9pbDIiLCJmb2lsMyIsImFuc3dlck9wdGlvbnMiLCJxdWVzdGlvbk51bWJlciIsIml0ZW1UZXh0IiwidHJ5TW92ZUJ1Y2tldFJhbmRvbUJTVCIsInRyeU1vdmVCdWNrZXRMaW5lYXJBcnJheUJhc2VkIiwic2VuZEJ1Y2tldCIsIlByZWxvYWRCdWNrZXQiLCJoYXNRdWVzdGlvbnNMZWZ0IiwiUHJvZ3Jlc3NDaGVzdCIsImFwcGxpbmsiLCJzZW5kRmluaXNoZWQiLCJVbml0eUJyaWRnZSIsIlVuaXR5IiwidW5pdHlSZWZlcmVuY2UiLCJTZW5kTWVzc2FnZSIsIm4iLCJ0IiwiciIsIk1lc3NhZ2VDaGFubmVsIiwicG9ydDEiLCJwb3J0MiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImJpbmQiLCJvIiwiVVJMIiwiZiIsInMiLCJ2Iiwibm4iLCJ0biIsInJuIiwiZW4iLCJvbiIsInVuIiwiYW4iLCJjbiIsImluc3RhbGxpbmciLCJzY3JpcHRVUkwiLCJzbiIsInBlcmZvcm1hbmNlIiwidm4iLCJobiIsImxuIiwic3RhdGUiLCJzdyIsImlzRXh0ZXJuYWwiLCJvcmlnaW5hbEV2ZW50IiwibW4iLCJpc1VwZGF0ZSIsImRpc3BhdGNoRXZlbnQiLCJ3biIsIndhaXRpbmciLCJkbiIsInNlcnZpY2VXb3JrZXIiLCJjb250cm9sbGVyIiwiZ24iLCJwb3J0cyIsInNvdXJjZSIsImdldFNXIiwiX19wcm90b19fIiwibCIsInciLCJyZWdpc3RlciIsImltbWVkaWF0ZSIsInJlYWR5U3RhdGUiLCJCb29sZWFuIiwieW4iLCJwbiIsIm9uY2UiLCJ3YXNXYWl0aW5nQmVmb3JlUmVnaXN0ZXIiLCJtZXNzYWdlU1ciLCJtZXNzYWdlU2tpcFdhaXRpbmciLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJkZWZpbmVQcm9wZXJ0eSIsIlBuIiwiU24iLCJsb2FkaW5nU2NyZWVuIiwiaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UiLCJwcm9ncmVzc1ZhbHVlIiwicHJvZ3Jlc3NCYXIiLCJ3aWR0aCIsIlNldENvbnRlbnRMb2FkZWQiLCJzZXRJdGVtIiwiYm9va05hbWUiLCJBbmRyb2lkIiwiaXNDb250ZW50Q2FjaGVkIiwiY2FjaGVkU3RhdHVzIiwicmVhZExhbmd1YWdlRGF0YUZyb21DYWNoZUFuZE5vdGlmeUFuZHJvaWRBcHAiLCJoYW5kbGVMb2FkaW5nTWVzc2FnZSIsInByb2dyZXNzIiwidGV4dCIsImNvbmZpcm0iLCJyZWxvYWQiLCJoYW5kbGVVcGRhdGVGb3VuZE1lc3NhZ2UiLCJjYWNoZU1vZGVsIiwiY29udGVudEZpbGVQYXRoIiwiYXVkaW9WaXN1YWxSZXNvdXJjZXMiLCJzZXRBcHBOYW1lIiwic2V0Q29udGVudEZpbGVQYXRoIiwic2V0QXVkaW9WaXN1YWxSZXNvdXJjZXMiLCJhZGRJdGVtVG9BdWRpb1Zpc3VhbFJlc291cmNlcyIsImZhbmFseXRpY3MiLCJhbmFseXRpY3NQcm92aWRlciIsImluaXRpYWxpemVBbmFseXRpY3MiLCJnZXRBbmFseXRpY3MiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJzcGluVXAiLCJmZXRjaEFwcERhdGEiLCJTZXRGZWVkYmFja1RleHQiLCJnYW1lIiwiYXVkaW9JdGVtVVJMIiwibnV1aWQiLCJzZXRVdWlkIiwiZ2V0VXNlclNvdXJjZSIsImxpbmtBbmFseXRpY3MiLCJzZXRBc3Nlc3NtZW50VHlwZSIsInNlbmRJbml0IiwicmVnaXN0ZXJTZXJ2aWNlV29ya2VyIiwicmVnaXN0cmF0aW9uIiwiaGFuZGxlU2VydmljZVdvcmtlclJlZ2lzdGF0aW9uIiwicmVhZHkiLCJhcHBEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==