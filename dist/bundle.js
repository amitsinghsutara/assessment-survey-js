/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={};function t(){var e=n().get("data");return null==e&&(console.log("default data file"),e="zulu-lettersounds"),e}function n(){const e=window.location.search;return new URLSearchParams(e)}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var i=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};function r(e){return"/data/"+e+".json"}function a(e){return i(this,void 0,void 0,(function*(){var t=r(e);return fetch(t).then((e=>e.json()))}))}class s{constructor(){this.imageToCache=[],this.wavToCache=[],this.allAudios={},this.allImages={},this.dataURL="",this.correctSoundPath="dist/audio/Correct.wav",this.feedbackAudio=null,this.correctAudio=null}init(){this.feedbackAudio=new Audio,this.feedbackAudio.src=this.correctSoundPath,this.correctAudio=new Audio}static PrepareAudioAndImagesForSurvey(e,t){s.getInstance().dataURL=t;const n="audio/"+s.getInstance().dataURL+"/answer_feedback.mp3";for(var i in s.getInstance().wavToCache.push(n),s.getInstance().correctAudio.src=n,e){let t=e[i];for(var r in null!=t.promptAudio&&s.FilterAndAddAudioToAllAudios(t.promptAudio),null!=t.promptImg&&s.AddImageToAllImages(t.promptImg),t.answers){let e=t.answers[r];null!=e.answerImg&&s.AddImageToAllImages(e.answerImg)}}console.log(s.getInstance().allAudios),console.log(s.getInstance().allImages)}static AddImageToAllImages(e){console.log("Add image: "+e);let t=new Image;t.src=e,s.getInstance().allImages[e]=t}static FilterAndAddAudioToAllAudios(e){console.log("Adding audio: "+e),e.includes(".wav")?e=e.replace(".wav",".mp3"):e.includes(".mp3")||(e=e.trim()+".mp3"),console.log("Filtered: "+e);let t=new Audio;["luganda"].includes(s.getInstance().dataURL.split("-")[0])?t.src="audio/"+s.getInstance().dataURL+"/"+e.toLowerCase():t.src="audio/"+s.getInstance().dataURL+"/"+e,s.getInstance().allAudios[e]=t,console.log(t.src)}static PreloadBucket(e,t){for(var n in s.getInstance().dataURL=t,s.getInstance().correctAudio.src="audio/"+s.getInstance().dataURL+"/answer_feedback.mp3",e.items){var i=e.items[n];s.FilterAndAddAudioToAllAudios(i.itemName)}}static PlayAudio(e,t,n){console.log("trying to play "+e),e.includes(".mp3")?".mp3"!=e.slice(-4)&&(e=e.trim()+".mp3"):e=e.trim()+".mp3",console.log("Pre play all audios: "),console.log(s.getInstance().allAudios),new Promise(((t,i)=>{const r=s.getInstance().allAudios[e];r?(r.addEventListener("play",(()=>{void 0!==n&&n(!0)})),r.addEventListener("ended",(()=>{void 0!==n&&n(!1),t()})),r.play().catch((e=>{console.error("Error playing audio:",e),t()}))):(console.warn("Audio file not found:",e),t())})).then((()=>{void 0!==t&&t()})).catch((e=>{console.error("Promise error:",e)}))}static GetImage(e){return s.getInstance().allImages[e]}static PlayDing(){s.getInstance().feedbackAudio.play()}static PlayCorrect(){s.getInstance().correctAudio.play()}static getInstance(){return null==s.instance&&(s.instance=new s,s.instance.init()),s.instance}}function o(e){return e[Math.floor(Math.random()*e.length)]}function c(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}s.instance=null;class l{constructor(){this.landingContainerId="landWrap",this.gameContainerId="gameWrap",this.endContainerId="endWrap",this.starContainerId="starWrapper",this.chestContainerId="chestWrapper",this.questionsContainerId="qWrap",this.feedbackContainerId="feedbackWrap",this.answersContainerId="aWrap",this.answerButton1Id="answerButton1",this.answerButton2Id="answerButton2",this.answerButton3Id="answerButton3",this.answerButton4Id="answerButton4",this.answerButton5Id="answerButton5",this.answerButton6Id="answerButton6",this.playButtonId="pbutton",this.chestImgId="chestImage",this.nextQuestion=null,this.contentLoaded=!1,this.shown=!1,this.stars=[],this.qAnsNum=0,this.buttons=[],this.buttonsActive=!0}init(){this.landingContainer=document.getElementById(this.landingContainerId),this.gameContainer=document.getElementById(this.gameContainerId),this.endContainer=document.getElementById(this.endContainerId),this.starContainer=document.getElementById(this.starContainerId),this.chestContainer=document.getElementById(this.chestContainerId),this.questionsContainer=document.getElementById(this.questionsContainerId),this.feedbackContainer=document.getElementById(this.feedbackContainerId),this.answersContainer=document.getElementById(this.answersContainerId),this.answerButton1=document.getElementById(this.answerButton1Id),this.answerButton2=document.getElementById(this.answerButton2Id),this.answerButton3=document.getElementById(this.answerButton3Id),this.answerButton4=document.getElementById(this.answerButton4Id),this.answerButton5=document.getElementById(this.answerButton5Id),this.answerButton6=document.getElementById(this.answerButton6Id),this.playButton=document.getElementById(this.playButtonId),this.chestImg=document.getElementById(this.chestImgId),this.initializeStars(),this.initEventListeners()}initializeStars(){for(let e=0;e<20;e++){const t=document.createElement("img");t.id="star"+e,t.classList.add("topstarh"),this.starContainer.appendChild(t),this.starContainer.innerHTML+="",9==e&&(this.starContainer.innerHTML+="<br>"),this.stars.push(e)}c(this.stars)}initEventListeners(){this.answerButton1.addEventListener("click",(()=>{this.answerButtonPress(1)})),this.buttons.push(this.answerButton1),this.answerButton2.addEventListener("click",(()=>{this.answerButtonPress(2)})),this.buttons.push(this.answerButton2),this.answerButton3.addEventListener("click",(()=>{this.answerButtonPress(3)})),this.buttons.push(this.answerButton3),this.answerButton4.addEventListener("click",(()=>{this.answerButtonPress(4)})),this.buttons.push(this.answerButton4),this.answerButton5.addEventListener("click",(()=>{this.answerButtonPress(5)})),this.buttons.push(this.answerButton5),this.answerButton6.addEventListener("click",(()=>{this.answerButtonPress(6)})),this.buttons.push(this.answerButton6),this.landingContainer.addEventListener("click",(()=>{localStorage.getItem(t())&&this.showGame()}))}showOptions(){if(!l.getInstance().shown){const e=l.getInstance().nextQuestion,t=l.getInstance().buttons,n=1e3,i=200;l.getInstance().shown=!0,t.forEach((e=>{e.style.visibility="hidden",e.style.animation=""})),setTimeout((()=>{for(let i=0;i<e.answers.length;i++){const r=e.answers[i],a=t[i];a.innerHTML="answerText"in r?r.answerText:"",a.style.visibility="hidden",setTimeout((()=>{if(a.style.visibility="visible",a.style.animation=`zoomIn ${n}ms ease forwards`,"answerImg"in r){const e=s.GetImage(r.answerImg);a.appendChild(e)}}),i*n)}}),i),l.getInstance().qStart=Date.now()}}static SetFeedbackText(e){console.log("Feedback text set to "+e),l.getInstance().feedbackContainer.innerHTML=e}showLanding(){this.landingContainer.style.display="flex",this.gameContainer.style.display="none",this.endContainer.style.display="none"}static ShowEnd(){l.getInstance().landingContainer.style.display="none",l.getInstance().gameContainer.style.display="none",l.getInstance().endContainer.style.display="flex"}showGame(){this.landingContainer.style.display="none",this.gameContainer.style.display="grid",this.endContainer.style.display="none",this.allStart=Date.now(),this.startPressCallback()}static SetFeedbackVisibile(e){e?(l.getInstance().feedbackContainer.classList.remove("hidden"),l.getInstance().feedbackContainer.classList.add("visible"),s.PlayCorrect(),l.getInstance().buttonsActive=!1):(l.getInstance().feedbackContainer.classList.remove("visible"),l.getInstance().feedbackContainer.classList.add("hidden"),l.getInstance().buttonsActive=!0)}static ReadyForNext(e){for(var t in console.log("ready for next!"),l.getInstance().answersContainer.style.visibility="hidden",l.getInstance().buttons)l.getInstance().buttons[t].style.visibility="hidden";l.getInstance().shown=!1,l.getInstance().nextQuestion=e,l.getInstance().questionsContainer.innerHTML="",l.getInstance().questionsContainer.style.display="none",l.getInstance().playButton.innerHTML="<button id='nextqButton'><img class=audio-button width='85px' height='85px' src='/img/SoundButton_Idle.png' type='image/svg+xml'> </img></button>",document.getElementById("nextqButton").addEventListener("click",(function(){l.ShowQuestion(),s.PlayAudio(e.promptAudio,l.getInstance().showOptions,l.ShowAudioAnimation)}))}static ShowAudioAnimation(e=!1){l.getInstance().playButton.querySelector("img").src=e?"animation/SoundButton.gif":"/img/SoundButton_Idle.png"}static ShowQuestion(e){l.getInstance().playButton.innerHTML="<button id='nextqButton'><img class=audio-button width='85px' height='85px' src='/img/SoundButton_Idle.png' type='image/svg+xml'> </img></button>",document.getElementById("nextqButton").addEventListener("click",(function(){console.log("next question button pressed"),console.log(e.promptAudio),"promptAudio"in e&&s.PlayAudio(e.promptAudio,void 0,l.ShowAudioAnimation)})),l.getInstance().answersContainer.style.visibility="visible";let t="";if(l.getInstance().questionsContainer.innerHTML="",void 0===e&&(e=l.getInstance().nextQuestion),"promptImg"in e){var n=s.GetImage(e.promptImg);l.getInstance().questionsContainer.appendChild(n)}for(var i in t+=e.promptText,t+="<BR>",l.getInstance().questionsContainer.innerHTML+=t,l.getInstance().buttons)l.getInstance().buttons[i].style.visibility="hidden"}static AddStar(){var e=document.getElementById("star"+l.getInstance().stars[l.getInstance().qAnsNum]);e.src="../animation/Star.gif",e.classList.add("topstarv"),e.classList.remove("topstarh"),l.getInstance().qAnsNum+=1}static ChangeStarImageAfterAnimation(){document.getElementById("star"+l.getInstance().stars[l.getInstance().qAnsNum-1]).src="../img/star_after_animation.gif"}answerButtonPress(e){if(this.buttonsActive){s.PlayDing();const t=Date.now()-this.qStart;console.log("answered in "+t),this.buttonPressCallback(e,t)}}static ProgressChest(){const e=document.getElementById("chestImage");let t=e.src;console.log("Chest Progression--\x3e",e),console.log("Chest Progression--\x3e",e.src);const n=parseInt(t.slice(-6,-4),10);console.log("Chest Progression number--\x3e",n);const i=`img/chestprogression/TreasureChestOpen0${n%4+1}.svg`;e.src=i}static SetContentLoaded(e){l.getInstance().contentLoaded=e}static SetButtonPressAction(e){l.getInstance().buttonPressCallback=e}static SetStartAction(e){l.getInstance().startPressCallback=e}static getInstance(){return null===l.instance&&(l.instance=new l,l.instance.init()),l.instance}}l.instance=null;const u=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],a=t+1<e.length,s=a?e[t+1]:0,o=t+2<e.length,c=o?e[t+2]:0,l=r>>2,u=(3&r)<<4|s>>4;let d=(15&s)<<2|c>>6,h=63&c;o||(h=64,a||(d=64)),i.push(n[l],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&a)}else if(r>239&&r<365){const a=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(a>>10)),t[i++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],s=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const s=t<e.length?n[e.charAt(t)]:64;++t;const o=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==a||null==s||null==o)throw Error();const c=r<<2|a>>4;if(i.push(c),64!==s){const e=a<<4&240|s>>2;if(i.push(e),64!==o){const e=s<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){return function(e){const t=u(e);return d.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function p(){return"object"==typeof indexedDB}function g(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}const f=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return d.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class w extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],a=r?function(e,t){return e.replace(y,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new w(i,s,n)}}const y=/\{\$([^}]+)}/g;function b(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],a=t[r];if(I(n)&&I(a)){if(!b(n,a))return!1}else if(n!==a)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function I(e){return null!==e&&"object"==typeof e}function S(e,t=1e3,n=2){const i=t*Math.pow(n,e),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function k(e){return e&&e._delegate?e._delegate:e}class C{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const E="[DEFAULT]";class B{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:E})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===E?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:E:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class A{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new B(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const T=[];var D;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(D||(D={}));const L={debug:D.DEBUG,verbose:D.VERBOSE,info:D.INFO,warn:D.WARN,error:D.ERROR,silent:D.SILENT},N=D.INFO,P={[D.DEBUG]:"log",[D.VERBOSE]:"log",[D.INFO]:"info",[D.WARN]:"warn",[D.ERROR]:"error"},x=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=P[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class M{constructor(e){this.name=e,this._logLevel=N,this._logHandler=x,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in D))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?L[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,D.DEBUG,...e),this._logHandler(this,D.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,D.VERBOSE,...e),this._logHandler(this,D.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,D.INFO,...e),this._logHandler(this,D.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,D.WARN,...e),this._logHandler(this,D.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,D.ERROR,...e),this._logHandler(this,D.ERROR,...e)}}let R,O;const F=new WeakMap,j=new WeakMap,U=new WeakMap,$=new WeakMap,q=new WeakMap;let H={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return j.get(e);if("objectStoreNames"===t)return e.objectStoreNames||U.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return z(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function W(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(O||(O=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(V(this),e),z(F.get(this))}:function(...e){return z(t.apply(V(this),e))}:function(e,...n){const i=t.call(V(this),e,...n);return U.set(i,e.sort?e.sort():[e]),z(i)}:(e instanceof IDBTransaction&&function(e){if(j.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=()=>{t(),i()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)}));j.set(e,t)}(e),n=e,(R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,H):e);var t,n}function z(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",a)},r=()=>{t(z(e.result)),i()},a=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&F.set(t,e)})).catch((()=>{})),q.set(t,e),t}(e);if($.has(e))return $.get(e);const t=W(e);return t!==e&&($.set(e,t),q.set(t,e)),t}const V=e=>q.get(e);function Q(e,t,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const s=indexedDB.open(e,t),o=z(s);return i&&s.addEventListener("upgradeneeded",(e=>{i(z(s.result),e.oldVersion,e.newVersion,z(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),o.then((e=>{a&&e.addEventListener("close",(()=>a())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),o}const G=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],J=new Map;function Y(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(J.get(t))return J.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=K.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!G.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,r?"readwrite":"readonly");let s=a.store;return i&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),r&&a.done]))[0]};return J.set(t,a),a}var Z;Z=H,H={...Z,get:(e,t,n)=>Y(e,t)||Z.get(e,t,n),has:(e,t)=>!!Y(e,t)||Z.has(e,t)};class X{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ee="@firebase/app",te="0.8.2",ne=new M("@firebase/app"),ie="[DEFAULT]",re={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ae=new Map,se=new Map;function oe(e,t){try{e.container.addComponent(t)}catch(n){ne.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ce(e){const t=e.name;if(se.has(t))return ne.debug(`There were multiple attempts to register component ${t}.`),!1;se.set(t,e);for(const t of ae.values())oe(t,e);return!0}function le(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ue=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class de{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new C("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ue.create("app-deleted",{appName:this._name})}}function he(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:ie,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw ue.create("bad-app-name",{appName:String(r)});var a;if(n||(n=null===(a=f())||void 0===a?void 0:a.config),!n)throw ue.create("no-options");const s=ae.get(r);if(s){if(b(n,s.options)&&b(i,s.config))return s;throw ue.create("duplicate-app",{appName:r})}const o=new A(r);for(const e of se.values())o.addComponent(e);const c=new de(n,i,o);return ae.set(r,c),c}function pe(e,t,n){var i;let r=null!==(i=re[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const a=r.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=[`Unable to register library "${r}" with version "${t}":`];return a&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ne.warn(e.join(" "))}ce(new C(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const ge="firebase-heartbeat-store";let fe=null;function me(){return fe||(fe=Q("firebase-heartbeat-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(ge)}}).catch((e=>{throw ue.create("idb-open",{originalErrorMessage:e.message})}))),fe}async function we(e,t){var n;try{const n=(await me()).transaction(ge,"readwrite"),i=n.objectStore(ge);return await i.put(t,ve(e)),n.done}catch(e){if(e instanceof w)ne.warn(e.message);else{const t=ue.create("idb-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message});ne.warn(t.message)}}}function ve(e){return`${e.name}!${e.options.appId}`}class ye{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ie(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=be();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=be(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Se(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Se(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=h(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function be(){return(new Date).toISOString().substring(0,10)}class Ie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!p()&&g().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){var t;try{return(await me()).transaction(ge).objectStore(ge).get(ve(e))}catch(e){if(e instanceof w)ne.warn(e.message);else{const n=ue.create("idb-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message});ne.warn(n.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return we(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return we(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Se(e){return h(JSON.stringify({version:2,heartbeats:e})).length}ce(new C("platform-logger",(e=>new X(e)),"PRIVATE")),ce(new C("heartbeat",(e=>new ye(e)),"PRIVATE")),pe(ee,te,""),pe(ee,te,"esm2017"),pe("fire-js","");const ke="@firebase/installations",Ce="0.5.15",Ee="w:0.5.15",Be=new v("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ae(e){return e instanceof w&&e.code.includes("request-failed")}function Te({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function De(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Le(e,t){const n=(await t.json()).error;return Be.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function _e({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function Ne(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Pe(e){return new Promise((t=>{setTimeout(t,e)}))}const xe=/^[cdef][\w-]{21}$/;function Me(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return xe.test(t)?t:""}catch(e){return""}}function Re(e){return`${e.appName}!${e.appId}`}const Oe=new Map;function Fe(e,t){const n=Re(e);je(n,t),function(e,t){const n=(!Ue&&"BroadcastChannel"in self&&(Ue=new BroadcastChannel("[Firebase] FID Change"),Ue.onmessage=e=>{je(e.data.key,e.data.fid)}),Ue);n&&n.postMessage({key:e,fid:t}),0===Oe.size&&Ue&&(Ue.close(),Ue=null)}(n,t)}function je(e,t){const n=Oe.get(e);if(n)for(const e of n)e(t)}let Ue=null;const $e="firebase-installations-store";let qe=null;function He(){return qe||(qe=Q("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore($e)}})),qe}async function We(e,t){const n=Re(e),i=(await He()).transaction($e,"readwrite"),r=i.objectStore($e),a=await r.get(n);return await r.put(t,n),await i.done,a&&a.fid===t.fid||Fe(e,t.fid),t}async function ze(e){const t=Re(e),n=(await He()).transaction($e,"readwrite");await n.objectStore($e).delete(t),await n.done}async function Ve(e,t){const n=Re(e),i=(await He()).transaction($e,"readwrite"),r=i.objectStore($e),a=await r.get(n),s=t(a);return void 0===s?await r.delete(n):await r.put(s,n),await i.done,!s||a&&a.fid===s.fid||Fe(e,s.fid),s}async function Qe(e){let t;const n=await Ve(e.appConfig,(n=>{const i=function(e){return Je(e||{fid:Me(),registrationStatus:0})}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Be.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Te(e),r=_e(e),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const s={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:Ee},o={method:"POST",headers:r,body:JSON.stringify(s)},c=await Ne((()=>fetch(i,o)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:De(e.authToken)}}throw await Le("Create Installation",c)}(e,t);return We(e.appConfig,n)}catch(n){throw Ae(n)&&409===n.customData.serverCode?await ze(e.appConfig):await We(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ge(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Ge(e){let t=await Ke(e.appConfig);for(;1===t.registrationStatus;)await Pe(100),t=await Ke(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Qe(e);return n||t}return t}function Ke(e){return Ve(e,(e=>{if(!e)throw Be.create("installation-not-found");return Je(e)}))}function Je(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Ye({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${Te(e)}/${t}/authTokens:generate`}(e,n),r=function(e,{refreshToken:t}){const n=_e(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}(e,n),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&r.append("x-firebase-client",e)}const s={installation:{sdkVersion:Ee,appId:e.appId}},o={method:"POST",headers:r,body:JSON.stringify(s)},c=await Ne((()=>fetch(i,o)));if(c.ok)return De(await c.json());throw await Le("Generate Auth Token",c)}async function Ze(e,t=!1){let n;const i=await Ve(e.appConfig,(i=>{if(!et(i))throw Be.create("not-registered");const r=i.authToken;if(!t&&(2===(a=r).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(a)))return i;var a;if(1===r.requestStatus)return n=async function(e,t){let n=await Xe(e.appConfig);for(;1===n.authToken.requestStatus;)await Pe(100),n=await Xe(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Ze(e,t):i}(e,t),i;{if(!navigator.onLine)throw Be.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Ye(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await We(e.appConfig,i),n}catch(n){if(!Ae(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await We(e.appConfig,n)}else await ze(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Xe(e){return Ve(e,(e=>{if(!et(e))throw Be.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function et(e){return void 0!==e&&2===e.registrationStatus}function tt(e){return Be.create("missing-app-config-values",{valueName:e})}const nt="installations";ce(new C(nt,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw tt("App Configuration");if(!e.name)throw tt("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw tt(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:le(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ce(new C("installations-internal",(e=>{const t=le(e.getProvider("app").getImmediate(),nt).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Qe(t);return i?i.catch(console.error):Ze(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await Qe(e);t&&await t}(n),(await Ze(n,t)).token}(t,e)}}),"PRIVATE")),pe(ke,Ce),pe(ke,Ce,"esm2017");const it="analytics",rt="https://www.googletagmanager.com/gtag/js",at=new M("@firebase/analytics");function st(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const ot=new v("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ct=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function lt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ut(e,t=ct,n){const{appId:i,apiKey:r,measurementId:a}=e.options;if(!i)throw ot.create("no-app-id");if(!r){if(a)return{measurementId:a,appId:i};throw ot.create("no-api-key")}const s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new ht;return setTimeout((async()=>{o.abort()}),void 0!==n?n:6e4),dt({appId:i,apiKey:r,measurementId:a},s,o,t)}async function dt(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=ct){var a,s;const{appId:o,measurementId:c}=e;try{await function(e,t){return new Promise(((n,i)=>{const r=Math.max(t-Date.now(),0),a=setTimeout(n,r);e.addEventListener((()=>{clearTimeout(a),i(ot.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(c)return at.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null===(a=e)||void 0===a?void 0:a.message}]`),{appId:o,measurementId:c};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:lt(i)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),s=await fetch(a,r);if(200!==s.status&&304!==s.status){let e="";try{const n=await s.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw ot.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}(e);return r.deleteThrottleMetadata(o),t}catch(t){const a=t;if(!function(e){if(!(e instanceof w&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(a)){if(r.deleteThrottleMetadata(o),c)return at.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==a?void 0:a.message}]`),{appId:o,measurementId:c};throw t}const l=503===Number(null===(s=null==a?void 0:a.customData)||void 0===s?void 0:s.httpStatus)?S(n,r.intervalMillis,30):S(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return r.setThrottleMetadata(o,u),at.debug(`Calling attemptFetch again in ${l} millis`),dt(e,u,i,r)}}class ht{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let pt,gt;async function ft(e,t,n,i,r,a,s){var o;const c=ut(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&at.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>at.error(e))),t.push(c);const l=async function(){var e;if(!p())return at.warn(ot.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await g()}catch(t){return at.warn(ot.create("indexeddb-unavailable",{errorInfo:null===(e=t)||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(rt)&&n.src.includes(e))return n;return null})(a)||function(e,t){const n=document.createElement("script");n.src=`${rt}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(a,u.measurementId),gt&&(r("consent","default",gt),gt=void 0),r("js",new Date);const h=null!==(o=null==s?void 0:s.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),r("config",u.measurementId,h),pt&&(r("set",pt),pt=void 0),u.measurementId}class mt{constructor(e){this.app=e}_delete(){return delete wt[this.app.options.appId],Promise.resolve()}}let wt={},vt=[];const yt={};let bt,It,St="dataLayer",kt=!1;function Ct(e,t,n){!function(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=ot.create("invalid-analytics-context",{errorInfo:t});at.warn(n.message)}}();const i=e.options.appId;if(!i)throw ot.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ot.create("no-api-key");at.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wt[i])throw ot.create("already-exists",{id:i});if(!kt){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let a=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(a=window.gtag),window.gtag=function(e,t,n,i){return async function(r,a,s){try{"event"===r?await async function(e,t,n,i,r){try{let a=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=await st(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),r=e&&t[e.appId];if(!r){a=[];break}a.push(r)}}0===a.length&&(a=Object.values(t)),await Promise.all(a),e("event",i,r||{})}catch(e){at.error(e)}}(e,t,n,a,s):"config"===r?await async function(e,t,n,i,r,a){const s=i[r];try{if(s)await t[s];else{const e=(await st(n)).find((e=>e.measurementId===r));e&&await t[e.appId]}}catch(e){at.error(e)}e("config",r,a)}(e,t,n,i,a,s):"consent"===r?e("consent","update",s):e("set",a)}catch(e){at.error(e)}}}(a,e,t,n),{gtagCore:a,wrappedGtag:window.gtag}}(wt,vt,yt);It=e,bt=t,kt=!0}return wt[i]=ft(e,vt,yt,t,bt,St,n),new mt(e)}function Et(e,t,n,i){e=k(e),async function(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(It,wt[e.app.options.appId],t,n,i).catch((e=>at.error(e)))}const Bt="@firebase/analytics",At="0.8.3";var Tt,Dt,Lt,_t,Nt,Pt,xt,Mt,Rt,Ot;function Ft(e){return e&&""!==e&&e.includes("-")?e.split("-")[0]:"NotAvailable"}function jt(e){return e&&""!==e&&e.includes("-")?e.split("-")[1]:"NotAvailable"}function Ut(e,t,n){var i=e.answers[t-1],r=null,a=null;"correct"in e&&null!=e.correct&&(r=e.correct==i.answerName),"bucket"in e&&(a=e.bucket);var s="user "+Tt+" answered "+e.qName+" with "+i.answerName;s+=", all answers were [";var o="";for(var c in e.answers)s+=e.answers[c].answerName+",",o+=e.answers[c].answerName+",";s+="] ",s+=r,s+=a,console.log(s),Et(Nt,"answered",{type:"answered",clUserId:Tt,userSource:Dt,lat:Lt,lon:_t,city:xt,region:Mt,country:Rt,app:jt(Ot),language:Ft(Ot),dt:n,question_number:e.qNumber,target:e.qTarget,question:e.promptText,selected_answer:i.answerName,iscorrect:r,options:o,bucket:a})}function $t(e,t){var n=e.bucketID,i=e.numTried,r=e.numCorrect,a="user "+Tt+" finished the bucket "+n;console.log(a),Et(Nt,"bucketCompleted",{type:"bucketCompleted",clUserId:Tt,userSource:Dt,lat:Lt,lon:_t,city:xt,region:Mt,country:Rt,app:jt(Ot),language:Ft(Ot),bucketNumber:n,numberTriedInBucket:i,numberCorrectInBucket:r,passedBucket:t})}function qt(e=null){let t="user "+Tt+" finished the assessment";console.log(t);let n=function(e){let t=0;for(const n in e){const i=e[n];i.tested&&!i.passed&&(0==t||i.bucketID<t)&&(t=i.bucketID)}return t}(e),i=function(e){let t=0;for(const n in e){const i=e[n];i.tested&&i.passed&&(0==t||i.bucketID>t)&&(t=i.bucketID)}return t}(e);0==n&&(n=i);let r=function(e,t){console.log("Calculating score"),console.log(e);let n=0;console.log("Basal Bucket ID: "+t);let i=0;for(const n in e){const r=e[n];if(r.bucketID==t){i=r.numCorrect;break}}return n=0|Math.round(100*(t-1)+i/5*100),n}(e,n);const a=100*e.length;console.log("Sending completed event"),console.log("Score: "+r),console.log("Max Score: "+a),console.log("Basal Bucket: "+n),console.log("Ceiling Bucket: "+i),Et(Nt,"completed",{type:"completed",clUserId:Tt,userSource:Dt,app:jt(Ot),language:Ft(Ot),lat:Lt,lon:_t,city:xt,region:Mt,country:Rt,score:r,maxScore:a,basalBucket:n,ceilingBucket:i})}ce(new C(it,((e,{options:t})=>Ct(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),ce(new C("analytics-internal",(function(e){try{const t=e.getProvider(it).getImmediate();return{logEvent:(e,n,i)=>Et(t,e,n,i)}}catch(e){throw ot.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),pe(Bt,At),pe(Bt,At,"esm2017");class Ht{onEnd(){qt(),l.ShowEnd(),this.app.unityBridge.SendClose()}}var Wt;class zt extends Ht{constructor(e,t){super(),this.startSurvey=()=>{l.ReadyForNext(this.getNextQuestion())},this.onQuestionEnd=()=>{l.SetFeedbackVisibile(!1),this.currentQuestionIndex+=1,setTimeout((()=>{this.HasQuestionsLeft()?l.ReadyForNext(this.getNextQuestion()):(console.log("There are no questions left."),this.onEnd())}),500)},this.TryAnswer=(e,t)=>{Ut(this.questionsData[this.currentQuestionIndex],e,t),l.SetFeedbackVisibile(!0),l.AddStar(),setTimeout((()=>{this.onQuestionEnd()}),2e3)},this.buildQuestionList=()=>function(e){return i(this,void 0,void 0,(function*(){return a(e).then((e=>e.questions))}))}(this.app.dataURL),console.log("Survey initialized"),this.dataURL=e,this.unityBridge=t,this.currentQuestionIndex=0,l.SetButtonPressAction(this.TryAnswer),l.SetStartAction(this.startSurvey)}Run(e){return t=this,n=void 0,r=function*(){this.app=e,this.buildQuestionList().then((e=>{this.questionsData=e,s.PrepareAudioAndImagesForSurvey(this.questionsData,this.app.GetDataURL()),this.unityBridge.SendLoaded()}))},new((i=void 0)||(i=Promise))((function(e,a){function s(e){try{c(r.next(e))}catch(e){a(e)}}function o(e){try{c(r.throw(e))}catch(e){a(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,o)}c((r=r.apply(t,n||[])).next())}));var t,n,i,r}HasQuestionsLeft(){return this.currentQuestionIndex<=this.questionsData.length-1}getNextQuestion(){return this.questionsData[this.currentQuestionIndex]}}function Vt(e,t,n){if(t>n)return null;var i=parseInt((t+n)/2+"");const r={data:e[i],left:null,right:null};return r.left=Vt(e,t,i-1),r.right=Vt(e,i+1,n),r}!function(e){e[e.BinarySearch=0]="BinarySearch",e[e.LinearSearchUp=1]="LinearSearchUp",e[e.LinearSearchDown=2]="LinearSearchDown"}(Wt||(Wt={}));class Qt extends Ht{constructor(e,t){super(),this.startAssessment=()=>{l.ReadyForNext(this.getNextQuestion())},this.buildBuckets=()=>{var e=function(e){return i(this,void 0,void 0,(function*(){return a(e).then((e=>e.buckets))}))}(this.app.GetDataURL()).then((e=>{this.buckets=e,this.numBuckets=e.length,console.log("buckets: "+this.buckets),this.bucketArray=Array.from(Array(this.numBuckets),((e,t)=>t+1)),console.log("empty array "+this.bucketArray);var t=Vt(this.buckets,0,this.numBuckets);console.log(t),this.basalBucket=this.numBuckets+1,this.ceilingBucket=-1,this.currentNode=t,this.tryMoveBucket(t.data,!1)}));return e},this.initBucket=e=>{this.currentBucket=e,this.currentBucket.usedItems=[],this.currentBucket.numTried=0,this.currentBucket.numCorrect=0,this.currentBucket.numConsecutiveWrong=0,this.currentBucket.tested=!0,this.currentBucket.passed=!1},this.TryAnswer=(e,t)=>{Ut(this.currentQuestion,e,t),this.currentBucket.numTried+=1,this.currentQuestion.answers[e-1].answerName==this.currentQuestion.correct?(this.currentBucket.numCorrect+=1,this.currentBucket.numConsecutiveWrong=0,console.log("Answered correctly")):(this.currentBucket.numConsecutiveWrong+=1,console.log("Answered incorrectly, "+this.currentBucket.numConsecutiveWrong)),l.AddStar(),l.SetFeedbackVisibile(!0),setTimeout((()=>{console.log("Completed first Timeout"),this.onQuestionEnd()}),2e3)},this.onQuestionEnd=()=>{let e=this.HasQuestionsLeft()?500:4e3;const t=()=>{l.SetFeedbackVisibile(!1),l.ChangeStarImageAfterAnimation(),this.HasQuestionsLeft()?l.ReadyForNext(this.getNextQuestion()):(console.log("No questions left"),this.onEnd())};new Promise((t=>{setTimeout((()=>{t()}),e)})).then((()=>{t()}))},this.getNextQuestion=()=>{var e,t,n,i;do{e=o(this.currentBucket.items)}while(this.currentBucket.usedItems.includes(e));this.currentBucket.usedItems.push(e);do{t=o(this.currentBucket.items)}while(e==t);do{n=o(this.currentBucket.items)}while(e==n||t==n);do{i=o(this.currentBucket.items)}while(e==i||t==i||n==i);var r=[e,t,n,i];c(r);var a={qName:"question-"+this.questionNumber+"-"+e.itemName,qNumber:this.questionNumber,qTarget:e.itemName,promptText:"",bucket:this.currentBucket.bucketID,promptAudio:e.itemName,correct:e.itemText,answers:[{answerName:r[0].itemName,answerText:r[0].itemText},{answerName:r[1].itemName,answerText:r[1].itemText},{answerName:r[2].itemName,answerText:r[2].itemText},{answerName:r[3].itemName,answerText:r[3].itemText}]};return this.currentQuestion=a,this.questionNumber+=1,a},this.tryMoveBucket=(e,t)=>{null!=this.currentBucket&&(this.currentBucket.passed=t,$t(this.currentBucket,t)),console.log("new  bucket is "+e.bucketID),s.PreloadBucket(e,this.app.GetDataURL()),this.initBucket(e)},this.HasQuestionsLeft=()=>{var e=!0;return this.currentBucket.numCorrect>=4&&(console.log("passed this bucket "+this.currentBucket.bucketID),this.currentBucket.bucketID>=this.numBuckets?(console.log("passed highest bucket"),this.currentBucket.passed=!0,$t(this.currentBucket,!0),l.ProgressChest(),e=!1):(console.log("moving up bucket"),null!=this.currentNode.right?(l.ProgressChest(),console.log("moving to right node"),this.currentNode=this.currentNode.right,this.tryMoveBucket(this.currentNode.data,!0)):(console.log("reached root node"),this.currentBucket.passed=!0,$t(this.currentBucket,!0),l.ProgressChest(),e=!1))),(this.currentBucket.numConsecutiveWrong>=2||this.currentBucket.numTried>=5)&&(console.log("failed this bucket "+this.currentBucket.bucketID),this.currentBucket.bucketID<this.basalBucket&&(this.basalBucket=this.currentBucket.bucketID),this.currentBucket.bucketID<=1?(console.log("failed lowest bucket"),e=!1,this.currentBucket.passed=!1,$t(this.currentBucket,!1)):(console.log("moving down bucket"),null!=this.currentNode.left?(console.log("moving to left node"),this.currentNode=this.currentNode.left,this.tryMoveBucket(this.currentNode.data,!1)):(console.log("reached root node"),e=!1,this.currentBucket.passed=!1,$t(this.currentBucket,!1)))),e},this.dataURL=e,this.unityBridge=t,this.questionNumber=0,console.log("app initialized"),l.SetButtonPressAction(this.TryAnswer),l.SetStartAction(this.startAssessment)}Run(e){this.app=e,this.buildBuckets().then((e=>{console.log(this.currentBucket),this.unityBridge.SendLoaded()}))}onEnd(){qt(this.buckets),l.ShowEnd(),this.app.unityBridge.SendClose()}}class Gt{constructor(){"undefined"!=typeof Unity?this.unityReference=Unity:this.unityReference=null}SendMessage(e){null!==this.unityReference&&this.unityReference.call(e)}SendLoaded(){null!==this.unityReference?this.unityReference.call("loaded"):console.log("would call Unity loaded now")}SendClose(){null!==this.unityReference?this.unityReference.call("close"):console.log("would close Unity now")}}pe("firebase","9.12.1","app");try{self["workbox:window:7.0.0"]&&_()}catch(Kt){}function Kt(e,t){return new Promise((function(n){var i=new MessageChannel;i.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[i.port2])}))}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Yt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:7.0.0"]&&_()}catch(Kt){}var Zt=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function Xt(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var en=function(e,t){this.type=e,Object.assign(this,t)};function tn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function nn(){}var rn={type:"SKIP_WAITING"};function an(e,t){if(!t)return e&&e.then?e.then(nn):Promise.resolve()}var sn=function(e){var t,n;function i(t,n){var i,r;return void 0===n&&(n={}),(i=e.call(this)||this).nn={},i.tn=0,i.rn=new Zt,i.en=new Zt,i.on=new Zt,i.un=0,i.an=new Set,i.cn=function(){var e=i.fn,t=e.installing;i.tn>0||!Xt(t.scriptURL,i.sn.toString())||performance.now()>i.un+6e4?(i.vn=t,e.removeEventListener("updatefound",i.cn)):(i.hn=t,i.an.add(t),i.rn.resolve(t)),++i.tn,t.addEventListener("statechange",i.ln)},i.ln=function(e){var t=i.fn,n=e.target,r=n.state,a=n===i.vn,s={sw:n,isExternal:a,originalEvent:e};!a&&i.mn&&(s.isUpdate=!0),i.dispatchEvent(new en(r,s)),"installed"===r?i.wn=self.setTimeout((function(){"installed"===r&&t.waiting===n&&i.dispatchEvent(new en("waiting",s))}),200):"activating"===r&&(clearTimeout(i.wn),a||i.en.resolve(n))},i.dn=function(e){var t=i.hn,n=t!==navigator.serviceWorker.controller;i.dispatchEvent(new en("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:i.mn})),n||i.on.resolve(t)},i.gn=(r=function(e){var t=e.data,n=e.ports,r=e.source;return tn(i.getSW(),(function(){i.an.has(r)&&i.dispatchEvent(new en("message",{data:t,originalEvent:e,ports:n,sw:r}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}),i.sn=t,i.nn=n,navigator.serviceWorker.addEventListener("message",i.gn),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,a=i.prototype;return a.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var i=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return an(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return i.mn=Boolean(navigator.serviceWorker.controller),i.yn=i.pn(),tn(i.bn(),(function(e){i.fn=e,i.yn&&(i.hn=i.yn,i.en.resolve(i.yn),i.on.resolve(i.yn),i.yn.addEventListener("statechange",i.ln,{once:!0}));var t=i.fn.waiting;return t&&Xt(t.scriptURL,i.sn.toString())&&(i.hn=t,Promise.resolve().then((function(){i.dispatchEvent(new en("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.dn),i.fn}))}))}catch(e){return Promise.reject(e)}},a.update=function(){try{return this.fn?an(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},a.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},a.messageSW=function(e){try{return tn(this.getSW(),(function(t){return Kt(t,e)}))}catch(e){return Promise.reject(e)}},a.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Kt(this.fn.waiting,rn)},a.pn=function(){var e=navigator.serviceWorker.controller;return e&&Xt(e.scriptURL,this.sn.toString())?e:void 0},a.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return tn(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,r),i}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=Yt(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());var on=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((i=i.apply(e,t||[])).next())}))};let cn=document.getElementById("loadingScreen");const ln=new BroadcastChannel("as-message-channel");function un(e){"Loading"==e.data.msg&&function(e,t){let n=document.getElementById("progressBar");t<100?n.style.width=t+"%":t>=100&&(cn.style.display="none",l.SetContentLoaded(!0),localStorage.setItem(e.data.data.bookName,"true"),function(e){if(window.Android){let t=null!==localStorage.getItem(e);window.Android.cachedStatus(t)}}(e.data.data.bookName))}(e,parseInt(e.data.data.progress)),"UpdateFound"==e.data.msg&&(console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>.,update Found"),function(){let e="Update Found.\nPlease accept the update by pressing Ok.";1==confirm(e)?window.location.reload():e="Update will happen on the next launch."}())}ln.addEventListener("message",un);const dn=new class{constructor(){this.lang="english",this.unityBridge=new Gt,console.log("Initializing app..."),this.dataURL=t(),this.cacheModel=new class{constructor(e,t,n){this.appName=e,this.contentFilePath=t,this.audioVisualResources=n}setAppName(e){this.appName=e}setContentFilePath(e){this.contentFilePath=e}setAudioVisualResources(e){this.audioVisualResources=e}addItemToAudioVisualResources(e){this.audioVisualResources.has(e)||this.audioVisualResources.add(e)}}(this.dataURL,this.dataURL,new Set);const e=function(e=function(e="[DEFAULT]"){const t=ae.get(e);if(!t&&e===ie)return he();if(!t)throw ue.create("no-app",{appName:e});return t}()){const t=le(e=k(e),it);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=le(e,it);if(n.isInitialized()){const e=n.getImmediate();if(b(t,n.getOptions()))return e;throw ot.create("already-initialized")}return n.initialize({options:t})}(e)}(he({apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:7b1b1181864d28b49de10c",measurementId:"G-FF1159TGCF"}));this.analytics=e,Et(e,"notification_received"),Et(e,"test initialization event",{}),console.log("firebase initialized")}spinUp(){return on(this,void 0,void 0,(function*(){window.addEventListener("load",(()=>{console.log("Window Loaded!"),(()=>{on(this,void 0,void 0,(function*(){yield function(e){return i(this,void 0,void 0,(function*(){return a(e).then((e=>e))}))}(this.dataURL).then((e=>{console.log("Assessment/Survey v0.2.0 initializing!"),console.log("App data loaded!"),console.log(e),this.cacheModel.setContentFilePath(r(this.dataURL)),l.SetFeedbackText(e.feedbackText);let t=e.appType;if("survey"==t)this.game=new zt(this.dataURL,this.unityBridge);else if("assessment"==t){let t=e.buckets;for(let n=0;n<t.length;n++)for(let i=0;i<t[n].items.length;i++){let r;r=e.quizName.includes("Luganda")?"/audio/"+this.dataURL+"/"+t[n].items[i].itemName.toLowerCase().trim()+".mp3":"/audio/"+this.dataURL+"/"+t[n].items[i].itemName.trim()+".mp3",this.cacheModel.addItemToAudioVisualResources(r)}this.cacheModel.addItemToAudioVisualResources("/audio/"+this.dataURL+"/answer_feedback.mp3"),this.game=new Qt(this.dataURL,this.unityBridge)}var i,a,s,o,c;this.game.unityBridge=this.unityBridge,null==(s=n().get("cr_user_id"))&&(console.log("no uuid provided"),s="WebUserNoID"),i=s,a=function(){var e=n().get("userSource");return null==e&&(console.log("no user source provided"),e="WebUserNoSource"),e}(),Tt=i,Dt=a,o=this.analytics,c=this.dataURL,Nt=o,Ot=c,function(){console.log("starting to get location"),fetch("https://ipinfo.io/json?token=b6268727178610").then((e=>{if(console.log("got location response"),!e.ok)throw Error(e.statusText);return e.json()})).then((e=>(console.log(e),Pt=e.loc,xt=e.city,Mt=e.region,Rt=e.country,function(){var e=Pt.split(","),t=parseFloat(e[0]).toFixed(2),n=parseFloat(e[1]).toFixed(1);Lt=t,_t=n,Pt="",e=[];var i="user "+Tt+" is at location "+t+","+n;console.log(i),Et(Nt,"user_location",{user:Tt,language:Ft(Ot),app:jt(Ot),lat:t,lon:n}),console.log("INITIALIZED EVENT SENT"),console.log("App Language: "+Ft(Ot)),console.log("App Type: "+jt(Ot)),Et(Nt,"initialized",{type:"initialized",clUserId:Tt,userSource:Dt,lat:Lt,lon:_t,city:xt,region:Mt,country:Rt,app:jt(Ot),language:Ft(Ot)})}(),{}))).catch((e=>{console.warn(`location failed to update! encountered error ${e.msg}`)}));var e="user "+Tt+" opened the assessment";console.log(e),Et(Nt,"opened",{})}(),this.game.Run(this)})),yield this.registerServiceWorker(this.game)}))})()}))}))}registerServiceWorker(e){return on(this,void 0,void 0,(function*(){console.log("Registering service worker..."),"serviceWorker"in navigator?(new sn("./sw.js",{}).register().then((e=>{console.log("Service worker registered!"),this.handleServiceWorkerRegistation(e)})).catch((e=>{console.log("Service worker registration failed: "+e)})),navigator.serviceWorker.addEventListener("message",un),yield navigator.serviceWorker.ready,console.log("Cache Model: "),console.log(this.cacheModel),null==localStorage.getItem(this.cacheModel.appName)?(console.log("WE DONT HAVE THIS ASSESSMENT< CACHING IT!"),cn.style.display="flex",ln.postMessage({command:"Cache",data:{appData:this.cacheModel}})):cn.style.display="none",ln.onmessage=e=>{console.log(e.data.command+" received from service worker!"),"Activated"==e.data.command&&null==localStorage.getItem(this.cacheModel.appName)&&ln.postMessage({command:"Cache",data:{appData:this.cacheModel}})}):console.warn("Service workers are not supported in this browser.")}))}handleServiceWorkerRegistation(e){var t;try{null===(t=null==e?void 0:e.installing)||void 0===t||t.postMessage({type:"Registartion",value:this.lang})}catch(e){console.log("Service worker registration failed: "+e)}}GetDataURL(){return this.dataURL}};dn.spinUp()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BRVosTUFBT2xQLEdBQ1I3dUIsUUFBUUMsSUFBSSx1Q0FBeUM0dUIsR0FFdkQsQ0FFT2tILGFBQ04sT0FBT3QxQixLQUFLZ0IsT0FDYixHQWdERGdkLEdBQUlzZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL3VybFV0aWxzLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy9qc29uVXRpbHMudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy9hdWRpb0NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy9tYXRoVXRpbHMudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy91aUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL3dyYXAtaWRiLXZhbHVlLmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2luc3RhbGxhdGlvbnMvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYW5hbHl0aWNzL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy9hbmFseXRpY3NFdmVudHMudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvQmFzZVF1aXoudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvYXNzZXNzbWVudC9hc3Nlc3NtZW50LnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL3N1cnZleS9zdXJ2ZXkudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy90Tm9kZS50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL3VuaXR5QnJpZGdlLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy93b3JrYm94LXdpbmRvdy9idWlsZC93b3JrYm94LXdpbmRvdy5wcm9kLmVzNS5tanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvQXBwLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvY2FjaGVNb2RlbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLyoqXHJcbiAqIENvbnRhaW5zIHV0aWxzIGZvciB3b3JraW5nIHdpdGggVVJMIHN0cmluZ3MuXHJcbiAqL1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcFR5cGUoKTogc3RyaW5nIHtcclxuXHRjb25zdCBwYXRoUGFyYW1zID0gZ2V0UGF0aE5hbWUoKTtcclxuXHRjb25zdCBhcHBUeXBlID0gcGF0aFBhcmFtcy5nZXQoJ2FwcFR5cGUnKTtcclxuXHRyZXR1cm4gYXBwVHlwZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVVSUQoKTogc3RyaW5nIHtcclxuXHRjb25zdCBwYXRoUGFyYW1zID0gZ2V0UGF0aE5hbWUoKTtcclxuXHR2YXIgbnV1aWQgPSBwYXRoUGFyYW1zLmdldCgnY3JfdXNlcl9pZCcpO1xyXG5cdGlmIChudXVpZCA9PSB1bmRlZmluZWQpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwibm8gdXVpZCBwcm92aWRlZFwiKTtcclxuXHRcdG51dWlkID0gXCJXZWJVc2VyTm9JRFwiXHJcblx0fVxyXG5cdHJldHVybiBudXVpZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuXHRjb25zdCBwYXRoUGFyYW1zID0gZ2V0UGF0aE5hbWUoKTtcclxuXHR2YXIgbnV1aWQgPSBwYXRoUGFyYW1zLmdldCgndXNlclNvdXJjZScpO1xyXG5cdGlmIChudXVpZCA9PSB1bmRlZmluZWQpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwibm8gdXNlciBzb3VyY2UgcHJvdmlkZWRcIik7XHJcblx0XHRudXVpZCA9IFwiV2ViVXNlck5vU291cmNlXCJcclxuXHR9XHJcblx0cmV0dXJuIG51dWlkO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YUZpbGUoKTogc3RyaW5nIHtcclxuXHRjb25zdCBwYXRoUGFyYW1zID0gZ2V0UGF0aE5hbWUoKTtcclxuXHR2YXIgZGF0YSA9IHBhdGhQYXJhbXMuZ2V0KCdkYXRhJyk7XHJcblx0aWYgKGRhdGEgPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcImRlZmF1bHQgZGF0YSBmaWxlXCIpO1xyXG5cdFx0ZGF0YSA9IFwienVsdS1sZXR0ZXJzb3VuZHNcIjtcclxuXHRcdC8vZGF0YSA9IFwic3VydmV5LXp1bHVcIjtcclxuXHR9XHJcblx0cmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBhdGhOYW1lKCkge1xyXG5cdGNvbnN0IHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcclxuXHRjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5U3RyaW5nKTtcclxuXHRyZXR1cm4gdXJsUGFyYW1zO1xyXG59XHJcbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiLyoqIEpzb24gVXRpbHMgKi9cclxuXHJcbi8vIGltcG9ydCB7IHNldEZlZWRiYWNrVGV4dCB9IGZyb20gJy4vdWlDb250cm9sbGVyJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFwcERhdGEodXJsOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gbG9hZERhdGEodXJsKS50aGVuKGRhdGEgPT4geyByZXR1cm4gZGF0YTsgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFwcFR5cGUodXJsOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gbG9hZERhdGEodXJsKS50aGVuKGRhdGEgPT4geyBcclxuXHRcdC8vIHNldEZlZWRiYWNrVGV4dChkYXRhW1wiZmVlZGJhY2tUZXh0XCJdKTsgXHJcblx0XHRyZXR1cm4gZGF0YVtcImFwcFR5cGVcIl07IFxyXG5cdH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hGZWVkYmFjayh1cmw6IHN0cmluZykge1xyXG5cdHJldHVybiBsb2FkRGF0YSh1cmwpLnRoZW4oZGF0YSA9PiB7IHJldHVybiBkYXRhW1wiZmVlZGJhY2tUZXh0XCJdOyB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoU3VydmV5UXVlc3Rpb25zKHVybDogc3RyaW5nKSB7XHJcblx0cmV0dXJuIGxvYWREYXRhKHVybCkudGhlbihkYXRhID0+IHsgcmV0dXJuIGRhdGFbXCJxdWVzdGlvbnNcIl0gfSlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQXNzZXNzbWVudEJ1Y2tldHModXJsOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gbG9hZERhdGEodXJsKS50aGVuKGRhdGEgPT4geyByZXR1cm4gZGF0YVtcImJ1Y2tldHNcIl0gfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFVUkwodXJsOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gXCIvZGF0YS9cIiArIHVybCArIFwiLmpzb25cIjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENhc2VJbmRlcGVuZGVudExhbmdMaXN0KCkge1xyXG5cdHJldHVybiBbJ2x1Z2FuZGEnXTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZERhdGEodXJsOiBzdHJpbmcpIHtcclxuXHR2YXIgZnVybCA9IGdldERhdGFVUkwodXJsKTtcclxuXHQvLyBjb25zb2xlLmxvZyhmdXJsKTtcclxuXHRyZXR1cm4gZmV0Y2goZnVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG59XHJcblxyXG5cclxuIiwiLy9jb2RlIGZvciBsb2FkaW5nIGF1ZGlvc1xyXG5cclxuaW1wb3J0IHsgcURhdGEgfSBmcm9tICcuL3F1ZXN0aW9uRGF0YSc7XHJcbmltcG9ydCB7IGJ1Y2tldCwgYnVja2V0SXRlbSB9IGZyb20gJy4uL2Fzc2Vzc21lbnQvYnVja2V0RGF0YSc7XHJcbmltcG9ydCB7IGdldENhc2VJbmRlcGVuZGVudExhbmdMaXN0IH0gZnJvbSAnLi9qc29uVXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEF1ZGlvQ29udHJvbGxlciB7XHJcblxyXG5cdHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBBdWRpb0NvbnRyb2xsZXIgfCBudWxsID0gbnVsbDtcclxuXHJcblx0cHVibGljIGltYWdlVG9DYWNoZTogc3RyaW5nW10gPSBbXTtcclxuXHRwdWJsaWMgd2F2VG9DYWNoZTogc3RyaW5nW10gPSBbXTtcclxuXHJcblx0cHVibGljIGFsbEF1ZGlvczogYW55ID0ge307XHJcblx0cHVibGljIGFsbEltYWdlczogYW55ID0ge307XHJcblx0cHVibGljIGRhdGFVUkw6IHN0cmluZyA9IFwiXCI7XHJcblxyXG5cdHByaXZhdGUgY29ycmVjdFNvdW5kUGF0aCA9IFwiZGlzdC9hdWRpby9Db3JyZWN0LndhdlwiO1xyXG5cclxuXHRwcml2YXRlIGZlZWRiYWNrQXVkaW86IGFueSA9IG51bGw7XHJcblx0cHJpdmF0ZSBjb3JyZWN0QXVkaW86IGFueSA9IG51bGw7XHJcblxyXG5cdHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcclxuXHRcdHRoaXMuZmVlZGJhY2tBdWRpbyA9IG5ldyBBdWRpbygpO1xyXG5cdFx0dGhpcy5mZWVkYmFja0F1ZGlvLnNyYyA9IHRoaXMuY29ycmVjdFNvdW5kUGF0aDtcclxuXHRcdHRoaXMuY29ycmVjdEF1ZGlvID0gbmV3IEF1ZGlvKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFByZXBhcmVBdWRpb0FuZEltYWdlc0ZvclN1cnZleShxdWVzdGlvbnNEYXRhOiBxRGF0YVtdLCBkYXRhVVJMOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmRhdGFVUkwgPSBkYXRhVVJMO1xyXG5cdFx0Y29uc3QgZmVlZGJhY2tTb3VuZFBhdGggPSAgXCJhdWRpby9cIiArIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmRhdGFVUkwgKyBcIi9hbnN3ZXJfZmVlZGJhY2subXAzXCI7XHJcblxyXG5cdFx0QXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkud2F2VG9DYWNoZS5wdXNoKGZlZWRiYWNrU291bmRQYXRoKTtcclxuXHRcdEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmNvcnJlY3RBdWRpby5zcmMgPSBmZWVkYmFja1NvdW5kUGF0aDtcclxuXHJcblx0XHRmb3IgKHZhciBxdWVzdGlvbkluZGV4IGluIHF1ZXN0aW9uc0RhdGEpe1xyXG5cdFx0XHRsZXQgcXVlc3Rpb25EYXRhID0gcXVlc3Rpb25zRGF0YVtxdWVzdGlvbkluZGV4XTtcclxuXHRcdFx0aWYgKHF1ZXN0aW9uRGF0YS5wcm9tcHRBdWRpbyAhPSBudWxsKSB7XHJcblx0XHRcdFx0QXVkaW9Db250cm9sbGVyLkZpbHRlckFuZEFkZEF1ZGlvVG9BbGxBdWRpb3MocXVlc3Rpb25EYXRhLnByb21wdEF1ZGlvKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHF1ZXN0aW9uRGF0YS5wcm9tcHRJbWcgIT0gbnVsbCApIHtcclxuXHRcdFx0XHRBdWRpb0NvbnRyb2xsZXIuQWRkSW1hZ2VUb0FsbEltYWdlcyhxdWVzdGlvbkRhdGEucHJvbXB0SW1nKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Zm9yICh2YXIgYW5zd2VySW5kZXggaW4gcXVlc3Rpb25EYXRhLmFuc3dlcnMpIHtcclxuXHRcdFx0XHRsZXQgYW5zd2VyRGF0YSA9IHF1ZXN0aW9uRGF0YS5hbnN3ZXJzW2Fuc3dlckluZGV4XTtcclxuXHRcdFx0XHRpZiAoYW5zd2VyRGF0YS5hbnN3ZXJJbWcgIT0gbnVsbCl7XHJcblx0XHRcdFx0XHRBdWRpb0NvbnRyb2xsZXIuQWRkSW1hZ2VUb0FsbEltYWdlcyhhbnN3ZXJEYXRhLmFuc3dlckltZyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRjb25zb2xlLmxvZyhBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxBdWRpb3MpO1xyXG5cdFx0Y29uc29sZS5sb2coQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsSW1hZ2VzKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgQWRkSW1hZ2VUb0FsbEltYWdlcyhuZXdJbWFnZVVSTDogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRjb25zb2xlLmxvZyhcIkFkZCBpbWFnZTogXCIgKyBuZXdJbWFnZVVSTCk7XHJcblx0XHRsZXQgbmV3SW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHRcdG5ld0ltYWdlLnNyYyA9IG5ld0ltYWdlVVJMO1xyXG5cdFx0QXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsSW1hZ2VzW25ld0ltYWdlVVJMXSA9IG5ld0ltYWdlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBGaWx0ZXJBbmRBZGRBdWRpb1RvQWxsQXVkaW9zKG5ld0F1ZGlvVVJMOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiQWRkaW5nIGF1ZGlvOiBcIiArIG5ld0F1ZGlvVVJMKTtcclxuXHRcdGlmIChuZXdBdWRpb1VSTC5pbmNsdWRlcyhcIi53YXZcIikpe1xyXG5cdFx0XHRuZXdBdWRpb1VSTCA9IG5ld0F1ZGlvVVJMLnJlcGxhY2UoXCIud2F2XCIsIFwiLm1wM1wiKTtcclxuXHRcdH0gZWxzZSBpZiAobmV3QXVkaW9VUkwuaW5jbHVkZXMoXCIubXAzXCIpKSB7XHJcblx0XHRcdC8vIEFscmVhZHkgY29udGFpbnMgLm1wMyBub3QgZG9pbmcgYW55dGhpbmdcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG5ld0F1ZGlvVVJMID0gbmV3QXVkaW9VUkwudHJpbSgpICsgXCIubXAzXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc29sZS5sb2coXCJGaWx0ZXJlZDogXCIgKyBuZXdBdWRpb1VSTCk7XHJcbiAgICAgICBcclxuXHRcdGxldCBuZXdBdWRpbyA9IG5ldyBBdWRpbygpO1xyXG5cdFx0aWYoZ2V0Q2FzZUluZGVwZW5kZW50TGFuZ0xpc3QoKS5pbmNsdWRlcyhBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMLnNwbGl0KCctJylbMF0pICApXHJcblx0XHR7XHJcblx0XHRcdG5ld0F1ZGlvLnNyYyA9IFwiYXVkaW8vXCIgKyBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMICsgXCIvXCIgKyBuZXdBdWRpb1VSTC50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdG5ld0F1ZGlvLnNyYyA9IFwiYXVkaW8vXCIgKyBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMICsgXCIvXCIgKyBuZXdBdWRpb1VSTDtcclxuXHJcblx0XHR9XHJcblx0XHRcclxuXHRcdEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFsbEF1ZGlvc1tuZXdBdWRpb1VSTF0gPSBuZXdBdWRpbztcclxuXHRcdFxyXG5cdFx0Y29uc29sZS5sb2cobmV3QXVkaW8uc3JjKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgUHJlbG9hZEJ1Y2tldChuZXdCdWNrZXQ6IGJ1Y2tldCwgZGF0YVVSTCkge1xyXG5cdFx0QXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTCA9IGRhdGFVUkw7XHJcblx0XHRBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5jb3JyZWN0QXVkaW8uc3JjID0gXCJhdWRpby9cIiArIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmRhdGFVUkwgKyBcIi9hbnN3ZXJfZmVlZGJhY2subXAzXCI7XHJcblx0XHRmb3IgKHZhciBpdGVtSW5kZXggaW4gbmV3QnVja2V0Lml0ZW1zKXtcclxuXHRcdFx0dmFyIGl0ZW0gPSBuZXdCdWNrZXQuaXRlbXNbaXRlbUluZGV4XTtcclxuXHRcdFx0QXVkaW9Db250cm9sbGVyLkZpbHRlckFuZEFkZEF1ZGlvVG9BbGxBdWRpb3MoaXRlbS5pdGVtTmFtZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFBsYXlBdWRpbyhhdWRpb05hbWU6IHN0cmluZywgZmluaXNoZWRDYWxsYmFjaz86IEZ1bmN0aW9uLCBhdWRpb0FuaW0/OiBGdW5jdGlvbik6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2coXCJ0cnlpbmcgdG8gcGxheSBcIiArIGF1ZGlvTmFtZSk7XHJcblx0XHRcclxuXHRcdGlmIChhdWRpb05hbWUuaW5jbHVkZXMoXCIubXAzXCIpKXtcclxuXHRcdFx0aWYgKGF1ZGlvTmFtZS5zbGljZSgtNCkgIT0gXCIubXAzXCIpe1xyXG5cdFx0XHRcdGF1ZGlvTmFtZSA9IGF1ZGlvTmFtZS50cmltKCkgKyBcIi5tcDNcIjtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0YXVkaW9OYW1lID0gYXVkaW9OYW1lLnRyaW0oKSArIFwiLm1wM1wiO1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0Y29uc29sZS5sb2coXCJQcmUgcGxheSBhbGwgYXVkaW9zOiBcIik7XHJcblx0XHRjb25zb2xlLmxvZyhBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxBdWRpb3MpO1xyXG5cdFxyXG5cdFx0XHJcblx0XHRjb25zdCBwbGF5UHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0Y29uc3QgYXVkaW8gPSBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxBdWRpb3NbYXVkaW9OYW1lXTtcclxuXHRcdFx0aWYgKGF1ZGlvKSB7XHJcblx0XHRcdFx0YXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlcIiwgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dHlwZW9mKGF1ZGlvQW5pbSkgIT09ICd1bmRlZmluZWQnID8gYXVkaW9BbmltKHRydWUpIDogbnVsbDtcclxuXHRcdFx0XHR9KTtcclxuXHRcclxuXHRcdFx0XHRhdWRpby5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwgKCkgPT4ge1xyXG5cdFx0XHRcdFx0dHlwZW9mKGF1ZGlvQW5pbSkgIT09ICd1bmRlZmluZWQnID8gYXVkaW9BbmltKGZhbHNlKSA6IG51bGw7XHJcblx0XHRcdFx0XHRyZXNvbHZlKCk7IFxyXG5cdFx0XHRcdH0pO1xyXG5cdFxyXG5cdFx0XHRcdGF1ZGlvLnBsYXkoKS5jYXRjaCgoZXJyb3IpID0+IHtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwbGF5aW5nIGF1ZGlvOlwiLCBlcnJvcik7XHJcblx0XHRcdFx0XHRyZXNvbHZlKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiQXVkaW8gZmlsZSBub3QgZm91bmQ6XCIsIGF1ZGlvTmFtZSk7XHJcblx0XHRcdFx0cmVzb2x2ZSgpOyBcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHJcblx0XHRcclxuXHRcdHBsYXlQcm9taXNlLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHR0eXBlb2YoZmluaXNoZWRDYWxsYmFjaykgIT09ICd1bmRlZmluZWQnID8gZmluaXNoZWRDYWxsYmFjaygpIDogbnVsbDtcclxuXHRcdH0pLmNhdGNoKGVycm9yID0+IHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIlByb21pc2UgZXJyb3I6XCIsIGVycm9yKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRcclxuXHJcblx0cHVibGljIHN0YXRpYyBHZXRJbWFnZShpbWFnZU5hbWU6IHN0cmluZyk6IGFueSB7XHJcblx0XHRyZXR1cm4gQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsSW1hZ2VzW2ltYWdlTmFtZV07XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFBsYXlEaW5nKCk6IHZvaWQge1xyXG5cdFx0QXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZmVlZGJhY2tBdWRpby5wbGF5KCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFBsYXlDb3JyZWN0KCk6IHZvaWQge1xyXG5cdFx0QXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuY29ycmVjdEF1ZGlvLnBsYXkoKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogQXVkaW9Db250cm9sbGVyIHtcclxuXHRcdGlmIChBdWRpb0NvbnRyb2xsZXIuaW5zdGFuY2UgPT0gbnVsbCkge1xyXG5cdFx0XHRBdWRpb0NvbnRyb2xsZXIuaW5zdGFuY2UgPSBuZXcgQXVkaW9Db250cm9sbGVyKCk7XHJcblx0XHRcdEF1ZGlvQ29udHJvbGxlci5pbnN0YW5jZS5pbml0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIEF1ZGlvQ29udHJvbGxlci5pbnN0YW5jZTtcclxuXHR9XHJcbn0iLCJcclxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRGcm9tKGFycmF5KSB7XHJcblx0cmV0dXJuIGFycmF5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5Lmxlbmd0aCldXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlQXJyYXkoYXJyYXkpIHtcclxuXHRmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xyXG5cdFx0Y29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xyXG5cdFx0W2FycmF5W2ldLCBhcnJheVtqXV0gPSBbYXJyYXlbal0sIGFycmF5W2ldXTtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHsgcURhdGEsIGFuc3dlckRhdGEgfSBmcm9tICcuL3F1ZXN0aW9uRGF0YSc7XHJcbmltcG9ydCB7IEF1ZGlvQ29udHJvbGxlciB9IGZyb20gJy4vYXVkaW9Db250cm9sbGVyJztcclxuaW1wb3J0IHsgcmFuZEZyb20sIHNodWZmbGVBcnJheSB9IGZyb20gJy4vbWF0aFV0aWxzJztcclxuaW1wb3J0IHsgZ2V0RGF0YUZpbGUgfSBmcm9tICcuL3VybFV0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBVSUNvbnRyb2xsZXIge1xyXG5cdFxyXG5cdHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBVSUNvbnRyb2xsZXIgfCBudWxsID0gbnVsbDtcclxuXHJcblx0cHJpdmF0ZSBsYW5kaW5nQ29udGFpbmVySWQgPSBcImxhbmRXcmFwXCI7XHJcblx0cHVibGljIGxhbmRpbmdDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIGdhbWVDb250YWluZXJJZCA9IFwiZ2FtZVdyYXBcIjtcclxuXHRwdWJsaWMgZ2FtZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgZW5kQ29udGFpbmVySWQgPSBcImVuZFdyYXBcIjtcclxuXHRwdWJsaWMgZW5kQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBzdGFyQ29udGFpbmVySWQgPSBcInN0YXJXcmFwcGVyXCI7XHJcblx0cHVibGljIHN0YXJDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIGNoZXN0Q29udGFpbmVySWQgPSAnY2hlc3RXcmFwcGVyJztcclxuXHRwdWJsaWMgY2hlc3RDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIHF1ZXN0aW9uc0NvbnRhaW5lcklkID0gXCJxV3JhcFwiO1xyXG5cdHB1YmxpYyBxdWVzdGlvbnNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIGZlZWRiYWNrQ29udGFpbmVySWQgPSBcImZlZWRiYWNrV3JhcFwiO1xyXG5cdHB1YmxpYyBmZWVkYmFja0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgYW5zd2Vyc0NvbnRhaW5lcklkID0gXCJhV3JhcFwiO1xyXG5cdHB1YmxpYyBhbnN3ZXJzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b24xSWQgPSBcImFuc3dlckJ1dHRvbjFcIjtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjE6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uMklkID0gXCJhbnN3ZXJCdXR0b24yXCI7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b24yOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjNJZCA9IFwiYW5zd2VyQnV0dG9uM1wiO1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uMzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b240SWQgPSBcImFuc3dlckJ1dHRvbjRcIjtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjQ6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uNUlkID0gXCJhbnN3ZXJCdXR0b241XCI7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b241OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjZJZCA9IFwiYW5zd2VyQnV0dG9uNlwiO1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uNjogSFRNTEVsZW1lbnQ7XHJcblx0XHJcblxyXG5cdHByaXZhdGUgcGxheUJ1dHRvbklkID0gXCJwYnV0dG9uXCI7XHJcblx0cHJpdmF0ZSBwbGF5QnV0dG9uOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBjaGVzdEltZ0lkID0gXCJjaGVzdEltYWdlXCI7XHJcblx0cHJpdmF0ZSBjaGVzdEltZzogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHB1YmxpYyBuZXh0UXVlc3Rpb24gPSBudWxsO1xyXG5cclxuXHRwcml2YXRlIGNvbnRlbnRMb2FkZWQgPSBmYWxzZTtcclxuXHJcblx0cHVibGljIHFTdGFydDtcclxuXHRwdWJsaWMgc2hvd24gPSBmYWxzZTtcclxuXHJcblx0cHVibGljIHN0YXJzID0gW107XHJcblx0cHVibGljIHFBbnNOdW0gPSAwO1xyXG5cclxuXHRwdWJsaWMgYWxsU3RhcnQ6IG51bWJlcjtcclxuXHJcblx0cHVibGljIGJ1dHRvbnMgPSBbXTtcclxuXHJcblx0cHJpdmF0ZSBidXR0b25QcmVzc0NhbGxiYWNrOiBGdW5jdGlvbjtcclxuXHRwcml2YXRlIHN0YXJ0UHJlc3NDYWxsYmFjazogRnVuY3Rpb247XHJcblxyXG5cdHB1YmxpYyBidXR0b25zQWN0aXZlOiBib29sZWFuID0gdHJ1ZTtcclxuXHJcblx0cHJpdmF0ZSBpbml0KCk6IHZvaWQge1xyXG5cdFx0Ly8gSW5pdGlhbGl6ZSByZXF1aXJlZCBjb250YWluZXJzXHJcblx0XHR0aGlzLmxhbmRpbmdDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmxhbmRpbmdDb250YWluZXJJZCk7XHJcblx0XHR0aGlzLmdhbWVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmdhbWVDb250YWluZXJJZCk7XHJcblx0XHR0aGlzLmVuZENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZW5kQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5zdGFyQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zdGFyQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5jaGVzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY2hlc3RDb250YWluZXJJZCk7XHJcblx0XHR0aGlzLnF1ZXN0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucXVlc3Rpb25zQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5mZWVkYmFja0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZmVlZGJhY2tDb250YWluZXJJZCk7XHJcblx0XHR0aGlzLmFuc3dlcnNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuc3dlcnNDb250YWluZXJJZCk7XHJcblxyXG5cdFx0Ly8gSW5pdGlhbGl6ZSByZXF1aXJlZCBidXR0b25zXHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuc3dlckJ1dHRvbjFJZCk7XHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuc3dlckJ1dHRvbjJJZCk7XHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuc3dlckJ1dHRvbjNJZCk7XHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuc3dlckJ1dHRvbjRJZCk7XHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuc3dlckJ1dHRvbjVJZCk7XHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmFuc3dlckJ1dHRvbjZJZCk7XHJcblxyXG5cdFx0dGhpcy5wbGF5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5wbGF5QnV0dG9uSWQpO1xyXG5cclxuXHRcdHRoaXMuY2hlc3RJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNoZXN0SW1nSWQpO1xyXG5cclxuXHRcdHRoaXMuaW5pdGlhbGl6ZVN0YXJzKCk7XHJcblxyXG5cdFx0dGhpcy5pbml0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaW5pdGlhbGl6ZVN0YXJzKCk6IHZvaWQge1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IG5ld1N0YXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG5cdFx0XHQvLyBuZXdTdGFyLnNyYyA9IFwiaW1nL3N0YXIucG5nXCI7XHJcblx0XHRcdG5ld1N0YXIuaWQgPSBcInN0YXJcIiArIGk7XHJcblxyXG5cdFx0XHRuZXdTdGFyLmNsYXNzTGlzdC5hZGQoXCJ0b3BzdGFyaFwiKTtcclxuXHJcblx0XHRcdHRoaXMuc3RhckNvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdTdGFyKTtcclxuXHJcblx0XHRcdHRoaXMuc3RhckNvbnRhaW5lci5pbm5lckhUTUwgKz0gXCJcIjtcclxuXHJcblx0XHRcdGlmIChpID09IDkpIHtcclxuXHRcdFx0XHR0aGlzLnN0YXJDb250YWluZXIuaW5uZXJIVE1MICs9IFwiPGJyPlwiO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLnN0YXJzLnB1c2goaSk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2h1ZmZsZUFycmF5KHRoaXMuc3RhcnMpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBpbml0RXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjEuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5hbnN3ZXJCdXR0b25QcmVzcygxKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuYW5zd2VyQnV0dG9uMSk7XHJcblxyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b24yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuYW5zd2VyQnV0dG9uUHJlc3MoMik7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbnMucHVzaCh0aGlzLmFuc3dlckJ1dHRvbjIpO1xyXG5cclxuXHRcdHRoaXMuYW5zd2VyQnV0dG9uMy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmFuc3dlckJ1dHRvblByZXNzKDMpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5idXR0b25zLnB1c2godGhpcy5hbnN3ZXJCdXR0b24zKTtcclxuXHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5hbnN3ZXJCdXR0b25QcmVzcyg0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuYW5zd2VyQnV0dG9uNCk7XHJcblxyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b241LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuYW5zd2VyQnV0dG9uUHJlc3MoNSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbnMucHVzaCh0aGlzLmFuc3dlckJ1dHRvbjUpO1xyXG5cclxuXHRcdHRoaXMuYW5zd2VyQnV0dG9uNi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmFuc3dlckJ1dHRvblByZXNzKDYpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5idXR0b25zLnB1c2godGhpcy5hbnN3ZXJCdXR0b242KTtcclxuXHJcblx0XHR0aGlzLmxhbmRpbmdDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0aWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGdldERhdGFGaWxlKCkpKSB7XHJcblx0XHRcdFx0dGhpcy5zaG93R2FtZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2hvd09wdGlvbnMoKTogdm9pZCB7XHJcblx0XHRpZiAoIVVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnNob3duKSB7XHJcblx0XHRcdGNvbnN0IG5ld1EgPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5uZXh0UXVlc3Rpb247XHJcblx0XHRcdGNvbnN0IGJ1dHRvbnMgPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zO1xyXG5cdFx0XHRjb25zdCBhbmltYXRpb25EdXJhdGlvbiA9IDEwMDA7IFxyXG5cdFx0XHRjb25zdCBkZWxheUJmb3JlT3B0aW9uID0gMjAwO1xyXG5cdCAgICAgICAgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd24gPSB0cnVlO1xyXG5cdFx0XHRidXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcclxuXHRcdFx0XHRidXR0b24uc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcblx0XHRcdFx0YnV0dG9uLnN0eWxlLmFuaW1hdGlvbiA9IFwiXCI7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpPT57XHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuZXdRLmFuc3dlcnMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGNvbnN0IGN1ckFuc3dlciA9IG5ld1EuYW5zd2Vyc1tpXTtcclxuXHRcdFx0XHRcdGNvbnN0IGJ1dHRvbiA9IGJ1dHRvbnNbaV07XHJcblx0XHRcclxuXHRcdFx0XHRcdGJ1dHRvbi5pbm5lckhUTUwgPSAnYW5zd2VyVGV4dCcgaW4gY3VyQW5zd2VyID8gY3VyQW5zd2VyLmFuc3dlclRleHQgOiAnJztcclxuXHRcdFx0XHRcdGJ1dHRvbi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc3R5bGUuYW5pbWF0aW9uID0gYHpvb21JbiAke2FuaW1hdGlvbkR1cmF0aW9ufW1zIGVhc2UgZm9yd2FyZHNgO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKCdhbnN3ZXJJbWcnIGluIGN1ckFuc3dlcikge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRtcGltZyA9IEF1ZGlvQ29udHJvbGxlci5HZXRJbWFnZShjdXJBbnN3ZXIuYW5zd2VySW1nKTtcclxuXHRcdFx0XHRcdFx0XHRidXR0b24uYXBwZW5kQ2hpbGQodG1waW1nKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgaSAqIGFuaW1hdGlvbkR1cmF0aW9uKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sZGVsYXlCZm9yZU9wdGlvbilcclxuXHRcdFx0XHJcblx0XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnFTdGFydCA9IERhdGUubm93KCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFNldEZlZWRiYWNrVGV4dChudDogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRjb25zb2xlLmxvZyhcIkZlZWRiYWNrIHRleHQgc2V0IHRvIFwiICsgbnQpO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZmVlZGJhY2tDb250YWluZXIuaW5uZXJIVE1MID0gbnQ7XHJcblx0fVxyXG5cclxuXHQvL2Z1bmN0aW9ucyB0byBzaG93L2hpZGUgdGhlIGRpZmZlcmVudCBjb250YWluZXJzXHJcblx0cHJpdmF0ZSBzaG93TGFuZGluZygpOiB2b2lkIHtcclxuXHRcdHRoaXMubGFuZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblx0XHR0aGlzLmdhbWVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdFx0dGhpcy5lbmRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBTaG93RW5kKCk6IHZvaWQge1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkubGFuZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5nYW1lQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmVuZENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHNob3dHYW1lKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5sYW5kaW5nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdHRoaXMuZ2FtZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJncmlkXCI7XHJcblx0XHR0aGlzLmVuZENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0XHR0aGlzLmFsbFN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuXHRcdHRoaXMuc3RhcnRQcmVzc0NhbGxiYWNrKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFNldEZlZWRiYWNrVmlzaWJpbGUodmlzaWJsZTogYm9vbGVhbikge1xyXG5cdFx0aWYgKHZpc2libGUpIHtcclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZmVlZGJhY2tDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZmVlZGJhY2tDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInZpc2libGVcIik7XHJcblx0XHRcdEF1ZGlvQ29udHJvbGxlci5QbGF5Q29ycmVjdCgpO1xyXG5cclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYnV0dG9uc0FjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZmVlZGJhY2tDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmZlZWRiYWNrQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcblxyXG5cdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zQWN0aXZlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgUmVhZHlGb3JOZXh0KG5ld1E6IHFEYXRhKTogdm9pZCB7XHJcblx0XHRjb25zb2xlLmxvZyhcInJlYWR5IGZvciBuZXh0IVwiKTtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFuc3dlcnNDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcblx0XHRmb3IgKHZhciBiIGluIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnMpIHtcclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYnV0dG9uc1tiXS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuXHRcdH1cclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnNob3duID0gZmFsc2U7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5uZXh0UXVlc3Rpb24gPSBuZXdRO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucXVlc3Rpb25zQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdFx0Ly8gcEIuaW5uZXJIVE1MID0gXCI8YnV0dG9uIGlkPSduZXh0cUJ1dHRvbic+PHN2ZyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nbm9uZScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48cGF0aCBkPSdNOSAxOEwxNSAxMkw5IDZWMThaJyBmaWxsPSdjdXJyZW50Q29sb3InIHN0cm9rZT0nY3VycmVudENvbG9yJyBzdHJva2Utd2lkdGg9JzInIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCc+PC9wYXRoPjwvc3ZnPjwvYnV0dG9uPlwiO1xyXG5cdFx0Ly8gVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucGxheUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYXVkaW8tYnV0dG9uXCIpO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucGxheUJ1dHRvbi5pbm5lckhUTUwgPSBcIjxidXR0b24gaWQ9J25leHRxQnV0dG9uJz48aW1nIGNsYXNzPWF1ZGlvLWJ1dHRvbiB3aWR0aD0nODVweCcgaGVpZ2h0PSc4NXB4JyBzcmM9Jy9pbWcvU291bmRCdXR0b25fSWRsZS5wbmcnIHR5cGU9J2ltYWdlL3N2Zyt4bWwnPiA8L2ltZz48L2J1dHRvbj5cIjtcclxuXHRcdHZhciBuZXh0UXVlc3Rpb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5leHRxQnV0dG9uXCIpO1xyXG5cdFx0bmV4dFF1ZXN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5TaG93UXVlc3Rpb24oKTtcclxuXHRcdFx0Ly9wbGF5cXVlc3Rpb25hdWRpb1xyXG5cdFx0XHRBdWRpb0NvbnRyb2xsZXIuUGxheUF1ZGlvKG5ld1EucHJvbXB0QXVkaW8sIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnNob3dPcHRpb25zLCBVSUNvbnRyb2xsZXIuU2hvd0F1ZGlvQW5pbWF0aW9uKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBTaG93QXVkaW9BbmltYXRpb24ocGxheWluZzogYm9vbGVhbiA9IGZhbHNlKXtcclxuXHRcdGNvbnN0IHBsYXlCdXR0b25JbWcgPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5wbGF5QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG5cdFx0aWYocGxheWluZylcclxuXHRcdHtcclxuXHRcdFx0cGxheUJ1dHRvbkltZy5zcmMgPSAnYW5pbWF0aW9uL1NvdW5kQnV0dG9uLmdpZic7XHJcblx0XHR9XHJcblx0XHRlbHNle1xyXG5cdFx0XHRwbGF5QnV0dG9uSW1nLnNyYyA9ICcvaW1nL1NvdW5kQnV0dG9uX0lkbGUucG5nJztcclxuXHRcdH1cclxuXHJcblx0fVxyXG5cdFxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFNob3dRdWVzdGlvbihuZXdRdWVzdGlvbj86IHFEYXRhKTogdm9pZCB7XHJcblxyXG5cdFx0Ly8gcEIuaW5uZXJIVE1MID0gXCI8YnV0dG9uIGlkPSduZXh0cUJ1dHRvbic+PHN2ZyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nbm9uZScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48cGF0aCBkPSdNOSAxOEwxNSAxMkw5IDZWMThaJyBmaWxsPSdjdXJyZW50Q29sb3InIHN0cm9rZT0nY3VycmVudENvbG9yJyBzdHJva2Utd2lkdGg9JzInIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCc+PC9wYXRoPjwvc3ZnPjwvYnV0dG9uPlwiO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucGxheUJ1dHRvbi5pbm5lckhUTUwgPSBcIjxidXR0b24gaWQ9J25leHRxQnV0dG9uJz48aW1nIGNsYXNzPWF1ZGlvLWJ1dHRvbiB3aWR0aD0nODVweCcgaGVpZ2h0PSc4NXB4JyBzcmM9Jy9pbWcvU291bmRCdXR0b25fSWRsZS5wbmcnIHR5cGU9J2ltYWdlL3N2Zyt4bWwnPiA8L2ltZz48L2J1dHRvbj5cIjtcclxuXHJcblx0XHR2YXIgbmV4dFF1ZXN0aW9uQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXh0cUJ1dHRvblwiKTtcclxuXHRcdG5leHRRdWVzdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIm5leHQgcXVlc3Rpb24gYnV0dG9uIHByZXNzZWRcIik7XHJcblx0XHRcdGNvbnNvbGUubG9nKG5ld1F1ZXN0aW9uLnByb21wdEF1ZGlvKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICgncHJvbXB0QXVkaW8nIGluIG5ld1F1ZXN0aW9uKSB7XHJcblx0XHRcdFx0QXVkaW9Db250cm9sbGVyLlBsYXlBdWRpbyhuZXdRdWVzdGlvbi5wcm9tcHRBdWRpbyx1bmRlZmluZWQsVUlDb250cm9sbGVyLlNob3dBdWRpb0FuaW1hdGlvbik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblxyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYW5zd2Vyc0NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcblxyXG5cdFx0bGV0IHFDb2RlID0gXCJcIjtcclxuXHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcblx0XHRpZiAodHlwZW9mIChuZXdRdWVzdGlvbikgPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0bmV3UXVlc3Rpb24gPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5uZXh0UXVlc3Rpb247XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCdwcm9tcHRJbWcnIGluIG5ld1F1ZXN0aW9uKSB7XHJcblx0XHRcdHZhciB0bXBpbWcgPSBBdWRpb0NvbnRyb2xsZXIuR2V0SW1hZ2UobmV3UXVlc3Rpb24ucHJvbXB0SW1nKTtcclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucXVlc3Rpb25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHRtcGltZyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cUNvZGUgKz0gbmV3UXVlc3Rpb24ucHJvbXB0VGV4dDtcclxuXHJcblx0XHRxQ29kZSArPSBcIjxCUj5cIjtcclxuXHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuaW5uZXJIVE1MICs9IHFDb2RlO1xyXG5cclxuXHJcblx0XHRmb3IgKHZhciBidXR0b25JbmRleCBpbiBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zKSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnNbYnV0dG9uSW5kZXhdLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBBZGRTdGFyKCk6IHZvaWQge1xyXG5cdFx0dmFyIHN0YXJUb1Nob3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJcIiArIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnN0YXJzW1VJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnFBbnNOdW1dKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cdFx0c3RhclRvU2hvdy5zcmMgPSAnLi4vYW5pbWF0aW9uL1N0YXIuZ2lmJ1xyXG5cdFx0c3RhclRvU2hvdy5jbGFzc0xpc3QuYWRkKFwidG9wc3RhcnZcIik7XHJcblx0XHRzdGFyVG9TaG93LmNsYXNzTGlzdC5yZW1vdmUoXCJ0b3BzdGFyaFwiKTtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnFBbnNOdW0gKz0gMTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgQ2hhbmdlU3RhckltYWdlQWZ0ZXJBbmltYXRpb24oKTogdm9pZCB7XHJcblx0XHR2YXIgc3RhclRvU2hvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhclwiICsgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc3RhcnNbVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucUFuc051bS0xXSkgYXMgSFRNTEltYWdlRWxlbWVudDtcclxuXHRcdHN0YXJUb1Nob3cuc3JjID0gJy4uL2ltZy9zdGFyX2FmdGVyX2FuaW1hdGlvbi5naWYnXHJcblx0fVxyXG5cclxuXHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b25QcmVzcyhidXR0b25OdW06IG51bWJlcik6IHZvaWQge1xyXG5cdFx0aWYgKHRoaXMuYnV0dG9uc0FjdGl2ZSkge1xyXG5cdFx0XHRBdWRpb0NvbnRyb2xsZXIuUGxheURpbmcoKTtcclxuXHRcdFx0Y29uc3QgblByZXNzZWQgPSBEYXRlLm5vdygpO1xyXG5cdFx0XHRjb25zdCBkVGltZSA9IG5QcmVzc2VkIC0gdGhpcy5xU3RhcnQ7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiYW5zd2VyZWQgaW4gXCIgKyBkVGltZSk7XHJcblx0XHRcdHRoaXMuYnV0dG9uUHJlc3NDYWxsYmFjayhidXR0b25OdW0sIGRUaW1lKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgUHJvZ3Jlc3NDaGVzdCgpe1xyXG5cdFx0Y29uc3QgY2hlc3RJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGVzdEltYWdlJykgYXMgSFRNTEltYWdlRWxlbWVudDtcclxuXHRcdGxldCBjdXJyZW50SW1nU3JjID0gY2hlc3RJbWFnZS5zcmNcclxuXHRcdGNvbnNvbGUubG9nKCdDaGVzdCBQcm9ncmVzc2lvbi0tPicsY2hlc3RJbWFnZSk7XHJcblx0XHRjb25zb2xlLmxvZygnQ2hlc3QgUHJvZ3Jlc3Npb24tLT4nLGNoZXN0SW1hZ2Uuc3JjKTtcclxuXHRcdGNvbnN0IGN1cnJlbnRJbWFnZU51bWJlciA9IHBhcnNlSW50KGN1cnJlbnRJbWdTcmMuc2xpY2UoLTYsLTQpLDEwKTtcclxuXHRcdGNvbnNvbGUubG9nKCdDaGVzdCBQcm9ncmVzc2lvbiBudW1iZXItLT4nLGN1cnJlbnRJbWFnZU51bWJlcik7XHJcblx0XHRjb25zdCBuZXh0SW1hZ2VOdW1iZXIgPSBjdXJyZW50SW1hZ2VOdW1iZXIgJSA0ICsgMTtcclxuXHRcdGNvbnN0IG5leHRJbWFnZVNyYyA9IGBpbWcvY2hlc3Rwcm9ncmVzc2lvbi9UcmVhc3VyZUNoZXN0T3BlbjAke25leHRJbWFnZU51bWJlcn0uc3ZnYDtcclxuXHRcdGNoZXN0SW1hZ2Uuc3JjID0gbmV4dEltYWdlU3JjO1xyXG5cdFx0XHJcblxyXG5cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgU2V0Q29udGVudExvYWRlZCh2YWx1ZTogYm9vbGVhbik6IHZvaWQge1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuY29udGVudExvYWRlZCA9IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBTZXRCdXR0b25QcmVzc0FjdGlvbihjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvblByZXNzQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgU2V0U3RhcnRBY3Rpb24oY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5zdGFydFByZXNzQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogVUlDb250cm9sbGVyIHtcclxuXHRcdGlmIChVSUNvbnRyb2xsZXIuaW5zdGFuY2UgPT09IG51bGwpIHtcclxuXHRcdFx0VUlDb250cm9sbGVyLmluc3RhbmNlID0gbmV3IFVJQ29udHJvbGxlcigpO1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuaW5zdGFuY2UuaW5pdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBVSUNvbnRyb2xsZXIuaW5zdGFuY2U7XHJcblx0fVxyXG59XHJcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMSk7XHJcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxyXG4gICAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbml0XygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIC8vIFdlIHdhbnQgcXVpY2sgbWFwcGluZ3MgYmFjayBhbmQgZm9ydGgsIHNvIHdlIHByZWNvbXB1dGUgdHdvIG1hcHMuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5FTkNPREVEX1ZBTFMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmUgZm9yZ2l2aW5nIHdoZW4gZGVjb2RpbmcgYW5kIGNvcnJlY3RseSBkZWNvZGUgYm90aCBlbmNvZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgbmF2aWdhdG9yLnVzZXJBZ2VudCBzdHJpbmcgb3IgJycgaWYgaXQncyBub3QgZGVmaW5lZC5cclxuICogQHJldHVybiB1c2VyIGFnZW50IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VUEoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yWyd1c2VyQWdlbnQnXSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yWyd1c2VyQWdlbnQnXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IENvcmRvdmEgLyBQaG9uZUdhcCAvIElvbmljIGZyYW1ld29ya3Mgb24gYSBtb2JpbGUgZGV2aWNlLlxyXG4gKlxyXG4gKiBEZWxpYmVyYXRlbHkgZG9lcyBub3QgcmVseSBvbiBjaGVja2luZyBgZmlsZTovL2AgVVJMcyAoYXMgdGhpcyBmYWlscyBQaG9uZUdhcFxyXG4gKiBpbiB0aGUgUmlwcGxlIGVtdWxhdG9yKSBub3IgQ29yZG92YSBgb25EZXZpY2VSZWFkeWAsIHdoaWNoIHdvdWxkIG5vcm1hbGx5XHJcbiAqIHdhaXQgZm9yIGEgY2FsbGJhY2suXHJcbiAqL1xyXG5mdW5jdGlvbiBpc01vYmlsZUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBTZXR0aW5nIHVwIGFuIGJyb2FkbHkgYXBwbGljYWJsZSBpbmRleCBzaWduYXR1cmUgZm9yIFdpbmRvd1xyXG4gICAgICAgIC8vIGp1c3QgdG8gZGVhbCB3aXRoIHRoaXMgY2FzZSB3b3VsZCBwcm9iYWJseSBiZSBhIGJhZCBpZGVhLlxyXG4gICAgICAgICEhKHdpbmRvd1snY29yZG92YSddIHx8IHdpbmRvd1sncGhvbmVnYXAnXSB8fCB3aW5kb3dbJ1Bob25lR2FwJ10pICYmXHJcbiAgICAgICAgL2lvc3xpcGhvbmV8aXBvZHxpcGFkfGFuZHJvaWR8YmxhY2tiZXJyeXxpZW1vYmlsZS9pLnRlc3QoZ2V0VUEoKSkpO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgTm9kZS5qcy5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIE5vZGUuanMgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBpbmRleGVkREIgPT09ICdvYmplY3QnO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCB2YWxpZGF0ZXMgYnJvd3Nlci9zdyBjb250ZXh0IGZvciBpbmRleGVkREIgYnkgb3BlbmluZyBhIGR1bW15IGluZGV4ZWREQiBkYXRhYmFzZSBhbmQgcmVqZWN0XHJcbiAqIGlmIGVycm9ycyBvY2N1ciBkdXJpbmcgdGhlIGRhdGFiYXNlIG9wZW4gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAdGhyb3dzIGV4Y2VwdGlvbiBpZiBjdXJyZW50IGJyb3dzZXIvc3cgY29udGV4dCBjYW4ndCBydW4gaWRiLm9wZW4gKGV4OiBTYWZhcmkgaWZyYW1lLCBGaXJlZm94XHJcbiAqIHByaXZhdGUgYnJvd3NpbmcpXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgcHJlRXhpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBEQl9DSEVDS19OQU1FID0gJ3ZhbGlkYXRlLWJyb3dzZXItY29udGV4dC1mb3ItaW5kZXhlZGRiLWFuYWx5dGljcy1tb2R1bGUnO1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gc2VsZi5pbmRleGVkREIub3BlbihEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlc3VsdC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRhdGFiYXNlIG9ubHkgd2hlbiBpdCBkb2Vzbid0IHByZS1leGlzdFxyXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVFeGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcmVFeGlzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKChfYSA9IHJlcXVlc3QuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlKSB8fCAnJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3Mgd2hldGhlciBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBjb29raWUgaXMgZW5hYmxlZCB3aXRoaW4gY3VycmVudCBicm93c2VyXHJcbiAqL1xyXG5mdW5jdGlvbiBhcmVDb29raWVzRW5hYmxlZCgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJyB8fCAhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogUG9seWZpbGwgZm9yIGBnbG9iYWxUaGlzYCBvYmplY3QuXHJcbiAqIEByZXR1cm5zIHRoZSBgZ2xvYmFsVGhpc2Agb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZW52aXJvbm1lbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuLyoqXHJcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cclxuICogcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fIG9yIGEgSlNPTiBmaWxlIHdob3NlIHBhdGggaXMgaW5cclxuICogcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19QQVRIX19cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVmYXVsdHNKc29uU3RyaW5nID0gcHJvY2Vzcy5lbnYuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xyXG4gICAgaWYgKGRlZmF1bHRzSnNvblN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlZmF1bHRzSnNvblN0cmluZyk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUNvb2tpZSA9ICgpID0+IHtcclxuICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG1hdGNoO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgvX19GSVJFQkFTRV9ERUZBVUxUU19fPShbXjtdKykvKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gU29tZSBlbnZpcm9ubWVudHMgc3VjaCBhcyBBbmd1bGFyIFVuaXZlcnNhbCBTU1IgaGF2ZSBhXHJcbiAgICAgICAgLy8gYGRvY3VtZW50YCBvYmplY3QgYnV0IGVycm9yIG9uIGFjY2Vzc2luZyBgZG9jdW1lbnQuY29va2llYC5cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWNvZGVkID0gbWF0Y2ggJiYgYmFzZTY0RGVjb2RlKG1hdGNoWzFdKTtcclxuICAgIHJldHVybiBkZWNvZGVkICYmIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbn07XHJcbi8qKlxyXG4gKiBHZXQgdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuIEl0IGNoZWNrcyBpbiBvcmRlcjpcclxuICogKDEpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBhcyBhIHByb3BlcnR5IG9mIGBnbG9iYWxUaGlzYFxyXG4gKiAoMikgaWYgc3VjaCBhbiBvYmplY3Qgd2FzIHByb3ZpZGVkIG9uIGEgc2hlbGwgZW52aXJvbm1lbnQgdmFyaWFibGVcclxuICogKDMpIGlmIHN1Y2ggYW4gb2JqZWN0IGV4aXN0cyBpbiBhIGNvb2tpZVxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHMgPSAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoZ2V0RGVmYXVsdHNGcm9tR2xvYmFsKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUoKSB8fFxyXG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21Db29raWUoKSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhdGNoLWFsbCBmb3IgYmVpbmcgdW5hYmxlIHRvIGdldCBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gZHVlXHJcbiAgICAgICAgICogdG8gYW55IGVudmlyb25tZW50IGNhc2Ugd2UgaGF2ZSBub3QgYWNjb3VudGVkIGZvci4gTG9nIHRvXHJcbiAgICAgICAgICogaW5mbyBpbnN0ZWFkIG9mIHN3YWxsb3dpbmcgc28gd2UgY2FuIGZpbmQgdGhlc2UgdW5rbm93biBjYXNlc1xyXG4gICAgICAgICAqIGFuZCBhZGQgcGF0aHMgZm9yIHRoZW0gaWYgbmVlZGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbyhgVW5hYmxlIHRvIGdldCBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gZHVlIHRvOiAke2V9YCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBlbXVsYXRvciBob3N0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxyXG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXHJcbiAqIEByZXR1cm5zIGEgVVJMIGhvc3QgZm9ybWF0dGVkIGxpa2UgYDEyNy4wLjAuMTo5OTk5YCBvciBgWzo6MV06NDAwMGAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3QgPSAocHJvZHVjdE5hbWUpID0+IHsgdmFyIF9hLCBfYjsgcmV0dXJuIChfYiA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbXVsYXRvckhvc3RzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbcHJvZHVjdE5hbWVdOyB9O1xyXG4vKipcclxuICogUmV0dXJucyBlbXVsYXRvciBob3N0bmFtZSBhbmQgcG9ydCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIHBhaXIgb2YgaG9zdG5hbWUgYW5kIHBvcnQgbGlrZSBgW1wiOjoxXCIsIDQwMDBdYCBpZiBhdmFpbGFibGVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0ID0gKHByb2R1Y3ROYW1lKSA9PiB7XHJcbiAgICBjb25zdCBob3N0ID0gZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdChwcm9kdWN0TmFtZSk7XHJcbiAgICBpZiAoIWhvc3QpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VwYXJhdG9ySW5kZXggPSBob3N0Lmxhc3RJbmRleE9mKCc6Jyk7IC8vIEZpbmRpbmcgdGhlIGxhc3Qgc2luY2UgSVB2NiBhZGRyIGFsc28gaGFzIGNvbG9ucy5cclxuICAgIGlmIChzZXBhcmF0b3JJbmRleCA8PSAwIHx8IHNlcGFyYXRvckluZGV4ICsgMSA9PT0gaG9zdC5sZW5ndGgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgaG9zdCAke2hvc3R9IHdpdGggbm8gc2VwYXJhdGUgaG9zdG5hbWUgYW5kIHBvcnQhYCk7XHJcbiAgICB9XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXHJcbiAgICBjb25zdCBwb3J0ID0gcGFyc2VJbnQoaG9zdC5zdWJzdHJpbmcoc2VwYXJhdG9ySW5kZXggKyAxKSwgMTApO1xyXG4gICAgaWYgKGhvc3RbMF0gPT09ICdbJykge1xyXG4gICAgICAgIC8vIEJyYWNrZXQtcXVvdGVkIGBbaXB2NmFkZHJdOnBvcnRgID0+IHJldHVybiBcImlwdjZhZGRyXCIgKHdpdGhvdXQgYnJhY2tldHMpLlxyXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMSwgc2VwYXJhdG9ySW5kZXggLSAxKSwgcG9ydF07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDAsIHNlcGFyYXRvckluZGV4KSwgcG9ydF07XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEZpcmViYXNlIGFwcCBjb25maWcgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0QXBwQ29uZmlnID0gKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29uZmlnOyB9O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBleHBlcmltZW50YWwgc2V0dGluZyBvbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdCAocHJvcGVydGllc1xyXG4gKiBwcmVmaXhlZCBieSBcIl9cIilcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RXhwZXJpbWVudGFsU2V0dGluZyA9IChuYW1lKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtgXyR7bmFtZX1gXTsgfTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRGVmZXJyZWQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE91ciBBUEkgaW50ZXJuYWxzIGFyZSBub3QgcHJvbWlzZWlmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXHJcbiAgICAgKiBpbnZva2luZyBwcm9taXNlcyBpbmxpbmUsIHdoaWNoIFByb21pc2VzIGFyZSBmb3JiaWRkZW4gdG8gZG8uIFRoaXMgbWV0aG9kIGFjY2VwdHMgYW4gb3B0aW9uYWwgbm9kZS1zdHlsZSBjYWxsYmFja1xyXG4gICAgICogYW5kIHJldHVybnMgYSBub2RlLXN0eWxlIGNhbGxiYWNrIHdoaWNoIHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIERlZmVycmVkJ3MgcHJvbWlzZS5cclxuICAgICAqL1xyXG4gICAgd3JhcENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIChlcnJvciwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIC8vIEF0dGFjaGluZyBub29wIGhhbmRsZXIganVzdCBpbiBjYXNlIGRldmVsb3BlciB3YXNuJ3QgZXhwZWN0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBwcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIG9mIG91ciBjYWxsYmFja3MgZG9uJ3QgZXhwZWN0IGEgdmFsdWUgYW5kIG91ciBvd24gdGVzdHNcclxuICAgICAgICAgICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVNb2NrVXNlclRva2VuKHRva2VuLCBwcm9qZWN0SWQpIHtcclxuICAgIGlmICh0b2tlbi51aWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBcInVpZFwiIGZpZWxkIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYnkgbW9ja1VzZXJUb2tlbi4gUGxlYXNlIHVzZSBcInN1YlwiIGluc3RlYWQgZm9yIEZpcmViYXNlIEF1dGggVXNlciBJRC4nKTtcclxuICAgIH1cclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSBcIm5vbmVcIiBhcyB0aGUgYWxnb3JpdGhtLlxyXG4gICAgY29uc3QgaGVhZGVyID0ge1xyXG4gICAgICAgIGFsZzogJ25vbmUnLFxyXG4gICAgICAgIHR5cGU6ICdKV1QnXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RJZCB8fCAnZGVtby1wcm9qZWN0JztcclxuICAgIGNvbnN0IGlhdCA9IHRva2VuLmlhdCB8fCAwO1xyXG4gICAgY29uc3Qgc3ViID0gdG9rZW4uc3ViIHx8IHRva2VuLnVzZXJfaWQ7XHJcbiAgICBpZiAoIXN1Yikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7IFxyXG4gICAgICAgIC8vIFNldCBhbGwgcmVxdWlyZWQgZmllbGRzIHRvIGRlY2VudCBkZWZhdWx0c1xyXG4gICAgICAgIGlzczogYGh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS8ke3Byb2plY3R9YCwgYXVkOiBwcm9qZWN0LCBpYXQsIGV4cDogaWF0ICsgMzYwMCwgYXV0aF90aW1lOiBpYXQsIHN1YiwgdXNlcl9pZDogc3ViLCBmaXJlYmFzZToge1xyXG4gICAgICAgICAgICBzaWduX2luX3Byb3ZpZGVyOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgaWRlbnRpdGllczoge31cclxuICAgICAgICB9IH0sIHRva2VuKTtcclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSB0aGUgZW1wdHkgc3RyaW5nIGFzIGEgc2lnbmF0dXJlLlxyXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gJyc7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KGhlYWRlcikpLFxyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIF0uam9pbignLicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFN0YW5kYXJkaXplZCBGaXJlYmFzZSBFcnJvci5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqXHJcbiAqICAgLy8gVHlwZXNjcmlwdCBzdHJpbmcgbGl0ZXJhbHMgZm9yIHR5cGUtc2FmZSBjb2Rlc1xyXG4gKiAgIHR5cGUgRXJyID1cclxuICogICAgICd1bmtub3duJyB8XHJcbiAqICAgICAnb2JqZWN0LW5vdC1mb3VuZCdcclxuICogICAgIDtcclxuICpcclxuICogICAvLyBDbG9zdXJlIGVudW0gZm9yIHR5cGUtc2FmZSBlcnJvciBjb2Rlc1xyXG4gKiAgIC8vIGF0LWVudW0ge3N0cmluZ31cclxuICogICB2YXIgRXJyID0ge1xyXG4gKiAgICAgVU5LTk9XTjogJ3Vua25vd24nLFxyXG4gKiAgICAgT0JKRUNUX05PVF9GT1VORDogJ29iamVjdC1ub3QtZm91bmQnLFxyXG4gKiAgIH1cclxuICpcclxuICogICBsZXQgZXJyb3JzOiBNYXA8RXJyLCBzdHJpbmc+ID0ge1xyXG4gKiAgICAgJ2dlbmVyaWMtZXJyb3InOiBcIlVua25vd24gZXJyb3JcIixcclxuICogICAgICdmaWxlLW5vdC1mb3VuZCc6IFwiQ291bGQgbm90IGZpbmQgZmlsZTogeyRmaWxlfVwiLFxyXG4gKiAgIH07XHJcbiAqXHJcbiAqICAgLy8gVHlwZS1zYWZlIGZ1bmN0aW9uIC0gbXVzdCBwYXNzIGEgdmFsaWQgZXJyb3IgY29kZSBhcyBwYXJhbS5cclxuICogICBsZXQgZXJyb3IgPSBuZXcgRXJyb3JGYWN0b3J5PEVycj4oJ3NlcnZpY2UnLCAnU2VydmljZScsIGVycm9ycyk7XHJcbiAqXHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5HRU5FUklDKTtcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkZJTEVfTk9UX0ZPVU5ELCB7J2ZpbGUnOiBmaWxlTmFtZX0pO1xyXG4gKiAgIC4uLlxyXG4gKiAgIC8vIFNlcnZpY2U6IENvdWxkIG5vdCBmaWxlIGZpbGU6IGZvby50eHQgKHNlcnZpY2UvZmlsZS1ub3QtZm91bmQpLlxyXG4gKlxyXG4gKiAgIGNhdGNoIChlKSB7XHJcbiAqICAgICBhc3NlcnQoZS5tZXNzYWdlID09PSBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IGZvby50eHQuXCIpO1xyXG4gKiAgICAgaWYgKChlIGFzIEZpcmViYXNlRXJyb3IpPy5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIFRoZSBlcnJvciBjb2RlIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY29kZSwgbWVzc2FnZSwgXHJcbiAgICAvKiogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZWplY3RzIGlmIHRoZSBnaXZlbiBwcm9taXNlIGRvZXNuJ3QgcmVzb2x2ZSBpbiB0aW1lSW5NUyBtaWxsaXNlY29uZHMuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gcHJvbWlzZVdpdGhUaW1lb3V0KHByb21pc2UsIHRpbWVJbk1TID0gMjAwMCkge1xyXG4gICAgY29uc3QgZGVmZXJyZWRQcm9taXNlID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IGRlZmVycmVkUHJvbWlzZS5yZWplY3QoJ3RpbWVvdXQhJyksIHRpbWVJbk1TKTtcclxuICAgIHByb21pc2UudGhlbihkZWZlcnJlZFByb21pc2UucmVzb2x2ZSwgZGVmZXJyZWRQcm9taXNlLnJlamVjdCk7XHJcbiAgICByZXR1cm4gZGVmZXJyZWRQcm9taXNlLnByb21pc2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goYXJyYXlWYWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxyXG4gKiAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XHJcbiAgICBjb25zdCBvYmogPSB7fTtcclxuICAgIGNvbnN0IHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkge1xyXG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XHJcbiAgICBpZiAoIXF1ZXJ5U3RhcnQpIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFnbWVudFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnLCBxdWVyeVN0YXJ0KTtcclxuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxuY2xhc3MgU2hhMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xyXG4gICAgICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFpbl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cclxuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuV18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWRfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xyXG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKGxldCBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xyXG4gICAgICAgICAgICBXW2ldID0gKCh0IDw8IDEpIHwgKHQgPj4+IDMxKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5jaGFpbl9bMV07XHJcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xyXG4gICAgICAgIGxldCBlID0gdGhpcy5jaGFpbl9bNF07XHJcbiAgICAgICAgbGV0IGYsIGs7XHJcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGQgXiAoYiAmIChjIF4gZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgNjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxlbmd0aE1pbnVzQmxvY2sgPSBsZW5ndGggLSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXHJcbiAgICAgICAgY29uc3QgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIGxldCBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBkaWdlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcclxuICAgICAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXHJcbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XHJcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xyXG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xyXG4gICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWdlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXHJcbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSBvbk5vT2JzZXJ2ZXJzO1xyXG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxyXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cclxuICAgICAgICAvLyBjYW4gc3RpbGwgcmVjZWl2ZSB0aGUgdmVyeSBmaXJzdCB2YWx1ZSBnZW5lcmF0ZWQgaW4gdGhlIGV4ZWN1dG9yLlxyXG4gICAgICAgIHRoaXMudGFza1xyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKHRoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5leHQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9XHJcbiAgICBjb21wbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBzdWJzY3JpYmUobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIGxldCBvYnNlcnZlcjtcclxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBlcnJvciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxyXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xyXG4gICAgICAgICAgICAnbmV4dCcsXHJcbiAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICdjb21wbGV0ZSdcclxuICAgICAgICBdKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcclxuICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxyXG4gICAgICAgIC8vIGp1c3QgcmVzcG9uZCB0byB0aGUgT2JzZXJ2ZXIgd2l0aCB0aGUgZmluYWwgZXJyb3Igb3IgY29tcGxldGVcclxuICAgICAgICAvLyBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9XHJcbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xyXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cclxuICAgIHVuc3Vic2NyaWJlT25lKGkpIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvckVhY2hPYnNlcnZlcihmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgc2VuZE9uZShpLCBmbikge1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbih0aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKGVycikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgbGV0IGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBmbk5hbWUgK1xyXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBhcmdDb3VudCArXHJcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcclxuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xyXG4gICAgICAgICAgICBhcmdFcnJvciArXHJcbiAgICAgICAgICAgICcuJztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIGFyZ05hbWUgVGhlIG5hbWUgb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJnTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke2ZuTmFtZX0gZmFpbGVkOiAke2FyZ05hbWV9IGFyZ3VtZW50IGA7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIG5hbWVzcGFjZSwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ25hbWVzcGFjZScpICsgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TmFtZSwgXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE5hbWUsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cclxuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbmNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb3BpZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyM1xyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgdXVpZC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgdXVpZHY0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgYyA9PiB7XHJcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XHJcbiAgICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xyXG4gICAgfSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcclxuLyoqXHJcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgTUFYX1ZBTFVFX01JTExJUyA9IDQgKiA2MCAqIDYwICogMTAwMDsgLy8gRm91ciBob3VycywgbGlrZSBpT1MgYW5kIEFuZHJvaWQuXHJcbi8qKlxyXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxyXG4gKiBTZWVcclxuICogaHR0cDovL2dvL3NhZmUtY2xpZW50LWJlaGF2aW9yI3N0ZXAtMS1kZXRlcm1pbmUtdGhlLWFwcHJvcHJpYXRlLXJldHJ5LWludGVydmFsLXRvLWhhbmRsZS1zcGlrZS10cmFmZmljXHJcbiAqIGZvciBjb250ZXh0LlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUywgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpIHtcclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIGNvbnN0IGN1cnJCYXNlVmFsdWUgPSBpbnRlcnZhbE1pbGxpcyAqIE1hdGgucG93KGJhY2tvZmZGYWN0b3IsIGJhY2tvZmZDb3VudCk7XHJcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxyXG4gICAgLy8gRGV2aWF0aW9uOiByYW5kb21GYWN0b3IgaXMgcmVxdWlyZWQuXHJcbiAgICBjb25zdCByYW5kb21XYWl0ID0gTWF0aC5yb3VuZChcclxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXHJcbiAgICBSQU5ET01fRkFDVE9SICpcclxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcclxuICAgICAgICAvLyBBIHJhbmRvbSBmbG9hdCAocm91bmRlZCB0byBpbnQgYnkgTWF0aC5yb3VuZCBhYm92ZSkgaW4gdGhlIHJhbmdlIFstMSwgMV0uIERldGVybWluZXNcclxuICAgICAgICAvLyBpZiB3ZSBhZGQgb3Igc3VidHJhY3QuXHJcbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcclxuICAgICAgICAyKTtcclxuICAgIC8vIExpbWl0cyBiYWNrb2ZmIHRvIG1heCB0byBhdm9pZCBlZmZlY3RpdmVseSBwZXJtYW5lbnQgYmFja29mZi5cclxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcclxuICovXHJcbmZ1bmN0aW9uIG9yZGluYWwoaSkge1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcclxuICAgICAgICByZXR1cm4gYCR7aX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XHJcbn1cclxuZnVuY3Rpb24gaW5kaWNhdG9yKGkpIHtcclxuICAgIGkgPSBNYXRoLmFicyhpKTtcclxuICAgIGNvbnN0IGNlbnQgPSBpICUgMTAwO1xyXG4gICAgaWYgKGNlbnQgPj0gMTAgJiYgY2VudCA8PSAyMCkge1xyXG4gICAgICAgIHJldHVybiAndGgnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2UpIHtcclxuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldERlZmF1bHRBcHBDb25maWcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0RXhwZXJpbWVudGFsU2V0dGluZywgZ2V0R2xvYmFsLCBnZXRNb2R1bGFySW5zdGFuY2UsIGdldFVBLCBpc0FkbWluLCBpc0Jyb3dzZXIsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNzdWVkQXRUaW1lLCBqc29uRXZhbCwgbWFwLCBvcmRpbmFsLCBwcm9taXNlV2l0aFRpbWVvdXQsIHF1ZXJ5c3RyaW5nLCBxdWVyeXN0cmluZ0RlY29kZSwgc2FmZUdldCwgc3RyaW5nTGVuZ3RoLCBzdHJpbmdUb0J5dGVBcnJheSwgc3RyaW5naWZ5LCB1dWlkdjQsIHZhbGlkYXRlQXJnQ291bnQsIHZhbGlkYXRlQ2FsbGJhY2ssIHZhbGlkYXRlQ29udGV4dE9iamVjdCwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgdmFsaWRhdGVOYW1lc3BhY2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBEZWZlcnJlZCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIENvbXBvbmVudCBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgcHVibGljIHNlcnZpY2UgbmFtZSwgZS5nLiBhcHAsIGF1dGgsIGZpcmVzdG9yZSwgZGF0YWJhc2VcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUZhY3RvcnkgU2VydmljZSBmYWN0b3J5IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgcHVibGljIGludGVyZmFjZVxyXG4gICAgICogQHBhcmFtIHR5cGUgd2hldGhlciB0aGUgc2VydmljZSBwcm92aWRlZCBieSB0aGUgY29tcG9uZW50IGlzIHB1YmxpYyBvciBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGluc3RhbmNlRmFjdG9yeSwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUZhY3RvcnkgPSBpbnN0YW5jZUZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBcIkxBWllcIiAvKiBMQVpZICovO1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFudGlhdGlvbk1vZGUobW9kZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBtb2RlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0TXVsdGlwbGVJbnN0YW5jZXMobXVsdGlwbGVJbnN0YW5jZXMpIHtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gbXVsdGlwbGVJbnN0YW5jZXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRTZXJ2aWNlUHJvcHMocHJvcHMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gY2FsbGJhY2s7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXHJcbiAqIE5hbWVTZXJ2aWNlTWFwcGluZ1tUXSBpcyBhbiBhbGlhcyBmb3IgdGhlIHR5cGUgb2YgdGhlIGluc3RhbmNlXHJcbiAqL1xyXG5jbGFzcyBQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQSBwcm92aWRlciBjYW4gcHJvdmlkZSBtdWxpdHBsZSBpbnN0YW5jZXMgb2YgYSBzZXJ2aWNlXHJcbiAgICAgKiBpZiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyBpcyB0cnVlLlxyXG4gICAgICovXHJcbiAgICBnZXQoaWRlbnRpZmllcikge1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuaGFzKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZGVmZXJyZWQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIHRoZSBzZXJ2aWNlIGlmIGl0IGNhbiBiZSBhdXRvLWluaXRpYWxpemVkXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IHJldHVybiB0aGUgdW5yZXNvbHZlZCBwcm9taXNlIGluIHRoaXMgY2FzZS5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpLnByb21pc2U7XHJcbiAgICB9XHJcbiAgICBnZXRJbW1lZGlhdGUob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbmFsID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9wdGlvbmFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEluIGNhc2UgYSBjb21wb25lbnQgaXMgbm90IGluaXRpYWxpemVkIGFuZCBzaG91bGQvY2FuIG5vdCBiZSBhdXRvLWluaXRpYWxpemVkIGF0IHRoZSBtb21lbnQsIHJldHVybiBudWxsIGlmIHRoZSBvcHRpb25hbCBmbGFnIGlzIHNldCwgb3IgdGhyb3dcclxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBTZXJ2aWNlICR7dGhpcy5uYW1lfSBpcyBub3QgYXZhaWxhYmxlYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRDb21wb25lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgc2V0Q29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGlmIChjb21wb25lbnQubmFtZSAhPT0gdGhpcy5uYW1lKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNtYXRjaGluZyBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZm9yIFByb3ZpZGVyICR7dGhpcy5uYW1lfS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgZm9yICR7dGhpcy5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIC8vIHJldHVybiBlYXJseSB3aXRob3V0IGF0dGVtcHRpbmcgdG8gaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGlmIHRoZSBjb21wb25lbnQgcmVxdWlyZXMgZXhwbGljaXQgaW5pdGlhbGl6YXRpb24gKGNhbGxpbmcgYFByb3ZpZGVyLmluaXRpYWxpemUoKWApXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB0aGUgc2VydmljZSBpcyBlYWdlciwgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG4gICAgICAgIGlmIChpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IGZvciBhbiBlYWdlciBDb21wb25lbnQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgdGhlIGVhZ2VyXHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZSBhIGZhdGFsIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW52ZXN0aWdhdGUgaWYgd2UgbmVlZCB0byBtYWtlIGl0IGNvbmZpZ3VyYWJsZSwgYmVjYXVzZSBzb21lIGNvbXBvbmVudCBtYXkgd2FudCB0byBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvciBpbiB0aGlzIGNhc2U/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ3JlYXRlIHNlcnZpY2UgaW5zdGFuY2VzIGZvciB0aGUgcGVuZGluZyBwcm9taXNlcyBhbmQgcmVzb2x2ZSB0aGVtXHJcbiAgICAgICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcclxuICAgICAgICAvLyBhbmQgYWxsIHByb21pc2VzIHdpdGggcmVzb2x2ZSB3aXRoIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIGlkZW50aWZpZXIuXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBgZ2V0T3JJbml0aWFsaXplU2VydmljZSgpYCBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbGlkIGluc3RhbmNlIHNpbmNlIGEgY29tcG9uZW50IGlzIGd1YXJhbnRlZWQuIHVzZSAhIHRvIG1ha2UgdHlwZXNjcmlwdCBoYXBweS5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xlYXJJbnN0YW5jZShpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICAvLyBhcHAuZGVsZXRlKCkgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIG9uIGV2ZXJ5IHByb3ZpZGVyIHRvIGRlbGV0ZSB0aGUgc2VydmljZXNcclxuICAgIC8vIFRPRE86IHNob3VsZCB3ZSBtYXJrIHRoZSBwcm92aWRlciBhcyBkZWxldGVkP1xyXG4gICAgYXN5bmMgZGVsZXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHNlcnZpY2VzID0gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdJTlRFUk5BTCcgaW4gc2VydmljZSkgLy8gbGVnYWN5IHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuSU5URVJOQUwuZGVsZXRlKCkpLFxyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdfZGVsZXRlJyBpbiBzZXJ2aWNlKSAvLyBtb2R1bGFyaXplZCBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLl9kZWxldGUoKSlcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIGlzQ29tcG9uZW50U2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudCAhPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaXNJbml0aWFsaXplZChpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmhhcyhpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIGdldE9wdGlvbnMoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc09wdGlvbnMuZ2V0KGlkZW50aWZpZXIpIHx8IHt9O1xyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZShvcHRzID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSB7fSB9ID0gb3B0cztcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdHMuaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgJHt0aGlzLm5hbWV9KCR7bm9ybWFsaXplZElkZW50aWZpZXJ9KSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgJHt0aGlzLm5hbWV9IGhhcyBub3QgYmVlbiByZWdpc3RlcmVkIHlldGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXIsXHJcbiAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyByZXNvbHZlIGFueSBwZW5kaW5nIHByb21pc2Ugd2FpdGluZyBmb3IgdGhlIHNlcnZpY2UgaW5zdGFuY2VcclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZElkZW50aWZpZXIgPT09IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCAgYWZ0ZXIgdGhlIHByb3ZpZGVyIGhhcyBiZWVuIGluaXRpYWxpemVkIGJ5IGNhbGxpbmcgcHJvdmlkZXIuaW5pdGlhbGl6ZSgpLlxyXG4gICAgICogVGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgU1lOQ0hST05PVVNMWSwgc28gaXQgc2hvdWxkIG5vdCBleGVjdXRlIGFueSBsb25ncnVubmluZyB0YXNrcyBpbiBvcmRlciB0byBub3QgYmxvY2sgdGhlIHByb2dyYW0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQW4gb3B0aW9uYWwgaW5zdGFuY2UgaWRlbnRpZmllclxyXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB0byB1bnJlZ2lzdGVyIHRoZSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBvbkluaXQoY2FsbGJhY2ssIGlkZW50aWZpZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0NhbGxiYWNrcyA9IChfYSA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChub3JtYWxpemVkSWRlbnRpZmllcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBTZXQoKTtcclxuICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZXhpc3RpbmdDYWxsYmFja3MpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGV4aXN0aW5nSW5zdGFuY2UsIG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuZGVsZXRlKGNhbGxiYWNrKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2Ugb25Jbml0IGNhbGxiYWNrcyBzeW5jaHJvbm91c2x5XHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgdGhlIHNlcnZpY2UgaW5zdGFuY2VgXHJcbiAgICAgKi9cclxuICAgIGludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaWRlbnRpZmllcikge1xyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbnN0YW5jZSwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluaXQgY2FsbGJhY2tcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMgPSB7fSB9KSB7XHJcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZSAmJiB0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IHRoaXMuY29tcG9uZW50Lmluc3RhbmNlRmFjdG9yeSh0aGlzLmNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpbnN0YW5jZUlkZW50aWZpZXIpLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJbnZva2Ugb25Jbml0IGxpc3RlbmVycy5cclxuICAgICAgICAgICAgICogTm90ZSB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCBpcyBkaWZmZXJlbnQsIHdoaWNoIGlzIHVzZWQgYnkgdGhlIGNvbXBvbmVudCBjcmVhdG9yLFxyXG4gICAgICAgICAgICAgKiB3aGlsZSBvbkluaXQgbGlzdGVuZXJzIGFyZSByZWdpc3RlcmVkIGJ5IGNvbnN1bWVycyBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLmludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9yZGVyIGlzIGltcG9ydGFudFxyXG4gICAgICAgICAgICAgKiBvbkluc3RhbmNlQ3JlYXRlZCgpIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpOyB3aGljaFxyXG4gICAgICAgICAgICAgKiBtYWtlcyBgaXNJbml0aWFsaXplZCgpYCByZXR1cm4gdHJ1ZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCh0aGlzLmNvbnRhaW5lciwgaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluc3RhbmNlQ3JlYXRlZENhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXI7IC8vIGFzc3VtZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBwcm92aWRlZC5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG91bGRBdXRvSW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICByZXR1cm4gKCEhdGhpcy5jb21wb25lbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgIT09IFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLyk7XHJcbiAgICB9XHJcbn1cclxuLy8gdW5kZWZpbmVkIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIHNlcnZpY2UgZmFjdG9yeSBmb3IgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuZnVuY3Rpb24gbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaWRlbnRpZmllcikge1xyXG4gICAgcmV0dXJuIGlkZW50aWZpZXIgPT09IERFRkFVTFRfRU5UUllfTkFNRSA/IHVuZGVmaW5lZCA6IGlkZW50aWZpZXI7XHJcbn1cclxuZnVuY3Rpb24gaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBjb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgPT09IFwiRUFHRVJcIiAvKiBFQUdFUiAqLztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50Q29udGFpbmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgYmVpbmcgYWRkZWRcclxuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIHRydWU6IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgY29tcG9uZW50IHdpdGggdGhlIG5ldyBjb21wb25lbnQgYW5kIGNyZWF0ZSBhIG5ld1xyXG4gICAgICogcHJvdmlkZXIgd2l0aCB0aGUgbmV3IGNvbXBvbmVudC4gSXQgY2FuIGJlIHVzZWZ1bCBpbiB0ZXN0cyB3aGVyZSB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IG1vY2tzXHJcbiAgICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIGZhbHNlOiB0aHJvdyBhbiBleGNlcHRpb25cclxuICAgICAqL1xyXG4gICAgYWRkQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggJHt0aGlzLm5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhlIGV4aXN0aW5nIHByb3ZpZGVyIGZyb20gdGhlIGNvbnRhaW5lciwgc28gd2UgY2FuIHJlZ2lzdGVyIHRoZSBuZXcgY29tcG9uZW50XHJcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXJzLmRlbGV0ZShjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcclxuICAgICAqIHByZXNlbnQgaW4gTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcclxuICAgICAqIHRoZW1zZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIGdldFByb3ZpZGVyKG5hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm92aWRlcnMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVycy5nZXQobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNyZWF0ZSBhIFByb3ZpZGVyIGZvciBhIHNlcnZpY2UgdGhhdCBoYXNuJ3QgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlXHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIobmFtZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIHByb3ZpZGVyKTtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XHJcbiAgICB9XHJcbiAgICBnZXRQcm92aWRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyLCBQcm92aWRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXHJcbiAqL1xyXG5jb25zdCBpbnN0YW5jZXMgPSBbXTtcclxuLyoqXHJcbiAqIFRoZSBKUyBTREsgc3VwcG9ydHMgNSBsb2cgbGV2ZWxzIGFuZCBhbHNvIGFsbG93cyBhIHVzZXIgdGhlIGFiaWxpdHkgdG9cclxuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBUaGUgb3JkZXIgaXMgYSBmb2xsb3dzOlxyXG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCB3aWxsIGJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXHJcbiAqIGBWRVJCT1NFYCBsb2dzIHdpbGwgbm90KVxyXG4gKi9cclxudmFyIExvZ0xldmVsO1xyXG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkRFQlVHXCJdID0gMF0gPSBcIkRFQlVHXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJJTkZPXCJdID0gMl0gPSBcIklORk9cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiV0FSTlwiXSA9IDNdID0gXCJXQVJOXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDVdID0gXCJTSUxFTlRcIjtcclxufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcclxuY29uc3QgbGV2ZWxTdHJpbmdUb0VudW0gPSB7XHJcbiAgICAnZGVidWcnOiBMb2dMZXZlbC5ERUJVRyxcclxuICAgICd2ZXJib3NlJzogTG9nTGV2ZWwuVkVSQk9TRSxcclxuICAgICdpbmZvJzogTG9nTGV2ZWwuSU5GTyxcclxuICAgICd3YXJuJzogTG9nTGV2ZWwuV0FSTixcclxuICAgICdlcnJvcic6IExvZ0xldmVsLkVSUk9SLFxyXG4gICAgJ3NpbGVudCc6IExvZ0xldmVsLlNJTEVOVFxyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGxldmVsXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xyXG4vKipcclxuICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxyXG4gKiBjaHJvbWUpLiBUbyBhdm9pZCBmb3JjaW5nIHVzZXJzIHRvIGhhdmUgdG8gb3B0LWluIHRvIHRoZXNlIGxvZ3MgdHdpY2VcclxuICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxyXG4gKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxyXG4gKi9cclxuY29uc3QgQ29uc29sZU1ldGhvZCA9IHtcclxuICAgIFtMb2dMZXZlbC5ERUJVR106ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLlZFUkJPU0VdOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5JTkZPXTogJ2luZm8nLFxyXG4gICAgW0xvZ0xldmVsLldBUk5dOiAnd2FybicsXHJcbiAgICBbTG9nTGV2ZWwuRVJST1JdOiAnZXJyb3InXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgaGFuZGxlciB3aWxsIGZvcndhcmQgREVCVUcsIFZFUkJPU0UsIElORk8sIFdBUk4sIGFuZCBFUlJPUlxyXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxyXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxvZ1R5cGUsIC4uLmFyZ3MpID0+IHtcclxuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBjb25zdCBtZXRob2QgPSBDb25zb2xlTWV0aG9kW2xvZ1R5cGVdO1xyXG4gICAgaWYgKG1ldGhvZCkge1xyXG4gICAgICAgIGNvbnNvbGVbbWV0aG9kXShgWyR7bm93fV0gICR7aW5zdGFuY2UubmFtZX06YCwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBsb2cgYSBtZXNzYWdlIHdpdGggYW4gaW52YWxpZCBsb2dUeXBlICh2YWx1ZTogJHtsb2dUeXBlfSlgKTtcclxuICAgIH1cclxufTtcclxuY2xhc3MgTG9nZ2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXHJcbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxvZyBsZXZlbCBvZiB0aGUgZ2l2ZW4gTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gZGVmYXVsdExvZ0xldmVsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBtYWluIChpbnRlcm5hbCkgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQ2FuIGJlIHNldCB0byBhIG5ldyBmdW5jdGlvbiBpbiBpbnRlcm5hbCBwYWNrYWdlIGNvZGUgYnV0IG5vdCBieSB1c2VyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgb3B0aW9uYWwsIGFkZGl0aW9uYWwsIHVzZXItZGVmaW5lZCBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5zdGFuY2VzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0xldmVsO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIGlmICghKHZhbCBpbiBMb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBcIiR7dmFsfVwiIGFzc2lnbmVkIHRvIFxcYGxvZ0xldmVsXFxgYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3Igc2V0dGVyL2dldHRlciBoYXZpbmcgdG8gYmUgdGhlIHNhbWUgdHlwZS5cclxuICAgIHNldExvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyBsZXZlbFN0cmluZ1RvRW51bVt2YWxdIDogdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBhc3NpZ25lZCB0byBgbG9nSGFuZGxlcmAgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlckxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJMb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IHVzZXJMb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcclxuICAgICAqL1xyXG4gICAgZGVidWcoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGxvZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGluZm8oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICB3YXJuKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gICAgaW5zdGFuY2VzLmZvckVhY2goaW5zdCA9PiB7XHJcbiAgICAgICAgaW5zdC5zZXRMb2dMZXZlbChsZXZlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcclxuICAgICAgICBsZXQgY3VzdG9tTG9nTGV2ZWwgPSBudWxsO1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGV2ZWwpIHtcclxuICAgICAgICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxvZ0NhbGxiYWNrID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsZXZlbCwgLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGFyZ3NcclxuICAgICAgICAgICAgICAgICAgICAubWFwKGFyZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGFyZyA9PiBhcmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+PSAoY3VzdG9tTG9nTGV2ZWwgIT09IG51bGwgJiYgY3VzdG9tTG9nTGV2ZWwgIT09IHZvaWQgMCA/IGN1c3RvbUxvZ0xldmVsIDogaW5zdGFuY2UubG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogTG9nTGV2ZWxbbGV2ZWxdLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGluc3RhbmNlLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwsIHNldFVzZXJMb2dIYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiY29uc3QgaW5zdGFuY2VPZkFueSA9IChvYmplY3QsIGNvbnN0cnVjdG9ycykgPT4gY29uc3RydWN0b3JzLnNvbWUoKGMpID0+IG9iamVjdCBpbnN0YW5jZW9mIGMpO1xuXG5sZXQgaWRiUHJveHlhYmxlVHlwZXM7XG5sZXQgY3Vyc29yQWR2YW5jZU1ldGhvZHM7XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldElkYlByb3h5YWJsZVR5cGVzKCkge1xuICAgIHJldHVybiAoaWRiUHJveHlhYmxlVHlwZXMgfHxcbiAgICAgICAgKGlkYlByb3h5YWJsZVR5cGVzID0gW1xuICAgICAgICAgICAgSURCRGF0YWJhc2UsXG4gICAgICAgICAgICBJREJPYmplY3RTdG9yZSxcbiAgICAgICAgICAgIElEQkluZGV4LFxuICAgICAgICAgICAgSURCQ3Vyc29yLFxuICAgICAgICAgICAgSURCVHJhbnNhY3Rpb24sXG4gICAgICAgIF0pKTtcbn1cbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIChjdXJzb3JBZHZhbmNlTWV0aG9kcyB8fFxuICAgICAgICAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgPSBbXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmFkdmFuY2UsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZVByaW1hcnlLZXksXG4gICAgICAgIF0pKTtcbn1cbmNvbnN0IGN1cnNvclJlcXVlc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25Eb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHdyYXAocmVxdWVzdC5yZXN1bHQpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgfSk7XG4gICAgcHJvbWlzZVxuICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgLy8gU2luY2UgY3Vyc29yaW5nIHJldXNlcyB0aGUgSURCUmVxdWVzdCAoKnNpZ2gqKSwgd2UgY2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbFxuICAgICAgICAvLyAoc2VlIHdyYXBGdW5jdGlvbikuXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQkN1cnNvcikge1xuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdE1hcC5zZXQodmFsdWUsIHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhdGNoaW5nIHRvIGF2b2lkIFwiVW5jYXVnaHQgUHJvbWlzZSBleGNlcHRpb25zXCJcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAvLyBUaGlzIG1hcHBpbmcgZXhpc3RzIGluIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBidXQgZG9lc24ndCBkb2Vzbid0IGV4aXN0IGluIHRyYW5zZm9ybUNhY2hlLiBUaGlzXG4gICAgLy8gaXMgYmVjYXVzZSB3ZSBjcmVhdGUgbWFueSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QuXG4gICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChwcm9taXNlLCByZXF1ZXN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih0eCkge1xuICAgIC8vIEVhcmx5IGJhaWwgaWYgd2UndmUgYWxyZWFkeSBjcmVhdGVkIGEgZG9uZSBwcm9taXNlIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgIGlmICh0cmFuc2FjdGlvbkRvbmVNYXAuaGFzKHR4KSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGRvbmUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHR4LmVycm9yIHx8IG5ldyBET01FeGNlcHRpb24oJ0Fib3J0RXJyb3InLCAnQWJvcnRFcnJvcicpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgfSk7XG4gICAgLy8gQ2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbC5cbiAgICB0cmFuc2FjdGlvbkRvbmVNYXAuc2V0KHR4LCBkb25lKTtcbn1cbmxldCBpZGJQcm94eVRyYXBzID0ge1xuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgdHJhbnNhY3Rpb24uZG9uZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnZG9uZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uRG9uZU1hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIFBvbHlmaWxsIGZvciBvYmplY3RTdG9yZU5hbWVzIGJlY2F1c2Ugb2YgRWRnZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnb2JqZWN0U3RvcmVOYW1lcycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9iamVjdFN0b3JlTmFtZXMgfHwgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFrZSB0eC5zdG9yZSByZXR1cm4gdGhlIG9ubHkgc3RvcmUgaW4gdGhlIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG1hbnkuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3N0b3JlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzFdXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogcmVjZWl2ZXIub2JqZWN0U3RvcmUocmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRWxzZSB0cmFuc2Zvcm0gd2hhdGV2ZXIgd2UgZ2V0IGJhY2suXG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldFtwcm9wXSk7XG4gICAgfSxcbiAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBoYXModGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbiAmJlxuICAgICAgICAgICAgKHByb3AgPT09ICdkb25lJyB8fCBwcm9wID09PSAnc3RvcmUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0O1xuICAgIH0sXG59O1xuZnVuY3Rpb24gcmVwbGFjZVRyYXBzKGNhbGxiYWNrKSB7XG4gICAgaWRiUHJveHlUcmFwcyA9IGNhbGxiYWNrKGlkYlByb3h5VHJhcHMpO1xufVxuZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAvLyBEdWUgdG8gZXhwZWN0ZWQgb2JqZWN0IGVxdWFsaXR5ICh3aGljaCBpcyBlbmZvcmNlZCBieSB0aGUgY2FjaGluZyBpbiBgd3JhcGApLCB3ZVxuICAgIC8vIG9ubHkgY3JlYXRlIG9uZSBuZXcgZnVuYyBwZXIgZnVuYy5cbiAgICAvLyBFZGdlIGRvZXNuJ3Qgc3VwcG9ydCBvYmplY3RTdG9yZU5hbWVzIChib29vKSwgc28gd2UgcG9seWZpbGwgaXQgaGVyZS5cbiAgICBpZiAoZnVuYyA9PT0gSURCRGF0YWJhc2UucHJvdG90eXBlLnRyYW5zYWN0aW9uICYmXG4gICAgICAgICEoJ29iamVjdFN0b3JlTmFtZXMnIGluIElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZU5hbWVzLCAuLi5hcmdzKSB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGZ1bmMuY2FsbCh1bndyYXAodGhpcyksIHN0b3JlTmFtZXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLnNldCh0eCwgc3RvcmVOYW1lcy5zb3J0ID8gc3RvcmVOYW1lcy5zb3J0KCkgOiBbc3RvcmVOYW1lc10pO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAodHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBDdXJzb3IgbWV0aG9kcyBhcmUgc3BlY2lhbCwgYXMgdGhlIGJlaGF2aW91ciBpcyBhIGxpdHRsZSBtb3JlIGRpZmZlcmVudCB0byBzdGFuZGFyZCBJREIuIEluXG4gICAgLy8gSURCLCB5b3UgYWR2YW5jZSB0aGUgY3Vyc29yIGFuZCB3YWl0IGZvciBhIG5ldyAnc3VjY2Vzcycgb24gdGhlIElEQlJlcXVlc3QgdGhhdCBnYXZlIHlvdSB0aGVcbiAgICAvLyBjdXJzb3IuIEl0J3Mga2luZGEgbGlrZSBhIHByb21pc2UgdGhhdCBjYW4gcmVzb2x2ZSB3aXRoIG1hbnkgdmFsdWVzLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZVxuICAgIC8vIHdpdGggcmVhbCBwcm9taXNlcywgc28gZWFjaCBhZHZhbmNlIG1ldGhvZHMgcmV0dXJucyBhIG5ldyBwcm9taXNlIGZvciB0aGUgY3Vyc29yIG9iamVjdCwgb3JcbiAgICAvLyB1bmRlZmluZWQgaWYgdGhlIGVuZCBvZiB0aGUgY3Vyc29yIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAgaWYgKGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkuaW5jbHVkZXMoZnVuYykpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICAgICAgZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAoY3Vyc29yUmVxdWVzdE1hcC5nZXQodGhpcykpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICByZXR1cm4gd3JhcChmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncykpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHdyYXBGdW5jdGlvbih2YWx1ZSk7XG4gICAgLy8gVGhpcyBkb2Vzbid0IHJldHVybiwgaXQganVzdCBjcmVhdGVzIGEgJ2RvbmUnIHByb21pc2UgZm9yIHRoZSB0cmFuc2FjdGlvbixcbiAgICAvLyB3aGljaCBpcyBsYXRlciByZXR1cm5lZCBmb3IgdHJhbnNhY3Rpb24uZG9uZSAoc2VlIGlkYk9iamVjdEhhbmRsZXIpLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKVxuICAgICAgICBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odmFsdWUpO1xuICAgIGlmIChpbnN0YW5jZU9mQW55KHZhbHVlLCBnZXRJZGJQcm94eWFibGVUeXBlcygpKSlcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgaWRiUHJveHlUcmFwcyk7XG4gICAgLy8gUmV0dXJuIHRoZSBzYW1lIHZhbHVlIGJhY2sgaWYgd2UncmUgbm90IGdvaW5nIHRvIHRyYW5zZm9ybSBpdC5cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB3cmFwKHZhbHVlKSB7XG4gICAgLy8gV2Ugc29tZXRpbWVzIGdlbmVyYXRlIG11bHRpcGxlIHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdCAoZWcgd2hlbiBjdXJzb3JpbmcpLCBiZWNhdXNlXG4gICAgLy8gSURCIGlzIHdlaXJkIGFuZCBhIHNpbmdsZSBJREJSZXF1ZXN0IGNhbiB5aWVsZCBtYW55IHJlc3BvbnNlcywgc28gdGhlc2UgY2FuJ3QgYmUgY2FjaGVkLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlJlcXVlc3QpXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHZhbHVlKTtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHRyYW5zZm9ybWVkIHRoaXMgdmFsdWUgYmVmb3JlLCByZXVzZSB0aGUgdHJhbnNmb3JtZWQgdmFsdWUuXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIsIGJ1dCBpdCBhbHNvIHByb3ZpZGVzIG9iamVjdCBlcXVhbGl0eS5cbiAgICBpZiAodHJhbnNmb3JtQ2FjaGUuaGFzKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKTtcbiAgICAvLyBOb3QgYWxsIHR5cGVzIGFyZSB0cmFuc2Zvcm1lZC5cbiAgICAvLyBUaGVzZSBtYXkgYmUgcHJpbWl0aXZlIHR5cGVzLCBzbyB0aGV5IGNhbid0IGJlIFdlYWtNYXAga2V5cy5cbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KG5ld1ZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbmNvbnN0IHVud3JhcCA9ICh2YWx1ZSkgPT4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG5cbmV4cG9ydCB7IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBhcyBhLCBpbnN0YW5jZU9mQW55IGFzIGksIHJlcGxhY2VUcmFwcyBhcyByLCB1bndyYXAgYXMgdSwgd3JhcCBhcyB3IH07XG4iLCJpbXBvcnQgeyB3IGFzIHdyYXAsIHIgYXMgcmVwbGFjZVRyYXBzIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5leHBvcnQgeyB1IGFzIHVud3JhcCwgdyBhcyB3cmFwIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5cbi8qKlxuICogT3BlbiBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHBhcmFtIHZlcnNpb24gU2NoZW1hIHZlcnNpb24uXG4gKiBAcGFyYW0gY2FsbGJhY2tzIEFkZGl0aW9uYWwgY2FsbGJhY2tzLlxuICovXG5mdW5jdGlvbiBvcGVuREIobmFtZSwgdmVyc2lvbiwgeyBibG9ja2VkLCB1cGdyYWRlLCBibG9ja2luZywgdGVybWluYXRlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XG4gICAgY29uc3Qgb3BlblByb21pc2UgPSB3cmFwKHJlcXVlc3QpO1xuICAgIGlmICh1cGdyYWRlKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdXBncmFkZSh3cmFwKHJlcXVlc3QucmVzdWx0KSwgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgd3JhcChyZXF1ZXN0LnRyYW5zYWN0aW9uKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoYmxvY2tlZClcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKCkgPT4gYmxvY2tlZCgpKTtcbiAgICBvcGVuUHJvbWlzZVxuICAgICAgICAudGhlbigoZGIpID0+IHtcbiAgICAgICAgaWYgKHRlcm1pbmF0ZWQpXG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHRlcm1pbmF0ZWQoKSk7XG4gICAgICAgIGlmIChibG9ja2luZylcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ3ZlcnNpb25jaGFuZ2UnLCAoKSA9PiBibG9ja2luZygpKTtcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICByZXR1cm4gb3BlblByb21pc2U7XG59XG4vKipcbiAqIERlbGV0ZSBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICovXG5mdW5jdGlvbiBkZWxldGVEQihuYW1lLCB7IGJsb2NrZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShuYW1lKTtcbiAgICBpZiAoYmxvY2tlZClcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKCkgPT4gYmxvY2tlZCgpKTtcbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG5yZXBsYWNlVHJhcHMoKG9sZFRyYXBzKSA9PiAoe1xuICAgIC4uLm9sZFRyYXBzLFxuICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSxcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXG59KSk7XG5cbmV4cG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGdldERlZmF1bHRBcHBDb25maWcsIGRlZXBFcXVhbCwgRmlyZWJhc2VFcnJvciwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovO1xyXG59XG5cbmNvbnN0IG5hbWUkbyA9IFwiQGZpcmViYXNlL2FwcFwiO1xuY29uc3QgdmVyc2lvbiQxID0gXCIwLjguMlwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCI5LjEyLjFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICBjb25zdCBoZWFydGJlYXRDb250cm9sbGVyID0gYXBwLmNvbnRhaW5lclxyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcclxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0Q29udHJvbGxlcikge1xyXG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIE5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgW1wiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcclxuICAgIFtcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBbXCJuby1vcHRpb25zXCIgLyogTk9fT1BUSU9OUyAqL106ICdOZWVkIHRvIHByb3ZpZGUgb3B0aW9ucywgd2hlbiBub3QgYmVpbmcgZGVwbG95ZWQgdG8gaG9zdGluZyB2aWEgc291cmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIElOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIElOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcclxuICAgIFtcImlkYi1vcGVuXCIgLyogSURCX09QRU4gKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gb3BlbmluZyBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWdldFwiIC8qIElEQl9HRVQgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gcmVhZGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItc2V0XCIgLyogSURCX1dSSVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIHdyaXRpbmcgdG8gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1kZWxldGVcIiAvKiBJREJfREVMRVRFICovXTogJ0Vycm9yIHRocm93biB3aGVuIGRlbGV0aW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgIH1cclxuICAgIHNldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBjb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7XHJcbiAgICB9XHJcbiAgICBnZXQgY29udGFpbmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNEZWxldGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0RlbGV0ZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgaXNEZWxldGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cclxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxyXG4gICAgICovXHJcbiAgICBjaGVja0Rlc3Ryb3llZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtZGVsZXRlZFwiIC8qIEFQUF9ERUxFVEVEICovLCB7IGFwcE5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgY3VycmVudCBTREsgdmVyc2lvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgU0RLX1ZFUlNJT04gPSB2ZXJzaW9uO1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQXBwKF9vcHRpb25zLCByYXdDb25maWcgPSB7fSkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSBfb3B0aW9ucztcclxuICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XHJcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XHJcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0gZ2V0RGVmYXVsdEFwcENvbmZpZygpKTtcclxuICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tb3B0aW9uc1wiIC8qIE5PX09QVElPTlMgKi8pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXhpc3RpbmdBcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoZXhpc3RpbmdBcHApIHtcclxuICAgICAgICAvLyByZXR1cm4gdGhlIGV4aXN0aW5nIGFwcCBpZiBvcHRpb25zIGFuZCBjb25maWcgZGVlcCBlcXVhbCB0aGUgb25lcyBpbiB0aGUgZXhpc3RpbmcgYXBwLlxyXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgZXhpc3RpbmdBcHAub3B0aW9ucykgJiZcclxuICAgICAgICAgICAgZGVlcEVxdWFsKGNvbmZpZywgZXhpc3RpbmdBcHAuY29uZmlnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdBcHA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IENvbXBvbmVudENvbnRhaW5lcihuYW1lKTtcclxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9jb21wb25lbnRzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3QXBwID0gbmV3IEZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XHJcbiAgICBfYXBwcy5zZXQobmFtZSwgbmV3QXBwKTtcclxuICAgIHJldHVybiBuZXdBcHA7XHJcbn1cclxuLyoqXHJcbiAqIFJldHJpZXZlcyBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cclxuICpcclxuICogV2hlbiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC4gV2hlbiBhbiBhcHAgbmFtZVxyXG4gKiBpcyBwcm92aWRlZCwgdGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoYXQgbmFtZSBpcyByZXR1cm5lZC5cclxuICpcclxuICogQW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiB0aGUgYXBwIGJlaW5nIHJldHJpZXZlZCBoYXMgbm90IHlldCBiZWVuXHJcbiAqIGluaXRpYWxpemVkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiB0aGUgZGVmYXVsdCBhcHBcclxuICogY29uc3QgYXBwID0gZ2V0QXBwKCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiBhIG5hbWVkIGFwcFxyXG4gKiBjb25zdCBvdGhlckFwcCA9IGdldEFwcChcIm90aGVyQXBwXCIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBhcHAgdG8gcmV0dXJuLiBJZiBubyBuYW1lIGlzXHJcbiAqICAgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGlzIGBcIltERUZBVUxUXVwiYC5cclxuICpcclxuICogQHJldHVybnMgVGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBhcHAgbmFtZS5cclxuICogICBJZiBubyBhcHAgbmFtZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHAobmFtZSA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgY29uc3QgYXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKCFhcHAgJiYgbmFtZSA9PT0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIGluaXRpYWxpemVBcHAoKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBOT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHA7XHJcbn1cclxuLyoqXHJcbiAqIEEgKHJlYWQtb25seSkgYXJyYXkgb2YgYWxsIGluaXRpYWxpemVkIGFwcHMuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShfYXBwcy52YWx1ZXMoKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcclxuICogc2VydmljZXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZGVsZXRlQXBwKGFwcClcclxuICogICAudGhlbihmdW5jdGlvbigpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiQXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gKiAgIH0pXHJcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGRlbGV0aW5nIGFwcDpcIiwgZXJyb3IpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwKGFwcCkge1xyXG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhcHAuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcnMoKVxyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKSk7XHJcbiAgICAgICAgYXBwLmlzRGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhIGxpYnJhcnkncyBuYW1lIGFuZCB2ZXJzaW9uIGZvciBwbGF0Zm9ybSBsb2dnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcGFyYW0gbGlicmFyeSAtIE5hbWUgb2YgMXAgb3IgM3AgbGlicmFyeSAoZS5nLiBmaXJlc3RvcmUsIGFuZ3VsYXJmaXJlKVxyXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXHJcbiAqIEBwYXJhbSB2YXJpYW50IC0gQnVuZGxlIHZhcmlhbnQsIGUuZy4sIG5vZGUsIHJuLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcclxuICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgbGV0IGxpYnJhcnkgPSAoX2EgPSBQTEFURk9STV9MT0dfU1RSSU5HW2xpYnJhcnlLZXlPck5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBsaWJyYXJ5S2V5T3JOYW1lO1xyXG4gICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBpZiAobGlicmFyeU1pc21hdGNoIHx8IHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBbXHJcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoYCR7bGlicmFyeX0tdmVyc2lvbmAsICgpID0+ICh7IGxpYnJhcnksIHZlcnNpb24gfSksIFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi8pKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgaGFuZGxlciBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqIEBwYXJhbSBsb2dDYWxsYmFjayAtIEFuIG9wdGlvbmFsIGN1c3RvbSBsb2cgaGFuZGxlciB0aGF0IGV4ZWN1dGVzIHVzZXIgY29kZSB3aGVuZXZlclxyXG4gKiB0aGUgRmlyZWJhc2UgU0RLIG1ha2VzIGEgbG9nZ2luZyBjYWxsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkxvZyhsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgaWYgKGxvZ0NhbGxiYWNrICE9PSBudWxsICYmIHR5cGVvZiBsb2dDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBJTlZBTElEX0xPR19BUkdVTUVOVCAqLyk7XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucyk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGxldmVsIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIGFyZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYGluZm9gLCBlcnJvcnMgYXJlIGxvZ2dlZCwgYnV0IGBkZWJ1Z2AgYW5kXHJcbiAqIGB2ZXJib3NlYCBsb2dzIGFyZSBub3QpLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsb2dMZXZlbCkge1xyXG4gICAgc2V0TG9nTGV2ZWwkMShsb2dMZXZlbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREJfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtZGF0YWJhc2UnO1xyXG5jb25zdCBEQl9WRVJTSU9OID0gMTtcclxuY29uc3QgU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtc3RvcmUnO1xyXG5sZXQgZGJQcm9taXNlID0gbnVsbDtcclxuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xyXG4gICAgaWYgKCFkYlByb21pc2UpIHtcclxuICAgICAgICBkYlByb21pc2UgPSBvcGVuREIoREJfTkFNRSwgREJfVkVSU0lPTiwge1xyXG4gICAgICAgICAgICB1cGdyYWRlOiAoZGIsIG9sZFZlcnNpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxyXG4gICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LCBiZWNhdXNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2ZXJzaW9ucyBiZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXHJcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLW9wZW5cIiAvKiBJREJfT1BFTiAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKGFwcCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgICAgIHJldHVybiBkYlxyXG4gICAgICAgICAgICAudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpXHJcbiAgICAgICAgICAgIC5nZXQoY29tcHV0ZUtleShhcHApKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLWdldFwiIC8qIElEQl9HRVQgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiAoX2EgPSBlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKGFwcCwgaGVhcnRiZWF0T2JqZWN0KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQoaGVhcnRiZWF0T2JqZWN0LCBjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgICAgIHJldHVybiB0eC5kb25lO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItc2V0XCIgLyogSURCX1dSSVRFICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogKF9hID0gZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGlkYkdldEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjb21wdXRlS2V5KGFwcCkge1xyXG4gICAgcmV0dXJuIGAke2FwcC5uYW1lfSEke2FwcC5vcHRpb25zLmFwcElkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgTUFYX0hFQURFUl9CWVRFUyA9IDEwMjQ7XHJcbi8vIDMwIGRheXNcclxuY29uc3QgU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUyA9IDMwICogMjQgKiA2MCAqIDYwICogMTAwMDtcclxuY2xhc3MgSGVhcnRiZWF0U2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW4tbWVtb3J5IGNhY2hlIGZvciBoZWFydGJlYXRzLCB1c2VkIGJ5IGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB0byBnZW5lcmF0ZVxyXG4gICAgICAgICAqIHRoZSBoZWFkZXIgc3RyaW5nLlxyXG4gICAgICAgICAqIFN0b3JlcyBvbmUgcmVjb3JkIHBlciBkYXRlLiBUaGlzIHdpbGwgYmUgY29uc29saWRhdGVkIGludG8gdGhlIHN0YW5kYXJkXHJcbiAgICAgICAgICogZm9ybWF0IG9mIG9uZSByZWNvcmQgcGVyIHVzZXIgYWdlbnQgc3RyaW5nIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgaGVhZGVyLlxyXG4gICAgICAgICAqIFBvcHVsYXRlZCBmcm9tIGluZGV4ZWREQiB3aGVuIHRoZSBjb250cm9sbGVyIGlzIGluc3RhbnRpYXRlZCBhbmQgc2hvdWxkXHJcbiAgICAgICAgICogYmUga2VwdCBpbiBzeW5jIHdpdGggaW5kZXhlZERCLlxyXG4gICAgICAgICAqIExlYXZlIHB1YmxpYyBmb3IgZWFzaWVyIHRlc3RpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gbnVsbDtcclxuICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fc3RvcmFnZSA9IG5ldyBIZWFydGJlYXRTdG9yYWdlSW1wbChhcHApO1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UgPSB0aGlzLl9zdG9yYWdlLnJlYWQoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHRvIHJlcG9ydCBhIGhlYXJ0YmVhdC4gVGhlIGZ1bmN0aW9uIHdpbGwgZ2VuZXJhdGVcclxuICAgICAqIGEgSGVhcnRiZWF0c0J5VXNlckFnZW50IG9iamVjdCwgdXBkYXRlIGhlYXJ0YmVhdHNDYWNoZSwgYW5kIHBlcnNpc3QgaXRcclxuICAgICAqIHRvIEluZGV4ZWREQi5cclxuICAgICAqIE5vdGUgdGhhdCB3ZSBvbmx5IHN0b3JlIG9uZSBoZWFydGJlYXQgcGVyIGRheS4gU28gaWYgYSBoZWFydGJlYXQgZm9yIHRvZGF5IGlzXHJcbiAgICAgKiBhbHJlYWR5IGxvZ2dlZCwgc3Vic2VxdWVudCBjYWxscyB0byB0aGlzIGZ1bmN0aW9uIGluIHRoZSBzYW1lIGRheSB3aWxsIGJlIGlnbm9yZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRyaWdnZXJIZWFydGJlYXQoKSB7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG8gbm90IHN0b3JlIGEgaGVhcnRiZWF0IGlmIG9uZSBpcyBhbHJlYWR5IHN0b3JlZCBmb3IgdGhpcyBkYXlcclxuICAgICAgICAvLyBvciBpZiBhIGhlYWRlciBoYXMgYWxyZWFkeSBiZWVuIHNlbnQgdG9kYXkuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPT09IGRhdGUgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuc29tZShzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSA9PT0gZGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gZW50cnkgZm9yIHRoaXMgZGF0ZS4gQ3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMucHVzaCh7IGRhdGUsIGFnZW50IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZW1vdmUgZW50cmllcyBvbGRlciB0aGFuIDMwIGRheXMuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5maWx0ZXIoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhiVGltZXN0YW1wID0gbmV3IERhdGUoc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBub3cgLSBoYlRpbWVzdGFtcCA8PSBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHdoaWNoIGNhbiBiZSBhdHRhY2hlZCB0byB0aGUgaGVhcnRiZWF0LXNwZWNpZmljIGhlYWRlciBkaXJlY3RseS5cclxuICAgICAqIEl0IGFsc28gY2xlYXJzIGFsbCBoZWFydGJlYXRzIGZyb20gbWVtb3J5IGFzIHdlbGwgYXMgaW4gSW5kZXhlZERCLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IENvbnN1bWluZyBwcm9kdWN0IFNES3Mgc2hvdWxkIG5vdCBzZW5kIHRoZSBoZWFkZXIgaWYgdGhpcyBtZXRob2RcclxuICAgICAqIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRIZWFydGJlYXRzSGVhZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgaXQncyBzdGlsbCBudWxsIG9yIHRoZSBhcnJheSBpcyBlbXB0eSwgdGhlcmUgaXMgbm8gZGF0YSB0byBzZW5kLlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAvLyBFeHRyYWN0IGFzIG1hbnkgaGVhcnRiZWF0cyBmcm9tIHRoZSBjYWNoZSBhcyB3aWxsIGZpdCB1bmRlciB0aGUgc2l6ZSBsaW1pdC5cclxuICAgICAgICBjb25zdCB7IGhlYXJ0YmVhdHNUb1NlbmQsIHVuc2VudEVudHJpZXMgfSA9IGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJTdHJpbmcgPSBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNUb1NlbmQgfSkpO1xyXG4gICAgICAgIC8vIFN0b3JlIGxhc3Qgc2VudCBkYXRlIHRvIHByZXZlbnQgYW5vdGhlciBiZWluZyBsb2dnZWQvc2VudCBmb3IgdGhlIHNhbWUgZGF5LlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPSBkYXRlO1xyXG4gICAgICAgIGlmICh1bnNlbnRFbnRyaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gU3RvcmUgYW55IHVuc2VudCBlbnRyaWVzIGlmIHRoZXkgZXhpc3QuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdW5zZW50RW50cmllcztcclxuICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyBtb3JlIGxpa2VseSB0aGFuIGVtcHR5aW5nIHRoZSBhcnJheSAoYmVsb3cpIHRvIGxlYWQgdG8gc29tZSBvZGQgc3RhdGVcclxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNhY2hlIGlzbid0IGVtcHR5IGFuZCB0aGlzIHdpbGwgYmUgY2FsbGVkIGFnYWluIG9uIHRoZSBuZXh0IHJlcXVlc3QsXHJcbiAgICAgICAgICAgIC8vIGFuZCBpcyBwcm9iYWJseSBzYWZlc3QgaWYgd2UgYXdhaXQgaXQuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBEbyBub3Qgd2FpdCBmb3IgdGhpcywgdG8gcmVkdWNlIGxhdGVuY3kuXHJcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlclN0cmluZztcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRVVENEYXRlU3RyaW5nKCkge1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgLy8gUmV0dXJucyBkYXRlIGZvcm1hdCAnWVlZWS1NTS1ERCdcclxuICAgIHJldHVybiB0b2RheS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCAxMCk7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIoaGVhcnRiZWF0c0NhY2hlLCBtYXhTaXplID0gTUFYX0hFQURFUl9CWVRFUykge1xyXG4gICAgLy8gSGVhcnRiZWF0cyBncm91cGVkIGJ5IHVzZXIgYWdlbnQgaW4gdGhlIHN0YW5kYXJkIGZvcm1hdCB0byBiZSBzZW50IGluXHJcbiAgICAvLyB0aGUgaGVhZGVyLlxyXG4gICAgY29uc3QgaGVhcnRiZWF0c1RvU2VuZCA9IFtdO1xyXG4gICAgLy8gU2luZ2xlIGRhdGUgZm9ybWF0IGhlYXJ0YmVhdHMgdGhhdCBhcmUgbm90IHNlbnQuXHJcbiAgICBsZXQgdW5zZW50RW50cmllcyA9IGhlYXJ0YmVhdHNDYWNoZS5zbGljZSgpO1xyXG4gICAgZm9yIChjb25zdCBzaW5nbGVEYXRlSGVhcnRiZWF0IG9mIGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgICAgIC8vIExvb2sgZm9yIGFuIGV4aXN0aW5nIGVudHJ5IHdpdGggdGhlIHNhbWUgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBoZWFydGJlYXRFbnRyeSA9IGhlYXJ0YmVhdHNUb1NlbmQuZmluZChoYiA9PiBoYi5hZ2VudCA9PT0gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCk7XHJcbiAgICAgICAgaWYgKCFoZWFydGJlYXRFbnRyeSkge1xyXG4gICAgICAgICAgICAvLyBJZiBubyBlbnRyeSBmb3IgdGhpcyB1c2VyIGFnZW50IGV4aXN0cywgY3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGFnZW50OiBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50LFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGVdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGhlYXJ0YmVhdFxyXG4gICAgICAgICAgICAgICAgLy8gZW50cnkgYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnB1c2goc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgZGF0ZVxyXG4gICAgICAgICAgICAvLyBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBvcCB1bnNlbnQgZW50cnkgZnJvbSBxdWV1ZS4gKFNraXBwZWQgaWYgYWRkaW5nIHRoZSBlbnRyeSBleGNlZWRlZFxyXG4gICAgICAgIC8vIHF1b3RhIGFuZCB0aGUgbG9vcCBicmVha3MgZWFybHkuKVxyXG4gICAgICAgIHVuc2VudEVudHJpZXMgPSB1bnNlbnRFbnRyaWVzLnNsaWNlKDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFydGJlYXRzVG9TZW5kLFxyXG4gICAgICAgIHVuc2VudEVudHJpZXNcclxuICAgIH07XHJcbn1cclxuY2xhc3MgSGVhcnRiZWF0U3RvcmFnZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZSA9IHRoaXMucnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpIHtcclxuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkIGFsbCBoZWFydGJlYXRzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyByZWFkKCkge1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgaGVhcnRiZWF0czogW10gfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkhlYXJ0YmVhdE9iamVjdCA9IGF3YWl0IHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQih0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3QgfHwgeyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIG92ZXJ3cml0ZSB0aGUgc3RvcmFnZSB3aXRoIHRoZSBwcm92aWRlZCBoZWFydGJlYXRzXHJcbiAgICBhc3luYyBvdmVyd3JpdGUoaGVhcnRiZWF0c09iamVjdCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCA9IGF3YWl0IHRoaXMucmVhZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIodGhpcy5hcHAsIHtcclxuICAgICAgICAgICAgICAgIGxhc3RTZW50SGVhcnRiZWF0RGF0ZTogKF9hID0gaGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUsXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzOiBoZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gYWRkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIGFkZChoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0cyxcclxuICAgICAgICAgICAgICAgICAgICAuLi5oZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgYnl0ZXMgb2YgYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgYXJyYXkgYWZ0ZXIgYmVpbmcgd3JhcHBlZFxyXG4gKiBpbiBhIHBsYXRmb3JtIGxvZ2dpbmcgaGVhZGVyIEpTT04gb2JqZWN0LCBzdHJpbmdpZmllZCwgYW5kIGNvbnZlcnRlZFxyXG4gKiB0byBiYXNlIDY0LlxyXG4gKi9cclxuZnVuY3Rpb24gY291bnRCeXRlcyhoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgIC8vIGJhc2U2NCBoYXMgYSByZXN0cmljdGVkIHNldCBvZiBjaGFyYWN0ZXJzLCBhbGwgb2Ygd2hpY2ggc2hvdWxkIGJlIDEgYnl0ZS5cclxuICAgIHJldHVybiBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhcclxuICAgIC8vIGhlYXJ0YmVhdHNDYWNoZSB3cmFwcGVyIHByb3BlcnRpZXNcclxuICAgIEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c0NhY2hlIH0pKS5sZW5ndGg7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgncGxhdGZvcm0tbG9nZ2VyJywgY29udGFpbmVyID0+IG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdoZWFydGJlYXQnLCBjb250YWluZXIgPT4gbmV3IEhlYXJ0YmVhdFNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgZ2V0QXBwLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjUuMTVcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUEVORElOR19USU1FT1VUX01TID0gMTAwMDA7XHJcbmNvbnN0IFBBQ0tBR0VfVkVSU0lPTiA9IGB3OiR7dmVyc2lvbn1gO1xyXG5jb25zdCBJTlRFUk5BTF9BVVRIX1ZFUlNJT04gPSAnRklTX3YyJztcclxuY29uc3QgSU5TVEFMTEFUSU9OU19BUElfVVJMID0gJ2h0dHBzOi8vZmlyZWJhc2VpbnN0YWxsYXRpb25zLmdvb2dsZWFwaXMuY29tL3YxJztcclxuY29uc3QgVE9LRU5fRVhQSVJBVElPTl9CVUZGRVIgPSA2MCAqIDYwICogMTAwMDsgLy8gT25lIGhvdXJcclxuY29uc3QgU0VSVklDRSA9ICdpbnN0YWxsYXRpb25zJztcclxuY29uc3QgU0VSVklDRV9OQU1FID0gJ0luc3RhbGxhdGlvbnMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUl9ERVNDUklQVElPTl9NQVAgPSB7XHJcbiAgICBbXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUyAqL106ICdNaXNzaW5nIEFwcCBjb25maWd1cmF0aW9uIHZhbHVlOiBcInskdmFsdWVOYW1lfVwiJyxcclxuICAgIFtcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi9dOiAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLicsXHJcbiAgICBbXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqL106ICdGaXJlYmFzZSBJbnN0YWxsYXRpb24gbm90IGZvdW5kLicsXHJcbiAgICBbXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovXTogJ3skcmVxdWVzdE5hbWV9IHJlcXVlc3QgZmFpbGVkIHdpdGggZXJyb3IgXCJ7JHNlcnZlckNvZGV9IHskc2VydmVyU3RhdHVzfTogeyRzZXJ2ZXJNZXNzYWdlfVwiJyxcclxuICAgIFtcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi9dOiAnQ291bGQgbm90IHByb2Nlc3MgcmVxdWVzdC4gQXBwbGljYXRpb24gb2ZmbGluZS4nLFxyXG4gICAgW1wiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogREVMRVRFX1BFTkRJTkdfUkVHSVNUUkFUSU9OICovXTogXCJDYW4ndCBkZWxldGUgaW5zdGFsbGF0aW9uIHdoaWxlIHRoZXJlIGlzIGEgcGVuZGluZyByZWdpc3RyYXRpb24gcmVxdWVzdC5cIlxyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeShTRVJWSUNFLCBTRVJWSUNFX05BTUUsIEVSUk9SX0RFU0NSSVBUSU9OX01BUCk7XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgZXJyb3IgaXMgYSBGaXJlYmFzZUVycm9yIHRoYXQgaXMgYmFzZWQgb24gYW4gZXJyb3IgZnJvbSB0aGUgc2VydmVyLiAqL1xyXG5mdW5jdGlvbiBpc1NlcnZlckVycm9yKGVycm9yKSB7XHJcbiAgICByZXR1cm4gKGVycm9yIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvciAmJlxyXG4gICAgICAgIGVycm9yLmNvZGUuaW5jbHVkZXMoXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KHsgcHJvamVjdElkIH0pIHtcclxuICAgIHJldHVybiBgJHtJTlNUQUxMQVRJT05TX0FQSV9VUkx9L3Byb2plY3RzLyR7cHJvamVjdElkfS9pbnN0YWxsYXRpb25zYDtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b2tlbjogcmVzcG9uc2UudG9rZW4sXHJcbiAgICAgICAgcmVxdWVzdFN0YXR1czogMiAvKiBDT01QTEVURUQgKi8sXHJcbiAgICAgICAgZXhwaXJlc0luOiBnZXRFeHBpcmVzSW5Gcm9tUmVzcG9uc2VFeHBpcmVzSW4ocmVzcG9uc2UuZXhwaXJlc0luKSxcclxuICAgICAgICBjcmVhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgIH07XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZ2V0RXJyb3JGcm9tUmVzcG9uc2UocmVxdWVzdE5hbWUsIHJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCByZXNwb25zZUpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICBjb25zdCBlcnJvckRhdGEgPSByZXNwb25zZUpzb24uZXJyb3I7XHJcbiAgICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovLCB7XHJcbiAgICAgICAgcmVxdWVzdE5hbWUsXHJcbiAgICAgICAgc2VydmVyQ29kZTogZXJyb3JEYXRhLmNvZGUsXHJcbiAgICAgICAgc2VydmVyTWVzc2FnZTogZXJyb3JEYXRhLm1lc3NhZ2UsXHJcbiAgICAgICAgc2VydmVyU3RhdHVzOiBlcnJvckRhdGEuc3RhdHVzXHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRIZWFkZXJzKHsgYXBpS2V5IH0pIHtcclxuICAgIHJldHVybiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAneC1nb29nLWFwaS1rZXknOiBhcGlLZXlcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIHsgcmVmcmVzaFRva2VuIH0pIHtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzKGFwcENvbmZpZyk7XHJcbiAgICBoZWFkZXJzLmFwcGVuZCgnQXV0aG9yaXphdGlvbicsIGdldEF1dGhvcml6YXRpb25IZWFkZXIocmVmcmVzaFRva2VuKSk7XHJcbiAgICByZXR1cm4gaGVhZGVycztcclxufVxyXG4vKipcclxuICogQ2FsbHMgdGhlIHBhc3NlZCBpbiBmZXRjaCB3cmFwcGVyIGFuZCByZXR1cm5zIHRoZSByZXNwb25zZS5cclxuICogSWYgdGhlIHJldHVybmVkIHJlc3BvbnNlIGhhcyBhIHN0YXR1cyBvZiA1eHgsIHJlLXJ1bnMgdGhlIGZ1bmN0aW9uIG9uY2UgYW5kXHJcbiAqIHJldHVybnMgdGhlIHJlc3BvbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmV0cnlJZlNlcnZlckVycm9yKGZuKSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbigpO1xyXG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPj0gNTAwICYmIHJlc3VsdC5zdGF0dXMgPCA2MDApIHtcclxuICAgICAgICAvLyBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IuIFJldHJ5IHJlcXVlc3QuXHJcbiAgICAgICAgcmV0dXJuIGZuKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIGdldEV4cGlyZXNJbkZyb21SZXNwb25zZUV4cGlyZXNJbihyZXNwb25zZUV4cGlyZXNJbikge1xyXG4gICAgLy8gVGhpcyB3b3JrcyBiZWNhdXNlIHRoZSBzZXJ2ZXIgd2lsbCBuZXZlciByZXNwb25kIHdpdGggZnJhY3Rpb25zIG9mIGEgc2Vjb25kLlxyXG4gICAgcmV0dXJuIE51bWJlcihyZXNwb25zZUV4cGlyZXNJbi5yZXBsYWNlKCdzJywgJzAwMCcpKTtcclxufVxyXG5mdW5jdGlvbiBnZXRBdXRob3JpemF0aW9uSGVhZGVyKHJlZnJlc2hUb2tlbikge1xyXG4gICAgcmV0dXJuIGAke0lOVEVSTkFMX0FVVEhfVkVSU0lPTn0gJHtyZWZyZXNoVG9rZW59YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KHsgYXBwQ29uZmlnLCBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIgfSwgeyBmaWQgfSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzKGFwcENvbmZpZyk7XHJcbiAgICAvLyBJZiBoZWFydGJlYXQgc2VydmljZSBleGlzdHMsIGFkZCB0aGUgaGVhcnRiZWF0IHN0cmluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgY29uc3QgaGVhcnRiZWF0U2VydmljZSA9IGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlci5nZXRJbW1lZGlhdGUoe1xyXG4gICAgICAgIG9wdGlvbmFsOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGlmIChoZWFydGJlYXRTZXJ2aWNlKSB7XHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0c0hlYWRlciA9IGF3YWl0IGhlYXJ0YmVhdFNlcnZpY2UuZ2V0SGVhcnRiZWF0c0hlYWRlcigpO1xyXG4gICAgICAgIGlmIChoZWFydGJlYXRzSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMuYXBwZW5kKCd4LWZpcmViYXNlLWNsaWVudCcsIGhlYXJ0YmVhdHNIZWFkZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgICAgICAgZmlkLFxyXG4gICAgICAgIGF1dGhWZXJzaW9uOiBJTlRFUk5BTF9BVVRIX1ZFUlNJT04sXHJcbiAgICAgICAgYXBwSWQ6IGFwcENvbmZpZy5hcHBJZCxcclxuICAgICAgICBzZGtWZXJzaW9uOiBQQUNLQUdFX1ZFUlNJT05cclxuICAgIH07XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgIH07XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJldHJ5SWZTZXJ2ZXJFcnJvcigoKSA9PiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCkpO1xyXG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2VWYWx1ZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBjb25zdCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSB7XHJcbiAgICAgICAgICAgIGZpZDogcmVzcG9uc2VWYWx1ZS5maWQgfHwgZmlkLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDIgLyogQ09NUExFVEVEICovLFxyXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlc3BvbnNlVmFsdWUucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICBhdXRoVG9rZW46IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUuYXV0aFRva2VuKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IGF3YWl0IGdldEVycm9yRnJvbVJlc3BvbnNlKCdDcmVhdGUgSW5zdGFsbGF0aW9uJywgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGdpdmVuIHRpbWUgcGFzc2VzLiAqL1xyXG5mdW5jdGlvbiBzbGVlcChtcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYnVmZmVyVG9CYXNlNjRVcmxTYWZlKGFycmF5KSB7XHJcbiAgICBjb25zdCBiNjQgPSBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uYXJyYXkpKTtcclxuICAgIHJldHVybiBiNjQucmVwbGFjZSgvXFwrL2csICctJykucmVwbGFjZSgvXFwvL2csICdfJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgVkFMSURfRklEX1BBVFRFUk4gPSAvXltjZGVmXVtcXHctXXsyMX0kLztcclxuY29uc3QgSU5WQUxJRF9GSUQgPSAnJztcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyBGSUQgdXNpbmcgcmFuZG9tIHZhbHVlcyBmcm9tIFdlYiBDcnlwdG8gQVBJLlxyXG4gKiBSZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBpZiBGSUQgZ2VuZXJhdGlvbiBmYWlscyBmb3IgYW55IHJlYXNvbi5cclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlRmlkKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBBIHZhbGlkIEZJRCBoYXMgZXhhY3RseSAyMiBiYXNlNjQgY2hhcmFjdGVycywgd2hpY2ggaXMgMTMyIGJpdHMsIG9yIDE2LjVcclxuICAgICAgICAvLyBieXRlcy4gb3VyIGltcGxlbWVudGF0aW9uIGdlbmVyYXRlcyBhIDE3IGJ5dGUgYXJyYXkgaW5zdGVhZC5cclxuICAgICAgICBjb25zdCBmaWRCeXRlQXJyYXkgPSBuZXcgVWludDhBcnJheSgxNyk7XHJcbiAgICAgICAgY29uc3QgY3J5cHRvID0gc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0bztcclxuICAgICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgZmlyc3QgNCByYW5kb20gYml0cyB3aXRoIHRoZSBjb25zdGFudCBGSUQgaGVhZGVyIG9mIDBiMDExMS5cclxuICAgICAgICBmaWRCeXRlQXJyYXlbMF0gPSAwYjAxMTEwMDAwICsgKGZpZEJ5dGVBcnJheVswXSAlIDBiMDAwMTAwMDApO1xyXG4gICAgICAgIGNvbnN0IGZpZCA9IGVuY29kZShmaWRCeXRlQXJyYXkpO1xyXG4gICAgICAgIHJldHVybiBWQUxJRF9GSURfUEFUVEVSTi50ZXN0KGZpZCkgPyBmaWQgOiBJTlZBTElEX0ZJRDtcclxuICAgIH1cclxuICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgIC8vIEZJRCBnZW5lcmF0aW9uIGVycm9yZWRcclxuICAgICAgICByZXR1cm4gSU5WQUxJRF9GSUQ7XHJcbiAgICB9XHJcbn1cclxuLyoqIENvbnZlcnRzIGEgRklEIFVpbnQ4QXJyYXkgdG8gYSBiYXNlNjQgc3RyaW5nIHJlcHJlc2VudGF0aW9uLiAqL1xyXG5mdW5jdGlvbiBlbmNvZGUoZmlkQnl0ZUFycmF5KSB7XHJcbiAgICBjb25zdCBiNjRTdHJpbmcgPSBidWZmZXJUb0Jhc2U2NFVybFNhZmUoZmlkQnl0ZUFycmF5KTtcclxuICAgIC8vIFJlbW92ZSB0aGUgMjNyZCBjaGFyYWN0ZXIgdGhhdCB3YXMgYWRkZWQgYmVjYXVzZSBvZiB0aGUgZXh0cmEgNCBiaXRzIGF0IHRoZVxyXG4gICAgLy8gZW5kIG9mIG91ciAxNyBieXRlIGFycmF5LCBhbmQgdGhlICc9JyBwYWRkaW5nLlxyXG4gICAgcmV0dXJuIGI2NFN0cmluZy5zdWJzdHIoMCwgMjIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBSZXR1cm5zIGEgc3RyaW5nIGtleSB0aGF0IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoZSBhcHAuICovXHJcbmZ1bmN0aW9uIGdldEtleShhcHBDb25maWcpIHtcclxuICAgIHJldHVybiBgJHthcHBDb25maWcuYXBwTmFtZX0hJHthcHBDb25maWcuYXBwSWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBmaWRDaGFuZ2VDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBDYWxscyB0aGUgb25JZENoYW5nZSBjYWxsYmFja3Mgd2l0aCB0aGUgbmV3IEZJRCB2YWx1ZSwgYW5kIGJyb2FkY2FzdHMgdGhlXHJcbiAqIGNoYW5nZSB0byBvdGhlciB0YWJzLlxyXG4gKi9cclxuZnVuY3Rpb24gZmlkQ2hhbmdlZChhcHBDb25maWcsIGZpZCkge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzKGtleSwgZmlkKTtcclxuICAgIGJyb2FkY2FzdEZpZENoYW5nZShrZXksIGZpZCk7XHJcbn1cclxuZnVuY3Rpb24gYWRkQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjaykge1xyXG4gICAgLy8gT3BlbiB0aGUgYnJvYWRjYXN0IGNoYW5uZWwgaWYgaXQncyBub3QgYWxyZWFkeSBvcGVuLFxyXG4gICAgLy8gdG8gYmUgYWJsZSB0byBsaXN0ZW4gdG8gY2hhbmdlIGV2ZW50cyBmcm9tIG90aGVyIHRhYnMuXHJcbiAgICBnZXRCcm9hZGNhc3RDaGFubmVsKCk7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGxldCBjYWxsYmFja1NldCA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcclxuICAgIGlmICghY2FsbGJhY2tTZXQpIHtcclxuICAgICAgICBjYWxsYmFja1NldCA9IG5ldyBTZXQoKTtcclxuICAgICAgICBmaWRDaGFuZ2VDYWxsYmFja3Muc2V0KGtleSwgY2FsbGJhY2tTZXQpO1xyXG4gICAgfVxyXG4gICAgY2FsbGJhY2tTZXQuYWRkKGNhbGxiYWNrKTtcclxufVxyXG5mdW5jdGlvbiByZW1vdmVDYWxsYmFjayhhcHBDb25maWcsIGNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGNhbGxiYWNrU2V0ID0gZmlkQ2hhbmdlQ2FsbGJhY2tzLmdldChrZXkpO1xyXG4gICAgaWYgKCFjYWxsYmFja1NldCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNhbGxiYWNrU2V0LmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICBpZiAoY2FsbGJhY2tTZXQuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgIGZpZENoYW5nZUNhbGxiYWNrcy5kZWxldGUoa2V5KTtcclxuICAgIH1cclxuICAgIC8vIENsb3NlIGJyb2FkY2FzdCBjaGFubmVsIGlmIHRoZXJlIGFyZSBubyBtb3JlIGNhbGxiYWNrcy5cclxuICAgIGNsb3NlQnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG59XHJcbmZ1bmN0aW9uIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3Moa2V5LCBmaWQpIHtcclxuICAgIGNvbnN0IGNhbGxiYWNrcyA9IGZpZENoYW5nZUNhbGxiYWNrcy5nZXQoa2V5KTtcclxuICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICBjYWxsYmFjayhmaWQpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGJyb2FkY2FzdEZpZENoYW5nZShrZXksIGZpZCkge1xyXG4gICAgY29uc3QgY2hhbm5lbCA9IGdldEJyb2FkY2FzdENoYW5uZWwoKTtcclxuICAgIGlmIChjaGFubmVsKSB7XHJcbiAgICAgICAgY2hhbm5lbC5wb3N0TWVzc2FnZSh7IGtleSwgZmlkIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2VCcm9hZGNhc3RDaGFubmVsKCk7XHJcbn1cclxubGV0IGJyb2FkY2FzdENoYW5uZWwgPSBudWxsO1xyXG4vKiogT3BlbnMgYW5kIHJldHVybnMgYSBCcm9hZGNhc3RDaGFubmVsIGlmIGl0IGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4gKi9cclxuZnVuY3Rpb24gZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpIHtcclxuICAgIGlmICghYnJvYWRjYXN0Q2hhbm5lbCAmJiAnQnJvYWRjYXN0Q2hhbm5lbCcgaW4gc2VsZikge1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbCgnW0ZpcmViYXNlXSBGSUQgQ2hhbmdlJyk7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSBlID0+IHtcclxuICAgICAgICAgICAgY2FsbEZpZENoYW5nZUNhbGxiYWNrcyhlLmRhdGEua2V5LCBlLmRhdGEuZmlkKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJyb2FkY2FzdENoYW5uZWw7XHJcbn1cclxuZnVuY3Rpb24gY2xvc2VCcm9hZGNhc3RDaGFubmVsKCkge1xyXG4gICAgaWYgKGZpZENoYW5nZUNhbGxiYWNrcy5zaXplID09PSAwICYmIGJyb2FkY2FzdENoYW5uZWwpIHtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsLmNsb3NlKCk7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbCA9IG51bGw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREFUQUJBU0VfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLWRhdGFiYXNlJztcclxuY29uc3QgREFUQUJBU0VfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IE9CSkVDVF9TVE9SRV9OQU1FID0gJ2ZpcmViYXNlLWluc3RhbGxhdGlvbnMtc3RvcmUnO1xyXG5sZXQgZGJQcm9taXNlID0gbnVsbDtcclxuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xyXG4gICAgaWYgKCFkYlByb21pc2UpIHtcclxuICAgICAgICBkYlByb21pc2UgPSBvcGVuREIoREFUQUJBU0VfTkFNRSwgREFUQUJBU0VfVkVSU0lPTiwge1xyXG4gICAgICAgICAgICB1cGdyYWRlOiAoZGIsIG9sZFZlcnNpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxyXG4gICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LCBiZWNhdXNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2ZXJzaW9ucyBiZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXHJcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG4vKiogQXNzaWducyBvciBvdmVyd3JpdGVzIHRoZSByZWNvcmQgZm9yIHRoZSBnaXZlbiBrZXkgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldChhcHBDb25maWcsIHZhbHVlKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgIGNvbnN0IG9sZFZhbHVlID0gKGF3YWl0IG9iamVjdFN0b3JlLmdldChrZXkpKTtcclxuICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dCh2YWx1ZSwga2V5KTtcclxuICAgIGF3YWl0IHR4LmRvbmU7XHJcbiAgICBpZiAoIW9sZFZhbHVlIHx8IG9sZFZhbHVlLmZpZCAhPT0gdmFsdWUuZmlkKSB7XHJcbiAgICAgICAgZmlkQ2hhbmdlZChhcHBDb25maWcsIHZhbHVlLmZpZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuLyoqIFJlbW92ZXMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlKGFwcENvbmZpZykge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgYXdhaXQgdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpLmRlbGV0ZShrZXkpO1xyXG4gICAgYXdhaXQgdHguZG9uZTtcclxufVxyXG4vKipcclxuICogQXRvbWljYWxseSB1cGRhdGVzIGEgcmVjb3JkIHdpdGggdGhlIHJlc3VsdCBvZiB1cGRhdGVGbiwgd2hpY2ggZ2V0c1xyXG4gKiBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCB2YWx1ZS4gSWYgbmV3VmFsdWUgaXMgdW5kZWZpbmVkLCB0aGUgcmVjb3JkIGlzXHJcbiAqIGRlbGV0ZWQgaW5zdGVhZC5cclxuICogQHJldHVybiBVcGRhdGVkIHZhbHVlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGUoYXBwQ29uZmlnLCB1cGRhdGVGbikge1xyXG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICBjb25zdCBvbGRWYWx1ZSA9IChhd2FpdCBzdG9yZS5nZXQoa2V5KSk7XHJcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHVwZGF0ZUZuKG9sZFZhbHVlKTtcclxuICAgIGlmIChuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgYXdhaXQgc3RvcmUuZGVsZXRlKGtleSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBhd2FpdCBzdG9yZS5wdXQobmV3VmFsdWUsIGtleSk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0eC5kb25lO1xyXG4gICAgaWYgKG5ld1ZhbHVlICYmICghb2xkVmFsdWUgfHwgb2xkVmFsdWUuZmlkICE9PSBuZXdWYWx1ZS5maWQpKSB7XHJcbiAgICAgICAgZmlkQ2hhbmdlZChhcHBDb25maWcsIG5ld1ZhbHVlLmZpZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3VmFsdWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYW5kIHJldHVybnMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGZyb20gdGhlIGRhdGFiYXNlLlxyXG4gKiBBbHNvIHRyaWdnZXJzIGEgcmVnaXN0cmF0aW9uIHJlcXVlc3QgaWYgaXQgaXMgbmVjZXNzYXJ5IGFuZCBwb3NzaWJsZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEluc3RhbGxhdGlvbkVudHJ5KGluc3RhbGxhdGlvbnMpIHtcclxuICAgIGxldCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uRW50cnkgPSBhd2FpdCB1cGRhdGUoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBjb25zdCBpbnN0YWxsYXRpb25FbnRyeSA9IHVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkob2xkRW50cnkpO1xyXG4gICAgICAgIGNvbnN0IGVudHJ5V2l0aFByb21pc2UgPSB0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UgPSBlbnRyeVdpdGhQcm9taXNlLnJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgcmV0dXJuIGVudHJ5V2l0aFByb21pc2UuaW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICB9KTtcclxuICAgIGlmIChpbnN0YWxsYXRpb25FbnRyeS5maWQgPT09IElOVkFMSURfRklEKSB7XHJcbiAgICAgICAgLy8gRklEIGdlbmVyYXRpb24gZmFpbGVkLiBXYWl0aW5nIGZvciB0aGUgRklEIGZyb20gdGhlIHNlcnZlci5cclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeTogYXdhaXQgcmVnaXN0cmF0aW9uUHJvbWlzZSB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeSxcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IEluc3RhbGxhdGlvbiBFbnRyeSBpZiBvbmUgZG9lcyBub3QgZXhpc3QuXHJcbiAqIEFsc28gY2xlYXJzIHRpbWVkIG91dCBwZW5kaW5nIHJlcXVlc3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeShvbGRFbnRyeSkge1xyXG4gICAgY29uc3QgZW50cnkgPSBvbGRFbnRyeSB8fCB7XHJcbiAgICAgICAgZmlkOiBnZW5lcmF0ZUZpZCgpLFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSk7XHJcbn1cclxuLyoqXHJcbiAqIElmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQgeWV0LCB0aGlzIHdpbGwgdHJpZ2dlciB0aGVcclxuICogcmVnaXN0cmF0aW9uIGFuZCByZXR1cm4gYW4gSW5Qcm9ncmVzc0luc3RhbGxhdGlvbkVudHJ5LlxyXG4gKlxyXG4gKiBJZiByZWdpc3RyYXRpb25Qcm9taXNlIGRvZXMgbm90IGV4aXN0LCB0aGUgaW5zdGFsbGF0aW9uRW50cnkgaXMgZ3VhcmFudGVlZFxyXG4gKiB0byBiZSByZWdpc3RlcmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiByZXF1aXJlZCBidXQgYXBwIGlzIG9mZmxpbmUuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvblByb21pc2VXaXRoRXJyb3IgPSBQcm9taXNlLnJlamVjdChFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi8pKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUcnkgcmVnaXN0ZXJpbmcuIENoYW5nZSBzdGF0dXMgdG8gSU5fUFJPR1JFU1MuXHJcbiAgICAgICAgY29uc3QgaW5Qcm9ncmVzc0VudHJ5ID0ge1xyXG4gICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAxIC8qIElOX1BST0dSRVNTICovLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25UaW1lOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb25Qcm9taXNlID0gcmVnaXN0ZXJJbnN0YWxsYXRpb24oaW5zdGFsbGF0aW9ucywgaW5Qcm9ncmVzc0VudHJ5KTtcclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeTogaW5Qcm9ncmVzc0VudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeSxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZTogd2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uKGluc3RhbGxhdGlvbnMpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5IH07XHJcbiAgICB9XHJcbn1cclxuLyoqIFRoaXMgd2lsbCBiZSBleGVjdXRlZCBvbmx5IG9uY2UgZm9yIGVhY2ggbmV3IEZpcmViYXNlIEluc3RhbGxhdGlvbi4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb24oaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5ID0gYXdhaXQgY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChpbnN0YWxsYXRpb25zLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgcmV0dXJuIHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGlzU2VydmVyRXJyb3IoZSkgJiYgZS5jdXN0b21EYXRhLnNlcnZlckNvZGUgPT09IDQwOSkge1xyXG4gICAgICAgICAgICAvLyBTZXJ2ZXIgcmV0dXJuZWQgYSBcIkZJRCBjYW4gbm90IGJlIHVzZWRcIiBlcnJvci5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgbmV4dCB0aW1lLlxyXG4gICAgICAgICAgICBhd2FpdCByZW1vdmUoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIGZhaWxlZC4gU2V0IEZJRCBhcyBub3QgcmVnaXN0ZXJlZC5cclxuICAgICAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB7XHJcbiAgICAgICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG4vKiogQ2FsbCBpZiBGSUQgcmVnaXN0cmF0aW9uIGlzIHBlbmRpbmcgaW4gYW5vdGhlciByZXF1ZXN0LiAqL1xyXG5hc3luYyBmdW5jdGlvbiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUgaXMgbm8gd2F5IG9mIHJlbGlhYmx5IG9ic2VydmluZyB3aGVuIGEgdmFsdWUgaW5cclxuICAgIC8vIEluZGV4ZWREQiBjaGFuZ2VzICh5ZXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9pbmRleGVkLWRiLW9ic2VydmVycyksXHJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHBvbGwuXHJcbiAgICBsZXQgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIHdoaWxlIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAvLyBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBzdGlsbCBpbiBwcm9ncmVzcy5cclxuICAgICAgICBhd2FpdCBzbGVlcCgxMDApO1xyXG4gICAgICAgIGVudHJ5ID0gYXdhaXQgdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XHJcbiAgICB9XHJcbiAgICBpZiAoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgLy8gVGhlIHJlcXVlc3QgdGltZWQgb3V0IG9yIGZhaWxlZCBpbiBhIGRpZmZlcmVudCBjYWxsLiBUcnkgYWdhaW4uXHJcbiAgICAgICAgY29uc3QgeyBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZSB9ID0gYXdhaXQgZ2V0SW5zdGFsbGF0aW9uRW50cnkoaW5zdGFsbGF0aW9ucyk7XHJcbiAgICAgICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyByZWdpc3RyYXRpb25Qcm9taXNlLCBlbnRyeSBpcyByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVudHJ5O1xyXG59XHJcbi8qKlxyXG4gKiBDYWxsZWQgb25seSBpZiB0aGVyZSBpcyBhIENyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IGluIHByb2dyZXNzLlxyXG4gKlxyXG4gKiBVcGRhdGVzIHRoZSBJbnN0YWxsYXRpb25FbnRyeSBpbiB0aGUgREIgYmFzZWQgb24gdGhlIHN0YXR1cyBvZiB0aGVcclxuICogQ3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBpZiAoIW9sZEVudHJ5KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW5zdGFsbGF0aW9uLW5vdC1mb3VuZFwiIC8qIElOU1RBTExBVElPTl9OT1RfRk9VTkQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xlYXJUaW1lZE91dFJlcXVlc3Qob2xkRW50cnkpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY2xlYXJUaW1lZE91dFJlcXVlc3QoZW50cnkpIHtcclxuICAgIGlmIChoYXNJbnN0YWxsYXRpb25SZXF1ZXN0VGltZWRPdXQoZW50cnkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmlkOiBlbnRyeS5maWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW50cnk7XHJcbn1cclxuZnVuY3Rpb24gaGFzSW5zdGFsbGF0aW9uUmVxdWVzdFRpbWVkT3V0KGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLyAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBpbnN0YWxsYXRpb246IHtcclxuICAgICAgICAgICAgc2RrVmVyc2lvbjogUEFDS0FHRV9WRVJTSU9OLFxyXG4gICAgICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZEF1dGhUb2tlbiA9IGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlVmFsdWUpO1xyXG4gICAgICAgIHJldHVybiBjb21wbGV0ZWRBdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnR2VuZXJhdGUgQXV0aCBUb2tlbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgeyBmaWQgfSkge1xyXG4gICAgcmV0dXJuIGAke2dldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpfS8ke2ZpZH0vYXV0aFRva2VuczpnZW5lcmF0ZWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbiBmb3IgdGhlIGluc3RhbGxhdGlvbi4gR2VuZXJhdGVzIGEgbmV3XHJcbiAqIHRva2VuIGlmIG9uZSBkb2Vzbid0IGV4aXN0LCBpcyBleHBpcmVkIG9yIGFib3V0IHRvIGV4cGlyZS5cclxuICpcclxuICogU2hvdWxkIG9ubHkgYmUgY2FsbGVkIGlmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgcmVnaXN0ZXJlZC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGxldCB0b2tlblByb21pc2U7XHJcbiAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHVwZGF0ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgb2xkRW50cnkgPT4ge1xyXG4gICAgICAgIGlmICghaXNFbnRyeVJlZ2lzdGVyZWQob2xkRW50cnkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm90LXJlZ2lzdGVyZWRcIiAvKiBOT1RfUkVHSVNURVJFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG9sZEF1dGhUb2tlbiA9IG9sZEVudHJ5LmF1dGhUb2tlbjtcclxuICAgICAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiBpc0F1dGhUb2tlblZhbGlkKG9sZEF1dGhUb2tlbikpIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgaXMgYSB2YWxpZCB0b2tlbiBpbiB0aGUgREIuXHJcbiAgICAgICAgICAgIHJldHVybiBvbGRFbnRyeTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob2xkQXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgYWxyZWFkeSBpcyBhIHRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgIHRva2VuUHJvbWlzZSA9IHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTm8gdG9rZW4gb3IgdG9rZW4gZXhwaXJlZC5cclxuICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGluUHJvZ3Jlc3NFbnRyeSA9IG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KTtcclxuICAgICAgICAgICAgdG9rZW5Qcm9taXNlID0gZmV0Y2hBdXRoVG9rZW5Gcm9tU2VydmVyKGluc3RhbGxhdGlvbnMsIGluUHJvZ3Jlc3NFbnRyeSk7XHJcbiAgICAgICAgICAgIHJldHVybiBpblByb2dyZXNzRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBhdXRoVG9rZW4gPSB0b2tlblByb21pc2VcclxuICAgICAgICA/IGF3YWl0IHRva2VuUHJvbWlzZVxyXG4gICAgICAgIDogZW50cnkuYXV0aFRva2VuO1xyXG4gICAgcmV0dXJuIGF1dGhUb2tlbjtcclxufVxyXG4vKipcclxuICogQ2FsbCBvbmx5IGlmIEZJRCBpcyByZWdpc3RlcmVkIGFuZCBBdXRoIFRva2VuIHJlcXVlc3QgaXMgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFdhaXRzIHVudGlsIHRoZSBjdXJyZW50IHBlbmRpbmcgcmVxdWVzdCBmaW5pc2hlcy4gSWYgdGhlIHJlcXVlc3QgdGltZXMgb3V0LFxyXG4gKiB0cmllcyBvbmNlIGluIHRoaXMgdGhyZWFkIGFzIHdlbGwuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMsIGZvcmNlUmVmcmVzaCkge1xyXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgdGhlcmUgaXMgbm8gd2F5IG9mIHJlbGlhYmx5IG9ic2VydmluZyB3aGVuIGEgdmFsdWUgaW5cclxuICAgIC8vIEluZGV4ZWREQiBjaGFuZ2VzICh5ZXQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9pbmRleGVkLWRiLW9ic2VydmVycyksXHJcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHBvbGwuXHJcbiAgICBsZXQgZW50cnkgPSBhd2FpdCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIHdoaWxlIChlbnRyeS5hdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGdlbmVyYXRlQXV0aFRva2VuIHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhUb2tlbiA9IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgIGlmIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgIC8vIFRoZSByZXF1ZXN0IHRpbWVkIG91dCBvciBmYWlsZWQgaW4gYSBkaWZmZXJlbnQgY2FsbC4gVHJ5IGFnYWluLlxyXG4gICAgICAgIHJldHVybiByZWZyZXNoQXV0aFRva2VuKGluc3RhbGxhdGlvbnMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYXV0aFRva2VuO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDYWxsZWQgb25seSBpZiB0aGVyZSBpcyBhIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFVwZGF0ZXMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGluIHRoZSBEQiBiYXNlZCBvbiB0aGUgc3RhdHVzIG9mIHRoZVxyXG4gKiBHZW5lcmF0ZUF1dGhUb2tlbiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQXV0aFRva2VuUmVxdWVzdChhcHBDb25maWcpIHtcclxuICAgIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKCFpc0VudHJ5UmVnaXN0ZXJlZChvbGRFbnRyeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJub3QtcmVnaXN0ZXJlZFwiIC8qIE5PVF9SRUdJU1RFUkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgIGlmIChoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi8gfSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hBdXRoVG9rZW5Gcm9tU2VydmVyKGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGF1dGhUb2tlbiA9IGF3YWl0IGdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBpbnN0YWxsYXRpb25FbnRyeSksIHsgYXV0aFRva2VuIH0pO1xyXG4gICAgICAgIGF3YWl0IHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICByZXR1cm4gYXV0aFRva2VuO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoaXNTZXJ2ZXJFcnJvcihlKSAmJlxyXG4gICAgICAgICAgICAoZS5jdXN0b21EYXRhLnNlcnZlckNvZGUgPT09IDQwMSB8fCBlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDA0KSkge1xyXG4gICAgICAgICAgICAvLyBTZXJ2ZXIgcmV0dXJuZWQgYSBcIkZJRCBub3QgZm91bmRcIiBvciBhIFwiSW52YWxpZCBhdXRoZW50aWNhdGlvblwiIGVycm9yLlxyXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgIGF3YWl0IHJlbW92ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc3RhbGxhdGlvbkVudHJ5KSwgeyBhdXRoVG9rZW46IHsgcmVxdWVzdFN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgICAgICBhd2FpdCBzZXQoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbnRyeVJlZ2lzdGVyZWQoaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiAoaW5zdGFsbGF0aW9uRW50cnkgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMiAvKiBDT01QTEVURUQgKi8pO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXV0aFRva2VuVmFsaWQoYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLyAmJlxyXG4gICAgICAgICFpc0F1dGhUb2tlbkV4cGlyZWQoYXV0aFRva2VuKSk7XHJcbn1cclxuZnVuY3Rpb24gaXNBdXRoVG9rZW5FeHBpcmVkKGF1dGhUb2tlbikge1xyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIHJldHVybiAobm93IDwgYXV0aFRva2VuLmNyZWF0aW9uVGltZSB8fFxyXG4gICAgICAgIGF1dGhUb2tlbi5jcmVhdGlvblRpbWUgKyBhdXRoVG9rZW4uZXhwaXJlc0luIDwgbm93ICsgVE9LRU5fRVhQSVJBVElPTl9CVUZGRVIpO1xyXG59XHJcbi8qKiBSZXR1cm5zIGFuIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkgd2l0aCBhbiBJblByb2dyZXNzQXV0aFRva2VuLiAqL1xyXG5mdW5jdGlvbiBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShvbGRFbnRyeSkge1xyXG4gICAgY29uc3QgaW5Qcm9ncmVzc0F1dGhUb2tlbiA9IHtcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAxIC8qIElOX1BST0dSRVNTICovLFxyXG4gICAgICAgIHJlcXVlc3RUaW1lOiBEYXRlLm5vdygpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb2xkRW50cnkpLCB7IGF1dGhUb2tlbjogaW5Qcm9ncmVzc0F1dGhUb2tlbiB9KTtcclxufVxyXG5mdW5jdGlvbiBoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQoYXV0aFRva2VuKSB7XHJcbiAgICByZXR1cm4gKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovICYmXHJcbiAgICAgICAgYXV0aFRva2VuLnJlcXVlc3RUaW1lICsgUEVORElOR19USU1FT1VUX01TIDwgRGF0ZS5ub3coKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaWYgdGhlcmUgaXNuJ3Qgb25lIGZvciB0aGUgYXBwIGFuZFxyXG4gKiByZXR1cm5zIHRoZSBJbnN0YWxsYXRpb24gSUQuXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SWQoaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgeyBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZSB9ID0gYXdhaXQgZ2V0SW5zdGFsbGF0aW9uRW50cnkoaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGluc3RhbGxhdGlvbiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHVwZGF0ZSB0aGUgYXV0aGVudGljYXRpb25cclxuICAgICAgICAvLyB0b2tlbiBpZiBuZWVkZWQuXHJcbiAgICAgICAgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCkuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uRW50cnkuZmlkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgRmlyZWJhc2UgSW5zdGFsbGF0aW9ucyBhdXRoIHRva2VuLCBpZGVudGlmeWluZyB0aGUgY3VycmVudFxyXG4gKiBGaXJlYmFzZSBJbnN0YWxsYXRpb24uXHJcbiAqIEBwYXJhbSBpbnN0YWxsYXRpb25zIC0gVGhlIGBJbnN0YWxsYXRpb25zYCBpbnN0YW5jZS5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYXdhaXQgY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9uc0ltcGwpO1xyXG4gICAgLy8gQXQgdGhpcyBwb2ludCB3ZSBlaXRoZXIgaGF2ZSBhIFJlZ2lzdGVyZWQgSW5zdGFsbGF0aW9uIGluIHRoZSBEQiwgb3Igd2UndmVcclxuICAgIC8vIGFscmVhZHkgdGhyb3duIGFuIGVycm9yLlxyXG4gICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zSW1wbCwgZm9yY2VSZWZyZXNoKTtcclxuICAgIHJldHVybiBhdXRoVG9rZW4udG9rZW47XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgeyByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKTtcclxuICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgLy8gQSBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy4gV2FpdCB1bnRpbCBpdCBmaW5pc2hlcy5cclxuICAgICAgICBhd2FpdCByZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgY29uc3QgZW5kcG9pbnQgPSBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgaGVhZGVyc1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgdGhyb3cgYXdhaXQgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0RlbGV0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0RGVsZXRlRW5kcG9pbnQoYXBwQ29uZmlnLCB7IGZpZCB9KSB7XHJcbiAgICByZXR1cm4gYCR7Z2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyl9LyR7ZmlkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlbGV0ZXMgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBhbmQgYWxsIGFzc29jaWF0ZWQgZGF0YS5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVJbnN0YWxsYXRpb25zKGluc3RhbGxhdGlvbnMpIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgY29uc3QgZW50cnkgPSBhd2FpdCB1cGRhdGUoYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKG9sZEVudHJ5ICYmIG9sZEVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMCAvKiBOT1RfU1RBUlRFRCAqLykge1xyXG4gICAgICAgICAgICAvLyBEZWxldGUgdGhlIHVucmVnaXN0ZXJlZCBlbnRyeSB3aXRob3V0IHNlbmRpbmcgYSBkZWxldGVJbnN0YWxsYXRpb24gcmVxdWVzdC5cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgfSk7XHJcbiAgICBpZiAoZW50cnkpIHtcclxuICAgICAgICBpZiAoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSB7XHJcbiAgICAgICAgICAgIC8vIENhbid0IGRlbGV0ZSB3aGlsZSB0cnlpbmcgdG8gcmVnaXN0ZXIuXHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogREVMRVRFX1BFTkRJTkdfUkVHSVNUUkFUSU9OICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLykge1xyXG4gICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWxldGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZywgZW50cnkpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNldHMgYSBuZXcgY2FsbGJhY2sgdGhhdCB3aWxsIGdldCBjYWxsZWQgd2hlbiBJbnN0YWxsYXRpb24gSUQgY2hhbmdlcy5cclxuICogUmV0dXJucyBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IHdpbGwgcmVtb3ZlIHRoZSBjYWxsYmFjayB3aGVuIGNhbGxlZC5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyBpbnZva2VkIHdoZW4gRklEIGNoYW5nZXMuXHJcbiAqIEByZXR1cm5zIEEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgY2FsbGVkIHRvIHVuc3Vic2NyaWJlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbklkQ2hhbmdlKGluc3RhbGxhdGlvbnMsIGNhbGxiYWNrKSB7XHJcbiAgICBjb25zdCB7IGFwcENvbmZpZyB9ID0gaW5zdGFsbGF0aW9ucztcclxuICAgIGFkZENhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICByZW1vdmVDYWxsYmFjayhhcHBDb25maWcsIGNhbGxiYWNrKTtcclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYW4gaW5zdGFuY2Ugb2Yge0BsaW5rIEluc3RhbGxhdGlvbnN9IGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW5cclxuICoge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9ucyhhcHAgPSBnZXRBcHAoKSkge1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnaW5zdGFsbGF0aW9ucycpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbXBsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RBcHBDb25maWcoYXBwKSB7XHJcbiAgICBpZiAoIWFwcCB8fCAhYXBwLm9wdGlvbnMpIHtcclxuICAgICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIENvbmZpZ3VyYXRpb24nKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwLm5hbWUpIHtcclxuICAgICAgICB0aHJvdyBnZXRNaXNzaW5nVmFsdWVFcnJvcignQXBwIE5hbWUnKTtcclxuICAgIH1cclxuICAgIC8vIFJlcXVpcmVkIGFwcCBjb25maWcga2V5c1xyXG4gICAgY29uc3QgY29uZmlnS2V5cyA9IFtcclxuICAgICAgICAncHJvamVjdElkJyxcclxuICAgICAgICAnYXBpS2V5JyxcclxuICAgICAgICAnYXBwSWQnXHJcbiAgICBdO1xyXG4gICAgZm9yIChjb25zdCBrZXlOYW1lIG9mIGNvbmZpZ0tleXMpIHtcclxuICAgICAgICBpZiAoIWFwcC5vcHRpb25zW2tleU5hbWVdKSB7XHJcbiAgICAgICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKGtleU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYXBwTmFtZTogYXBwLm5hbWUsXHJcbiAgICAgICAgcHJvamVjdElkOiBhcHAub3B0aW9ucy5wcm9qZWN0SWQsXHJcbiAgICAgICAgYXBpS2V5OiBhcHAub3B0aW9ucy5hcGlLZXksXHJcbiAgICAgICAgYXBwSWQ6IGFwcC5vcHRpb25zLmFwcElkXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldE1pc3NpbmdWYWx1ZUVycm9yKHZhbHVlTmFtZSkge1xyXG4gICAgcmV0dXJuIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIE1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi8sIHtcclxuICAgICAgICB2YWx1ZU5hbWVcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElOU1RBTExBVElPTlNfTkFNRSA9ICdpbnN0YWxsYXRpb25zJztcclxuY29uc3QgSU5TVEFMTEFUSU9OU19OQU1FX0lOVEVSTkFMID0gJ2luc3RhbGxhdGlvbnMtaW50ZXJuYWwnO1xyXG5jb25zdCBwdWJsaWNGYWN0b3J5ID0gKGNvbnRhaW5lcikgPT4ge1xyXG4gICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgIC8vIFRocm93cyBpZiBhcHAgaXNuJ3QgY29uZmlndXJlZCBwcm9wZXJseS5cclxuICAgIGNvbnN0IGFwcENvbmZpZyA9IGV4dHJhY3RBcHBDb25maWcoYXBwKTtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdoZWFydGJlYXQnKTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbnNJbXBsID0ge1xyXG4gICAgICAgIGFwcCxcclxuICAgICAgICBhcHBDb25maWcsXHJcbiAgICAgICAgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLFxyXG4gICAgICAgIF9kZWxldGU6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbXBsO1xyXG59O1xyXG5jb25zdCBpbnRlcm5hbEZhY3RvcnkgPSAoY29udGFpbmVyKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgLy8gSW50ZXJuYWwgRklTIGluc3RhbmNlIHJlbGllcyBvbiBwdWJsaWMgRklTIGluc3RhbmNlLlxyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9ucyA9IF9nZXRQcm92aWRlcihhcHAsIElOU1RBTExBVElPTlNfTkFNRSkuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW50ZXJuYWwgPSB7XHJcbiAgICAgICAgZ2V0SWQ6ICgpID0+IGdldElkKGluc3RhbGxhdGlvbnMpLFxyXG4gICAgICAgIGdldFRva2VuOiAoZm9yY2VSZWZyZXNoKSA9PiBnZXRUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGluc3RhbGxhdGlvbnNJbnRlcm5hbDtcclxufTtcclxuZnVuY3Rpb24gcmVnaXN0ZXJJbnN0YWxsYXRpb25zKCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoSU5TVEFMTEFUSU9OU19OQU1FLCBwdWJsaWNGYWN0b3J5LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoSU5TVEFMTEFUSU9OU19OQU1FX0lOVEVSTkFMLCBpbnRlcm5hbEZhY3RvcnksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgSW5zdGFsbGF0aW9uc1xyXG4gKlxyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVySW5zdGFsbGF0aW9ucygpO1xyXG5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbi8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnZXNtMjAxNycpO1xuXG5leHBvcnQgeyBkZWxldGVJbnN0YWxsYXRpb25zLCBnZXRJZCwgZ2V0SW5zdGFsbGF0aW9ucywgZ2V0VG9rZW4sIG9uSWRDaGFuZ2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBnZXRBcHAsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBGaXJlYmFzZUVycm9yLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSwgaXNCcm93c2VyRXh0ZW5zaW9uLCBhcmVDb29raWVzRW5hYmxlZCwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCAnQGZpcmViYXNlL2luc3RhbGxhdGlvbnMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVHlwZSBjb25zdGFudCBmb3IgRmlyZWJhc2UgQW5hbHl0aWNzLlxyXG4gKi9cclxuY29uc3QgQU5BTFlUSUNTX1RZUEUgPSAnYW5hbHl0aWNzJztcclxuLy8gS2V5IHRvIGF0dGFjaCBGSUQgdG8gaW4gZ3RhZyBwYXJhbXMuXHJcbmNvbnN0IEdBX0ZJRF9LRVkgPSAnZmlyZWJhc2VfaWQnO1xyXG5jb25zdCBPUklHSU5fS0VZID0gJ29yaWdpbic7XHJcbmNvbnN0IEZFVENIX1RJTUVPVVRfTUlMTElTID0gNjAgKiAxMDAwO1xyXG5jb25zdCBEWU5BTUlDX0NPTkZJR19VUkwgPSAnaHR0cHM6Ly9maXJlYmFzZS5nb29nbGVhcGlzLmNvbS92MWFscGhhL3Byb2plY3RzLy0vYXBwcy97YXBwLWlkfS93ZWJDb25maWcnO1xyXG5jb25zdCBHVEFHX1VSTCA9ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FuYWx5dGljcycpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFrZXNoaWZ0IHBvbHlmaWxsIGZvciBQcm9taXNlLmFsbFNldHRsZWQoKS4gUmVzb2x2ZXMgd2hlbiBhbGwgcHJvbWlzZXNcclxuICogaGF2ZSBlaXRoZXIgcmVzb2x2ZWQgb3IgcmVqZWN0ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyBBcnJheSBvZiBwcm9taXNlcyB0byB3YWl0IGZvci5cclxuICovXHJcbmZ1bmN0aW9uIHByb21pc2VBbGxTZXR0bGVkKHByb21pc2VzKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKHByb21pc2UgPT4gcHJvbWlzZS5jYXRjaChlID0+IGUpKSk7XHJcbn1cclxuLyoqXHJcbiAqIEluc2VydHMgZ3RhZyBzY3JpcHQgdGFnIGludG8gdGhlIHBhZ2UgdG8gYXN5bmNocm9ub3VzbHkgZG93bmxvYWQgZ3RhZy5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBkYXRhbGF5ZXIgKG1vc3Qgb2Z0ZW4gdGhlIGRlZmF1bHQsIFwiX2RhdGFMYXllclwiKS5cclxuICovXHJcbmZ1bmN0aW9uIGluc2VydFNjcmlwdFRhZyhkYXRhTGF5ZXJOYW1lLCBtZWFzdXJlbWVudElkKSB7XHJcbiAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgIC8vIFdlIGFyZSBub3QgcHJvdmlkaW5nIGFuIGFuYWx5dGljc0lkIGluIHRoZSBVUkwgYmVjYXVzZSBpdCB3b3VsZCB0cmlnZ2VyIGEgYHBhZ2Vfdmlld2BcclxuICAgIC8vIHdpdGhvdXQgZmlkLiBXZSB3aWxsIGluaXRpYWxpemUgZ2EtaWQgdXNpbmcgZ3RhZyAoY29uZmlnKSBjb21tYW5kIHRvZ2V0aGVyIHdpdGggZmlkLlxyXG4gICAgc2NyaXB0LnNyYyA9IGAke0dUQUdfVVJMfT9sPSR7ZGF0YUxheWVyTmFtZX0maWQ9JHttZWFzdXJlbWVudElkfWA7XHJcbiAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xyXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG59XHJcbi8qKlxyXG4gKiBHZXQgcmVmZXJlbmNlIHRvLCBvciBjcmVhdGUsIGdsb2JhbCBkYXRhbGF5ZXIuXHJcbiAqIEBwYXJhbSBkYXRhTGF5ZXJOYW1lIE5hbWUgb2YgZGF0YWxheWVyIChtb3N0IG9mdGVuIHRoZSBkZWZhdWx0LCBcIl9kYXRhTGF5ZXJcIikuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRPckNyZWF0ZURhdGFMYXllcihkYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgZGF0YUxheWVyIGFuZCBjcmVhdGUgaWYgbmVlZGVkLlxyXG4gICAgbGV0IGRhdGFMYXllciA9IFtdO1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkod2luZG93W2RhdGFMYXllck5hbWVdKSkge1xyXG4gICAgICAgIGRhdGFMYXllciA9IHdpbmRvd1tkYXRhTGF5ZXJOYW1lXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHdpbmRvd1tkYXRhTGF5ZXJOYW1lXSA9IGRhdGFMYXllcjtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhTGF5ZXI7XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBwZWQgZ3RhZyBsb2dpYyB3aGVuIGd0YWcgaXMgY2FsbGVkIHdpdGggJ2NvbmZpZycgY29tbWFuZC5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcCBvZiBHQSBtZWFzdXJlbWVudElEcyB0byBjb3JyZXNwb25kaW5nIEZpcmViYXNlIGFwcElkLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZCBHQSBNZWFzdXJlbWVudCBJRCB0byBzZXQgY29uZmlnIGZvci5cclxuICogQHBhcmFtIGd0YWdQYXJhbXMgR3RhZyBjb25maWcgcGFyYW1zIHRvIHNldC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGd0YWdPbkNvbmZpZyhndGFnQ29yZSwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMpIHtcclxuICAgIC8vIElmIGNvbmZpZyBpcyBhbHJlYWR5IGZldGNoZWQsIHdlIGtub3cgdGhlIGFwcElkIGFuZCBjYW4gdXNlIGl0IHRvIGxvb2sgdXAgd2hhdCBGSUQgcHJvbWlzZSB3ZVxyXG4gICAgLy8vIGFyZSB3YWl0aW5nIGZvciwgYW5kIHdhaXQgb25seSBvbiB0aGF0IG9uZS5cclxuICAgIGNvbnN0IGNvcnJlc3BvbmRpbmdBcHBJZCA9IG1lYXN1cmVtZW50SWRUb0FwcElkW21lYXN1cmVtZW50SWRdO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAoY29ycmVzcG9uZGluZ0FwcElkKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbY29ycmVzcG9uZGluZ0FwcElkXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIGNvbmZpZyBpcyBub3QgZmV0Y2hlZCB5ZXQsIHdhaXQgZm9yIGFsbCBjb25maWdzICh3ZSBkb24ndCBrbm93IHdoaWNoIG9uZSB3ZSBuZWVkKSBhbmRcclxuICAgICAgICAgICAgLy8gZmluZCB0aGUgYXBwSWQgKGlmIGFueSkgY29ycmVzcG9uZGluZyB0byB0aGlzIG1lYXN1cmVtZW50SWQuIElmIHRoZXJlIGlzIG9uZSwgd2FpdCBvblxyXG4gICAgICAgICAgICAvLyB0aGF0IGFwcElkJ3MgaW5pdGlhbGl6YXRpb24gcHJvbWlzZS4gSWYgdGhlcmUgaXMgbm9uZSwgcHJvbWlzZSByZXNvbHZlcyBhbmQgZ3RhZ1xyXG4gICAgICAgICAgICAvLyBjYWxsIGdvZXMgdGhyb3VnaC5cclxuICAgICAgICAgICAgY29uc3QgZHluYW1pY0NvbmZpZ1Jlc3VsdHMgPSBhd2FpdCBwcm9taXNlQWxsU2V0dGxlZChkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0KTtcclxuICAgICAgICAgICAgY29uc3QgZm91bmRDb25maWcgPSBkeW5hbWljQ29uZmlnUmVzdWx0cy5maW5kKGNvbmZpZyA9PiBjb25maWcubWVhc3VyZW1lbnRJZCA9PT0gbWVhc3VyZW1lbnRJZCk7XHJcbiAgICAgICAgICAgIGlmIChmb3VuZENvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFtmb3VuZENvbmZpZy5hcHBJZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcihlKTtcclxuICAgIH1cclxuICAgIGd0YWdDb3JlKFwiY29uZmlnXCIgLyogQ09ORklHICovLCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKTtcclxufVxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGxvZ2ljIHdoZW4gZ3RhZyBpcyBjYWxsZWQgd2l0aCAnZXZlbnQnIGNvbW1hbmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnQ29yZSBCYXNpYyBndGFnIGZ1bmN0aW9uIHRoYXQganVzdCBhcHBlbmRzIHRvIGRhdGFMYXllci5cclxuICogQHBhcmFtIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgTWFwIG9mIGFwcElkcyB0byB0aGVpciBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICogQHBhcmFtIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgQXJyYXkgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkIEdBIE1lYXN1cmVtZW50IElEIHRvIGxvZyBldmVudCB0by5cclxuICogQHBhcmFtIGd0YWdQYXJhbXMgUGFyYW1zIHRvIGxvZyB3aXRoIHRoaXMgZXZlbnQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBndGFnT25FdmVudChndGFnQ29yZSwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZCwgZ3RhZ1BhcmFtcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBsZXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciA9IFtdO1xyXG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYSAnc2VuZF90bycgcGFyYW0sIGNoZWNrIGlmIGFueSBJRCBzcGVjaWZpZWQgbWF0Y2hlc1xyXG4gICAgICAgIC8vIGFuIGluaXRpYWxpemVJZHMoKSBwcm9taXNlIHdlIGFyZSB3YWl0aW5nIGZvci5cclxuICAgICAgICBpZiAoZ3RhZ1BhcmFtcyAmJiBndGFnUGFyYW1zWydzZW5kX3RvJ10pIHtcclxuICAgICAgICAgICAgbGV0IGdhU2VuZFRvTGlzdCA9IGd0YWdQYXJhbXNbJ3NlbmRfdG8nXTtcclxuICAgICAgICAgICAgLy8gTWFrZSBpdCBhbiBhcnJheSBpZiBpcyBpc24ndCwgc28gaXQgY2FuIGJlIGRlYWx0IHdpdGggdGhlIHNhbWUgd2F5LlxyXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZ2FTZW5kVG9MaXN0KSkge1xyXG4gICAgICAgICAgICAgICAgZ2FTZW5kVG9MaXN0ID0gW2dhU2VuZFRvTGlzdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2hlY2tpbmcgJ3NlbmRfdG8nIGZpZWxkcyByZXF1aXJlcyBoYXZpbmcgYWxsIG1lYXN1cmVtZW50IElEIHJlc3VsdHMgYmFjayBmcm9tXHJcbiAgICAgICAgICAgIC8vIHRoZSBkeW5hbWljIGNvbmZpZyBmZXRjaC5cclxuICAgICAgICAgICAgY29uc3QgZHluYW1pY0NvbmZpZ1Jlc3VsdHMgPSBhd2FpdCBwcm9taXNlQWxsU2V0dGxlZChkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0KTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBzZW5kVG9JZCBvZiBnYVNlbmRUb0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFueSBmZXRjaGVkIGR5bmFtaWMgbWVhc3VyZW1lbnQgSUQgdGhhdCBtYXRjaGVzIHRoaXMgJ3NlbmRfdG8nIElEXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZENvbmZpZyA9IGR5bmFtaWNDb25maWdSZXN1bHRzLmZpbmQoY29uZmlnID0+IGNvbmZpZy5tZWFzdXJlbWVudElkID09PSBzZW5kVG9JZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsaXphdGlvblByb21pc2UgPSBmb3VuZENvbmZpZyAmJiBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2ZvdW5kQ29uZmlnLmFwcElkXTtcclxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsaXphdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yLnB1c2goaW5pdGlhbGl6YXRpb25Qcm9taXNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGl0ZW0gaW4gJ3NlbmRfdG8nIHRoYXQgaXMgbm90IGFzc29jaWF0ZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBkaXJlY3RseSB3aXRoIGFuIEZJRCwgcG9zc2libHkgYSBncm91cC4gIEVtcHR5IHRoaXMgYXJyYXksXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpdCB0aGUgbG9vcCBlYXJseSwgYW5kIGxldCBpdCBnZXQgcG9wdWxhdGVkIGJlbG93LlxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGlzIHdpbGwgYmUgdW5wb3B1bGF0ZWQgaWYgdGhlcmUgd2FzIG5vICdzZW5kX3RvJyBmaWVsZCAsIG9yXHJcbiAgICAgICAgLy8gaWYgbm90IGFsbCBlbnRyaWVzIGluIHRoZSAnc2VuZF90bycgZmllbGQgY291bGQgYmUgbWFwcGVkIHRvXHJcbiAgICAgICAgLy8gYSBGSUQuIEluIHRoZXNlIGNhc2VzLCB3YWl0IG9uIGFsbCBwZW5kaW5nIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gICAgICAgIGlmIChpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yID0gT2JqZWN0LnZhbHVlcyhpbml0aWFsaXphdGlvblByb21pc2VzTWFwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUnVuIGNvcmUgZ3RhZyBmdW5jdGlvbiB3aXRoIGFyZ3MgYWZ0ZXIgYWxsIHJlbGV2YW50IGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgLy8gcHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkLlxyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IpO1xyXG4gICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHA6Ly9iLzE0MTM3MDQ0OSAtIHRoaXJkIGFyZ3VtZW50IGNhbm5vdCBiZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZ3RhZ0NvcmUoXCJldmVudFwiIC8qIEVWRU5UICovLCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zIHx8IHt9KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBXcmFwcyBhIHN0YW5kYXJkIGd0YWcgZnVuY3Rpb24gd2l0aCBleHRyYSBjb2RlIHRvIHdhaXQgZm9yIGNvbXBsZXRpb24gb2ZcclxuICogcmVsZXZhbnQgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMgYmVmb3JlIHNlbmRpbmcgcmVxdWVzdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnQ29yZSBCYXNpYyBndGFnIGZ1bmN0aW9uIHRoYXQganVzdCBhcHBlbmRzIHRvIGRhdGFMYXllci5cclxuICogQHBhcmFtIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAgTWFwIG9mIGFwcElkcyB0byB0aGVpciBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICogQHBhcmFtIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgQXJyYXkgb2YgZHluYW1pYyBjb25maWcgZmV0Y2ggcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkVG9BcHBJZCBNYXAgb2YgR0EgbWVhc3VyZW1lbnRJRHMgdG8gY29ycmVzcG9uZGluZyBGaXJlYmFzZSBhcHBJZC5cclxuICovXHJcbmZ1bmN0aW9uIHdyYXBHdGFnKGd0YWdDb3JlLCBcclxuLyoqXHJcbiAqIEFsbG93cyB3cmFwcGVkIGd0YWcgY2FsbHMgdG8gd2FpdCBvbiB3aGljaGV2ZXIgaW50aWFsaXphdGlvbiBwcm9taXNlcyBhcmUgcmVxdWlyZWQsXHJcbiAqIGRlcGVuZGluZyBvbiB0aGUgY29udGVudHMgb2YgdGhlIGd0YWcgcGFyYW1zJyBgc2VuZF90b2AgZmllbGQsIGlmIGFueS5cclxuICovXHJcbmluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIFxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGNhbGxzIHNvbWV0aW1lcyByZXF1aXJlIGFsbCBkeW5hbWljIGNvbmZpZyBmZXRjaGVzIHRvIGhhdmUgcmV0dXJuZWRcclxuICogYmVmb3JlIGRldGVybWluaW5nIHdoYXQgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMgKHdoaWNoIGluY2x1ZGUgRklEcykgdG8gd2FpdCBmb3IuXHJcbiAqL1xyXG5keW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBcclxuLyoqXHJcbiAqIFdyYXBwZWQgZ3RhZyBjb25maWcgY2FsbHMgY2FuIG5hcnJvdyBkb3duIHdoaWNoIGluaXRpYWxpemF0aW9uIHByb21pc2UgKHdpdGggRklEKVxyXG4gKiB0byB3YWl0IGZvciBpZiB0aGUgbWVhc3VyZW1lbnRJZCBpcyBhbHJlYWR5IGZldGNoZWQsIGJ5IGdldHRpbmcgdGhlIGNvcnJlc3BvbmRpbmcgYXBwSWQsXHJcbiAqIHdoaWNoIGlzIHRoZSBrZXkgZm9yIHRoZSBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBtYXAuXHJcbiAqL1xyXG5tZWFzdXJlbWVudElkVG9BcHBJZCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBXcmFwcGVyIGFyb3VuZCBndGFnIHRoYXQgZW5zdXJlcyBGSUQgaXMgc2VudCB3aXRoIGd0YWcgY2FsbHMuXHJcbiAgICAgKiBAcGFyYW0gY29tbWFuZCBHdGFnIGNvbW1hbmQgdHlwZS5cclxuICAgICAqIEBwYXJhbSBpZE9yTmFtZU9yUGFyYW1zIE1lYXN1cmVtZW50IElEIGlmIGNvbW1hbmQgaXMgRVZFTlQvQ09ORklHLCBwYXJhbXMgaWYgY29tbWFuZCBpcyBTRVQuXHJcbiAgICAgKiBAcGFyYW0gZ3RhZ1BhcmFtcyBQYXJhbXMgaWYgZXZlbnQgaXMgRVZFTlQvQ09ORklHLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBmdW5jdGlvbiBndGFnV3JhcHBlcihjb21tYW5kLCBpZE9yTmFtZU9yUGFyYW1zLCBndGFnUGFyYW1zKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gSWYgZXZlbnQsIGNoZWNrIHRoYXQgcmVsZXZhbnQgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMgaGF2ZSBjb21wbGV0ZWQuXHJcbiAgICAgICAgICAgIGlmIChjb21tYW5kID09PSBcImV2ZW50XCIgLyogRVZFTlQgKi8pIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIEVWRU5ULCBzZWNvbmQgYXJnIG11c3QgYmUgbWVhc3VyZW1lbnRJZC5cclxuICAgICAgICAgICAgICAgIGF3YWl0IGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBpZE9yTmFtZU9yUGFyYW1zLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjb21tYW5kID09PSBcImNvbmZpZ1wiIC8qIENPTkZJRyAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgQ09ORklHLCBzZWNvbmQgYXJnIG11c3QgYmUgbWVhc3VyZW1lbnRJZC5cclxuICAgICAgICAgICAgICAgIGF3YWl0IGd0YWdPbkNvbmZpZyhndGFnQ29yZSwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwiY29uc2VudFwiIC8qIENPTlNFTlQgKi8pIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIENPTkZJRywgc2Vjb25kIGFyZyBtdXN0IGJlIG1lYXN1cmVtZW50SWQuXHJcbiAgICAgICAgICAgICAgICBndGFnQ29yZShcImNvbnNlbnRcIiAvKiBDT05TRU5UICovLCAndXBkYXRlJywgZ3RhZ1BhcmFtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBTRVQsIHNlY29uZCBhcmcgbXVzdCBiZSBwYXJhbXMuXHJcbiAgICAgICAgICAgICAgICBndGFnQ29yZShcInNldFwiIC8qIFNFVCAqLywgaWRPck5hbWVPclBhcmFtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBndGFnV3JhcHBlcjtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBnbG9iYWwgZ3RhZyBmdW5jdGlvbiBvciB3cmFwcyBleGlzdGluZyBvbmUgaWYgZm91bmQuXHJcbiAqIFRoaXMgd3JhcHBlZCBmdW5jdGlvbiBhdHRhY2hlcyBGaXJlYmFzZSBpbnN0YW5jZSBJRCAoRklEKSB0byBndGFnICdjb25maWcnIGFuZFxyXG4gKiAnZXZlbnQnIGNhbGxzIHRoYXQgYmVsb25nIHRvIHRoZSBHQUlEIGFzc29jaWF0ZWQgd2l0aCB0aGlzIEZpcmViYXNlIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcCBvZiBHQSBtZWFzdXJlbWVudElEcyB0byBjb3JyZXNwb25kaW5nIEZpcmViYXNlIGFwcElkLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGdsb2JhbCBHQSBkYXRhbGF5ZXIgYXJyYXkuXHJcbiAqIEBwYXJhbSBndGFnRnVuY3Rpb25OYW1lIE5hbWUgb2YgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gKFwiZ3RhZ1wiIGlmIG5vdCB1c2VyLXNwZWNpZmllZCkuXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwT3JDcmVhdGVHdGFnKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBkYXRhTGF5ZXJOYW1lLCBndGFnRnVuY3Rpb25OYW1lKSB7XHJcbiAgICAvLyBDcmVhdGUgYSBiYXNpYyBjb3JlIGd0YWcgZnVuY3Rpb25cclxuICAgIGxldCBndGFnQ29yZSA9IGZ1bmN0aW9uICguLi5fYXJncykge1xyXG4gICAgICAgIC8vIE11c3QgcHVzaCBJQXJndW1lbnRzIG9iamVjdCwgbm90IGFuIGFycmF5LlxyXG4gICAgICAgIHdpbmRvd1tkYXRhTGF5ZXJOYW1lXS5wdXNoKGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmVwbGFjZSBpdCB3aXRoIGV4aXN0aW5nIG9uZSBpZiBmb3VuZFxyXG4gICAgaWYgKHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSAmJlxyXG4gICAgICAgIHR5cGVvZiB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZ3RhZ0NvcmUgPSB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV07XHJcbiAgICB9XHJcbiAgICB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gPSB3cmFwR3RhZyhndGFnQ29yZSwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBndGFnQ29yZSxcclxuICAgICAgICB3cmFwcGVkR3RhZzogd2luZG93W2d0YWdGdW5jdGlvbk5hbWVdXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBzY3JpcHQgdGFnIGluIHRoZSBET00gbWF0Y2hpbmcgYm90aCB0aGUgZ3RhZyB1cmwgcGF0dGVyblxyXG4gKiBhbmQgdGhlIHByb3ZpZGVkIGRhdGEgbGF5ZXIgbmFtZS5cclxuICovXHJcbmZ1bmN0aW9uIGZpbmRHdGFnU2NyaXB0T25QYWdlKGRhdGFMYXllck5hbWUpIHtcclxuICAgIGNvbnN0IHNjcmlwdFRhZ3MgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xyXG4gICAgZm9yIChjb25zdCB0YWcgb2YgT2JqZWN0LnZhbHVlcyhzY3JpcHRUYWdzKSkge1xyXG4gICAgICAgIGlmICh0YWcuc3JjICYmXHJcbiAgICAgICAgICAgIHRhZy5zcmMuaW5jbHVkZXMoR1RBR19VUkwpICYmXHJcbiAgICAgICAgICAgIHRhZy5zcmMuaW5jbHVkZXMoZGF0YUxheWVyTmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJhbHJlYWR5LWV4aXN0c1wiIC8qIEFMUkVBRFlfRVhJU1RTICovXTogJ0EgRmlyZWJhc2UgQW5hbHl0aWNzIGluc3RhbmNlIHdpdGggdGhlIGFwcElkIHskaWR9ICcgK1xyXG4gICAgICAgICcgYWxyZWFkeSBleGlzdHMuICcgK1xyXG4gICAgICAgICdPbmx5IG9uZSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2UgY2FuIGJlIGNyZWF0ZWQgZm9yIGVhY2ggYXBwSWQuJyxcclxuICAgIFtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovXTogJ2luaXRpYWxpemVBbmFseXRpY3MoKSBjYW5ub3QgYmUgY2FsbGVkIGFnYWluIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgdGhhbiB0aG9zZSAnICtcclxuICAgICAgICAnaXQgd2FzIGluaXRpYWxseSBjYWxsZWQgd2l0aC4gSXQgY2FuIGJlIGNhbGxlZCBhZ2FpbiB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgdG8gJyArXHJcbiAgICAgICAgJ3JldHVybiB0aGUgZXhpc3RpbmcgaW5zdGFuY2UsIG9yIGdldEFuYWx5dGljcygpIGNhbiBiZSB1c2VkICcgK1xyXG4gICAgICAgICd0byBnZXQgYSByZWZlcmVuY2UgdG8gdGhlIGFscmVhZHktaW50aWFsaXplZCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiYWxyZWFkeS1pbml0aWFsaXplZC1zZXR0aW5nc1wiIC8qIEFMUkVBRFlfSU5JVElBTElaRURfU0VUVElOR1MgKi9dOiAnRmlyZWJhc2UgQW5hbHl0aWNzIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuJyArXHJcbiAgICAgICAgJ3NldHRpbmdzKCkgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemluZyBhbnkgQW5hbHl0aWNzIGluc3RhbmNlJyArXHJcbiAgICAgICAgJ29yIGl0IHdpbGwgaGF2ZSBubyBlZmZlY3QuJyxcclxuICAgIFtcImludGVyb3AtY29tcG9uZW50LXJlZy1mYWlsZWRcIiAvKiBJTlRFUk9QX0NPTVBPTkVOVF9SRUdfRkFJTEVEICovXTogJ0ZpcmViYXNlIEFuYWx5dGljcyBJbnRlcm9wIENvbXBvbmVudCBmYWlsZWQgdG8gaW5zdGFudGlhdGU6IHskcmVhc29ufScsXHJcbiAgICBbXCJpbnZhbGlkLWFuYWx5dGljcy1jb250ZXh0XCIgLyogSU5WQUxJRF9BTkFMWVRJQ1NfQ09OVEVYVCAqL106ICdGaXJlYmFzZSBBbmFseXRpY3MgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiAnICtcclxuICAgICAgICAnV3JhcCBpbml0aWFsaXphdGlvbiBvZiBhbmFseXRpY3MgaW4gYW5hbHl0aWNzLmlzU3VwcG9ydGVkKCkgJyArXHJcbiAgICAgICAgJ3RvIHByZXZlbnQgaW5pdGlhbGl6YXRpb24gaW4gdW5zdXBwb3J0ZWQgZW52aXJvbm1lbnRzLiBEZXRhaWxzOiB7JGVycm9ySW5mb30nLFxyXG4gICAgW1wiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogSU5ERVhFRERCX1VOQVZBSUxBQkxFICovXTogJ0luZGV4ZWREQiB1bmF2YWlsYWJsZSBvciByZXN0cmljdGVkIGluIHRoaXMgZW52aXJvbm1lbnQuICcgK1xyXG4gICAgICAgICdXcmFwIGluaXRpYWxpemF0aW9uIG9mIGFuYWx5dGljcyBpbiBhbmFseXRpY3MuaXNTdXBwb3J0ZWQoKSAnICtcclxuICAgICAgICAndG8gcHJldmVudCBpbml0aWFsaXphdGlvbiBpbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudHMuIERldGFpbHM6IHskZXJyb3JJbmZvfScsXHJcbiAgICBbXCJmZXRjaC10aHJvdHRsZVwiIC8qIEZFVENIX1RIUk9UVExFICovXTogJ1RoZSBjb25maWcgZmV0Y2ggcmVxdWVzdCB0aW1lZCBvdXQgd2hpbGUgaW4gYW4gZXhwb25lbnRpYWwgYmFja29mZiBzdGF0ZS4nICtcclxuICAgICAgICAnIFVuaXggdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kcyB3aGVuIGZldGNoIHJlcXVlc3QgdGhyb3R0bGluZyBlbmRzOiB7JHRocm90dGxlRW5kVGltZU1pbGxpc30uJyxcclxuICAgIFtcImNvbmZpZy1mZXRjaC1mYWlsZWRcIiAvKiBDT05GSUdfRkVUQ0hfRkFJTEVEICovXTogJ0R5bmFtaWMgY29uZmlnIGZldGNoIGZhaWxlZDogW3skaHR0cFN0YXR1c31dIHskcmVzcG9uc2VNZXNzYWdlfScsXHJcbiAgICBbXCJuby1hcGkta2V5XCIgLyogTk9fQVBJX0tFWSAqL106ICdUaGUgXCJhcGlLZXlcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBGaXJlYmFzZSBBbmFseXRpY3MgcmVxdWlyZXMgdGhpcyBmaWVsZCB0bycgK1xyXG4gICAgICAgICdjb250YWluIGEgdmFsaWQgQVBJIGtleS4nLFxyXG4gICAgW1wibm8tYXBwLWlkXCIgLyogTk9fQVBQX0lEICovXTogJ1RoZSBcImFwcElkXCIgZmllbGQgaXMgZW1wdHkgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gRmlyZWJhc2UgQW5hbHl0aWNzIHJlcXVpcmVzIHRoaXMgZmllbGQgdG8nICtcclxuICAgICAgICAnY29udGFpbiBhIHZhbGlkIGFwcCBJRC4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhbmFseXRpY3MnLCAnQW5hbHl0aWNzJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEJhY2tvZmYgZmFjdG9yIGZvciA1MDMgZXJyb3JzLCB3aGljaCB3ZSB3YW50IHRvIGJlIGNvbnNlcnZhdGl2ZSBhYm91dFxyXG4gKiB0byBhdm9pZCBvdmVybG9hZGluZyBzZXJ2ZXJzLiBFYWNoIHJldHJ5IGludGVydmFsIHdpbGwgYmVcclxuICogQkFTRV9JTlRFUlZBTF9NSUxMSVMgKiBMT05HX1JFVFJZX0ZBQ1RPUiBeIHJldHJ5Q291bnQsIHNvIHRoZSBzZWNvbmQgb25lXHJcbiAqIHdpbGwgYmUgfjMwIHNlY29uZHMgKHdpdGggZnV6emluZykuXHJcbiAqL1xyXG5jb25zdCBMT05HX1JFVFJZX0ZBQ1RPUiA9IDMwO1xyXG4vKipcclxuICogQmFzZSB3YWl0IGludGVydmFsIHRvIG11bHRpcGxpZWQgYnkgYmFja29mZkZhY3Rvcl5iYWNrb2ZmQ291bnQuXHJcbiAqL1xyXG5jb25zdCBCQVNFX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBTdHViYmFibGUgcmV0cnkgZGF0YSBzdG9yYWdlIGNsYXNzLlxyXG4gKi9cclxuY2xhc3MgUmV0cnlEYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKHRocm90dGxlTWV0YWRhdGEgPSB7fSwgaW50ZXJ2YWxNaWxsaXMgPSBCQVNFX0lOVEVSVkFMX01JTExJUykge1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGVNZXRhZGF0YSA9IHRocm90dGxlTWV0YWRhdGE7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbE1pbGxpcyA9IGludGVydmFsTWlsbGlzO1xyXG4gICAgfVxyXG4gICAgZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdO1xyXG4gICAgfVxyXG4gICAgc2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCwgbWV0YWRhdGEpIHtcclxuICAgICAgICB0aGlzLnRocm90dGxlTWV0YWRhdGFbYXBwSWRdID0gbWV0YWRhdGE7XHJcbiAgICB9XHJcbiAgICBkZWxldGVUaHJvdHRsZU1ldGFkYXRhKGFwcElkKSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGhyb3R0bGVNZXRhZGF0YVthcHBJZF07XHJcbiAgICB9XHJcbn1cclxuY29uc3QgZGVmYXVsdFJldHJ5RGF0YSA9IG5ldyBSZXRyeURhdGEoKTtcclxuLyoqXHJcbiAqIFNldCBHRVQgcmVxdWVzdCBoZWFkZXJzLlxyXG4gKiBAcGFyYW0gYXBpS2V5IEFwcCBBUEkga2V5LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SGVhZGVycyhhcGlLZXkpIHtcclxuICAgIHJldHVybiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3gtZ29vZy1hcGkta2V5JzogYXBpS2V5XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogRmV0Y2hlcyBkeW5hbWljIGNvbmZpZyBmcm9tIGJhY2tlbmQuXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwIHRvIGZldGNoIGNvbmZpZyBmb3IuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaER5bmFtaWNDb25maWcoYXBwRmllbGRzKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXkgfSA9IGFwcEZpZWxkcztcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiBnZXRIZWFkZXJzKGFwaUtleSlcclxuICAgIH07XHJcbiAgICBjb25zdCBhcHBVcmwgPSBEWU5BTUlDX0NPTkZJR19VUkwucmVwbGFjZSgne2FwcC1pZH0nLCBhcHBJZCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwcFVybCwgcmVxdWVzdCk7XHJcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzICE9PSAzMDQpIHtcclxuICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVHJ5IHRvIGdldCBhbnkgZXJyb3IgbWVzc2FnZSB0ZXh0IGZyb20gc2VydmVyIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICBjb25zdCBqc29uUmVzcG9uc2UgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKTtcclxuICAgICAgICAgICAgaWYgKChfYSA9IGpzb25SZXNwb25zZS5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGpzb25SZXNwb25zZS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfaWdub3JlZCkgeyB9XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJjb25maWctZmV0Y2gtZmFpbGVkXCIgLyogQ09ORklHX0ZFVENIX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICBodHRwU3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlTWVzc2FnZTogZXJyb3JNZXNzYWdlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG59XHJcbi8qKlxyXG4gKiBGZXRjaGVzIGR5bmFtaWMgY29uZmlnIGZyb20gYmFja2VuZCwgcmV0cnlpbmcgaWYgZmFpbGVkLlxyXG4gKiBAcGFyYW0gYXBwIEZpcmViYXNlIGFwcCB0byBmZXRjaCBjb25maWcgZm9yLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KGFwcCwgXHJcbi8vIHJldHJ5RGF0YSBhbmQgdGltZW91dE1pbGxpcyBhcmUgcGFyYW1ldGVyaXplZCB0byBhbGxvdyBwYXNzaW5nIGEgZGlmZmVyZW50IHZhbHVlIGZvciB0ZXN0aW5nLlxyXG5yZXRyeURhdGEgPSBkZWZhdWx0UmV0cnlEYXRhLCB0aW1lb3V0TWlsbGlzKSB7XHJcbiAgICBjb25zdCB7IGFwcElkLCBhcGlLZXksIG1lYXN1cmVtZW50SWQgfSA9IGFwcC5vcHRpb25zO1xyXG4gICAgaWYgKCFhcHBJZCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwLWlkXCIgLyogTk9fQVBQX0lEICovKTtcclxuICAgIH1cclxuICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgaWYgKG1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG1lYXN1cmVtZW50SWQsXHJcbiAgICAgICAgICAgICAgICBhcHBJZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwaS1rZXlcIiAvKiBOT19BUElfS0VZICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSByZXRyeURhdGEuZ2V0VGhyb3R0bGVNZXRhZGF0YShhcHBJZCkgfHwge1xyXG4gICAgICAgIGJhY2tvZmZDb3VudDogMCxcclxuICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXM6IERhdGUubm93KClcclxuICAgIH07XHJcbiAgICBjb25zdCBzaWduYWwgPSBuZXcgQW5hbHl0aWNzQWJvcnRTaWduYWwoKTtcclxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIC8vIE5vdGUgYSB2ZXJ5IGxvdyBkZWxheSwgZWcgPCAxMG1zLCBjYW4gZWxhcHNlIGJlZm9yZSBsaXN0ZW5lcnMgYXJlIGluaXRpYWxpemVkLlxyXG4gICAgICAgIHNpZ25hbC5hYm9ydCgpO1xyXG4gICAgfSwgdGltZW91dE1pbGxpcyAhPT0gdW5kZWZpbmVkID8gdGltZW91dE1pbGxpcyA6IEZFVENIX1RJTUVPVVRfTUlMTElTKTtcclxuICAgIHJldHVybiBhdHRlbXB0RmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KHsgYXBwSWQsIGFwaUtleSwgbWVhc3VyZW1lbnRJZCB9LCB0aHJvdHRsZU1ldGFkYXRhLCBzaWduYWwsIHJldHJ5RGF0YSk7XHJcbn1cclxuLyoqXHJcbiAqIFJ1bnMgb25lIHJldHJ5IGF0dGVtcHQuXHJcbiAqIEBwYXJhbSBhcHBGaWVsZHMgTmVjZXNzYXJ5IGFwcCBjb25maWcgZmllbGRzLlxyXG4gKiBAcGFyYW0gdGhyb3R0bGVNZXRhZGF0YSBPbmdvaW5nIG1ldGFkYXRhIHRvIGRldGVybWluZSB0aHJvdHRsaW5nIHRpbWVzLlxyXG4gKiBAcGFyYW0gc2lnbmFsIEFib3J0IHNpZ25hbC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwRmllbGRzLCB7IHRocm90dGxlRW5kVGltZU1pbGxpcywgYmFja29mZkNvdW50IH0sIHNpZ25hbCwgcmV0cnlEYXRhID0gZGVmYXVsdFJldHJ5RGF0YSAvLyBmb3IgdGVzdGluZ1xyXG4pIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBjb25zdCB7IGFwcElkLCBtZWFzdXJlbWVudElkIH0gPSBhcHBGaWVsZHM7XHJcbiAgICAvLyBTdGFydHMgd2l0aCBhIChwb3RlbnRpYWxseSB6ZXJvKSB0aW1lb3V0IHRvIHN1cHBvcnQgcmVzdW1wdGlvbiBmcm9tIHN0b3JlZCBzdGF0ZS5cclxuICAgIC8vIEVuc3VyZXMgdGhlIHRocm90dGxlIGVuZCB0aW1lIGlzIGhvbm9yZWQgaWYgdGhlIGxhc3QgYXR0ZW1wdCB0aW1lZCBvdXQuXHJcbiAgICAvLyBOb3RlIHRoZSBTREsgd2lsbCBuZXZlciBtYWtlIGEgcmVxdWVzdCBpZiB0aGUgZmV0Y2ggdGltZW91dCBleHBpcmVzIGF0IHRoaXMgcG9pbnQuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNldEFib3J0YWJsZVRpbWVvdXQoc2lnbmFsLCB0aHJvdHRsZUVuZFRpbWVNaWxsaXMpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAobWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgVGltZWQgb3V0IGZldGNoaW5nIHRoaXMgRmlyZWJhc2UgYXBwJ3MgbWVhc3VyZW1lbnQgSUQgZnJvbSB0aGUgc2VydmVyLmAgK1xyXG4gICAgICAgICAgICAgICAgYCBGYWxsaW5nIGJhY2sgdG8gdGhlIG1lYXN1cmVtZW50IElEICR7bWVhc3VyZW1lbnRJZH1gICtcclxuICAgICAgICAgICAgICAgIGAgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFskeyhfYSA9IGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlfV1gKTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgYXBwSWQsIG1lYXN1cmVtZW50SWQgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaER5bmFtaWNDb25maWcoYXBwRmllbGRzKTtcclxuICAgICAgICAvLyBOb3RlIHRoZSBTREsgb25seSBjbGVhcnMgdGhyb3R0bGUgc3RhdGUgaWYgcmVzcG9uc2UgaXMgc3VjY2VzcyBvciBub24tcmV0cmlhYmxlLlxyXG4gICAgICAgIHJldHJ5RGF0YS5kZWxldGVUaHJvdHRsZU1ldGFkYXRhKGFwcElkKTtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gZTtcclxuICAgICAgICBpZiAoIWlzUmV0cmlhYmxlRXJyb3IoZXJyb3IpKSB7XHJcbiAgICAgICAgICAgIHJldHJ5RGF0YS5kZWxldGVUaHJvdHRsZU1ldGFkYXRhKGFwcElkKTtcclxuICAgICAgICAgICAgaWYgKG1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKGBGYWlsZWQgdG8gZmV0Y2ggdGhpcyBGaXJlYmFzZSBhcHAncyBtZWFzdXJlbWVudCBJRCBmcm9tIHRoZSBzZXJ2ZXIuYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYCBGYWxsaW5nIGJhY2sgdG8gdGhlIG1lYXN1cmVtZW50IElEICR7bWVhc3VyZW1lbnRJZH1gICtcclxuICAgICAgICAgICAgICAgICAgICBgIHByb3ZpZGVkIGluIHRoZSBcIm1lYXN1cmVtZW50SWRcIiBmaWVsZCBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBbJHtlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IubWVzc2FnZX1dYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBhcHBJZCwgbWVhc3VyZW1lbnRJZCB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBiYWNrb2ZmTWlsbGlzID0gTnVtYmVyKChfYiA9IGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5jdXN0b21EYXRhKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaHR0cFN0YXR1cykgPT09IDUwM1xyXG4gICAgICAgICAgICA/IGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCByZXRyeURhdGEuaW50ZXJ2YWxNaWxsaXMsIExPTkdfUkVUUllfRkFDVE9SKVxyXG4gICAgICAgICAgICA6IGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCByZXRyeURhdGEuaW50ZXJ2YWxNaWxsaXMpO1xyXG4gICAgICAgIC8vIEluY3JlbWVudHMgYmFja29mZiBzdGF0ZS5cclxuICAgICAgICBjb25zdCB0aHJvdHRsZU1ldGFkYXRhID0ge1xyXG4gICAgICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXM6IERhdGUubm93KCkgKyBiYWNrb2ZmTWlsbGlzLFxyXG4gICAgICAgICAgICBiYWNrb2ZmQ291bnQ6IGJhY2tvZmZDb3VudCArIDFcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIFBlcnNpc3RzIHN0YXRlLlxyXG4gICAgICAgIHJldHJ5RGF0YS5zZXRUaHJvdHRsZU1ldGFkYXRhKGFwcElkLCB0aHJvdHRsZU1ldGFkYXRhKTtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENhbGxpbmcgYXR0ZW1wdEZldGNoIGFnYWluIGluICR7YmFja29mZk1pbGxpc30gbWlsbGlzYCk7XHJcbiAgICAgICAgcmV0dXJuIGF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwRmllbGRzLCB0aHJvdHRsZU1ldGFkYXRhLCBzaWduYWwsIHJldHJ5RGF0YSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFN1cHBvcnRzIHdhaXRpbmcgb24gYSBiYWNrb2ZmIGJ5OlxyXG4gKlxyXG4gKiA8dWw+XHJcbiAqICAgPGxpPlByb21pc2lmeWluZyBzZXRUaW1lb3V0LCBzbyB3ZSBjYW4gc2V0IGEgdGltZW91dCBpbiBvdXIgUHJvbWlzZSBjaGFpbjwvbGk+XHJcbiAqICAgPGxpPkxpc3RlbmluZyBvbiBhIHNpZ25hbCBidXMgZm9yIGFib3J0IGV2ZW50cywganVzdCBsaWtlIHRoZSBGZXRjaCBBUEk8L2xpPlxyXG4gKiAgIDxsaT5GYWlsaW5nIGluIHRoZSBzYW1lIHdheSB0aGUgRmV0Y2ggQVBJIGZhaWxzLCBzbyB0aW1pbmcgb3V0IGEgbGl2ZSByZXF1ZXN0IGFuZCBhIHRocm90dGxlZFxyXG4gKiAgICAgICByZXF1ZXN0IGFwcGVhciB0aGUgc2FtZS48L2xpPlxyXG4gKiA8L3VsPlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0QWJvcnRhYmxlVGltZW91dChzaWduYWwsIHRocm90dGxlRW5kVGltZU1pbGxpcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAvLyBEZXJpdmVzIGJhY2tvZmYgZnJvbSBnaXZlbiBlbmQgdGltZSwgbm9ybWFsaXppbmcgbmVnYXRpdmUgbnVtYmVycyB0byB6ZXJvLlxyXG4gICAgICAgIGNvbnN0IGJhY2tvZmZNaWxsaXMgPSBNYXRoLm1heCh0aHJvdHRsZUVuZFRpbWVNaWxsaXMgLSBEYXRlLm5vdygpLCAwKTtcclxuICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChyZXNvbHZlLCBiYWNrb2ZmTWlsbGlzKTtcclxuICAgICAgICAvLyBBZGRzIGxpc3RlbmVyLCByYXRoZXIgdGhhbiBzZXRzIG9uYWJvcnQsIGJlY2F1c2Ugc2lnbmFsIGlzIGEgc2hhcmVkIG9iamVjdC5cclxuICAgICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcigoKSA9PiB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgY29tcGxldGVzIGJlZm9yZSB0aGlzIHRpbWVvdXQsIHRoZSByZWplY3Rpb24gaGFzIG5vIGVmZmVjdC5cclxuICAgICAgICAgICAgcmVqZWN0KEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZmV0Y2gtdGhyb3R0bGVcIiAvKiBGRVRDSF9USFJPVFRMRSAqLywge1xyXG4gICAgICAgICAgICAgICAgdGhyb3R0bGVFbmRUaW1lTWlsbGlzXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHtAbGluayBFcnJvcn0gaW5kaWNhdGVzIGEgZmV0Y2ggcmVxdWVzdCBtYXkgc3VjY2VlZCBsYXRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmV0cmlhYmxlRXJyb3IoZSkge1xyXG4gICAgaWYgKCEoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHx8ICFlLmN1c3RvbURhdGEpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyBVc2VzIHN0cmluZyBpbmRleCBkZWZpbmVkIGJ5IEVycm9yRGF0YSwgd2hpY2ggRmlyZWJhc2VFcnJvciBpbXBsZW1lbnRzLlxyXG4gICAgY29uc3QgaHR0cFN0YXR1cyA9IE51bWJlcihlLmN1c3RvbURhdGFbJ2h0dHBTdGF0dXMnXSk7XHJcbiAgICByZXR1cm4gKGh0dHBTdGF0dXMgPT09IDQyOSB8fFxyXG4gICAgICAgIGh0dHBTdGF0dXMgPT09IDUwMCB8fFxyXG4gICAgICAgIGh0dHBTdGF0dXMgPT09IDUwMyB8fFxyXG4gICAgICAgIGh0dHBTdGF0dXMgPT09IDUwNCk7XHJcbn1cclxuLyoqXHJcbiAqIFNoaW1zIGEgbWluaW1hbCBBYm9ydFNpZ25hbCAoY29waWVkIGZyb20gUmVtb3RlIENvbmZpZykuXHJcbiAqXHJcbiAqIDxwPkFib3J0Q29udHJvbGxlcidzIEFib3J0U2lnbmFsIGNvbnZlbmllbnRseSBkZWNvdXBsZXMgZmV0Y2ggdGltZW91dCBsb2dpYyBmcm9tIG90aGVyIGFzcGVjdHNcclxuICogb2YgbmV0d29ya2luZywgc3VjaCBhcyByZXRyaWVzLiBGaXJlYmFzZSBkb2Vzbid0IHVzZSBBYm9ydENvbnRyb2xsZXIgZW5vdWdoIHRvIGp1c3RpZnkgYVxyXG4gKiBwb2x5ZmlsbCByZWNvbW1lbmRhdGlvbiwgbGlrZSB3ZSBkbyB3aXRoIHRoZSBGZXRjaCBBUEksIGJ1dCB0aGlzIG1pbmltYWwgc2hpbSBjYW4gZWFzaWx5IGJlXHJcbiAqIHN3YXBwZWQgb3V0IGlmL3doZW4gd2UgZG8uXHJcbiAqL1xyXG5jbGFzcyBBbmFseXRpY3NBYm9ydFNpZ25hbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgYWJvcnQoKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcigpKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZlbnQgcGFyYW1ldGVycyB0byBzZXQgb24gJ2d0YWcnIGR1cmluZyBpbml0aWFsaXphdGlvbi5cclxuICovXHJcbmxldCBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdDtcclxuLyoqXHJcbiAqIExvZ3MgYW4gYW5hbHl0aWNzIGV2ZW50IHRocm91Z2ggdGhlIEZpcmViYXNlIFNESy5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gZXZlbnROYW1lIEdvb2dsZSBBbmFseXRpY3MgZXZlbnQgbmFtZSwgY2hvb3NlIGZyb20gc3RhbmRhcmQgbGlzdCBvciB1c2UgYSBjdXN0b20gc3RyaW5nLlxyXG4gKiBAcGFyYW0gZXZlbnRQYXJhbXMgQW5hbHl0aWNzIGV2ZW50IHBhcmFtZXRlcnMuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsb2dFdmVudCQxKGd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbCkge1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcImV2ZW50XCIgLyogRVZFTlQgKi8sIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG1lYXN1cmVtZW50SWQgPSBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBldmVudFBhcmFtcyksIHsgJ3NlbmRfdG8nOiBtZWFzdXJlbWVudElkIH0pO1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcImV2ZW50XCIgLyogRVZFTlQgKi8sIGV2ZW50TmFtZSwgcGFyYW1zKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IHNjcmVlbl9uYW1lIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIGxvZ0V2ZW50fSB3aXRoIGBldmVudE5hbWVgIGFzICdzY3JlZW5fdmlldycgYW5kIGFkZCByZWxldmFudCBgZXZlbnRQYXJhbXNgLlxyXG4gKiBTZWUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2FuYWx5dGljcy9zY3JlZW52aWV3cyB8IFRyYWNrIFNjcmVlbnZpZXdzfS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gc2NyZWVuTmFtZSBTY3JlZW4gbmFtZSBzdHJpbmcgdG8gc2V0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0Q3VycmVudFNjcmVlbiQxKGd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBzY3JlZW5OYW1lLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmdsb2JhbCkge1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcInNldFwiIC8qIFNFVCAqLywgeyAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lIH0pO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG1lYXN1cmVtZW50SWQgPSBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiY29uZmlnXCIgLyogQ09ORklHICovLCBtZWFzdXJlbWVudElkLCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgJ3NjcmVlbl9uYW1lJzogc2NyZWVuTmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgdXNlcl9pZCBwYXJhbWV0ZXIgZm9yIHRoaXMgR29vZ2xlIEFuYWx5dGljcyBJRC5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gaWQgVXNlciBJRCBzdHJpbmcgdG8gc2V0XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXRVc2VySWQkMShndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSwgaWQsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogU0VUICovLCB7ICd1c2VyX2lkJzogaWQgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBDT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndXNlcl9pZCc6IGlkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCBhbGwgb3RoZXIgdXNlciBwcm9wZXJ0aWVzIG90aGVyIHRoYW4gdXNlcl9pZCBhbmQgc2NyZWVuX25hbWUuXHJcbiAqXHJcbiAqIEBwYXJhbSBndGFnRnVuY3Rpb24gV3JhcHBlZCBndGFnIGZ1bmN0aW9uIHRoYXQgd2FpdHMgZm9yIGZpZCB0byBiZSBzZXQgYmVmb3JlIHNlbmRpbmcgYW4gZXZlbnRcclxuICogQHBhcmFtIHByb3BlcnRpZXMgTWFwIG9mIHVzZXIgcHJvcGVydGllcyB0byBzZXRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldFVzZXJQcm9wZXJ0aWVzJDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgY29uc3QgZmxhdFByb3BlcnRpZXMgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwcm9wZXJ0aWVzKSkge1xyXG4gICAgICAgICAgICAvLyB1c2UgZG90IG5vdGF0aW9uIGZvciBtZXJnZSBiZWhhdmlvciBpbiBndGFnLmpzXHJcbiAgICAgICAgICAgIGZsYXRQcm9wZXJ0aWVzW2B1c2VyX3Byb3BlcnRpZXMuJHtrZXl9YF0gPSBwcm9wZXJ0aWVzW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcInNldFwiIC8qIFNFVCAqLywgZmxhdFByb3BlcnRpZXMpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG1lYXN1cmVtZW50SWQgPSBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiY29uZmlnXCIgLyogQ09ORklHICovLCBtZWFzdXJlbWVudElkLCB7XHJcbiAgICAgICAgICAgIHVwZGF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgJ3VzZXJfcHJvcGVydGllcyc6IHByb3BlcnRpZXNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IHdoZXRoZXIgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZW5hYmxlZCBJZiB0cnVlLCBjb2xsZWN0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgSUQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCQxKGluaXRpYWxpemF0aW9uUHJvbWlzZSwgZW5hYmxlZCkge1xyXG4gICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIHdpbmRvd1tgZ2EtZGlzYWJsZS0ke21lYXN1cmVtZW50SWR9YF0gPSAhZW5hYmxlZDtcclxufVxyXG4vKipcclxuICogQ29uc2VudCBwYXJhbWV0ZXJzIHRvIGRlZmF1bHQgdG8gZHVyaW5nICdndGFnJyBpbml0aWFsaXphdGlvbi5cclxuICovXHJcbmxldCBkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdDtcclxuLyoqXHJcbiAqIFNldHMgdGhlIHZhcmlhYmxlIHtAbGluayBkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdH0gZm9yIHVzZSBpbiB0aGUgaW5pdGlhbGl6YXRpb24gb2ZcclxuICogYW5hbHl0aWNzLlxyXG4gKlxyXG4gKiBAcGFyYW0gY29uc2VudFNldHRpbmdzIE1hcHMgdGhlIGFwcGxpY2FibGUgZW5kIHVzZXIgY29uc2VudCBzdGF0ZSBmb3IgZ3RhZy5qcy5cclxuICovXHJcbmZ1bmN0aW9uIF9zZXRDb25zZW50RGVmYXVsdEZvckluaXQoY29uc2VudFNldHRpbmdzKSB7XHJcbiAgICBkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCA9IGNvbnNlbnRTZXR0aW5ncztcclxufVxyXG4vKipcclxuICogU2V0cyB0aGUgdmFyaWFibGUgYGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0YCBmb3IgdXNlIGluIHRoZSBpbml0aWFsaXphdGlvbiBvZlxyXG4gKiBhbmFseXRpY3MuXHJcbiAqXHJcbiAqIEBwYXJhbSBjdXN0b21QYXJhbXMgQW55IGN1c3RvbSBwYXJhbXMgdGhlIHVzZXIgbWF5IHBhc3MgdG8gZ3RhZy5qcy5cclxuICovXHJcbmZ1bmN0aW9uIF9zZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdChjdXN0b21QYXJhbXMpIHtcclxuICAgIGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0ID0gY3VzdG9tUGFyYW1zO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbmRleGVkZGItdW5hdmFpbGFibGVcIiAvKiBJTkRFWEVEREJfVU5BVkFJTEFCTEUgKi8sIHtcclxuICAgICAgICAgICAgZXJyb3JJbmZvOiAnSW5kZXhlZERCIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudC4nXHJcbiAgICAgICAgfSkubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImluZGV4ZWRkYi11bmF2YWlsYWJsZVwiIC8qIElOREVYRUREQl9VTkFWQUlMQUJMRSAqLywge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JJbmZvOiAoX2EgPSBlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICB9KS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIHRoZSBhbmFseXRpY3MgaW5zdGFuY2UgaW4gZ3RhZy5qcyBieSBjYWxsaW5nIGNvbmZpZyBjb21tYW5kIHdpdGggZmlkLlxyXG4gKlxyXG4gKiBOT1RFOiBXZSBjb21iaW5lIGFuYWx5dGljcyBpbml0aWFsaXphdGlvbiBhbmQgc2V0dGluZyBmaWQgdG9nZXRoZXIgYmVjYXVzZSB3ZSB3YW50IGZpZCB0byBiZVxyXG4gKiBwYXJ0IG9mIHRoZSBgcGFnZV92aWV3YCBldmVudCB0aGF0J3Mgc2VudCBkdXJpbmcgdGhlIGluaXRpYWxpemF0aW9uXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwXHJcbiAqIEBwYXJhbSBndGFnQ29yZSBUaGUgZ3RhZyBmdW5jdGlvbiB0aGF0J3Mgbm90IHdyYXBwZWQuXHJcbiAqIEBwYXJhbSBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IEFycmF5IG9mIGFsbCBkeW5hbWljIGNvbmZpZyBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcHMgbWVhc3VyZW1lbnRJRCB0byBhcHBJRC5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgX0ZpcmViYXNlSW5zdGFsbGF0aW9uc0ludGVybmFsIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBNZWFzdXJlbWVudCBJRC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9pbml0aWFsaXplQW5hbHl0aWNzKGFwcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGluc3RhbGxhdGlvbnMsIGd0YWdDb3JlLCBkYXRhTGF5ZXJOYW1lLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBkeW5hbWljQ29uZmlnUHJvbWlzZSA9IGZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeShhcHApO1xyXG4gICAgLy8gT25jZSBmZXRjaGVkLCBtYXAgbWVhc3VyZW1lbnRJZHMgdG8gYXBwSWQsIGZvciBlYXNlIG9mIGxvb2t1cCBpbiB3cmFwcGVkIGd0YWcgZnVuY3Rpb24uXHJcbiAgICBkeW5hbWljQ29uZmlnUHJvbWlzZVxyXG4gICAgICAgIC50aGVuKGNvbmZpZyA9PiB7XHJcbiAgICAgICAgbWVhc3VyZW1lbnRJZFRvQXBwSWRbY29uZmlnLm1lYXN1cmVtZW50SWRdID0gY29uZmlnLmFwcElkO1xyXG4gICAgICAgIGlmIChhcHAub3B0aW9ucy5tZWFzdXJlbWVudElkICYmXHJcbiAgICAgICAgICAgIGNvbmZpZy5tZWFzdXJlbWVudElkICE9PSBhcHAub3B0aW9ucy5tZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaGUgbWVhc3VyZW1lbnQgSUQgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZyAoJHthcHAub3B0aW9ucy5tZWFzdXJlbWVudElkfSlgICtcclxuICAgICAgICAgICAgICAgIGAgZG9lcyBub3QgbWF0Y2ggdGhlIG1lYXN1cmVtZW50IElEIGZldGNoZWQgZnJvbSB0aGUgc2VydmVyICgke2NvbmZpZy5tZWFzdXJlbWVudElkfSkuYCArXHJcbiAgICAgICAgICAgICAgICBgIFRvIGVuc3VyZSBhbmFseXRpY3MgZXZlbnRzIGFyZSBhbHdheXMgc2VudCB0byB0aGUgY29ycmVjdCBBbmFseXRpY3MgcHJvcGVydHksYCArXHJcbiAgICAgICAgICAgICAgICBgIHVwZGF0ZSB0aGVgICtcclxuICAgICAgICAgICAgICAgIGAgbWVhc3VyZW1lbnQgSUQgZmllbGQgaW4gdGhlIGxvY2FsIGNvbmZpZyBvciByZW1vdmUgaXQgZnJvbSB0aGUgbG9jYWwgY29uZmlnLmApO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxuICAgIC8vIEFkZCB0byBsaXN0IHRvIHRyYWNrIHN0YXRlIG9mIGFsbCBkeW5hbWljIGNvbmZpZyBwcm9taXNlcy5cclxuICAgIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QucHVzaChkeW5hbWljQ29uZmlnUHJvbWlzZSk7XHJcbiAgICBjb25zdCBmaWRQcm9taXNlID0gdmFsaWRhdGVJbmRleGVkREIoKS50aGVuKGVudklzVmFsaWQgPT4ge1xyXG4gICAgICAgIGlmIChlbnZJc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnN0YWxsYXRpb25zLmdldElkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgW2R5bmFtaWNDb25maWcsIGZpZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgZHluYW1pY0NvbmZpZ1Byb21pc2UsXHJcbiAgICAgICAgZmlkUHJvbWlzZVxyXG4gICAgXSk7XHJcbiAgICAvLyBEZXRlY3QgaWYgdXNlciBoYXMgYWxyZWFkeSBwdXQgdGhlIGd0YWcgPHNjcmlwdD4gdGFnIG9uIHRoaXMgcGFnZSB3aXRoIHRoZSBwYXNzZWQgaW5cclxuICAgIC8vIGRhdGEgbGF5ZXIgbmFtZS5cclxuICAgIGlmICghZmluZEd0YWdTY3JpcHRPblBhZ2UoZGF0YUxheWVyTmFtZSkpIHtcclxuICAgICAgICBpbnNlcnRTY3JpcHRUYWcoZGF0YUxheWVyTmFtZSwgZHluYW1pY0NvbmZpZy5tZWFzdXJlbWVudElkKTtcclxuICAgIH1cclxuICAgIC8vIERldGVjdHMgaWYgdGhlcmUgYXJlIGNvbnNlbnQgc2V0dGluZ3MgdGhhdCBuZWVkIHRvIGJlIGNvbmZpZ3VyZWQuXHJcbiAgICBpZiAoZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQpIHtcclxuICAgICAgICBndGFnQ29yZShcImNvbnNlbnRcIiAvKiBDT05TRU5UICovLCAnZGVmYXVsdCcsIGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0KTtcclxuICAgICAgICBfc2V0Q29uc2VudERlZmF1bHRGb3JJbml0KHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIGNvbW1hbmQgaW5pdGlhbGl6ZXMgZ3RhZy5qcyBhbmQgb25seSBuZWVkcyB0byBiZSBjYWxsZWQgb25jZSBmb3IgdGhlIGVudGlyZSB3ZWIgYXBwLFxyXG4gICAgLy8gYnV0IHNpbmNlIGl0IGlzIGlkZW1wb3RlbnQsIHdlIGNhbiBjYWxsIGl0IG11bHRpcGxlIHRpbWVzLlxyXG4gICAgLy8gV2Uga2VlcCBpdCB0b2dldGhlciB3aXRoIG90aGVyIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBiZXR0ZXIgY29kZSBzdHJ1Y3R1cmUuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgZ3RhZ0NvcmUoJ2pzJywgbmV3IERhdGUoKSk7XHJcbiAgICAvLyBVc2VyIGNvbmZpZyBhZGRlZCBmaXJzdC4gV2UgZG9uJ3Qgd2FudCB1c2VycyB0byBhY2NpZGVudGFsbHkgb3ZlcndyaXRlXHJcbiAgICAvLyBiYXNlIEZpcmViYXNlIGNvbmZpZyBwcm9wZXJ0aWVzLlxyXG4gICAgY29uc3QgY29uZmlnUHJvcGVydGllcyA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5jb25maWcpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xyXG4gICAgLy8gZ3VhcmQgYWdhaW5zdCBkZXZlbG9wZXJzIGFjY2lkZW50YWxseSBzZXR0aW5nIHByb3BlcnRpZXMgd2l0aCBwcmVmaXggYGZpcmViYXNlX2BcclxuICAgIGNvbmZpZ1Byb3BlcnRpZXNbT1JJR0lOX0tFWV0gPSAnZmlyZWJhc2UnO1xyXG4gICAgY29uZmlnUHJvcGVydGllcy51cGRhdGUgPSB0cnVlO1xyXG4gICAgaWYgKGZpZCAhPSBudWxsKSB7XHJcbiAgICAgICAgY29uZmlnUHJvcGVydGllc1tHQV9GSURfS0VZXSA9IGZpZDtcclxuICAgIH1cclxuICAgIC8vIEl0IHNob3VsZCBiZSB0aGUgZmlyc3QgY29uZmlnIGNvbW1hbmQgY2FsbGVkIG9uIHRoaXMgR0EtSURcclxuICAgIC8vIEluaXRpYWxpemUgdGhpcyBHQS1JRCBhbmQgc2V0IEZJRCBvbiBpdCB1c2luZyB0aGUgZ3RhZyBjb25maWcgQVBJLlxyXG4gICAgLy8gTm90ZTogVGhpcyB3aWxsIHRyaWdnZXIgYSBwYWdlX3ZpZXcgZXZlbnQgdW5sZXNzICdzZW5kX3BhZ2VfdmlldycgaXMgc2V0IHRvIGZhbHNlIGluXHJcbiAgICAvLyBgY29uZmlnUHJvcGVydGllc2AuXHJcbiAgICBndGFnQ29yZShcImNvbmZpZ1wiIC8qIENPTkZJRyAqLywgZHluYW1pY0NvbmZpZy5tZWFzdXJlbWVudElkLCBjb25maWdQcm9wZXJ0aWVzKTtcclxuICAgIC8vIERldGVjdHMgaWYgdGhlcmUgaXMgZGF0YSB0aGF0IHdpbGwgYmUgc2V0IG9uIGV2ZXJ5IGV2ZW50IGxvZ2dlZCBmcm9tIHRoZSBTREsuXHJcbiAgICBpZiAoZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQpIHtcclxuICAgICAgICBndGFnQ29yZShcInNldFwiIC8qIFNFVCAqLywgZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQpO1xyXG4gICAgICAgIF9zZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCh1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGR5bmFtaWNDb25maWcubWVhc3VyZW1lbnRJZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW5hbHl0aWNzIFNlcnZpY2UgY2xhc3MuXHJcbiAqL1xyXG5jbGFzcyBBbmFseXRpY3NTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgfVxyXG4gICAgX2RlbGV0ZSgpIHtcclxuICAgICAgICBkZWxldGUgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFt0aGlzLmFwcC5vcHRpb25zLmFwcElkXTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIE1hcHMgYXBwSWQgdG8gZnVsbCBpbml0aWFsaXphdGlvbiBwcm9taXNlLiBXcmFwcGVkIGd0YWcgY2FsbHMgbXVzdCB3YWl0IG9uXHJcbiAqIGFsbCBvciBzb21lIG9mIHRoZXNlLCBkZXBlbmRpbmcgb24gdGhlIGNhbGwncyBgc2VuZF90b2AgcGFyYW0gYW5kIHRoZSBzdGF0dXNcclxuICogb2YgdGhlIGR5bmFtaWMgY29uZmlnIGZldGNoZXMgKHNlZSBiZWxvdykuXHJcbiAqL1xyXG5sZXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCA9IHt9O1xyXG4vKipcclxuICogTGlzdCBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy4gSW4gY2VydGFpbiBjYXNlcywgd3JhcHBlZCBndGFnIGNhbGxzXHJcbiAqIHdhaXQgb24gYWxsIHRoZXNlIHRvIGJlIGNvbXBsZXRlIGluIG9yZGVyIHRvIGRldGVybWluZSBpZiBpdCBjYW4gc2VsZWN0aXZlbHlcclxuICogd2FpdCBmb3Igb25seSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIChGSUQpIHByb21pc2VzIG9yIGlmIGl0IG11c3Qgd2FpdCBmb3IgYWxsLlxyXG4gKi9cclxubGV0IGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgPSBbXTtcclxuLyoqXHJcbiAqIE1hcHMgZmV0Y2hlZCBtZWFzdXJlbWVudElkcyB0byBhcHBJZC4gUG9wdWxhdGVkIHdoZW4gdGhlIGFwcCdzIGR5bmFtaWMgY29uZmlnXHJcbiAqIGZldGNoIGNvbXBsZXRlcy4gSWYgYWxyZWFkeSBwb3B1bGF0ZWQsIGd0YWcgY29uZmlnIGNhbGxzIGNhbiB1c2UgdGhpcyB0b1xyXG4gKiBzZWxlY3RpdmVseSB3YWl0IGZvciBvbmx5IHRoaXMgYXBwJ3MgaW5pdGlhbGl6YXRpb24gcHJvbWlzZSAoRklEKSBpbnN0ZWFkIG9mIGFsbFxyXG4gKiBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICovXHJcbmNvbnN0IG1lYXN1cmVtZW50SWRUb0FwcElkID0ge307XHJcbi8qKlxyXG4gKiBOYW1lIGZvciB3aW5kb3cgZ2xvYmFsIGRhdGEgbGF5ZXIgYXJyYXkgdXNlZCBieSBHQTogZGVmYXVsdHMgdG8gJ2RhdGFMYXllcicuXHJcbiAqL1xyXG5sZXQgZGF0YUxheWVyTmFtZSA9ICdkYXRhTGF5ZXInO1xyXG4vKipcclxuICogTmFtZSBmb3Igd2luZG93IGdsb2JhbCBndGFnIGZ1bmN0aW9uIHVzZWQgYnkgR0E6IGRlZmF1bHRzIHRvICdndGFnJy5cclxuICovXHJcbmxldCBndGFnTmFtZSA9ICdndGFnJztcclxuLyoqXHJcbiAqIFJlcHJvZHVjdGlvbiBvZiBzdGFuZGFyZCBndGFnIGZ1bmN0aW9uIG9yIHJlZmVyZW5jZSB0byBleGlzdGluZ1xyXG4gKiBndGFnIGZ1bmN0aW9uIG9uIHdpbmRvdyBvYmplY3QuXHJcbiAqL1xyXG5sZXQgZ3RhZ0NvcmVGdW5jdGlvbjtcclxuLyoqXHJcbiAqIFdyYXBwZXIgYXJvdW5kIGd0YWcgZnVuY3Rpb24gdGhhdCBlbnN1cmVzIEZJRCBpcyBzZW50IHdpdGggYWxsXHJcbiAqIHJlbGV2YW50IGV2ZW50IGFuZCBjb25maWcgY2FsbHMuXHJcbiAqL1xyXG5sZXQgd3JhcHBlZEd0YWdGdW5jdGlvbjtcclxuLyoqXHJcbiAqIEZsYWcgdG8gZW5zdXJlIHBhZ2UgaW5pdGlhbGl6YXRpb24gc3RlcHMgKGNyZWF0aW9uIG9yIHdyYXBwaW5nIG9mXHJcbiAqIGRhdGFMYXllciBhbmQgZ3RhZyBzY3JpcHQpIGFyZSBvbmx5IHJ1biBvbmNlIHBlciBwYWdlIGxvYWQuXHJcbiAqL1xyXG5sZXQgZ2xvYmFsSW5pdERvbmUgPSBmYWxzZTtcclxuLyoqXHJcbiAqIENvbmZpZ3VyZXMgRmlyZWJhc2UgQW5hbHl0aWNzIHRvIHVzZSBjdXN0b20gYGd0YWdgIG9yIGBkYXRhTGF5ZXJgIG5hbWVzLlxyXG4gKiBJbnRlbmRlZCB0byBiZSB1c2VkIGlmIGBndGFnLmpzYCBzY3JpcHQgaGFzIGJlZW4gaW5zdGFsbGVkIG9uXHJcbiAqIHRoaXMgcGFnZSBpbmRlcGVuZGVudGx5IG9mIEZpcmViYXNlIEFuYWx5dGljcywgYW5kIGlzIHVzaW5nIG5vbi1kZWZhdWx0XHJcbiAqIG5hbWVzIGZvciBlaXRoZXIgdGhlIGBndGFnYCBmdW5jdGlvbiBvciBmb3IgYGRhdGFMYXllcmAuXHJcbiAqIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBnZXRBbmFseXRpY3MoKWAgb3IgaXQgd29uJ3RcclxuICogaGF2ZSBhbnkgZWZmZWN0LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBvcHRpb25zIC0gQ3VzdG9tIGd0YWcgYW5kIGRhdGFMYXllciBuYW1lcy5cclxuICovXHJcbmZ1bmN0aW9uIHNldHRpbmdzKG9wdGlvbnMpIHtcclxuICAgIGlmIChnbG9iYWxJbml0RG9uZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi8pO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuZGF0YUxheWVyTmFtZSkge1xyXG4gICAgICAgIGRhdGFMYXllck5hbWUgPSBvcHRpb25zLmRhdGFMYXllck5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5ndGFnTmFtZSkge1xyXG4gICAgICAgIGd0YWdOYW1lID0gb3B0aW9ucy5ndGFnTmFtZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIG5vIGVudmlyb25tZW50IG1pc21hdGNoIGlzIGZvdW5kLlxyXG4gKiBJZiBlbnZpcm9ubWVudCBtaXNtYXRjaGVzIGFyZSBmb3VuZCwgdGhyb3dzIGFuIElOVkFMSURfQU5BTFlUSUNTX0NPTlRFWFRcclxuICogZXJyb3IgdGhhdCBhbHNvIGxpc3RzIGRldGFpbHMgZm9yIGVhY2ggbWlzbWF0Y2ggZm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiB3YXJuT25Ccm93c2VyQ29udGV4dE1pc21hdGNoKCkge1xyXG4gICAgY29uc3QgbWlzbWF0Y2hlZEVudk1lc3NhZ2VzID0gW107XHJcbiAgICBpZiAoaXNCcm93c2VyRXh0ZW5zaW9uKCkpIHtcclxuICAgICAgICBtaXNtYXRjaGVkRW52TWVzc2FnZXMucHVzaCgnVGhpcyBpcyBhIGJyb3dzZXIgZXh0ZW5zaW9uIGVudmlyb25tZW50LicpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcmVDb29raWVzRW5hYmxlZCgpKSB7XHJcbiAgICAgICAgbWlzbWF0Y2hlZEVudk1lc3NhZ2VzLnB1c2goJ0Nvb2tpZXMgYXJlIG5vdCBhdmFpbGFibGUuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAobWlzbWF0Y2hlZEVudk1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBkZXRhaWxzID0gbWlzbWF0Y2hlZEVudk1lc3NhZ2VzXHJcbiAgICAgICAgICAgIC5tYXAoKG1lc3NhZ2UsIGluZGV4KSA9PiBgKCR7aW5kZXggKyAxfSkgJHttZXNzYWdlfWApXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgY29uc3QgZXJyID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWFuYWx5dGljcy1jb250ZXh0XCIgLyogSU5WQUxJRF9BTkFMWVRJQ1NfQ09OVEVYVCAqLywge1xyXG4gICAgICAgICAgICBlcnJvckluZm86IGRldGFpbHNcclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2dnZXIud2FybihlcnIubWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFuYWx5dGljcyBpbnN0YW5jZSBmYWN0b3J5LlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIGZhY3RvcnkoYXBwLCBpbnN0YWxsYXRpb25zLCBvcHRpb25zKSB7XHJcbiAgICB3YXJuT25Ccm93c2VyQ29udGV4dE1pc21hdGNoKCk7XHJcbiAgICBjb25zdCBhcHBJZCA9IGFwcC5vcHRpb25zLmFwcElkO1xyXG4gICAgaWYgKCFhcHBJZCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwLWlkXCIgLyogTk9fQVBQX0lEICovKTtcclxuICAgIH1cclxuICAgIGlmICghYXBwLm9wdGlvbnMuYXBpS2V5KSB7XHJcbiAgICAgICAgaWYgKGFwcC5vcHRpb25zLm1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRoZSBcImFwaUtleVwiIGZpZWxkIGlzIGVtcHR5IGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFRoaXMgaXMgbmVlZGVkIHRvIGZldGNoIHRoZSBsYXRlc3RgICtcclxuICAgICAgICAgICAgICAgIGAgbWVhc3VyZW1lbnQgSUQgZm9yIHRoaXMgRmlyZWJhc2UgYXBwLiBGYWxsaW5nIGJhY2sgdG8gdGhlIG1lYXN1cmVtZW50IElEICR7YXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZH1gICtcclxuICAgICAgICAgICAgICAgIGAgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwaS1rZXlcIiAvKiBOT19BUElfS0VZICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthcHBJZF0gIT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYWxyZWFkeS1leGlzdHNcIiAvKiBBTFJFQURZX0VYSVNUUyAqLywge1xyXG4gICAgICAgICAgICBpZDogYXBwSWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmICghZ2xvYmFsSW5pdERvbmUpIHtcclxuICAgICAgICAvLyBTdGVwcyBoZXJlIHNob3VsZCBvbmx5IGJlIGRvbmUgb25jZSBwZXIgcGFnZTogY3JlYXRpb24gb3Igd3JhcHBpbmdcclxuICAgICAgICAvLyBvZiBkYXRhTGF5ZXIgYW5kIGdsb2JhbCBndGFnIGZ1bmN0aW9uLlxyXG4gICAgICAgIGdldE9yQ3JlYXRlRGF0YUxheWVyKGRhdGFMYXllck5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHsgd3JhcHBlZEd0YWcsIGd0YWdDb3JlIH0gPSB3cmFwT3JDcmVhdGVHdGFnKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBkYXRhTGF5ZXJOYW1lLCBndGFnTmFtZSk7XHJcbiAgICAgICAgd3JhcHBlZEd0YWdGdW5jdGlvbiA9IHdyYXBwZWRHdGFnO1xyXG4gICAgICAgIGd0YWdDb3JlRnVuY3Rpb24gPSBndGFnQ29yZTtcclxuICAgICAgICBnbG9iYWxJbml0RG9uZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAvLyBBc3luYyBidXQgbm9uLWJsb2NraW5nLlxyXG4gICAgLy8gVGhpcyBtYXAgcmVmbGVjdHMgdGhlIGNvbXBsZXRpb24gc3RhdGUgb2YgYWxsIHByb21pc2VzIGZvciBlYWNoIGFwcElkLlxyXG4gICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthcHBJZF0gPSBfaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIG1lYXN1cmVtZW50SWRUb0FwcElkLCBpbnN0YWxsYXRpb25zLCBndGFnQ29yZUZ1bmN0aW9uLCBkYXRhTGF5ZXJOYW1lLCBvcHRpb25zKTtcclxuICAgIGNvbnN0IGFuYWx5dGljc0luc3RhbmNlID0gbmV3IEFuYWx5dGljc1NlcnZpY2UoYXBwKTtcclxuICAgIHJldHVybiBhbmFseXRpY3NJbnN0YW5jZTtcclxufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gYXBwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IHRvIHVzZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldEFuYWx5dGljcyhhcHAgPSBnZXRBcHAoKSkge1xyXG4gICAgYXBwID0gZ2V0TW9kdWxhckluc3RhbmNlKGFwcCk7XHJcbiAgICAvLyBEZXBlbmRlbmNpZXNcclxuICAgIGNvbnN0IGFuYWx5dGljc1Byb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgQU5BTFlUSUNTX1RZUEUpO1xyXG4gICAgaWYgKGFuYWx5dGljc1Byb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBhbmFseXRpY3NQcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0aWFsaXplQW5hbHl0aWNzKGFwcCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYW4ge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UgZm9yIHRoZSBnaXZlbiBhcHAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gdG8gdXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFuYWx5dGljcyhhcHAsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgLy8gRGVwZW5kZW5jaWVzXHJcbiAgICBjb25zdCBhbmFseXRpY3NQcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsIEFOQUxZVElDU19UWVBFKTtcclxuICAgIGlmIChhbmFseXRpY3NQcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gYW5hbHl0aWNzUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBhbmFseXRpY3NQcm92aWRlci5nZXRPcHRpb25zKCkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYW5hbHl0aWNzSW5zdGFuY2UgPSBhbmFseXRpY3NQcm92aWRlci5pbml0aWFsaXplKHsgb3B0aW9ucyB9KTtcclxuICAgIHJldHVybiBhbmFseXRpY3NJbnN0YW5jZTtcclxufVxyXG4vKipcclxuICogVGhpcyBpcyBhIHB1YmxpYyBzdGF0aWMgbWV0aG9kIHByb3ZpZGVkIHRvIHVzZXJzIHRoYXQgd3JhcHMgZm91ciBkaWZmZXJlbnQgY2hlY2tzOlxyXG4gKlxyXG4gKiAxLiBDaGVjayBpZiBpdCdzIG5vdCBhIGJyb3dzZXIgZXh0ZW5zaW9uIGVudmlyb25tZW50LlxyXG4gKiAyLiBDaGVjayBpZiBjb29raWVzIGFyZSBlbmFibGVkIGluIGN1cnJlbnQgYnJvd3Nlci5cclxuICogMy4gQ2hlY2sgaWYgSW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlciBlbnZpcm9ubWVudC5cclxuICogNC4gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgYnJvd3NlciBjb250ZXh0IGlzIHZhbGlkIGZvciB1c2luZyBgSW5kZXhlZERCLm9wZW4oKWAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xyXG4gICAgaWYgKGlzQnJvd3NlckV4dGVuc2lvbigpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcmVDb29raWVzRW5hYmxlZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBpc0RCT3BlbmFibGUgPSBhd2FpdCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCk7XHJcbiAgICAgICAgcmV0dXJuIGlzREJPcGVuYWJsZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVXNlIGd0YWcgYGNvbmZpZ2AgY29tbWFuZCB0byBzZXQgYHNjcmVlbl9uYW1lYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAZGVwcmVjYXRlZCBVc2Uge0BsaW5rIGxvZ0V2ZW50fSB3aXRoIGBldmVudE5hbWVgIGFzICdzY3JlZW5fdmlldycgYW5kIGFkZCByZWxldmFudCBgZXZlbnRQYXJhbXNgLlxyXG4gKiBTZWUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2FuYWx5dGljcy9zY3JlZW52aWV3cyB8IFRyYWNrIFNjcmVlbnZpZXdzfS5cclxuICpcclxuICogQHBhcmFtIGFuYWx5dGljc0luc3RhbmNlIC0gVGhlIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gc2NyZWVuTmFtZSAtIFNjcmVlbiBuYW1lIHRvIHNldC5cclxuICovXHJcbmZ1bmN0aW9uIHNldEN1cnJlbnRTY3JlZW4oYW5hbHl0aWNzSW5zdGFuY2UsIHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHNldEN1cnJlbnRTY3JlZW4kMSh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgc2NyZWVuTmFtZSwgb3B0aW9ucykuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBVc2UgZ3RhZyBgY29uZmlnYCBjb21tYW5kIHRvIHNldCBgdXNlcl9pZGAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFuYWx5dGljc0luc3RhbmNlIC0gVGhlIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gaWQgLSBVc2VyIElEIHRvIHNldC5cclxuICovXHJcbmZ1bmN0aW9uIHNldFVzZXJJZChhbmFseXRpY3NJbnN0YW5jZSwgaWQsIG9wdGlvbnMpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHNldFVzZXJJZCQxKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBpZCwgb3B0aW9ucykuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBVc2UgZ3RhZyBgY29uZmlnYCBjb21tYW5kIHRvIHNldCBhbGwgcGFyYW1zIHNwZWNpZmllZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0VXNlclByb3BlcnRpZXMoYW5hbHl0aWNzSW5zdGFuY2UsIHByb3BlcnRpZXMsIG9wdGlvbnMpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHNldFVzZXJQcm9wZXJ0aWVzJDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIHByb3BlcnRpZXMsIG9wdGlvbnMpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogU2V0cyB3aGV0aGVyIEdvb2dsZSBBbmFseXRpY3MgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIGFwcCBvbiB0aGlzIGRldmljZS5cclxuICogU2V0cyBnbG9iYWwgYHdpbmRvd1snZ2EtZGlzYWJsZS1hbmFseXRpY3NJZCddID0gdHJ1ZTtgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFuYWx5dGljc0luc3RhbmNlIC0gVGhlIHtAbGluayBBbmFseXRpY3N9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW5hYmxlZCAtIElmIHRydWUsIGVuYWJsZXMgY29sbGVjdGlvbiwgaWYgZmFsc2UsIGRpc2FibGVzIGl0LlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQoYW5hbHl0aWNzSW5zdGFuY2UsIGVuYWJsZWQpIHtcclxuICAgIGFuYWx5dGljc0luc3RhbmNlID0gZ2V0TW9kdWxhckluc3RhbmNlKGFuYWx5dGljc0luc3RhbmNlKTtcclxuICAgIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkJDEoaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIGVuYWJsZWQpLmNhdGNoKGUgPT4gbG9nZ2VyLmVycm9yKGUpKTtcclxufVxyXG4vKipcclxuICogQWRkcyBkYXRhIHRoYXQgd2lsbCBiZSBzZXQgb24gZXZlcnkgZXZlbnQgbG9nZ2VkIGZyb20gdGhlIFNESywgaW5jbHVkaW5nIGF1dG9tYXRpYyBvbmVzLlxyXG4gKiBXaXRoIGd0YWcncyBcInNldFwiIGNvbW1hbmQsIHRoZSB2YWx1ZXMgcGFzc2VkIHBlcnNpc3Qgb24gdGhlIGN1cnJlbnQgcGFnZSBhbmQgYXJlIHBhc3NlZCB3aXRoXHJcbiAqIGFsbCBzdWJzZXF1ZW50IGV2ZW50cy5cclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0gY3VzdG9tUGFyYW1zIC0gQW55IGN1c3RvbSBwYXJhbXMgdGhlIHVzZXIgbWF5IHBhc3MgdG8gZ3RhZy5qcy5cclxuICovXHJcbmZ1bmN0aW9uIHNldERlZmF1bHRFdmVudFBhcmFtZXRlcnMoY3VzdG9tUGFyYW1zKSB7XHJcbiAgICAvLyBDaGVjayBpZiByZWZlcmVuY2UgdG8gZXhpc3RpbmcgZ3RhZyBmdW5jdGlvbiBvbiB3aW5kb3cgb2JqZWN0IGV4aXN0c1xyXG4gICAgaWYgKHdyYXBwZWRHdGFnRnVuY3Rpb24pIHtcclxuICAgICAgICB3cmFwcGVkR3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogU0VUICovLCBjdXN0b21QYXJhbXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX3NldERlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KGN1c3RvbVBhcmFtcyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgR29vZ2xlIEFuYWx5dGljcyBldmVudCB3aXRoIGdpdmVuIGBldmVudFBhcmFtc2AuIFRoaXMgbWV0aG9kXHJcbiAqIGF1dG9tYXRpY2FsbHkgYXNzb2NpYXRlcyB0aGlzIGxvZ2dlZCBldmVudCB3aXRoIHRoaXMgRmlyZWJhc2Ugd2ViXHJcbiAqIGFwcCBpbnN0YW5jZSBvbiB0aGlzIGRldmljZS5cclxuICogTGlzdCBvZiBvZmZpY2lhbCBldmVudCBwYXJhbWV0ZXJzIGNhbiBiZSBmb3VuZCBpbiB0aGUgZ3RhZy5qc1xyXG4gKiByZWZlcmVuY2UgZG9jdW1lbnRhdGlvbjpcclxuICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2d0YWdqcy9yZWZlcmVuY2UvZ2E0LWV2ZW50c1xyXG4gKiB8IHRoZSBHQTQgcmVmZXJlbmNlIGRvY3VtZW50YXRpb259LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBsb2dFdmVudChhbmFseXRpY3NJbnN0YW5jZSwgZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucykge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgbG9nRXZlbnQkMSh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucykuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBhcHBsaWNhYmxlIGVuZCB1c2VyIGNvbnNlbnQgc3RhdGUgZm9yIHRoaXMgd2ViIGFwcCBhY3Jvc3MgYWxsIGd0YWcgcmVmZXJlbmNlcyBvbmNlXHJcbiAqIEZpcmViYXNlIEFuYWx5dGljcyBpcyBpbml0aWFsaXplZC5cclxuICpcclxuICogVXNlIHRoZSB7QGxpbmsgQ29uc2VudFNldHRpbmdzfSB0byBzcGVjaWZ5IGluZGl2aWR1YWwgY29uc2VudCB0eXBlIHZhbHVlcy4gQnkgZGVmYXVsdCBjb25zZW50XHJcbiAqIHR5cGVzIGFyZSBzZXQgdG8gXCJncmFudGVkXCIuXHJcbiAqIEBwdWJsaWNcclxuICogQHBhcmFtIGNvbnNlbnRTZXR0aW5ncyAtIE1hcHMgdGhlIGFwcGxpY2FibGUgZW5kIHVzZXIgY29uc2VudCBzdGF0ZSBmb3IgZ3RhZy5qcy5cclxuICovXHJcbmZ1bmN0aW9uIHNldENvbnNlbnQoY29uc2VudFNldHRpbmdzKSB7XHJcbiAgICAvLyBDaGVjayBpZiByZWZlcmVuY2UgdG8gZXhpc3RpbmcgZ3RhZyBmdW5jdGlvbiBvbiB3aW5kb3cgb2JqZWN0IGV4aXN0c1xyXG4gICAgaWYgKHdyYXBwZWRHdGFnRnVuY3Rpb24pIHtcclxuICAgICAgICB3cmFwcGVkR3RhZ0Z1bmN0aW9uKFwiY29uc2VudFwiIC8qIENPTlNFTlQgKi8sICd1cGRhdGUnLCBjb25zZW50U2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX3NldENvbnNlbnREZWZhdWx0Rm9ySW5pdChjb25zZW50U2V0dGluZ3MpO1xyXG4gICAgfVxyXG59XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuOC4zXCI7XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBBbmFseXRpY3NcclxuICpcclxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckFuYWx5dGljcygpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KEFOQUxZVElDU19UWVBFLCAoY29udGFpbmVyLCB7IG9wdGlvbnM6IGFuYWx5dGljc09wdGlvbnMgfSkgPT4ge1xyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSBmb3IgRmlyZWJhc2VBcHAgd2lsbCBhbHdheXMgc3VjY2VlZFxyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgY29uc3QgaW5zdGFsbGF0aW9ucyA9IGNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ2luc3RhbGxhdGlvbnMtaW50ZXJuYWwnKVxyXG4gICAgICAgICAgICAuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhY3RvcnkoYXBwLCBpbnN0YWxsYXRpb25zLCBhbmFseXRpY3NPcHRpb25zKTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnYW5hbHl0aWNzLWludGVybmFsJywgaW50ZXJuYWxGYWN0b3J5LCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKSk7XHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XHJcbiAgICBmdW5jdGlvbiBpbnRlcm5hbEZhY3RvcnkoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgYW5hbHl0aWNzID0gY29udGFpbmVyLmdldFByb3ZpZGVyKEFOQUxZVElDU19UWVBFKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGxvZ0V2ZW50OiAoZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucykgPT4gbG9nRXZlbnQoYW5hbHl0aWNzLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludGVyb3AtY29tcG9uZW50LXJlZy1mYWlsZWRcIiAvKiBJTlRFUk9QX0NPTVBPTkVOVF9SRUdfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICByZWFzb246IGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbnJlZ2lzdGVyQW5hbHl0aWNzKCk7XG5cbmV4cG9ydCB7IGdldEFuYWx5dGljcywgaW5pdGlhbGl6ZUFuYWx5dGljcywgaXNTdXBwb3J0ZWQsIGxvZ0V2ZW50LCBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCwgc2V0Q29uc2VudCwgc2V0Q3VycmVudFNjcmVlbiwgc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycywgc2V0VXNlcklkLCBzZXRVc2VyUHJvcGVydGllcywgc2V0dGluZ3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvLyB0aGlzIGlzIHdoZXJlIHdlIGNhbiBoYXZlIHRoZSBjbGFzc2VzIGFuZCBmdW5jdGlvbnMgZm9yIGJ1aWxkaW5nIHRoZSBldmVudHNcclxuLy8gdG8gc2VuZCB0byBhbiBhbmFseXRpY3MgcmVjb3JkZXIgKGZpcmViYXNlPyBscnM/KVxyXG5cclxuaW1wb3J0IHsgcURhdGEsIGFuc3dlckRhdGEgfSBmcm9tICcuL3F1ZXN0aW9uRGF0YSc7XHJcbmltcG9ydCB7IGxvZ0V2ZW50IH0gZnJvbSAnZmlyZWJhc2UvYW5hbHl0aWNzJztcclxuaW1wb3J0IHsgYnVja2V0IH0gZnJvbSAnLi4vYXNzZXNzbWVudC9idWNrZXREYXRhJ1xyXG5cclxudmFyIHV1aWQ6IHN0cmluZztcclxudmFyIHVzZXJTb3VyY2U6IHN0cmluZztcclxudmFyIGNsYXQsIGNsb247XHJcbnZhciBnYW5hO1xyXG52YXIgbGF0bG9uZztcclxudmFyIGNyb3BwZWRsYXQsIGNyb3BwZWRsb25nO1xyXG52YXIgY2l0eSwgcmVnaW9uLCBjb3VudHJ5O1xyXG52YXIgZGF0YVVSTDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2NhdGlvbigpe1xyXG5cdGNvbnNvbGUubG9nKFwic3RhcnRpbmcgdG8gZ2V0IGxvY2F0aW9uXCIpO1xyXG5cdFx0ZmV0Y2goYGh0dHBzOi8vaXBpbmZvLmlvL2pzb24/dG9rZW49YjYyNjg3MjcxNzg2MTBgKVxyXG5cdFx0LnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiZ290IGxvY2F0aW9uIHJlc3BvbnNlXCIpO1xyXG5cdFx0XHRcdGlmKCFyZXNwb25zZS5vaykge1xyXG5cdFx0XHRcdFx0dGhyb3cgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcblx0XHR9KS50aGVuKChqc29uUmVzcG9uc2UpICA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGpzb25SZXNwb25zZSk7XHJcblx0XHRcdGxhdGxvbmcgPSBqc29uUmVzcG9uc2UubG9jO1xyXG5cdFx0XHRjaXR5ID0ganNvblJlc3BvbnNlLmNpdHk7XHJcblx0XHRcdHJlZ2lvbiA9IGpzb25SZXNwb25zZS5yZWdpb247XHJcblx0XHRcdGNvdW50cnkgPSBqc29uUmVzcG9uc2UuY291bnRyeTtcclxuXHRcdFx0c2VuZExvY2F0aW9uKCk7XHJcblxyXG5cdFx0XHRcdHJldHVybiB7fTtcclxuXHRcdH0pLmNhdGNoKChlcnIpID0+IHtcclxuXHRcdFx0Y29uc29sZS53YXJuKGBsb2NhdGlvbiBmYWlsZWQgdG8gdXBkYXRlISBlbmNvdW50ZXJlZCBlcnJvciAke2Vyci5tc2d9YCk7XHJcblx0XHR9KTtcclxuXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGlua0FuYWx5dGljcyhuZXdnYW5hLCBkYXRhdXJsKTogdm9pZHtcclxuXHRnYW5hID0gbmV3Z2FuYTtcclxuXHRkYXRhVVJMID0gZGF0YXVybDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFV1aWQobmV3VXVpZDogc3RyaW5nLCBuZXdVc2VyU291cmNlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHR1dWlkID0gbmV3VXVpZDtcclxuXHR1c2VyU291cmNlID0gbmV3VXNlclNvdXJjZTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZW5kSW5pdCgpOiB2b2lkIHtcclxuXHRnZXRMb2NhdGlvbigpO1xyXG5cdHZhciBldmVudFN0cmluZyA9IFwidXNlciBcIiArIHV1aWQgKyBcIiBvcGVuZWQgdGhlIGFzc2Vzc21lbnRcIlxyXG5cclxuXHRjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XHJcblxyXG5cdGxvZ0V2ZW50KGdhbmEsXCJvcGVuZWRcIiwge1xyXG5cclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcExhbmd1YWdlRnJvbURhdGFVUkwoYXBwVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHQvLyBDaGVjayBpZiBhcHAgdHlwZSBpcyBub3QgZW1wdHkgYW5kIHNwbGl0IHRoZSBzdHJpbmcgYnkgdGhlIGh5cGhlbiB0aGVuIHJldHVybiB0aGUgZmlyc3QgZWxlbWVudFxyXG5cdGlmIChhcHBUeXBlICYmIGFwcFR5cGUgIT09IFwiXCIgJiYgYXBwVHlwZS5pbmNsdWRlcyhcIi1cIikpIHtcclxuXHRcdHJldHVybiBhcHBUeXBlLnNwbGl0KFwiLVwiKVswXTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBcIk5vdEF2YWlsYWJsZVwiO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBwVHlwZUZyb21EYXRhVVJMKGFwcFR5cGU6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Ly8gQ2hlY2sgaWYgYXBwIHR5cGUgaXMgbm90IGVtcHR5IGFuZCBzcGxpdCB0aGUgc3RyaW5nIGJ5IHRoZSBoeXBoZW4gdGhlbiByZXR1cm4gdGhlIGxhc3QgZWxlbWVudFxyXG5cdGlmIChhcHBUeXBlICYmIGFwcFR5cGUgIT09IFwiXCIgJiYgYXBwVHlwZS5pbmNsdWRlcyhcIi1cIikpIHtcclxuXHRcdHJldHVybiBhcHBUeXBlLnNwbGl0KFwiLVwiKVsxXTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBcIk5vdEF2YWlsYWJsZVwiO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2VuZExvY2F0aW9uKCk6IHZvaWR7XHJcblx0dmFyIGxwaWVjZXMgPSBsYXRsb25nLnNwbGl0KFwiLFwiKTtcclxuXHR2YXIgbGF0ID0gcGFyc2VGbG9hdChscGllY2VzWzBdKS50b0ZpeGVkKDIpO1xyXG5cdHZhciBsb24gPSBwYXJzZUZsb2F0KGxwaWVjZXNbMV0pLnRvRml4ZWQoMSk7XHJcblx0Y2xhdCA9IGxhdDtcclxuXHRjbG9uID0gbG9uO1xyXG5cdGxhdGxvbmcgPSBcIlwiO1xyXG5cdGxwaWVjZXMgPSBbXTtcclxuXHJcblxyXG5cdHZhciBldmVudFN0cmluZyA9IFwidXNlciBcIiArIHV1aWQgKyBcIiBpcyBhdCBsb2NhdGlvbiBcIiArIGxhdCArIFwiLFwiICsgbG9uO1xyXG5cdGNvbnNvbGUubG9nKGV2ZW50U3RyaW5nKTtcclxuXHJcblx0bG9nRXZlbnQoZ2FuYSxcInVzZXJfbG9jYXRpb25cIiwge1xyXG5cdFx0dXNlcjogdXVpZCxcclxuXHRcdGxhbmd1YWdlOiBnZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKGRhdGFVUkwpLFxyXG5cdFx0YXBwOiBnZXRBcHBUeXBlRnJvbURhdGFVUkwoZGF0YVVSTCksXHJcblx0XHRsYXQ6IGxhdCxcclxuXHRcdGxvbjogbG9uXHJcblx0fSk7XHJcblxyXG5cdGNvbnNvbGUubG9nKFwiSU5JVElBTElaRUQgRVZFTlQgU0VOVFwiKTtcclxuXHRjb25zb2xlLmxvZyhcIkFwcCBMYW5ndWFnZTogXCIgKyBnZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKGRhdGFVUkwpKTtcclxuXHRjb25zb2xlLmxvZyhcIkFwcCBUeXBlOiBcIiArIGdldEFwcFR5cGVGcm9tRGF0YVVSTChkYXRhVVJMKSk7XHJcblxyXG5cdGxvZ0V2ZW50KGdhbmEsXCJpbml0aWFsaXplZFwiLCB7XHJcblx0XHR0eXBlOiBcImluaXRpYWxpemVkXCIsXHJcblx0XHRjbFVzZXJJZDogdXVpZCxcclxuXHRcdHVzZXJTb3VyY2U6IHVzZXJTb3VyY2UsXHJcblx0XHRsYXQ6IGNsYXQsXHJcblx0XHRsb246IGNsb24sXHJcblx0XHRjaXR5OiBjaXR5LFxyXG5cdFx0cmVnaW9uOiByZWdpb24sXHJcblx0XHRjb3VudHJ5OiBjb3VudHJ5LFxyXG5cdFx0YXBwOiBnZXRBcHBUeXBlRnJvbURhdGFVUkwoZGF0YVVSTCksXHJcblx0XHRsYW5ndWFnZTogZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTChkYXRhVVJMKVxyXG5cdH0pO1xyXG5cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZW5kQW5zd2VyZWQodGhlUTogcURhdGEsIHRoZUE6IG51bWJlciwgZWxhcHNlZDogbnVtYmVyKTogdm9pZCB7XHJcblx0dmFyIGFucyA9IHRoZVEuYW5zd2Vyc1t0aGVBIC0gMV07XHJcblxyXG5cdHZhciBpc2NvcnJlY3QgPSBudWxsO1xyXG5cdHZhciBidWNrZXQgPSBudWxsO1xyXG5cdGlmIChcImNvcnJlY3RcIiBpbiB0aGVRKXtcclxuXHRcdGlmICh0aGVRLmNvcnJlY3QgIT0gbnVsbCl7XHJcblx0XHRcdGlmICh0aGVRLmNvcnJlY3QgPT0gYW5zLmFuc3dlck5hbWUpe1xyXG5cdFx0XHRcdGlzY29ycmVjdCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRpc2NvcnJlY3QgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoXCJidWNrZXRcIiBpbiB0aGVRKXtcclxuXHRcdGJ1Y2tldCA9IHRoZVEuYnVja2V0O1xyXG5cdH1cclxuXHR2YXIgZXZlbnRTdHJpbmcgPSBcInVzZXIgXCIgKyB1dWlkICsgXCIgYW5zd2VyZWQgXCIgKyB0aGVRLnFOYW1lICsgXCIgd2l0aCBcIiArIGFucy5hbnN3ZXJOYW1lO1xyXG5cdGV2ZW50U3RyaW5nICs9IFwiLCBhbGwgYW5zd2VycyB3ZXJlIFtcIjtcclxuXHR2YXIgb3B0cyA9IFwiXCI7XHJcblx0Zm9yICh2YXIgYU51bSBpbiB0aGVRLmFuc3dlcnMpIHtcclxuXHRcdGV2ZW50U3RyaW5nICs9IHRoZVEuYW5zd2Vyc1thTnVtXS5hbnN3ZXJOYW1lICsgXCIsXCI7XHJcblx0XHRvcHRzICs9IHRoZVEuYW5zd2Vyc1thTnVtXS5hbnN3ZXJOYW1lICsgXCIsXCI7XHJcblxyXG5cdH1cclxuXHRldmVudFN0cmluZyArPSBcIl0gXCI7XHJcblx0ZXZlbnRTdHJpbmcgKz0gaXNjb3JyZWN0O1xyXG5cdGV2ZW50U3RyaW5nICs9IGJ1Y2tldDtcclxuXHRjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XHJcblxyXG5cdGxvZ0V2ZW50KGdhbmEsXCJhbnN3ZXJlZFwiLCB7XHJcblx0XHR0eXBlOiBcImFuc3dlcmVkXCIsXHJcblx0XHRjbFVzZXJJZDogdXVpZCxcclxuXHRcdHVzZXJTb3VyY2U6IHVzZXJTb3VyY2UsXHJcblx0XHRsYXQ6IGNsYXQsXHJcblx0XHRsb246IGNsb24sXHJcblx0XHRjaXR5OiBjaXR5LFxyXG5cdFx0cmVnaW9uOiByZWdpb24sXHJcblx0XHRjb3VudHJ5OiBjb3VudHJ5LFxyXG5cdFx0YXBwOiBnZXRBcHBUeXBlRnJvbURhdGFVUkwoZGF0YVVSTCksXHJcblx0XHRsYW5ndWFnZTogZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTChkYXRhVVJMKSxcclxuXHRcdGR0OiBlbGFwc2VkLFxyXG5cdFx0cXVlc3Rpb25fbnVtYmVyOiB0aGVRLnFOdW1iZXIsXHJcblx0XHR0YXJnZXQ6IHRoZVEucVRhcmdldCxcclxuXHRcdHF1ZXN0aW9uOiB0aGVRLnByb21wdFRleHQsXHJcblx0XHRzZWxlY3RlZF9hbnN3ZXI6IGFucy5hbnN3ZXJOYW1lLFxyXG5cdFx0aXNjb3JyZWN0OiBpc2NvcnJlY3QsXHJcblx0XHRvcHRpb25zOiBvcHRzLFxyXG5cdFx0YnVja2V0OiBidWNrZXRcclxuXHR9KTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZW5kQnVja2V0KHRiOiBidWNrZXQsIHBhc3NlZDogYm9vbGVhbik6IHZvaWQge1xyXG5cdHZhciBibiA9IHRiLmJ1Y2tldElEO1xyXG5cdHZhciBidHJpZWQgPSB0Yi5udW1UcmllZDtcclxuXHR2YXIgYmNvcnJlY3QgPSB0Yi5udW1Db3JyZWN0O1xyXG5cdHZhciBldmVudFN0cmluZyA9IFwidXNlciBcIiArIHV1aWQgKyBcIiBmaW5pc2hlZCB0aGUgYnVja2V0IFwiICsgYm47XHJcblx0Y29uc29sZS5sb2coZXZlbnRTdHJpbmcpO1xyXG5cdGxvZ0V2ZW50KGdhbmEsXCJidWNrZXRDb21wbGV0ZWRcIiwge1xyXG5cdFx0dHlwZTogXCJidWNrZXRDb21wbGV0ZWRcIixcclxuXHRcdGNsVXNlcklkOiB1dWlkLFxyXG5cdFx0dXNlclNvdXJjZTogdXNlclNvdXJjZSxcclxuXHRcdGxhdDogY2xhdCxcclxuXHRcdGxvbjogY2xvbixcclxuXHRcdGNpdHk6IGNpdHksXHJcblx0XHRyZWdpb246IHJlZ2lvbixcclxuXHRcdGNvdW50cnk6IGNvdW50cnksXHJcblx0XHRhcHA6IGdldEFwcFR5cGVGcm9tRGF0YVVSTChkYXRhVVJMKSxcclxuXHRcdGxhbmd1YWdlOiBnZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKGRhdGFVUkwpLFxyXG5cdFx0YnVja2V0TnVtYmVyOiBibixcclxuXHRcdG51bWJlclRyaWVkSW5CdWNrZXQ6YnRyaWVkLFxyXG5cdFx0bnVtYmVyQ29ycmVjdEluQnVja2V0OmJjb3JyZWN0LFxyXG5cdFx0cGFzc2VkQnVja2V0OiBwYXNzZWRcclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNlbmRGaW5pc2hlZChidWNrZXRzOiBidWNrZXRbXSA9IG51bGwpOiB2b2lkIHtcclxuXHRsZXQgZXZlbnRTdHJpbmcgPSBcInVzZXIgXCIgKyB1dWlkICsgXCIgZmluaXNoZWQgdGhlIGFzc2Vzc21lbnRcIjtcclxuXHRjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XHJcblxyXG5cdGxldCBiYXNhbEJ1Y2tldElEID0gZ2V0QmFzYWxCdWNrZXRJRChidWNrZXRzKTtcclxuXHRsZXQgY2VpbGluZ0J1Y2tldElEID0gZ2V0Q2VpbGluZ0J1Y2tldElEKGJ1Y2tldHMpO1xyXG5cclxuXHRpZiAoYmFzYWxCdWNrZXRJRCA9PSAwKSB7XHJcblx0XHRiYXNhbEJ1Y2tldElEID0gY2VpbGluZ0J1Y2tldElEO1xyXG5cdH1cclxuXHJcblx0bGV0IHNjb3JlID0gY2FsY3VsYXRlU2NvcmUoYnVja2V0cywgYmFzYWxCdWNrZXRJRCk7XHJcblx0Y29uc3QgbWF4U2NvcmUgPSBidWNrZXRzLmxlbmd0aCAqIDEwMDtcclxuXHJcblx0Y29uc29sZS5sb2coXCJTZW5kaW5nIGNvbXBsZXRlZCBldmVudFwiKTtcclxuXHRjb25zb2xlLmxvZyhcIlNjb3JlOiBcIiArIHNjb3JlKTtcclxuXHRjb25zb2xlLmxvZyhcIk1heCBTY29yZTogXCIgKyBtYXhTY29yZSk7XHJcblx0Y29uc29sZS5sb2coXCJCYXNhbCBCdWNrZXQ6IFwiICsgYmFzYWxCdWNrZXRJRCk7XHJcblx0Y29uc29sZS5sb2coXCJDZWlsaW5nIEJ1Y2tldDogXCIgKyBjZWlsaW5nQnVja2V0SUQpO1xyXG5cclxuXHRsb2dFdmVudChnYW5hLFwiY29tcGxldGVkXCIsIHtcclxuXHRcdHR5cGU6IFwiY29tcGxldGVkXCIsXHJcblx0XHRjbFVzZXJJZDogdXVpZCxcclxuXHRcdHVzZXJTb3VyY2U6IHVzZXJTb3VyY2UsXHJcblx0XHRhcHA6IGdldEFwcFR5cGVGcm9tRGF0YVVSTChkYXRhVVJMKSxcclxuXHRcdGxhbmd1YWdlOiBnZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKGRhdGFVUkwpLFxyXG5cdFx0bGF0OiBjbGF0LFxyXG5cdFx0bG9uOiBjbG9uLFxyXG5cdFx0Y2l0eTogY2l0eSxcclxuXHRcdHJlZ2lvbjogcmVnaW9uLFxyXG5cdFx0Y291bnRyeTogY291bnRyeSxcclxuXHRcdHNjb3JlOiBzY29yZSxcclxuXHRcdG1heFNjb3JlOiBtYXhTY29yZSxcclxuXHRcdGJhc2FsQnVja2V0OiBiYXNhbEJ1Y2tldElELFxyXG5cdFx0Y2VpbGluZ0J1Y2tldDogY2VpbGluZ0J1Y2tldElEXHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZVNjb3JlKGJ1Y2tldHM6IGJ1Y2tldFtdLCBiYXNhbEJ1Y2tldElEOiBudW1iZXIpOiBudW1iZXIge1xyXG5cdGNvbnNvbGUubG9nKFwiQ2FsY3VsYXRpbmcgc2NvcmVcIik7XHJcblx0Y29uc29sZS5sb2coYnVja2V0cyk7XHJcblx0XHJcblx0bGV0IHNjb3JlID0gMDtcclxuXHJcblx0Y29uc29sZS5sb2coXCJCYXNhbCBCdWNrZXQgSUQ6IFwiICsgYmFzYWxCdWNrZXRJRCk7XHJcblxyXG5cdC8vIEdldCB0aGUgbnVtY29ycmVjdCBmcm9tIHRoZSBiYXNhbCBidWNrZXQgYmFzZWQgb24gbG9vcGluZyB0aHJvdWdoIGFuZCBmaW5kaW5nIHRoZSBidWNrZXQgaWRcclxuXHRsZXQgbnVtQ29ycmVjdCA9IDA7XHJcblxyXG5cdGZvciAoY29uc3QgaW5kZXggaW4gYnVja2V0cykge1xyXG5cdFx0Y29uc3QgYnVja2V0ID0gYnVja2V0c1tpbmRleF07XHJcblx0XHRpZiAoYnVja2V0LmJ1Y2tldElEID09IGJhc2FsQnVja2V0SUQpIHtcclxuXHRcdFx0bnVtQ29ycmVjdCA9IGJ1Y2tldC5udW1Db3JyZWN0O1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0c2NvcmUgPSBNYXRoLnJvdW5kKCgoYmFzYWxCdWNrZXRJRCAtIDEpICogMTAwKSArIChudW1Db3JyZWN0IC8gNSkgKiAxMDApIHwgMDtcclxuXHJcblx0cmV0dXJuIHNjb3JlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRCYXNhbEJ1Y2tldElEKGJ1Y2tldHM6IGJ1Y2tldFtdKTogbnVtYmVyIHtcclxuXHRsZXQgYnVja2V0SUQgPSAwO1xyXG5cdFxyXG5cdC8vIFNlbGVjdCB0aGUgbG93ZXN0IGJ1Y2tldElEIGJ1Y2tldCB0aGF0IHRoZSB1c2VyIGhhcyBmYWlsZWRcclxuXHRmb3IgKGNvbnN0IGluZGV4IGluIGJ1Y2tldHMpIHtcclxuXHRcdGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNbaW5kZXhdO1xyXG5cdFx0aWYgKGJ1Y2tldC50ZXN0ZWQgJiYgIWJ1Y2tldC5wYXNzZWQpIHtcclxuXHRcdFx0aWYgKGJ1Y2tldElEID09IDAgfHwgYnVja2V0LmJ1Y2tldElEIDwgYnVja2V0SUQpIHtcclxuXHRcdFx0XHRidWNrZXRJRCA9IGJ1Y2tldC5idWNrZXRJRDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIGJ1Y2tldElEO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDZWlsaW5nQnVja2V0SUQoYnVja2V0czogYnVja2V0W10pOiBudW1iZXIge1xyXG5cdGxldCBidWNrZXRJRCA9IDA7XHJcblx0XHJcblx0Ly8gU2VsZWN0IHRoZSBoaXVnaGVzdCBidWNrZXRJRCBidWNrZXQgdGhhdCB0aGUgdXNlciBoYXMgcGFzc2VkXHJcblx0Zm9yIChjb25zdCBpbmRleCBpbiBidWNrZXRzKSB7XHJcblx0XHRjb25zdCBidWNrZXQgPSBidWNrZXRzW2luZGV4XTtcclxuXHRcdGlmIChidWNrZXQudGVzdGVkICYmIGJ1Y2tldC5wYXNzZWQpIHtcclxuXHRcdFx0aWYgKGJ1Y2tldElEID09IDAgfHwgYnVja2V0LmJ1Y2tldElEID4gYnVja2V0SUQpIHtcclxuXHRcdFx0XHRidWNrZXRJRCA9IGJ1Y2tldC5idWNrZXRJRDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIGJ1Y2tldElEO1xyXG59IiwiaW1wb3J0IHsgQXBwIH0gZnJvbSAnLi9BcHAnO1xyXG5pbXBvcnQgeyBzZW5kRmluaXNoZWQgfSBmcm9tICcuL2NvbXBvbmVudHMvYW5hbHl0aWNzRXZlbnRzJztcclxuaW1wb3J0IHsgVUlDb250cm9sbGVyIH0gZnJvbSAnLi9jb21wb25lbnRzL3VpQ29udHJvbGxlcic7XHJcbmltcG9ydCB7IFVuaXR5QnJpZGdlIH0gZnJvbSAnLi9jb21wb25lbnRzL3VuaXR5QnJpZGdlJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUXVpeiB7XHJcblx0cHJvdGVjdGVkIGFwcDogQXBwO1xyXG5cdHB1YmxpYyBkYXRhVVJMOiBzdHJpbmc7XHJcblx0cHVibGljIHVuaXR5QnJpZGdlOiBVbml0eUJyaWRnZTtcclxuXHJcblx0cHVibGljIGFic3RyYWN0IFJ1bihhcHBsaW5rOiBBcHApOiB2b2lkO1xyXG5cdHB1YmxpYyBhYnN0cmFjdCBUcnlBbnN3ZXIoYW5zOiBudW1iZXIsIGVsYXBzZWQ6IG51bWJlcik6IHZvaWQ7XHJcblx0cHVibGljIGFic3RyYWN0IEhhc1F1ZXN0aW9uc0xlZnQoKTogYm9vbGVhbjtcclxuXHJcblx0cHVibGljIG9uRW5kKCk6IHZvaWQge1xyXG5cdFx0c2VuZEZpbmlzaGVkKCk7XHJcblx0XHRVSUNvbnRyb2xsZXIuU2hvd0VuZCgpO1xyXG5cdFx0dGhpcy5hcHAudW5pdHlCcmlkZ2UuU2VuZENsb3NlKCk7XHJcblx0fVxyXG59XHJcbiIsIi8vdGhpcyBpcyB3aGVyZSB0aGUgbG9naWMgZm9yIGhhbmRsaW5nIHRoZSBidWNrZXRzIHdpbGwgZ29cclxuLy9cclxuLy9vbmNlIHdlIHN0YXJ0IGFkZGluZyBpbiB0aGUgYXNzZXNzbWVudCBmdW5jdGlvbmFsaXR5XHJcbmltcG9ydCB7IFVJQ29udHJvbGxlciB9IGZyb20gJy4uL2NvbXBvbmVudHMvdWlDb250cm9sbGVyJztcclxuaW1wb3J0IHsgcURhdGEsIGFuc3dlckRhdGEgfSBmcm9tICcuLi9jb21wb25lbnRzL3F1ZXN0aW9uRGF0YSc7XHJcbmltcG9ydCB7IHNlbmRBbnN3ZXJlZCwgc2VuZEZpbmlzaGVkLCBzZW5kQnVja2V0IH0gZnJvbSAnLi4vY29tcG9uZW50cy9hbmFseXRpY3NFdmVudHMnXHJcbmltcG9ydCB7IEFwcCB9IGZyb20gJy4uL0FwcCc7XHJcbmltcG9ydCB7IGJ1Y2tldCwgYnVja2V0SXRlbSB9IGZyb20gJy4vYnVja2V0RGF0YSc7XHJcbmltcG9ydCB7IEJhc2VRdWl6IH0gZnJvbSAnLi4vQmFzZVF1aXonO1xyXG5pbXBvcnQgeyBmZXRjaEFzc2Vzc21lbnRCdWNrZXRzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9qc29uVXRpbHMnO1xyXG5pbXBvcnQgeyBUTm9kZSwgc29ydGVkQXJyYXlUb0JTVCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdE5vZGUnO1xyXG5pbXBvcnQgeyByYW5kRnJvbSwgc2h1ZmZsZUFycmF5IH0gZnJvbSAnLi4vY29tcG9uZW50cy9tYXRoVXRpbHMnO1xyXG5pbXBvcnQgeyBBdWRpb0NvbnRyb2xsZXIgfSBmcm9tICcuLi9jb21wb25lbnRzL2F1ZGlvQ29udHJvbGxlcic7XHJcblxyXG5lbnVtIHNlYXJjaFN0YWdlIHtcclxuXHRCaW5hcnlTZWFyY2gsXHJcblx0TGluZWFyU2VhcmNoVXAsXHJcblx0TGluZWFyU2VhcmNoRG93blxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQXNzZXNzbWVudCBleHRlbmRzIEJhc2VRdWl6IHtcclxuXHJcblx0cHVibGljIHVuaXR5QnJpZGdlO1xyXG5cclxuXHRwdWJsaWMgY3VycmVudE5vZGU6IFROb2RlO1xyXG5cdHB1YmxpYyBjdXJyZW50UXVlc3Rpb246IHFEYXRhO1xyXG5cdHB1YmxpYyBidWNrZXRBcnJheTogbnVtYmVyW107XHJcblx0cHVibGljIHF1ZXN0aW9uTnVtYmVyOiBudW1iZXI7XHJcblx0XHJcblx0cHVibGljIGJ1Y2tldHM6IGJ1Y2tldFtdO1xyXG5cdHB1YmxpYyBjdXJyZW50QnVja2V0OiBidWNrZXQ7XHJcblx0cHVibGljIG51bUJ1Y2tldHM6IG51bWJlcjtcclxuXHRwdWJsaWMgYmFzYWxCdWNrZXQ6IG51bWJlcjtcclxuXHRwdWJsaWMgY2VpbGluZ0J1Y2tldDogbnVtYmVyO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihkYXRhVVJMOiBzdHJpbmcsIHVuaXR5QnJpZGdlOiBhbnkpIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLmRhdGFVUkwgPSBkYXRhVVJMO1xyXG5cdFx0dGhpcy51bml0eUJyaWRnZSA9IHVuaXR5QnJpZGdlO1xyXG5cdFx0dGhpcy5xdWVzdGlvbk51bWJlciA9IDA7XHJcblx0XHRjb25zb2xlLmxvZyhcImFwcCBpbml0aWFsaXplZFwiKTtcclxuXHRcdFVJQ29udHJvbGxlci5TZXRCdXR0b25QcmVzc0FjdGlvbih0aGlzLlRyeUFuc3dlcik7XHJcblx0XHRVSUNvbnRyb2xsZXIuU2V0U3RhcnRBY3Rpb24odGhpcy5zdGFydEFzc2Vzc21lbnQpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIFJ1bihhcHBsaW5rOiBBcHApOiB2b2lkIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwbGluaztcclxuXHRcdHRoaXMuYnVpbGRCdWNrZXRzKCkudGhlbihyZXN1bHQgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRCdWNrZXQpO1xyXG5cdFx0XHR0aGlzLnVuaXR5QnJpZGdlLlNlbmRMb2FkZWQoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXJ0QXNzZXNzbWVudCA9ICgpID0+IHtcclxuXHRcdFVJQ29udHJvbGxlci5SZWFkeUZvck5leHQodGhpcy5nZXROZXh0UXVlc3Rpb24oKSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYnVpbGRCdWNrZXRzID0gKCkgPT4ge1xyXG5cdFx0dmFyIHJlcyA9IGZldGNoQXNzZXNzbWVudEJ1Y2tldHModGhpcy5hcHAuR2V0RGF0YVVSTCgpKS50aGVuKHJlc3VsdCA9PiB7XHJcblx0XHRcdHRoaXMuYnVja2V0cyA9IHJlc3VsdDtcclxuXHRcdFx0dGhpcy5udW1CdWNrZXRzID0gcmVzdWx0Lmxlbmd0aDtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJidWNrZXRzOiBcIiArIHRoaXMuYnVja2V0cyk7XHJcblx0XHRcdHRoaXMuYnVja2V0QXJyYXkgPSBBcnJheS5mcm9tKEFycmF5KHRoaXMubnVtQnVja2V0cyksIChfLCBpKSA9PiBpKzEpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcImVtcHR5IGFycmF5IFwiICsgIHRoaXMuYnVja2V0QXJyYXkpXHJcblx0XHRcdHZhciByb290ID0gc29ydGVkQXJyYXlUb0JTVCh0aGlzLmJ1Y2tldHMsIDAsIHRoaXMubnVtQnVja2V0cyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKHJvb3QpO1xyXG5cdFx0XHR0aGlzLmJhc2FsQnVja2V0ID0gdGhpcy5udW1CdWNrZXRzICsgMTtcclxuXHRcdFx0dGhpcy5jZWlsaW5nQnVja2V0ID0gLTE7XHJcblx0XHRcdHRoaXMuY3VycmVudE5vZGUgPSByb290O1xyXG5cdFx0XHR0aGlzLnRyeU1vdmVCdWNrZXQocm9vdC5kYXRhLCBmYWxzZSk7XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiByZXM7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgaW5pdEJ1Y2tldCA9IChidWNrZXQ6IGJ1Y2tldCkgPT4ge1xyXG5cdFx0dGhpcy5jdXJyZW50QnVja2V0ID0gYnVja2V0O1xyXG5cdFx0dGhpcy5jdXJyZW50QnVja2V0LnVzZWRJdGVtcyA9IFtdO1xyXG5cdFx0dGhpcy5jdXJyZW50QnVja2V0Lm51bVRyaWVkID0gMDtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db3JyZWN0ID0gMDtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db25zZWN1dGl2ZVdyb25nID0gMDtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC50ZXN0ZWQgPSB0cnVlO1xyXG5cdFx0dGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIFRyeUFuc3dlciA9IChhbnN3ZXI6IG51bWJlciwgZWxhcHNlZDogbnVtYmVyKSA9PiB7XHJcblx0XHRzZW5kQW5zd2VyZWQodGhpcy5jdXJyZW50UXVlc3Rpb24sIGFuc3dlciwgZWxhcHNlZClcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1UcmllZCArPSAxO1xyXG5cdFx0aWYgKHRoaXMuY3VycmVudFF1ZXN0aW9uLmFuc3dlcnNbYW5zd2VyLTFdLmFuc3dlck5hbWUgPT0gdGhpcy5jdXJyZW50UXVlc3Rpb24uY29ycmVjdCl7XHJcblx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db3JyZWN0ICs9IDE7XHJcblx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db25zZWN1dGl2ZVdyb25nID0gMDtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJBbnN3ZXJlZCBjb3JyZWN0bHlcIik7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0dGhpcy5jdXJyZW50QnVja2V0Lm51bUNvbnNlY3V0aXZlV3JvbmcgKz0gMTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJBbnN3ZXJlZCBpbmNvcnJlY3RseSwgXCIgKyB0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyk7XHJcblx0XHR9XHJcblx0XHRVSUNvbnRyb2xsZXIuQWRkU3RhcigpO1xyXG5cdFx0VUlDb250cm9sbGVyLlNldEZlZWRiYWNrVmlzaWJpbGUodHJ1ZSk7XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHsgXHJcblx0XHRcdGNvbnNvbGUubG9nKCdDb21wbGV0ZWQgZmlyc3QgVGltZW91dCcpO1xyXG5cdFx0XHR0aGlzLm9uUXVlc3Rpb25FbmQoKSB9LCAyMDAwKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBvblF1ZXN0aW9uRW5kID0gKCkgPT4ge1xyXG5cdFx0bGV0IHF1ZXN0aW9uRW5kVGltZW91dCA9ICh0aGlzLkhhc1F1ZXN0aW9uc0xlZnQoKSkgPyA1MDAgOiA0MDAwO1xyXG5cdFxyXG5cdFx0Y29uc3QgZW5kT3BlcmF0aW9ucyA9ICgpID0+IHtcclxuXHRcdFx0VUlDb250cm9sbGVyLlNldEZlZWRiYWNrVmlzaWJpbGUoZmFsc2UpO1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuQ2hhbmdlU3RhckltYWdlQWZ0ZXJBbmltYXRpb24oKTtcclxuXHRcdFx0aWYgKHRoaXMuSGFzUXVlc3Rpb25zTGVmdCgpKSB7XHJcblx0XHRcdFx0VUlDb250cm9sbGVyLlJlYWR5Rm9yTmV4dCh0aGlzLmdldE5leHRRdWVzdGlvbigpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIk5vIHF1ZXN0aW9ucyBsZWZ0XCIpO1xyXG5cdFx0XHRcdHRoaXMub25FbmQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcclxuXHRcdC8vIENyZWF0ZSBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB0aGUgc3BlY2lmaWVkIHRpbWVvdXRcclxuXHRcdGNvbnN0IHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB7XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHJlc29sdmUoKTtcclxuXHRcdFx0fSwgcXVlc3Rpb25FbmRUaW1lb3V0KTtcclxuXHRcdH0pO1xyXG5cdFxyXG5cdFx0Ly8gRXhlY3V0ZSBlbmRPcGVyYXRpb25zIGFmdGVyIHRpbWVvdXRQcm9taXNlIHJlc29sdmVzXHJcblx0XHR0aW1lb3V0UHJvbWlzZS50aGVuKCgpID0+IHtcclxuXHRcdFx0ZW5kT3BlcmF0aW9ucygpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cclxuXHRwdWJsaWMgZ2V0TmV4dFF1ZXN0aW9uID0gKCkgPT4ge1xyXG5cdFx0dmFyIHRhcmdldEl0ZW0sIGZvaWwxLCBmb2lsMiwgZm9pbDM7XHJcblxyXG5cdFx0ZG8ge1xyXG5cdFx0XHR0YXJnZXRJdGVtID0gcmFuZEZyb20odGhpcy5jdXJyZW50QnVja2V0Lml0ZW1zKTtcclxuXHRcdH0gd2hpbGUgKHRoaXMuY3VycmVudEJ1Y2tldC51c2VkSXRlbXMuaW5jbHVkZXModGFyZ2V0SXRlbSkpO1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRCdWNrZXQudXNlZEl0ZW1zLnB1c2godGFyZ2V0SXRlbSk7XHJcblx0XHRkbyB7XHJcblx0XHRcdGZvaWwxID0gcmFuZEZyb20odGhpcy5jdXJyZW50QnVja2V0Lml0ZW1zKTtcclxuXHRcdH0gd2hpbGUgKHRhcmdldEl0ZW0gPT0gZm9pbDEpO1xyXG5cdFx0ZG8ge1xyXG5cdFx0XHRmb2lsMiA9IHJhbmRGcm9tKHRoaXMuY3VycmVudEJ1Y2tldC5pdGVtcyk7XHJcblx0XHR9IHdoaWxlICh0YXJnZXRJdGVtID09IGZvaWwyIHx8IGZvaWwxID09IGZvaWwyKTtcclxuXHRcdGRvIHtcclxuXHRcdFx0Zm9pbDMgPSByYW5kRnJvbSh0aGlzLmN1cnJlbnRCdWNrZXQuaXRlbXMpO1xyXG5cdFx0fSB3aGlsZSAodGFyZ2V0SXRlbSA9PSBmb2lsMyB8fCBmb2lsMSA9PSBmb2lsMyB8fCBmb2lsMiA9PSBmb2lsMyk7XHJcblxyXG5cdFx0dmFyIGFuc3dlck9wdGlvbnMgPSBbdGFyZ2V0SXRlbSwgZm9pbDEsIGZvaWwyLCBmb2lsM107XHJcblx0XHRzaHVmZmxlQXJyYXkoYW5zd2VyT3B0aW9ucyk7XHJcblxyXG5cdFx0dmFyIHJlc3VsdCA9IHtcclxuXHRcdFx0cU5hbWU6IFwicXVlc3Rpb24tXCIgKyB0aGlzLnF1ZXN0aW9uTnVtYmVyICsgXCItXCIgKyB0YXJnZXRJdGVtLml0ZW1OYW1lLFxyXG5cdFx0XHRxTnVtYmVyOiB0aGlzLnF1ZXN0aW9uTnVtYmVyLFxyXG5cdFx0XHRxVGFyZ2V0OiB0YXJnZXRJdGVtLml0ZW1OYW1lLFxyXG5cdFx0XHRwcm9tcHRUZXh0OiBcIlwiLFxyXG5cdFx0XHRidWNrZXQ6IHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCxcclxuXHRcdFx0cHJvbXB0QXVkaW86IHRhcmdldEl0ZW0uaXRlbU5hbWUsXHJcblx0XHRcdGNvcnJlY3Q6IHRhcmdldEl0ZW0uaXRlbVRleHQsXHJcblx0XHRcdGFuc3dlcnM6IFtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRhbnN3ZXJOYW1lOiBhbnN3ZXJPcHRpb25zWzBdLml0ZW1OYW1lLFxyXG5cdFx0XHRcdFx0YW5zd2VyVGV4dDogYW5zd2VyT3B0aW9uc1swXS5pdGVtVGV4dFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0YW5zd2VyTmFtZTogYW5zd2VyT3B0aW9uc1sxXS5pdGVtTmFtZSxcclxuXHRcdFx0XHRcdGFuc3dlclRleHQ6IGFuc3dlck9wdGlvbnNbMV0uaXRlbVRleHRcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGFuc3dlck5hbWU6IGFuc3dlck9wdGlvbnNbMl0uaXRlbU5hbWUsXHJcblx0XHRcdFx0XHRhbnN3ZXJUZXh0OiBhbnN3ZXJPcHRpb25zWzJdLml0ZW1UZXh0XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRhbnN3ZXJOYW1lOiBhbnN3ZXJPcHRpb25zWzNdLml0ZW1OYW1lLFxyXG5cdFx0XHRcdFx0YW5zd2VyVGV4dDogYW5zd2VyT3B0aW9uc1szXS5pdGVtVGV4dFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XVxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmN1cnJlbnRRdWVzdGlvbiA9IHJlc3VsdDtcclxuXHRcdHRoaXMucXVlc3Rpb25OdW1iZXIgKz0gMTtcclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgdHJ5TW92ZUJ1Y2tldCA9IChuQnVja2V0LCBwYXNzZWQ6IGJvb2xlYW4pID0+IHtcclxuXHRcdGlmICh0aGlzLmN1cnJlbnRCdWNrZXQgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRCdWNrZXQucGFzc2VkID0gcGFzc2VkO1xyXG5cdFx0XHRzZW5kQnVja2V0KHRoaXMuY3VycmVudEJ1Y2tldCwgcGFzc2VkKTtcclxuXHRcdH1cclxuXHRcdGNvbnNvbGUubG9nKFwibmV3ICBidWNrZXQgaXMgXCIgKyBuQnVja2V0LmJ1Y2tldElEKTtcclxuXHRcdEF1ZGlvQ29udHJvbGxlci5QcmVsb2FkQnVja2V0KG5CdWNrZXQsIHRoaXMuYXBwLkdldERhdGFVUkwoKSk7XHJcblx0XHR0aGlzLmluaXRCdWNrZXQobkJ1Y2tldCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgSGFzUXVlc3Rpb25zTGVmdCA9ICgpID0+IHtcclxuXHRcdC8vLy8gVE9ETzogY2hlY2sgYnVja2V0cywgY2hlY2sgaWYgZG9uZVxyXG5cdFx0dmFyIGhhc1F1ZXN0aW9uc0xlZnQgPSB0cnVlO1xyXG5cdFx0XHRcclxuXHRcdGlmICh0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29ycmVjdCA+PSA0KSB7XHJcblx0XHRcdC8vcGFzc2VkIHRoaXMgYnVja2V0XHJcblx0XHRcdGNvbnNvbGUubG9nKFwicGFzc2VkIHRoaXMgYnVja2V0IFwiICsgdGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRCdWNrZXQuYnVja2V0SUQgPj0gdGhpcy5udW1CdWNrZXRzKSB7XHJcblx0XHRcdFx0Ly9wYXNzZWQgaGlnaGVzdCBidWNrZXRcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcInBhc3NlZCBoaWdoZXN0IGJ1Y2tldFwiKTtcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnRCdWNrZXQucGFzc2VkID0gdHJ1ZTtcclxuXHRcdFx0XHRzZW5kQnVja2V0KHRoaXMuY3VycmVudEJ1Y2tldCwgdHJ1ZSk7XHJcblx0XHRcdFx0VUlDb250cm9sbGVyLlByb2dyZXNzQ2hlc3QoKTtcclxuXHRcdFx0XHRoYXNRdWVzdGlvbnNMZWZ0ID0gZmFsc2U7XHRcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvL21vdmVkIHVwIHRvIG5leHQgYnVja2V0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJtb3ZpbmcgdXAgYnVja2V0XCIpO1xyXG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnROb2RlLnJpZ2h0ICE9IG51bGwpe1xyXG5cdFx0XHRcdFx0Ly9tb3ZlIGRvd24gdG8gcmlnaHRcclxuXHRcdFx0XHRcdFVJQ29udHJvbGxlci5Qcm9ncmVzc0NoZXN0KCk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIm1vdmluZyB0byByaWdodCBub2RlXCIpO1xyXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50Tm9kZSA9IHRoaXMuY3VycmVudE5vZGUucmlnaHQ7XHJcblx0XHRcdFx0XHR0aGlzLnRyeU1vdmVCdWNrZXQodGhpcy5jdXJyZW50Tm9kZS5kYXRhLCB0cnVlKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0Ly8gcmVhY2hlZCByb290IG5vZGUhISEhXHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicmVhY2hlZCByb290IG5vZGVcIik7XHJcblx0XHRcdFx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRzZW5kQnVja2V0KHRoaXMuY3VycmVudEJ1Y2tldCwgdHJ1ZSk7XHJcblx0XHRcdFx0XHRcdFVJQ29udHJvbGxlci5Qcm9ncmVzc0NoZXN0KCk7XHJcblx0XHRcdFx0XHRcdGhhc1F1ZXN0aW9uc0xlZnQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdC8vIGRvIHNvbWV0aGluZyBoZXJlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db25zZWN1dGl2ZVdyb25nID49IDIgfHwgdGhpcy5jdXJyZW50QnVja2V0Lm51bVRyaWVkID49IDUpIHtcclxuXHRcdFx0Ly9mYWlsZWQgdGhpcyBidWNrZXRcclxuXHRcdFx0Y29uc29sZS5sb2coXCJmYWlsZWQgdGhpcyBidWNrZXQgXCIgKyB0aGlzLmN1cnJlbnRCdWNrZXQuYnVja2V0SUQpO1xyXG5cdFx0XHRpZiAodGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEIDwgdGhpcy5iYXNhbEJ1Y2tldCkge1xyXG5cdFx0XHRcdC8vdXBkYXRlIGJhc2FsIGJ1Y2tldCBudW1iZXJcclxuXHRcdFx0XHR0aGlzLmJhc2FsQnVja2V0ID0gdGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRCdWNrZXQuYnVja2V0SUQgPD0gMSkge1xyXG5cdFx0XHRcdC8vZmFpbGVkIHRoZSBsb3dlc3QgYnVja2V0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJmYWlsZWQgbG93ZXN0IGJ1Y2tldFwiKTtcclxuXHRcdFx0XHRoYXNRdWVzdGlvbnNMZWZ0ID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdHNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCBmYWxzZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJtb3ZpbmcgZG93biBidWNrZXRcIik7XHJcblx0XHRcdFx0aWYgKHRoaXMuY3VycmVudE5vZGUubGVmdCAhPSBudWxsKXtcclxuXHRcdFx0XHRcdC8vbW92ZSBkb3duIHRvIGxlZnRcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwibW92aW5nIHRvIGxlZnQgbm9kZVwiKTtcclxuXHRcdFx0XHRcdHRoaXMuY3VycmVudE5vZGUgPSB0aGlzLmN1cnJlbnROb2RlLmxlZnQ7XHJcblx0XHRcdFx0XHR0aGlzLnRyeU1vdmVCdWNrZXQodGhpcy5jdXJyZW50Tm9kZS5kYXRhLCBmYWxzZSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIHJlYWNoZWQgcm9vdCBub2RlISEhIVxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJyZWFjaGVkIHJvb3Qgbm9kZVwiKTtcclxuXHRcdFx0XHRcdGhhc1F1ZXN0aW9uc0xlZnQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdHNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCBmYWxzZSk7XHJcblx0XHRcdFx0XHQvLyBkbyBzb21ldGhpbmcgaGVyZVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBoYXNRdWVzdGlvbnNMZWZ0O1xyXG5cclxuXHR9XHJcblx0XHJcblx0cHVibGljIG92ZXJyaWRlIG9uRW5kKCk6IHZvaWQge1xyXG5cdFx0c2VuZEZpbmlzaGVkKHRoaXMuYnVja2V0cyk7XHJcblx0XHRVSUNvbnRyb2xsZXIuU2hvd0VuZCgpO1xyXG5cdFx0dGhpcy5hcHAudW5pdHlCcmlkZ2UuU2VuZENsb3NlKCk7XHJcblx0fVxyXG59XHJcbiIsIi8vdGhpcyBpcyB3aGVyZSB0aGUgY29kZSB3aWxsIGdvIGZvciBsaW5lYXJseSBpdGVyYXRpbmcgdGhyb3VnaCB0aGVcclxuLy9xdWVzdGlvbnMgaW4gYSBkYXRhLmpzb24gZmlsZSB0aGF0IGlkZW50aWZpZXMgaXRzZWxmIGFzIGEgc3VydmV5XHJcblxyXG5pbXBvcnQgeyBVSUNvbnRyb2xsZXIgfSBmcm9tICcuLi9jb21wb25lbnRzL3VpQ29udHJvbGxlcic7XHJcbmltcG9ydCB7IEF1ZGlvQ29udHJvbGxlciB9IGZyb20gJy4uL2NvbXBvbmVudHMvYXVkaW9Db250cm9sbGVyJztcclxuaW1wb3J0IHsgcURhdGEsIGFuc3dlckRhdGEgfSBmcm9tICcuLi9jb21wb25lbnRzL3F1ZXN0aW9uRGF0YSc7XHJcbmltcG9ydCB7IHNlbmRBbnN3ZXJlZCwgc2VuZEZpbmlzaGVkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9hbmFseXRpY3NFdmVudHMnXHJcbmltcG9ydCB7IEFwcCB9IGZyb20gJy4uL0FwcCc7XHJcbmltcG9ydCB7IEJhc2VRdWl6IH0gZnJvbSAnLi4vQmFzZVF1aXonO1xyXG5pbXBvcnQgeyBmZXRjaFN1cnZleVF1ZXN0aW9ucyB9IGZyb20gJy4uL2NvbXBvbmVudHMvanNvblV0aWxzJztcclxuaW1wb3J0IHsgVW5pdHlCcmlkZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL3VuaXR5QnJpZGdlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTdXJ2ZXkgZXh0ZW5kcyBCYXNlUXVpeiB7XHJcblxyXG5cdHB1YmxpYyBxdWVzdGlvbnNEYXRhOiBxRGF0YVtdO1xyXG5cdHB1YmxpYyBjdXJyZW50UXVlc3Rpb25JbmRleDogbnVtYmVyO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihkYXRhVVJMOiBzdHJpbmcsIHVuaXR5QnJpZGdlKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJTdXJ2ZXkgaW5pdGlhbGl6ZWRcIik7XHJcblxyXG5cdFx0dGhpcy5kYXRhVVJMID0gZGF0YVVSTDtcclxuXHRcdHRoaXMudW5pdHlCcmlkZ2UgPSB1bml0eUJyaWRnZTtcclxuXHRcdHRoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXggPSAwO1xyXG5cdFx0VUlDb250cm9sbGVyLlNldEJ1dHRvblByZXNzQWN0aW9uKHRoaXMuVHJ5QW5zd2VyKTtcclxuXHRcdFVJQ29udHJvbGxlci5TZXRTdGFydEFjdGlvbih0aGlzLnN0YXJ0U3VydmV5KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhc3luYyBSdW4oYXBwOiBBcHApIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5idWlsZFF1ZXN0aW9uTGlzdCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuXHRcdFx0dGhpcy5xdWVzdGlvbnNEYXRhID0gcmVzdWx0O1xyXG5cdFx0XHRBdWRpb0NvbnRyb2xsZXIuUHJlcGFyZUF1ZGlvQW5kSW1hZ2VzRm9yU3VydmV5KHRoaXMucXVlc3Rpb25zRGF0YSwgdGhpcy5hcHAuR2V0RGF0YVVSTCgpKTtcclxuXHRcdFx0dGhpcy51bml0eUJyaWRnZS5TZW5kTG9hZGVkKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGFydFN1cnZleSA9ICgpID0+e1xyXG5cdFx0VUlDb250cm9sbGVyLlJlYWR5Rm9yTmV4dCh0aGlzLmdldE5leHRRdWVzdGlvbigpKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBvblF1ZXN0aW9uRW5kID0gKCkgPT4ge1xyXG5cdFx0VUlDb250cm9sbGVyLlNldEZlZWRiYWNrVmlzaWJpbGUoZmFsc2UpO1xyXG5cclxuXHRcdHRoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXggKz0gMTtcclxuXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuSGFzUXVlc3Rpb25zTGVmdCgpKSB7XHJcblx0XHRcdFx0VUlDb250cm9sbGVyLlJlYWR5Rm9yTmV4dCh0aGlzLmdldE5leHRRdWVzdGlvbigpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlRoZXJlIGFyZSBubyBxdWVzdGlvbnMgbGVmdC5cIik7XHJcblx0XHRcdFx0dGhpcy5vbkVuZCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCA1MDApO1xyXG5cdH1cclxuXHJcblx0cHVibGljIFRyeUFuc3dlciA9IChhbnN3ZXI6IG51bWJlciwgZWxhcHNlZDogbnVtYmVyKSA9PiB7XHJcblx0XHRzZW5kQW5zd2VyZWQodGhpcy5xdWVzdGlvbnNEYXRhW3RoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXhdLCBhbnN3ZXIsIGVsYXBzZWQpXHJcblx0XHRVSUNvbnRyb2xsZXIuU2V0RmVlZGJhY2tWaXNpYmlsZSh0cnVlKTtcclxuXHRcdFVJQ29udHJvbGxlci5BZGRTdGFyKCk7XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5vblF1ZXN0aW9uRW5kKCkgfSwgMjAwMCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYnVpbGRRdWVzdGlvbkxpc3QgPSAoKSA9PiB7XHJcblx0XHRjb25zdCBzdXJ2ZXlRdWVzdGlvbnMgPSBmZXRjaFN1cnZleVF1ZXN0aW9ucyh0aGlzLmFwcC5kYXRhVVJMKTtcclxuXHRcdHJldHVybiBzdXJ2ZXlRdWVzdGlvbnM7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgSGFzUXVlc3Rpb25zTGVmdCgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4IDw9ICh0aGlzLnF1ZXN0aW9uc0RhdGEubGVuZ3RoIC0gMSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0TmV4dFF1ZXN0aW9uKCk6IHFEYXRhIHtcclxuXHRcdHZhciBxdWVzdGlvbkRhdGEgPSB0aGlzLnF1ZXN0aW9uc0RhdGFbdGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleF07XHJcblx0XHRyZXR1cm4gcXVlc3Rpb25EYXRhO1xyXG5cdH1cclxufVxyXG4iLCIvLyBBIGJpbmFyeSB0cmVlIG5vZGVcclxuZXhwb3J0IHR5cGUgVE5vZGUgPSB7XHJcbiAgZGF0YTogbnVtYmVyO1xyXG4gIGxlZnQ6IFROb2RlO1xyXG4gIHJpZ2h0OiBUTm9kZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzb3J0ZWRBcnJheVRvQlNUKGFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcikge1xyXG4gICAgLyogQmFzZSBDYXNlICovXHJcbiAgICBpZiAoc3RhcnQgPiBlbmQpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiBHZXQgdGhlIG1pZGRsZSBlbGVtZW50IGFuZCBtYWtlIGl0IHJvb3QgKi9cclxuICAgIHZhciBtaWRkbGUgPSBwYXJzZUludCgoKHN0YXJ0ICsgZW5kKSAvIDIpK1wiXCIpO1xyXG5cclxuICAgIGNvbnN0IG50Tm9kZTogVE5vZGUgPSB7XHJcblx0XHRcdGRhdGE6IGFycmF5W21pZGRsZV0sXHJcblx0XHRcdGxlZnQ6IG51bGwsXHJcblx0XHRcdHJpZ2h0OiBudWxsXHJcblx0XHR9XHJcblxyXG4gICAgLyogUmVjdXJzaXZlbHkgY29uc3RydWN0IHRoZSBsZWZ0IHN1YnRyZWUgYW5kIG1ha2UgaXRcclxuICAgICBsZWZ0IGNoaWxkIG9mIHJvb3QgKi9cclxuICAgIG50Tm9kZS5sZWZ0ID0gc29ydGVkQXJyYXlUb0JTVChhcnJheSwgc3RhcnQsIG1pZGRsZSAtIDEpO1xyXG4gICAgLyogUmVjdXJzaXZlbHkgY29uc3RydWN0IHRoZSByaWdodCBzdWJ0cmVlIGFuZCBtYWtlIGl0XHJcbiAgICAgcmlnaHQgY2hpbGQgb2Ygcm9vdCAqL1xyXG4gICAgbnROb2RlLnJpZ2h0ID0gc29ydGVkQXJyYXlUb0JTVChhcnJheSwgbWlkZGxlICsgMSwgZW5kKTtcclxuXHJcbiAgICByZXR1cm4gbnROb2RlO1xyXG59XHJcbiIsIi8qKlxyXG4gKiBNb2R1bGUgdGhhdCB3cmFwcyBVbml0eSBjYWxscyBmb3Igc2VuZGluZyBtZXNzYWdlcyBmcm9tIHRoZSB3ZWJ2aWV3IHRvIFVuaXR5LlxyXG4gKi9cclxuXHJcbmRlY2xhcmUgY29uc3QgVW5pdHk7XHJcblxyXG5leHBvcnQgY2xhc3MgVW5pdHlCcmlkZ2Uge1xyXG5cclxuXHRwcml2YXRlIHVuaXR5UmVmZXJlbmNlO1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdGlmICh0eXBlb2YgVW5pdHkgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRcdHRoaXMudW5pdHlSZWZlcmVuY2UgPSBVbml0eTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMudW5pdHlSZWZlcmVuY2UgPSBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIFNlbmRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZykge1xyXG5cdFx0aWYgKHRoaXMudW5pdHlSZWZlcmVuY2UgIT09IG51bGwpIHtcclxuXHRcdFx0dGhpcy51bml0eVJlZmVyZW5jZS5jYWxsKG1lc3NhZ2UpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIFNlbmRMb2FkZWQoKSB7XHJcblx0XHRpZiAodGhpcy51bml0eVJlZmVyZW5jZSAhPT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLnVuaXR5UmVmZXJlbmNlLmNhbGwoXCJsb2FkZWRcIik7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJ3b3VsZCBjYWxsIFVuaXR5IGxvYWRlZCBub3dcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgU2VuZENsb3NlKCkge1xyXG5cdFx0aWYgKHRoaXMudW5pdHlSZWZlcmVuY2UgIT09IG51bGwpIHtcclxuXHRcdFx0dGhpcy51bml0eVJlZmVyZW5jZS5jYWxsKFwiY2xvc2VcIik7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJ3b3VsZCBjbG9zZSBVbml0eSBub3dcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmV4cG9ydCAqIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI5LjEyLjFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAnKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsInRyeXtzZWxmW1wid29ya2JveDp3aW5kb3c6Ny4wLjBcIl0mJl8oKX1jYXRjaChuKXt9ZnVuY3Rpb24gbihuLHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocil7dmFyIGU9bmV3IE1lc3NhZ2VDaGFubmVsO2UucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKG4pe3Iobi5kYXRhKX0sbi5wb3N0TWVzc2FnZSh0LFtlLnBvcnQyXSl9KSl9ZnVuY3Rpb24gdChuLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgZT10W3JdO2UuZW51bWVyYWJsZT1lLmVudW1lcmFibGV8fCExLGUuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGUmJihlLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixlLmtleSxlKX19ZnVuY3Rpb24gcihuLHQpeyhudWxsPT10fHx0Pm4ubGVuZ3RoKSYmKHQ9bi5sZW5ndGgpO2Zvcih2YXIgcj0wLGU9bmV3IEFycmF5KHQpO3I8dDtyKyspZVtyXT1uW3JdO3JldHVybiBlfWZ1bmN0aW9uIGUobix0KXt2YXIgZTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgU3ltYm9sfHxudWxsPT1uW1N5bWJvbC5pdGVyYXRvcl0pe2lmKEFycmF5LmlzQXJyYXkobil8fChlPWZ1bmN0aW9uKG4sdCl7aWYobil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pcmV0dXJuIHIobix0KTt2YXIgZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobikuc2xpY2UoOCwtMSk7cmV0dXJuXCJPYmplY3RcIj09PWUmJm4uY29uc3RydWN0b3ImJihlPW4uY29uc3RydWN0b3IubmFtZSksXCJNYXBcIj09PWV8fFwiU2V0XCI9PT1lP0FycmF5LmZyb20obik6XCJBcmd1bWVudHNcIj09PWV8fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KGUpP3Iobix0KTp2b2lkIDB9fShuKSl8fHQmJm4mJlwibnVtYmVyXCI9PXR5cGVvZiBuLmxlbmd0aCl7ZSYmKG49ZSk7dmFyIGk9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gaT49bi5sZW5ndGg/e2RvbmU6ITB9Ontkb25lOiExLHZhbHVlOm5baSsrXX19fXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKX1yZXR1cm4oZT1uW1N5bWJvbC5pdGVyYXRvcl0oKSkubmV4dC5iaW5kKGUpfXRyeXtzZWxmW1wid29ya2JveDpjb3JlOjcuMC4wXCJdJiZfKCl9Y2F0Y2gobil7fXZhciBpPWZ1bmN0aW9uKCl7dmFyIG49dGhpczt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQscil7bi5yZXNvbHZlPXQsbi5yZWplY3Q9cn0pKX07ZnVuY3Rpb24gbyhuLHQpe3ZhciByPWxvY2F0aW9uLmhyZWY7cmV0dXJuIG5ldyBVUkwobixyKS5ocmVmPT09bmV3IFVSTCh0LHIpLmhyZWZ9dmFyIHU9ZnVuY3Rpb24obix0KXt0aGlzLnR5cGU9bixPYmplY3QuYXNzaWduKHRoaXMsdCl9O2Z1bmN0aW9uIGEobix0LHIpe3JldHVybiByP3Q/dChuKTpuOihuJiZuLnRoZW58fChuPVByb21pc2UucmVzb2x2ZShuKSksdD9uLnRoZW4odCk6bil9ZnVuY3Rpb24gYygpe312YXIgZj17dHlwZTpcIlNLSVBfV0FJVElOR1wifTtmdW5jdGlvbiBzKG4sdCl7aWYoIXQpcmV0dXJuIG4mJm4udGhlbj9uLnRoZW4oYyk6UHJvbWlzZS5yZXNvbHZlKCl9dmFyIHY9ZnVuY3Rpb24ocil7dmFyIGUsYztmdW5jdGlvbiB2KG4sdCl7dmFyIGUsYztyZXR1cm4gdm9pZCAwPT09dCYmKHQ9e30pLChlPXIuY2FsbCh0aGlzKXx8dGhpcykubm49e30sZS50bj0wLGUucm49bmV3IGksZS5lbj1uZXcgaSxlLm9uPW5ldyBpLGUudW49MCxlLmFuPW5ldyBTZXQsZS5jbj1mdW5jdGlvbigpe3ZhciBuPWUuZm4sdD1uLmluc3RhbGxpbmc7ZS50bj4wfHwhbyh0LnNjcmlwdFVSTCxlLnNuLnRvU3RyaW5nKCkpfHxwZXJmb3JtYW5jZS5ub3coKT5lLnVuKzZlND8oZS52bj10LG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbikpOihlLmhuPXQsZS5hbi5hZGQodCksZS5ybi5yZXNvbHZlKHQpKSwrK2UudG4sdC5hZGRFdmVudExpc3RlbmVyKFwic3RhdGVjaGFuZ2VcIixlLmxuKX0sZS5sbj1mdW5jdGlvbihuKXt2YXIgdD1lLmZuLHI9bi50YXJnZXQsaT1yLnN0YXRlLG89cj09PWUudm4sYT17c3c6cixpc0V4dGVybmFsOm8sb3JpZ2luYWxFdmVudDpufTshbyYmZS5tbiYmKGEuaXNVcGRhdGU9ITApLGUuZGlzcGF0Y2hFdmVudChuZXcgdShpLGEpKSxcImluc3RhbGxlZFwiPT09aT9lLnduPXNlbGYuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtcImluc3RhbGxlZFwiPT09aSYmdC53YWl0aW5nPT09ciYmZS5kaXNwYXRjaEV2ZW50KG5ldyB1KFwid2FpdGluZ1wiLGEpKX0pLDIwMCk6XCJhY3RpdmF0aW5nXCI9PT1pJiYoY2xlYXJUaW1lb3V0KGUud24pLG98fGUuZW4ucmVzb2x2ZShyKSl9LGUuZG49ZnVuY3Rpb24obil7dmFyIHQ9ZS5obixyPXQhPT1uYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyO2UuZGlzcGF0Y2hFdmVudChuZXcgdShcImNvbnRyb2xsaW5nXCIse2lzRXh0ZXJuYWw6cixvcmlnaW5hbEV2ZW50Om4sc3c6dCxpc1VwZGF0ZTplLm1ufSkpLHJ8fGUub24ucmVzb2x2ZSh0KX0sZS5nbj0oYz1mdW5jdGlvbihuKXt2YXIgdD1uLmRhdGEscj1uLnBvcnRzLGk9bi5zb3VyY2U7cmV0dXJuIGEoZS5nZXRTVygpLChmdW5jdGlvbigpe2UuYW4uaGFzKGkpJiZlLmRpc3BhdGNoRXZlbnQobmV3IHUoXCJtZXNzYWdlXCIse2RhdGE6dCxvcmlnaW5hbEV2ZW50Om4scG9ydHM6cixzdzppfSkpfSkpfSxmdW5jdGlvbigpe2Zvcih2YXIgbj1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyluW3RdPWFyZ3VtZW50c1t0XTt0cnl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShjLmFwcGx5KHRoaXMsbikpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19KSxlLnNuPW4sZS5ubj10LG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZS5nbiksZX1jPXIsKGU9dikucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYy5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5fX3Byb3RvX189Yzt2YXIgaCxsLG0sdz12LnByb3RvdHlwZTtyZXR1cm4gdy5yZWdpc3Rlcj1mdW5jdGlvbihuKXt2YXIgdD0odm9pZCAwPT09bj97fTpuKS5pbW1lZGlhdGUscj12b2lkIDAhPT10JiZ0O3RyeXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3ZhciByPW4oKTtpZihyJiZyLnRoZW4pcmV0dXJuIHIudGhlbih0KTtyZXR1cm4gdChyKX0oKGZ1bmN0aW9uKCl7aWYoIXImJlwiY29tcGxldGVcIiE9PWRvY3VtZW50LnJlYWR5U3RhdGUpcmV0dXJuIHMobmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe3JldHVybiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixuKX0pKSl9KSwoZnVuY3Rpb24oKXtyZXR1cm4gZS5tbj1Cb29sZWFuKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpLGUueW49ZS5wbigpLGEoZS5ibigpLChmdW5jdGlvbihuKXtlLmZuPW4sZS55biYmKGUuaG49ZS55bixlLmVuLnJlc29sdmUoZS55biksZS5vbi5yZXNvbHZlKGUueW4pLGUueW4uYWRkRXZlbnRMaXN0ZW5lcihcInN0YXRlY2hhbmdlXCIsZS5sbix7b25jZTohMH0pKTt2YXIgdD1lLmZuLndhaXRpbmc7cmV0dXJuIHQmJm8odC5zY3JpcHRVUkwsZS5zbi50b1N0cmluZygpKSYmKGUuaG49dCxQcm9taXNlLnJlc29sdmUoKS50aGVuKChmdW5jdGlvbigpe2UuZGlzcGF0Y2hFdmVudChuZXcgdShcIndhaXRpbmdcIix7c3c6dCx3YXNXYWl0aW5nQmVmb3JlUmVnaXN0ZXI6ITB9KSl9KSkudGhlbigoZnVuY3Rpb24oKXt9KSkpLGUuaG4mJihlLnJuLnJlc29sdmUoZS5obiksZS5hbi5hZGQoZS5obikpLGUuZm4uYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZWZvdW5kXCIsZS5jbiksbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRyb2xsZXJjaGFuZ2VcIixlLmRuKSxlLmZufSkpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcudXBkYXRlPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmZuP3ModGhpcy5mbi51cGRhdGUoKSk6dm9pZCAwfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcuZ2V0U1c9ZnVuY3Rpb24oKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5obj9Qcm9taXNlLnJlc29sdmUodGhpcy5obik6dGhpcy5ybi5wcm9taXNlfSx3Lm1lc3NhZ2VTVz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIGEodGhpcy5nZXRTVygpLChmdW5jdGlvbihyKXtyZXR1cm4gbihyLHQpfSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LHcubWVzc2FnZVNraXBXYWl0aW5nPWZ1bmN0aW9uKCl7dGhpcy5mbiYmdGhpcy5mbi53YWl0aW5nJiZuKHRoaXMuZm4ud2FpdGluZyxmKX0sdy5wbj1mdW5jdGlvbigpe3ZhciBuPW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXI7cmV0dXJuIG4mJm8obi5zY3JpcHRVUkwsdGhpcy5zbi50b1N0cmluZygpKT9uOnZvaWQgMH0sdy5ibj1mdW5jdGlvbigpe3RyeXt2YXIgbj10aGlzO3JldHVybiBmdW5jdGlvbihuLHQpe3RyeXt2YXIgcj1uKCl9Y2F0Y2gobil7cmV0dXJuIHQobil9aWYociYmci50aGVuKXJldHVybiByLnRoZW4odm9pZCAwLHQpO3JldHVybiByfSgoZnVuY3Rpb24oKXtyZXR1cm4gYShuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihuLnNuLG4ubm4pLChmdW5jdGlvbih0KXtyZXR1cm4gbi51bj1wZXJmb3JtYW5jZS5ub3coKSx0fSkpfSksKGZ1bmN0aW9uKG4pe3Rocm93IG59KSl9Y2F0Y2gobil7cmV0dXJuIFByb21pc2UucmVqZWN0KG4pfX0saD12LChsPVt7a2V5OlwiYWN0aXZlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW4ucHJvbWlzZX19LHtrZXk6XCJjb250cm9sbGluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uLnByb21pc2V9fV0pJiZ0KGgucHJvdG90eXBlLGwpLG0mJnQoaCxtKSx2fShmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt0aGlzLlBuPW5ldyBNYXB9dmFyIHQ9bi5wcm90b3R5cGU7cmV0dXJuIHQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihuLHQpe3RoaXMuU24obikuYWRkKHQpfSx0LnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24obix0KXt0aGlzLlNuKG4pLmRlbGV0ZSh0KX0sdC5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKG4pe24udGFyZ2V0PXRoaXM7Zm9yKHZhciB0LHI9ZSh0aGlzLlNuKG4udHlwZSkpOyEodD1yKCkpLmRvbmU7KXsoMCx0LnZhbHVlKShuKX19LHQuU249ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuUG4uaGFzKG4pfHx0aGlzLlBuLnNldChuLG5ldyBTZXQpLHRoaXMuUG4uZ2V0KG4pfSxufSgpKTtleHBvcnR7diBhcyBXb3JrYm94LHUgYXMgV29ya2JveEV2ZW50LG4gYXMgbWVzc2FnZVNXfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmtib3gtd2luZG93LnByb2QuZXM1Lm1qcy5tYXBcbiIsIi8qKlxyXG4gKiBBcHAgY2xhc3MgdGhhdCByZXByZXNlbnRzIGFuIGVudHJ5IHBvaW50IG9mIHRoZSBhcHBsaWNhdGlvbi5cclxuICovXHJcblxyXG5pbXBvcnQgeyBnZXRVVUlELCBnZXRVc2VyU291cmNlLCBnZXREYXRhRmlsZSB9IGZyb20gJy4vY29tcG9uZW50cy91cmxVdGlscyc7XHJcbmltcG9ydCB7IFN1cnZleSB9IGZyb20gJy4vc3VydmV5L3N1cnZleSc7XHJcbmltcG9ydCB7IEFzc2Vzc21lbnQgfSBmcm9tICcuL2Fzc2Vzc21lbnQvYXNzZXNzbWVudCc7XHJcbmltcG9ydCB7IFVuaXR5QnJpZGdlIH0gZnJvbSAnLi9jb21wb25lbnRzL3VuaXR5QnJpZGdlJztcclxuaW1wb3J0IHsgc2V0VXVpZCwgbGlua0FuYWx5dGljcywgc2VuZEluaXQgfSBmcm9tICcuL2NvbXBvbmVudHMvYW5hbHl0aWNzRXZlbnRzJztcclxuaW1wb3J0IHsgQmFzZVF1aXogfSBmcm9tICcuL0Jhc2VRdWl6JztcclxuaW1wb3J0IHsgZmV0Y2hBcHBEYXRhLCBnZXREYXRhVVJMIH0gZnJvbSAnLi9jb21wb25lbnRzL2pzb25VdGlscyc7XHJcbmltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tICdmaXJlYmFzZS9hcHAnO1xyXG5pbXBvcnQgeyBnZXRBbmFseXRpY3MsIGxvZ0V2ZW50IH0gZnJvbSAnZmlyZWJhc2UvYW5hbHl0aWNzJztcclxuaW1wb3J0IHsgV29ya2JveCB9IGZyb20gJ3dvcmtib3gtd2luZG93JztcclxuaW1wb3J0IENhY2hlTW9kZWwgZnJvbSAnLi9jb21wb25lbnRzL2NhY2hlTW9kZWwnO1xyXG5pbXBvcnQgeyBVSUNvbnRyb2xsZXIgfSBmcm9tICcuL2NvbXBvbmVudHMvdWlDb250cm9sbGVyJztcclxuXHJcbmNvbnN0IGFwcFZlcnNpb24gPSBcInYwLjIuMFwiO1xyXG5cclxubGV0IGxvYWRpbmdTY3JlZW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdTY3JlZW5cIik7XHJcblxyXG5jb25zdCBicm9hZGNhc3RDaGFubmVsOiBCcm9hZGNhc3RDaGFubmVsID0gbmV3IEJyb2FkY2FzdENoYW5uZWwoJ2FzLW1lc3NhZ2UtY2hhbm5lbCcpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcblxyXG5cdC8qKiBDb3VsZCBiZSAnYXNzZXNzbWVudCcgb3IgJ3N1cnZleScgYmFzZWQgb24gdGhlIGRhdGEgZmlsZSAqL1xyXG5cdHB1YmxpYyBkYXRhVVJMOiBzdHJpbmc7XHJcblxyXG5cdHB1YmxpYyB1bml0eUJyaWRnZTtcclxuXHRwdWJsaWMgYW5hbHl0aWNzO1xyXG5cdHB1YmxpYyBnYW1lOiBCYXNlUXVpejtcclxuXHJcblx0Y2FjaGVNb2RlbDogQ2FjaGVNb2RlbDtcclxuXHJcblx0bGFuZzogc3RyaW5nID0gXCJlbmdsaXNoXCI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy51bml0eUJyaWRnZSA9IG5ldyBVbml0eUJyaWRnZSgpO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIGFwcC4uLlwiKTtcclxuXHJcblx0XHR0aGlzLmRhdGFVUkwgPSBnZXREYXRhRmlsZSgpO1xyXG5cclxuXHRcdHRoaXMuY2FjaGVNb2RlbCA9IG5ldyBDYWNoZU1vZGVsKHRoaXMuZGF0YVVSTCwgdGhpcy5kYXRhVVJMLCBuZXcgU2V0PHN0cmluZz4oKSk7XHJcblxyXG5cdFx0Ly8gY29uc29sZS5sb2coXCJEYXRhIGZpbGU6IFwiICsgdGhpcy5kYXRhVVJMKTtcclxuXHJcblx0XHRjb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuXHRcdCAgYXBpS2V5OiBcIkFJemFTeUI4YzJsQlZpMjZ1N1lSTDlzeE9QOTdVYXEzeU44aFRsNFwiLFxyXG5cdFx0ICBhdXRoRG9tYWluOiBcImZ0bS1iOWQ5OS5maXJlYmFzZWFwcC5jb21cIixcclxuXHRcdCAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9mdG0tYjlkOTkuZmlyZWJhc2Vpby5jb21cIixcclxuXHRcdCAgcHJvamVjdElkOiBcImZ0bS1iOWQ5OVwiLFxyXG5cdFx0ICBzdG9yYWdlQnVja2V0OiBcImZ0bS1iOWQ5OS5hcHBzcG90LmNvbVwiLFxyXG5cdFx0ICBtZXNzYWdpbmdTZW5kZXJJZDogXCI2MDI0MDIzODc5NDFcIixcclxuXHRcdCAgYXBwSWQ6IFwiMTo2MDI0MDIzODc5NDE6d2ViOjdiMWIxMTgxODY0ZDI4YjQ5ZGUxMGNcIixcclxuXHRcdCAgbWVhc3VyZW1lbnRJZDogXCJHLUZGMTE1OVRHQ0ZcIlxyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBmYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcblx0XHRjb25zdCBmYW5hbHl0aWNzID0gZ2V0QW5hbHl0aWNzKGZhcHApO1xyXG5cclxuXHRcdHRoaXMuYW5hbHl0aWNzID0gZmFuYWx5dGljcztcclxuXHRcdGxvZ0V2ZW50KGZhbmFseXRpY3MsICdub3RpZmljYXRpb25fcmVjZWl2ZWQnKTtcclxuXHRcdGxvZ0V2ZW50KGZhbmFseXRpY3MsXCJ0ZXN0IGluaXRpYWxpemF0aW9uIGV2ZW50XCIse30pO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiZmlyZWJhc2UgaW5pdGlhbGl6ZWRcIik7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYXN5bmMgc3BpblVwKCkge1xyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiV2luZG93IExvYWRlZCFcIik7XHJcblx0XHRcdChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0YXdhaXQgZmV0Y2hBcHBEYXRhKHRoaXMuZGF0YVVSTCkudGhlbihkYXRhID0+IHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiQXNzZXNzbWVudC9TdXJ2ZXkgXCIgKyBhcHBWZXJzaW9uICsgXCIgaW5pdGlhbGl6aW5nIVwiKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiQXBwIGRhdGEgbG9hZGVkIVwiKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuXHRcdFx0XHRcdHRoaXMuY2FjaGVNb2RlbC5zZXRDb250ZW50RmlsZVBhdGgoZ2V0RGF0YVVSTCh0aGlzLmRhdGFVUkwpKTtcclxuXHJcblx0XHRcdFx0XHQvLyBUT0RPOiBXaHkgZG8gd2UgbmVlZCB0byBzZXQgdGhlIGZlZWRiYWNrIHRleHQgaGVyZT9cclxuXHRcdFx0XHRcdFVJQ29udHJvbGxlci5TZXRGZWVkYmFja1RleHQoZGF0YVtcImZlZWRiYWNrVGV4dFwiXSk7XHJcblxyXG5cdFx0XHRcdFx0bGV0IGFwcFR5cGUgPSBkYXRhW1wiYXBwVHlwZVwiXTtcclxuXHJcblx0XHRcdFx0XHRpZiAoYXBwVHlwZSA9PSBcInN1cnZleVwiKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZ2FtZSA9IG5ldyBTdXJ2ZXkodGhpcy5kYXRhVVJMLCB0aGlzLnVuaXR5QnJpZGdlKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoYXBwVHlwZSA9PSBcImFzc2Vzc21lbnRcIikge1xyXG5cdFx0XHRcdFx0XHQvLyBHZXQgYW5kIGFkZCBhbGwgdGhlIGF1ZGlvIGFzc2V0cyB0byB0aGUgY2FjaGUgbW9kZWxcclxuXHJcblx0XHRcdFx0XHRcdGxldCBidWNrZXRzID0gZGF0YVtcImJ1Y2tldHNcIl07XHJcblxyXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGJ1Y2tldHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMDsgaiA8IGJ1Y2tldHNbaV0uaXRlbXMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0XHRcdGxldCBhdWRpb0l0ZW1VUkw7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2UgdG8gbG93ZXIgY2FzZSBmb3IgdGhlIEx1Z2FuZGFuIGRhdGFcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChkYXRhW1wicXVpek5hbWVcIl0uaW5jbHVkZXMoXCJMdWdhbmRhXCIpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF1ZGlvSXRlbVVSTCA9IFwiL2F1ZGlvL1wiICsgdGhpcy5kYXRhVVJMICsgXCIvXCIgKyBidWNrZXRzW2ldLml0ZW1zW2pdLml0ZW1OYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpICsgXCIubXAzXCI7XHJcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhdWRpb0l0ZW1VUkwgPSBcIi9hdWRpby9cIiArIHRoaXMuZGF0YVVSTCArIFwiL1wiICsgYnVja2V0c1tpXS5pdGVtc1tqXS5pdGVtTmFtZS50cmltKCkgKyBcIi5tcDNcIjtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNhY2hlTW9kZWwuYWRkSXRlbVRvQXVkaW9WaXN1YWxSZXNvdXJjZXMoYXVkaW9JdGVtVVJMKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdHRoaXMuY2FjaGVNb2RlbC5hZGRJdGVtVG9BdWRpb1Zpc3VhbFJlc291cmNlcyhcIi9hdWRpby9cIiArIHRoaXMuZGF0YVVSTCArIFwiL2Fuc3dlcl9mZWVkYmFjay5tcDNcIik7XHJcblxyXG5cdFx0XHRcdFx0XHR0aGlzLmdhbWUgPSBuZXcgQXNzZXNzbWVudCh0aGlzLmRhdGFVUkwsIHRoaXMudW5pdHlCcmlkZ2UpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHRoaXMuZ2FtZS51bml0eUJyaWRnZSA9IHRoaXMudW5pdHlCcmlkZ2U7XHJcblxyXG5cdFx0XHRcdFx0c2V0VXVpZChnZXRVVUlEKCksIGdldFVzZXJTb3VyY2UoKSk7XHJcblx0XHRcdFx0XHRsaW5rQW5hbHl0aWNzKHRoaXMuYW5hbHl0aWNzLCB0aGlzLmRhdGFVUkwpO1xyXG5cdFx0XHRcdFx0c2VuZEluaXQoKTtcclxuXHJcblx0XHRcdFx0XHR0aGlzLmdhbWUuUnVuKHRoaXMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGF3YWl0IHRoaXMucmVnaXN0ZXJTZXJ2aWNlV29ya2VyKHRoaXMuZ2FtZSk7XHJcblx0XHRcdH0pKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRcclxuXHR9XHJcblxyXG5cdGFzeW5jIHJlZ2lzdGVyU2VydmljZVdvcmtlcihnYW1lOiBCYXNlUXVpeikge1xyXG5cdFx0Y29uc29sZS5sb2coXCJSZWdpc3RlcmluZyBzZXJ2aWNlIHdvcmtlci4uLlwiKTtcclxuXHJcblx0XHRpZiAoXCJzZXJ2aWNlV29ya2VyXCIgaW4gbmF2aWdhdG9yKSB7XHJcblx0XHRcdGxldCB3YiA9IG5ldyBXb3JrYm94KCcuL3N3LmpzJywge30pO1xyXG5cclxuXHRcdFx0d2IucmVnaXN0ZXIoKS50aGVuKChyZWdpc3RyYXRpb24pID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlNlcnZpY2Ugd29ya2VyIHJlZ2lzdGVyZWQhXCIpO1xyXG5cdFx0XHRcdHRoaXMuaGFuZGxlU2VydmljZVdvcmtlclJlZ2lzdGF0aW9uKHJlZ2lzdHJhdGlvbik7XHJcblx0XHRcdH0pLmNhdGNoKChlcnIpID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IFwiICsgZXJyKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBoYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZSk7XHJcblxyXG5cdFx0XHRhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiQ2FjaGUgTW9kZWw6IFwiKTtcclxuXHRcdFx0Y29uc29sZS5sb2codGhpcy5jYWNoZU1vZGVsKTtcclxuXHJcblx0XHRcdGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmNhY2hlTW9kZWwuYXBwTmFtZSkgPT0gbnVsbCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiV0UgRE9OVCBIQVZFIFRISVMgQVNTRVNTTUVOVDwgQ0FDSElORyBJVCFcIik7XHJcblx0XHRcdFx0bG9hZGluZ1NjcmVlbiEuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbC5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogXCJDYWNoZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwRGF0YTogdGhpcy5jYWNoZU1vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cdFx0XHRcdGxvYWRpbmdTY3JlZW4hLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YnJvYWRjYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhldmVudC5kYXRhLmNvbW1hbmQgKyBcIiByZWNlaXZlZCBmcm9tIHNlcnZpY2Ugd29ya2VyIVwiKTtcclxuXHRcdFx0XHRpZiAoZXZlbnQuZGF0YS5jb21tYW5kID09IFwiQWN0aXZhdGVkXCIgJiYgbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5jYWNoZU1vZGVsLmFwcE5hbWUpID09IG51bGwpIHtcclxuXHRcdFx0XHRcdGJyb2FkY2FzdENoYW5uZWwucG9zdE1lc3NhZ2Uoe1xyXG5cdFx0XHRcdFx0XHRjb21tYW5kOiBcIkNhY2hlXCIsXHJcblx0XHRcdFx0XHRcdGRhdGE6IHtcclxuXHRcdFx0XHRcdFx0XHRhcHBEYXRhOiB0aGlzLmNhY2hlTW9kZWwsXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oXCJTZXJ2aWNlIHdvcmtlcnMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyLlwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGhhbmRsZVNlcnZpY2VXb3JrZXJSZWdpc3RhdGlvbihyZWdpc3RyYXRpb246IFNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24gfCB1bmRlZmluZWQpOiB2b2lkIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHJlZ2lzdHJhdGlvbj8uaW5zdGFsbGluZz8ucG9zdE1lc3NhZ2Uoe1xyXG5cdFx0XHRcdHR5cGU6ICdSZWdpc3RhcnRpb24nLFxyXG5cdFx0XHRcdHZhbHVlOiB0aGlzLmxhbmdcclxuXHRcdFx0fSlcclxuXHRcdH0gY2F0Y2ggKGVycikge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IFwiICsgZXJyKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBHZXREYXRhVVJMKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gdGhpcy5kYXRhVVJMO1xyXG5cdH1cclxufVxyXG5cclxuYnJvYWRjYXN0Q2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBoYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZShldmVudCk6IHZvaWQge1xyXG4gICAgaWYgKGV2ZW50LmRhdGEubXNnID09IFwiTG9hZGluZ1wiKSB7XHJcbiAgICAgICAgbGV0IHByb2dyZXNzVmFsdWUgPSBwYXJzZUludChldmVudC5kYXRhLmRhdGEucHJvZ3Jlc3MpO1xyXG4gICAgICAgIGhhbmRsZUxvYWRpbmdNZXNzYWdlKGV2ZW50LCBwcm9ncmVzc1ZhbHVlKTtcclxuICAgIH1cclxuICAgIGlmIChldmVudC5kYXRhLm1zZyA9PSBcIlVwZGF0ZUZvdW5kXCIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Lix1cGRhdGUgRm91bmRcIik7XHJcbiAgICAgICAgaGFuZGxlVXBkYXRlRm91bmRNZXNzYWdlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxvYWRpbmdNZXNzYWdlKGV2ZW50LCBwcm9ncmVzc1ZhbHVlKTogdm9pZCB7XHJcbiAgICBsZXQgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2dyZXNzQmFyXCIpO1xyXG4gICAgaWYgKHByb2dyZXNzVmFsdWUgPCAxMDApIHtcclxuICAgICAgICBwcm9ncmVzc0JhciEuc3R5bGUud2lkdGggPSBwcm9ncmVzc1ZhbHVlICsgXCIlXCI7XHJcbiAgICB9IGVsc2UgaWYgKHByb2dyZXNzVmFsdWUgPj0gMTAwKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjcmVlbiEuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdFx0VUlDb250cm9sbGVyLlNldENvbnRlbnRMb2FkZWQodHJ1ZSk7XHJcbiAgICAgICAgLy8gYWRkIGJvb2sgd2l0aCBhIG5hbWUgdG8gbG9jYWwgc3RvcmFnZSBhcyBjYWNoZWRcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShldmVudC5kYXRhLmRhdGEuYm9va05hbWUsIFwidHJ1ZVwiKTtcclxuICAgICAgICByZWFkTGFuZ3VhZ2VEYXRhRnJvbUNhY2hlQW5kTm90aWZ5QW5kcm9pZEFwcChldmVudC5kYXRhLmRhdGEuYm9va05hbWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkTGFuZ3VhZ2VEYXRhRnJvbUNhY2hlQW5kTm90aWZ5QW5kcm9pZEFwcChib29rTmFtZTogc3RyaW5nKSB7XHJcbiAgICAvL0B0cy1pZ25vcmVcclxuICAgIGlmICh3aW5kb3cuQW5kcm9pZCkge1xyXG4gICAgICAgIGxldCBpc0NvbnRlbnRDYWNoZWQ6IGJvb2xlYW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShib29rTmFtZSkgIT09IG51bGw7XHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgd2luZG93LkFuZHJvaWQuY2FjaGVkU3RhdHVzKGlzQ29udGVudENhY2hlZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVVwZGF0ZUZvdW5kTWVzc2FnZSgpOiB2b2lkIHtcclxuICAgIGxldCB0ZXh0ID0gXCJVcGRhdGUgRm91bmQuXFxuUGxlYXNlIGFjY2VwdCB0aGUgdXBkYXRlIGJ5IHByZXNzaW5nIE9rLlwiO1xyXG4gICAgaWYgKGNvbmZpcm0odGV4dCkgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGV4dCA9IFwiVXBkYXRlIHdpbGwgaGFwcGVuIG9uIHRoZSBuZXh0IGxhdW5jaC5cIjtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgYXBwID0gbmV3IEFwcCgpO1xyXG5hcHAuc3BpblVwKCk7XHJcbiIsIi8vIEludGVyZmFjZSB0aGF0IGdldHMgcGFzc2VkIGFyb3VuZCB0aGUgYXBwIGNvbXBvbmVudHMgdG8gZ2F0aGVyIGFsbCByZXF1cmllZCByZXNvdXJjZXNcclxuLy8gYW5kIHRoYXQgZ2V0cyBzZW50IHRvIHRoZSBzZXJ2aWNlIHdvcmtlciBmb3IgY2FjaGluZ1xyXG5cclxuaW50ZXJmYWNlIElDYWNoZU1vZGVsIHtcclxuICAgIGFwcE5hbWU6IHN0cmluZztcclxuICAgIGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nO1xyXG4gICAgYXVkaW9WaXN1YWxSZXNvdXJjZXM6IFNldDxzdHJpbmc+O1xyXG59XHJcblxyXG5jbGFzcyBDYWNoZU1vZGVsIGltcGxlbWVudHMgSUNhY2hlTW9kZWwge1xyXG4gICAgYXBwTmFtZTogc3RyaW5nO1xyXG4gICAgY29udGVudEZpbGVQYXRoOiBzdHJpbmc7XHJcbiAgICBhdWRpb1Zpc3VhbFJlc291cmNlczogU2V0PHN0cmluZz47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwTmFtZTogc3RyaW5nLCBjb250ZW50RmlsZVBhdGg6IHN0cmluZywgYXVkaW9WaXN1YWxSZXNvdXJjZXM6IFNldDxzdHJpbmc+KSB7XHJcbiAgICAgICAgdGhpcy5hcHBOYW1lID0gYXBwTmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRGaWxlUGF0aCA9IGNvbnRlbnRGaWxlUGF0aDtcclxuICAgICAgICB0aGlzLmF1ZGlvVmlzdWFsUmVzb3VyY2VzID0gYXVkaW9WaXN1YWxSZXNvdXJjZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEFwcE5hbWUoYXBwTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5hcHBOYW1lID0gYXBwTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Q29udGVudEZpbGVQYXRoKGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RmlsZVBhdGggPSBjb250ZW50RmlsZVBhdGg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEF1ZGlvVmlzdWFsUmVzb3VyY2VzKGF1ZGlvVmlzdWFsUmVzb3VyY2VzOiBTZXQ8c3RyaW5nPikge1xyXG4gICAgICAgIHRoaXMuYXVkaW9WaXN1YWxSZXNvdXJjZXMgPSBhdWRpb1Zpc3VhbFJlc291cmNlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkSXRlbVRvQXVkaW9WaXN1YWxSZXNvdXJjZXMoaXRlbTogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmF1ZGlvVmlzdWFsUmVzb3VyY2VzLmhhcyhpdGVtKSkge1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvVmlzdWFsUmVzb3VyY2VzLmFkZChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYWNoZU1vZGVsO1xyXG5cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJnZXREYXRhRmlsZSIsImRhdGEiLCJnZXRQYXRoTmFtZSIsImdldCIsInVuZGVmaW5lZCIsImNvbnNvbGUiLCJsb2ciLCJxdWVyeVN0cmluZyIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwiVVJMU2VhcmNoUGFyYW1zIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwiZ2V0RGF0YVVSTCIsInVybCIsImxvYWREYXRhIiwiZnVybCIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsIkF1ZGlvQ29udHJvbGxlciIsImltYWdlVG9DYWNoZSIsIndhdlRvQ2FjaGUiLCJhbGxBdWRpb3MiLCJhbGxJbWFnZXMiLCJkYXRhVVJMIiwiY29ycmVjdFNvdW5kUGF0aCIsImZlZWRiYWNrQXVkaW8iLCJjb3JyZWN0QXVkaW8iLCJpbml0IiwiQXVkaW8iLCJzcmMiLCJzdGF0aWMiLCJxdWVzdGlvbnNEYXRhIiwiZ2V0SW5zdGFuY2UiLCJmZWVkYmFja1NvdW5kUGF0aCIsInF1ZXN0aW9uSW5kZXgiLCJwdXNoIiwicXVlc3Rpb25EYXRhIiwiYW5zd2VySW5kZXgiLCJwcm9tcHRBdWRpbyIsIkZpbHRlckFuZEFkZEF1ZGlvVG9BbGxBdWRpb3MiLCJwcm9tcHRJbWciLCJBZGRJbWFnZVRvQWxsSW1hZ2VzIiwiYW5zd2VycyIsImFuc3dlckRhdGEiLCJhbnN3ZXJJbWciLCJuZXdJbWFnZVVSTCIsIm5ld0ltYWdlIiwiSW1hZ2UiLCJuZXdBdWRpb1VSTCIsImluY2x1ZGVzIiwicmVwbGFjZSIsInRyaW0iLCJuZXdBdWRpbyIsInNwbGl0IiwidG9Mb3dlckNhc2UiLCJuZXdCdWNrZXQiLCJpdGVtSW5kZXgiLCJpdGVtcyIsIml0ZW0iLCJpdGVtTmFtZSIsImF1ZGlvTmFtZSIsImZpbmlzaGVkQ2FsbGJhY2siLCJhdWRpb0FuaW0iLCJzbGljZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiYXVkaW8iLCJhZGRFdmVudExpc3RlbmVyIiwicGxheSIsImNhdGNoIiwiZXJyb3IiLCJ3YXJuIiwiaW1hZ2VOYW1lIiwiaW5zdGFuY2UiLCJyYW5kRnJvbSIsImFycmF5IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwic2h1ZmZsZUFycmF5IiwiaSIsImoiLCJVSUNvbnRyb2xsZXIiLCJsYW5kaW5nQ29udGFpbmVySWQiLCJnYW1lQ29udGFpbmVySWQiLCJlbmRDb250YWluZXJJZCIsInN0YXJDb250YWluZXJJZCIsImNoZXN0Q29udGFpbmVySWQiLCJxdWVzdGlvbnNDb250YWluZXJJZCIsImZlZWRiYWNrQ29udGFpbmVySWQiLCJhbnN3ZXJzQ29udGFpbmVySWQiLCJhbnN3ZXJCdXR0b24xSWQiLCJhbnN3ZXJCdXR0b24ySWQiLCJhbnN3ZXJCdXR0b24zSWQiLCJhbnN3ZXJCdXR0b240SWQiLCJhbnN3ZXJCdXR0b241SWQiLCJhbnN3ZXJCdXR0b242SWQiLCJwbGF5QnV0dG9uSWQiLCJjaGVzdEltZ0lkIiwibmV4dFF1ZXN0aW9uIiwiY29udGVudExvYWRlZCIsInNob3duIiwic3RhcnMiLCJxQW5zTnVtIiwiYnV0dG9ucyIsImJ1dHRvbnNBY3RpdmUiLCJsYW5kaW5nQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdhbWVDb250YWluZXIiLCJlbmRDb250YWluZXIiLCJzdGFyQ29udGFpbmVyIiwiY2hlc3RDb250YWluZXIiLCJxdWVzdGlvbnNDb250YWluZXIiLCJmZWVkYmFja0NvbnRhaW5lciIsImFuc3dlcnNDb250YWluZXIiLCJhbnN3ZXJCdXR0b24xIiwiYW5zd2VyQnV0dG9uMiIsImFuc3dlckJ1dHRvbjMiLCJhbnN3ZXJCdXR0b240IiwiYW5zd2VyQnV0dG9uNSIsImFuc3dlckJ1dHRvbjYiLCJwbGF5QnV0dG9uIiwiY2hlc3RJbWciLCJpbml0aWFsaXplU3RhcnMiLCJpbml0RXZlbnRMaXN0ZW5lcnMiLCJuZXdTdGFyIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJhbnN3ZXJCdXR0b25QcmVzcyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzaG93R2FtZSIsInNob3dPcHRpb25zIiwibmV3USIsImFuaW1hdGlvbkR1cmF0aW9uIiwiZGVsYXlCZm9yZU9wdGlvbiIsImZvckVhY2giLCJidXR0b24iLCJzdHlsZSIsInZpc2liaWxpdHkiLCJhbmltYXRpb24iLCJzZXRUaW1lb3V0IiwiY3VyQW5zd2VyIiwiYW5zd2VyVGV4dCIsInRtcGltZyIsIkdldEltYWdlIiwicVN0YXJ0IiwiRGF0ZSIsIm5vdyIsIm50Iiwic2hvd0xhbmRpbmciLCJkaXNwbGF5IiwiYWxsU3RhcnQiLCJzdGFydFByZXNzQ2FsbGJhY2siLCJ2aXNpYmxlIiwicmVtb3ZlIiwiUGxheUNvcnJlY3QiLCJiIiwiU2hvd1F1ZXN0aW9uIiwiUGxheUF1ZGlvIiwiU2hvd0F1ZGlvQW5pbWF0aW9uIiwicGxheWluZyIsInF1ZXJ5U2VsZWN0b3IiLCJuZXdRdWVzdGlvbiIsInFDb2RlIiwiYnV0dG9uSW5kZXgiLCJwcm9tcHRUZXh0Iiwic3RhclRvU2hvdyIsImJ1dHRvbk51bSIsIlBsYXlEaW5nIiwiZFRpbWUiLCJidXR0b25QcmVzc0NhbGxiYWNrIiwiY2hlc3RJbWFnZSIsImN1cnJlbnRJbWdTcmMiLCJjdXJyZW50SW1hZ2VOdW1iZXIiLCJwYXJzZUludCIsIm5leHRJbWFnZVNyYyIsInZhbHVlIiwiY2FsbGJhY2siLCJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwicCIsImMiLCJjaGFyQ29kZUF0IiwiYmFzZTY0IiwiYnl0ZVRvQ2hhck1hcF8iLCJjaGFyVG9CeXRlTWFwXyIsImJ5dGVUb0NoYXJNYXBXZWJTYWZlXyIsImNoYXJUb0J5dGVNYXBXZWJTYWZlXyIsIkVOQ09ERURfVkFMU19CQVNFIiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJIQVNfTkFUSVZFX1NVUFBPUlQiLCJhdG9iIiwiZW5jb2RlQnl0ZUFycmF5IiwiaW5wdXQiLCJ3ZWJTYWZlIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJpbml0XyIsImJ5dGVUb0NoYXJNYXAiLCJvdXRwdXQiLCJieXRlMSIsImhhdmVCeXRlMiIsImJ5dGUyIiwiaGF2ZUJ5dGUzIiwiYnl0ZTMiLCJvdXRCeXRlMSIsIm91dEJ5dGUyIiwib3V0Qnl0ZTMiLCJvdXRCeXRlNCIsImpvaW4iLCJlbmNvZGVTdHJpbmciLCJidG9hIiwiZGVjb2RlU3RyaW5nIiwiYnl0ZXMiLCJwb3MiLCJjMSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImMyIiwidSIsImMzIiwiYnl0ZUFycmF5VG9TdHJpbmciLCJkZWNvZGVTdHJpbmdUb0J5dGVBcnJheSIsImNoYXJUb0J5dGVNYXAiLCJjaGFyQXQiLCJieXRlNCIsImJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nIiwidXRmOEJ5dGVzIiwiYmFzZTY0RW5jb2RlIiwiaW5kZXhlZERCIiwicHJlRXhpc3QiLCJEQl9DSEVDS19OQU1FIiwicmVxdWVzdCIsInNlbGYiLCJvcGVuIiwib25zdWNjZXNzIiwicmVzdWx0IiwiY2xvc2UiLCJkZWxldGVEYXRhYmFzZSIsIm9udXBncmFkZW5lZWRlZCIsIm9uZXJyb3IiLCJfYSIsIm1lc3NhZ2UiLCJnZXREZWZhdWx0cyIsImdldEdsb2JhbCIsIl9fRklSRUJBU0VfREVGQVVMVFNfXyIsInByb2Nlc3MiLCJlbnYiLCJkZWZhdWx0c0pzb25TdHJpbmciLCJKU09OIiwicGFyc2UiLCJnZXREZWZhdWx0c0Zyb21FbnZWYXJpYWJsZSIsIm1hdGNoIiwiY29va2llIiwiZGVjb2RlZCIsImJhc2U2NERlY29kZSIsImdldERlZmF1bHRzRnJvbUNvb2tpZSIsImluZm8iLCJEZWZlcnJlZCIsImNvbnN0cnVjdG9yIiwicHJvbWlzZSIsIndyYXBDYWxsYmFjayIsIkZpcmViYXNlRXJyb3IiLCJjb2RlIiwiY3VzdG9tRGF0YSIsInN1cGVyIiwibmFtZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJjcmVhdGUiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsIl8iLCJrZXkiLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImRlZXBFcXVhbCIsImEiLCJhS2V5cyIsImtleXMiLCJiS2V5cyIsImsiLCJhUHJvcCIsImJQcm9wIiwiaXNPYmplY3QiLCJ0aGluZyIsImNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMiLCJiYWNrb2ZmQ291bnQiLCJpbnRlcnZhbE1pbGxpcyIsImJhY2tvZmZGYWN0b3IiLCJjdXJyQmFzZVZhbHVlIiwicG93IiwicmFuZG9tV2FpdCIsInJvdW5kIiwibWluIiwiX2RlbGVnYXRlIiwiQ29tcG9uZW50IiwiaW5zdGFuY2VGYWN0b3J5IiwidHlwZSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJvbkluc3RhbmNlQ3JlYXRlZCIsInNldEluc3RhbnRpYXRpb25Nb2RlIiwibW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIkRFRkFVTFRfRU5UUllfTkFNRSIsIlByb3ZpZGVyIiwiY29udGFpbmVyIiwiY29tcG9uZW50IiwiaW5zdGFuY2VzIiwiTWFwIiwiaW5zdGFuY2VzRGVmZXJyZWQiLCJpbnN0YW5jZXNPcHRpb25zIiwib25Jbml0Q2FsbGJhY2tzIiwiaWRlbnRpZmllciIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpc0luaXRpYWxpemVkIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJnZXRPckluaXRpYWxpemVTZXJ2aWNlIiwiaW5zdGFuY2VJZGVudGlmaWVyIiwiZ2V0SW1tZWRpYXRlIiwib3B0aW9ucyIsIm9wdGlvbmFsIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJlbnRyaWVzIiwiY2xlYXJJbnN0YW5jZSIsImRlbGV0ZSIsImFzeW5jIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwibWFwIiwiSU5URVJOQUwiLCJfZGVsZXRlIiwiaXNDb21wb25lbnRTZXQiLCJnZXRPcHRpb25zIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJvbkluaXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsIlNldCIsImV4aXN0aW5nSW5zdGFuY2UiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJjYWxsYmFja3MiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJhZGRDb21wb25lbnQiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwiYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJnZXRQcm92aWRlcnMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiREVCVUciLCJWRVJCT1NFIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIlNJTEVOVCIsImRlZmF1bHRMb2dMZXZlbCIsIkNvbnNvbGVNZXRob2QiLCJkZWZhdWx0TG9nSGFuZGxlciIsImxvZ1R5cGUiLCJhcmdzIiwibG9nTGV2ZWwiLCJ0b0lTT1N0cmluZyIsIm1ldGhvZCIsIkxvZ2dlciIsIl9sb2dMZXZlbCIsIl9sb2dIYW5kbGVyIiwiX3VzZXJMb2dIYW5kbGVyIiwidmFsIiwiVHlwZUVycm9yIiwic2V0TG9nTGV2ZWwiLCJsb2dIYW5kbGVyIiwidXNlckxvZ0hhbmRsZXIiLCJkZWJ1ZyIsImlkYlByb3h5YWJsZVR5cGVzIiwiY3Vyc29yQWR2YW5jZU1ldGhvZHMiLCJjdXJzb3JSZXF1ZXN0TWFwIiwiV2Vha01hcCIsInRyYW5zYWN0aW9uRG9uZU1hcCIsInRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCIsInRyYW5zZm9ybUNhY2hlIiwicmV2ZXJzZVRyYW5zZm9ybUNhY2hlIiwiaWRiUHJveHlUcmFwcyIsInRhcmdldCIsInByb3AiLCJyZWNlaXZlciIsIklEQlRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmVOYW1lcyIsIm9iamVjdFN0b3JlIiwidHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSIsImZ1bmMiLCJJREJEYXRhYmFzZSIsInRyYW5zYWN0aW9uIiwiSURCQ3Vyc29yIiwiYWR2YW5jZSIsImNvbnRpbnVlIiwiY29udGludWVQcmltYXJ5S2V5IiwiYXBwbHkiLCJ1bndyYXAiLCJzdG9yZU5hbWVzIiwidHgiLCJjYWxsIiwic29ydCIsImRvbmUiLCJ1bmxpc3RlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb21wbGV0ZSIsIkRPTUV4Y2VwdGlvbiIsImNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbiIsIm9iamVjdCIsIklEQk9iamVjdFN0b3JlIiwiSURCSW5kZXgiLCJzb21lIiwiUHJveHkiLCJJREJSZXF1ZXN0Iiwic3VjY2VzcyIsInByb21pc2lmeVJlcXVlc3QiLCJuZXdWYWx1ZSIsIm9wZW5EQiIsInZlcnNpb24iLCJibG9ja2VkIiwidXBncmFkZSIsImJsb2NraW5nIiwidGVybWluYXRlZCIsIm9wZW5Qcm9taXNlIiwiZXZlbnQiLCJvbGRWZXJzaW9uIiwibmV3VmVyc2lvbiIsImRiIiwicmVhZE1ldGhvZHMiLCJ3cml0ZU1ldGhvZHMiLCJjYWNoZWRNZXRob2RzIiwiZ2V0TWV0aG9kIiwidGFyZ2V0RnVuY05hbWUiLCJ1c2VJbmRleCIsImlzV3JpdGUiLCJzdG9yZU5hbWUiLCJzdG9yZSIsImluZGV4Iiwic2hpZnQiLCJvbGRUcmFwcyIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJsaWJyYXJ5IiwibG9nU3RyaW5nIiwibmFtZSRvIiwidmVyc2lvbiQxIiwibG9nZ2VyIiwiUExBVEZPUk1fTE9HX1NUUklORyIsIl9hcHBzIiwiX2NvbXBvbmVudHMiLCJfYWRkQ29tcG9uZW50IiwiYXBwIiwiX3JlZ2lzdGVyQ29tcG9uZW50IiwiY29tcG9uZW50TmFtZSIsImhlYXJ0YmVhdENvbnRyb2xsZXIiLCJ0cmlnZ2VySGVhcnRiZWF0IiwiRVJST1JfRkFDVE9SWSIsIkZpcmViYXNlQXBwSW1wbCIsImNvbmZpZyIsIl9pc0RlbGV0ZWQiLCJfb3B0aW9ucyIsImFzc2lnbiIsIl9jb25maWciLCJfbmFtZSIsIl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQiLCJfY29udGFpbmVyIiwiY2hlY2tEZXN0cm95ZWQiLCJpc0RlbGV0ZWQiLCJhcHBOYW1lIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwicmVnaXN0ZXJWZXJzaW9uIiwibGlicmFyeUtleU9yTmFtZSIsInZhcmlhbnQiLCJsaWJyYXJ5TWlzbWF0Y2giLCJ2ZXJzaW9uTWlzbWF0Y2giLCJ3YXJuaW5nIiwiU1RPUkVfTkFNRSIsImRiUHJvbWlzZSIsImdldERiUHJvbWlzZSIsImNyZWF0ZU9iamVjdFN0b3JlIiwib3JpZ2luYWxFcnJvck1lc3NhZ2UiLCJ3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQiIsImhlYXJ0YmVhdE9iamVjdCIsInB1dCIsImNvbXB1dGVLZXkiLCJpZGJHZXRFcnJvciIsImFwcElkIiwiSGVhcnRiZWF0U2VydmljZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlIiwiX3N0b3JhZ2UiLCJIZWFydGJlYXRTdG9yYWdlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlIiwicmVhZCIsImFnZW50IiwiZGF0ZSIsImdldFVUQ0RhdGVTdHJpbmciLCJsYXN0U2VudEhlYXJ0YmVhdERhdGUiLCJoZWFydGJlYXRzIiwic2luZ2xlRGF0ZUhlYXJ0YmVhdCIsImhiVGltZXN0YW1wIiwidmFsdWVPZiIsIm92ZXJ3cml0ZSIsImhlYXJ0YmVhdHNUb1NlbmQiLCJ1bnNlbnRFbnRyaWVzIiwiaGVhcnRiZWF0c0NhY2hlIiwibWF4U2l6ZSIsImhlYXJ0YmVhdEVudHJ5IiwiZmluZCIsImhiIiwiZGF0ZXMiLCJjb3VudEJ5dGVzIiwicG9wIiwiZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIiLCJoZWFkZXJTdHJpbmciLCJzdHJpbmdpZnkiLCJzdWJzdHJpbmciLCJfY2FuVXNlSW5kZXhlZERCUHJvbWlzZSIsInJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2siLCJpZGJIZWFydGJlYXRPYmplY3QiLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiUEFDS0FHRV9WRVJTSU9OIiwiaXNTZXJ2ZXJFcnJvciIsImdldEluc3RhbGxhdGlvbnNFbmRwb2ludCIsInByb2plY3RJZCIsImV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlIiwidG9rZW4iLCJyZXF1ZXN0U3RhdHVzIiwiZXhwaXJlc0luIiwicmVzcG9uc2VFeHBpcmVzSW4iLCJOdW1iZXIiLCJjcmVhdGlvblRpbWUiLCJnZXRFcnJvckZyb21SZXNwb25zZSIsInJlcXVlc3ROYW1lIiwiZXJyb3JEYXRhIiwic2VydmVyQ29kZSIsInNlcnZlck1lc3NhZ2UiLCJzZXJ2ZXJTdGF0dXMiLCJzdGF0dXMiLCJnZXRIZWFkZXJzIiwiYXBpS2V5IiwiSGVhZGVycyIsIkFjY2VwdCIsInJldHJ5SWZTZXJ2ZXJFcnJvciIsImZuIiwic2xlZXAiLCJtcyIsIlZBTElEX0ZJRF9QQVRURVJOIiwiZ2VuZXJhdGVGaWQiLCJmaWRCeXRlQXJyYXkiLCJVaW50OEFycmF5IiwiY3J5cHRvIiwibXNDcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJmaWQiLCJzdWJzdHIiLCJlbmNvZGUiLCJ0ZXN0IiwiZ2V0S2V5IiwiYXBwQ29uZmlnIiwiZmlkQ2hhbmdlQ2FsbGJhY2tzIiwiZmlkQ2hhbmdlZCIsImNhbGxGaWRDaGFuZ2VDYWxsYmFja3MiLCJjaGFubmVsIiwiYnJvYWRjYXN0Q2hhbm5lbCIsIkJyb2FkY2FzdENoYW5uZWwiLCJvbm1lc3NhZ2UiLCJwb3N0TWVzc2FnZSIsInNpemUiLCJicm9hZGNhc3RGaWRDaGFuZ2UiLCJPQkpFQ1RfU1RPUkVfTkFNRSIsIm9sZFZhbHVlIiwidXBkYXRlIiwidXBkYXRlRm4iLCJnZXRJbnN0YWxsYXRpb25FbnRyeSIsImluc3RhbGxhdGlvbnMiLCJyZWdpc3RyYXRpb25Qcm9taXNlIiwiaW5zdGFsbGF0aW9uRW50cnkiLCJvbGRFbnRyeSIsImNsZWFyVGltZWRPdXRSZXF1ZXN0IiwicmVnaXN0cmF0aW9uU3RhdHVzIiwidXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeSIsImVudHJ5V2l0aFByb21pc2UiLCJuYXZpZ2F0b3IiLCJvbkxpbmUiLCJpblByb2dyZXNzRW50cnkiLCJyZWdpc3RyYXRpb25UaW1lIiwicmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5IiwiaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyIiwiZW5kcG9pbnQiLCJoZWFkZXJzIiwiaGVhcnRiZWF0U2VydmljZSIsImhlYXJ0YmVhdHNIZWFkZXIiLCJnZXRIZWFydGJlYXRzSGVhZGVyIiwiYXBwZW5kIiwiYm9keSIsImF1dGhWZXJzaW9uIiwic2RrVmVyc2lvbiIsIm9rIiwicmVzcG9uc2VWYWx1ZSIsInJlZnJlc2hUb2tlbiIsImF1dGhUb2tlbiIsImNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QiLCJyZWdpc3Rlckluc3RhbGxhdGlvbiIsIndhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbiIsInRyaWdnZXJSZWdpc3RyYXRpb25JZk5lY2Vzc2FyeSIsImVudHJ5IiwidXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdCIsImdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQiLCJnZXRBdXRob3JpemF0aW9uSGVhZGVyIiwiZ2V0SGVhZGVyc1dpdGhBdXRoIiwiaW5zdGFsbGF0aW9uIiwicmVmcmVzaEF1dGhUb2tlbiIsImZvcmNlUmVmcmVzaCIsInRva2VuUHJvbWlzZSIsImlzRW50cnlSZWdpc3RlcmVkIiwib2xkQXV0aFRva2VuIiwiaXNBdXRoVG9rZW5FeHBpcmVkIiwidXBkYXRlQXV0aFRva2VuUmVxdWVzdCIsIndhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QiLCJpblByb2dyZXNzQXV0aFRva2VuIiwicmVxdWVzdFRpbWUiLCJtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeSIsInVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSIsImZldGNoQXV0aFRva2VuRnJvbVNlcnZlciIsImdldE1pc3NpbmdWYWx1ZUVycm9yIiwidmFsdWVOYW1lIiwiSU5TVEFMTEFUSU9OU19OQU1FIiwiY29uZmlnS2V5cyIsImtleU5hbWUiLCJleHRyYWN0QXBwQ29uZmlnIiwiZ2V0SWQiLCJpbnN0YWxsYXRpb25zSW1wbCIsImdldFRva2VuIiwiY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24iLCJBTkFMWVRJQ1NfVFlQRSIsIkdUQUdfVVJMIiwicHJvbWlzZUFsbFNldHRsZWQiLCJwcm9taXNlcyIsImRlZmF1bHRSZXRyeURhdGEiLCJ0aHJvdHRsZU1ldGFkYXRhIiwiZ2V0VGhyb3R0bGVNZXRhZGF0YSIsInNldFRocm90dGxlTWV0YWRhdGEiLCJtZXRhZGF0YSIsImRlbGV0ZVRocm90dGxlTWV0YWRhdGEiLCJmZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkiLCJyZXRyeURhdGEiLCJ0aW1lb3V0TWlsbGlzIiwibWVhc3VyZW1lbnRJZCIsInRocm90dGxlRW5kVGltZU1pbGxpcyIsInNpZ25hbCIsIkFuYWx5dGljc0Fib3J0U2lnbmFsIiwiYWJvcnQiLCJhdHRlbXB0RmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5IiwiYXBwRmllbGRzIiwiX2IiLCJiYWNrb2ZmTWlsbGlzIiwibWF4IiwidGltZW91dCIsImNsZWFyVGltZW91dCIsInNldEFib3J0YWJsZVRpbWVvdXQiLCJhcHBVcmwiLCJlcnJvck1lc3NhZ2UiLCJqc29uUmVzcG9uc2UiLCJfaWdub3JlZCIsImh0dHBTdGF0dXMiLCJyZXNwb25zZU1lc3NhZ2UiLCJmZXRjaER5bmFtaWNDb25maWciLCJpc1JldHJpYWJsZUVycm9yIiwibGlzdGVuZXJzIiwibGlzdGVuZXIiLCJkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCIsImRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0IiwiX2luaXRpYWxpemVBbmFseXRpY3MiLCJkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IiwibWVhc3VyZW1lbnRJZFRvQXBwSWQiLCJndGFnQ29yZSIsImRhdGFMYXllck5hbWUiLCJkeW5hbWljQ29uZmlnUHJvbWlzZSIsImZpZFByb21pc2UiLCJlcnJvckluZm8iLCJ0b1N0cmluZyIsInZhbGlkYXRlSW5kZXhlZERCIiwiZW52SXNWYWxpZCIsImR5bmFtaWNDb25maWciLCJzY3JpcHRUYWdzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0YWciLCJmaW5kR3RhZ1NjcmlwdE9uUGFnZSIsInNjcmlwdCIsImhlYWQiLCJpbnNlcnRTY3JpcHRUYWciLCJjb25maWdQcm9wZXJ0aWVzIiwiQW5hbHl0aWNzU2VydmljZSIsImluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAiLCJndGFnQ29yZUZ1bmN0aW9uIiwid3JhcHBlZEd0YWdGdW5jdGlvbiIsImdsb2JhbEluaXREb25lIiwiZmFjdG9yeSIsIm1pc21hdGNoZWRFbnZNZXNzYWdlcyIsInJ1bnRpbWUiLCJjaHJvbWUiLCJicm93c2VyIiwiY29va2llRW5hYmxlZCIsImRldGFpbHMiLCJlcnIiLCJ3YXJuT25Ccm93c2VyQ29udGV4dE1pc21hdGNoIiwiZGF0YUxheWVyIiwiZ2V0T3JDcmVhdGVEYXRhTGF5ZXIiLCJ3cmFwcGVkR3RhZyIsImd0YWdGdW5jdGlvbk5hbWUiLCJfYXJncyIsImFyZ3VtZW50cyIsImNvbW1hbmQiLCJpZE9yTmFtZU9yUGFyYW1zIiwiZ3RhZ1BhcmFtcyIsImluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IiLCJnYVNlbmRUb0xpc3QiLCJkeW5hbWljQ29uZmlnUmVzdWx0cyIsInNlbmRUb0lkIiwiZm91bmRDb25maWciLCJpbml0aWFsaXphdGlvblByb21pc2UiLCJndGFnT25FdmVudCIsImNvcnJlc3BvbmRpbmdBcHBJZCIsImd0YWdPbkNvbmZpZyIsIndyYXBHdGFnIiwid3JhcE9yQ3JlYXRlR3RhZyIsImxvZ0V2ZW50IiwiYW5hbHl0aWNzSW5zdGFuY2UiLCJldmVudE5hbWUiLCJldmVudFBhcmFtcyIsImd0YWdGdW5jdGlvbiIsImdsb2JhbCIsImxvZ0V2ZW50JDEiLCJ1dWlkIiwidXNlclNvdXJjZSIsImNsYXQiLCJjbG9uIiwiZ2FuYSIsImxhdGxvbmciLCJjaXR5IiwicmVnaW9uIiwiY291bnRyeSIsImdldEFwcExhbmd1YWdlRnJvbURhdGFVUkwiLCJhcHBUeXBlIiwiZ2V0QXBwVHlwZUZyb21EYXRhVVJMIiwic2VuZEFuc3dlcmVkIiwidGhlUSIsInRoZUEiLCJlbGFwc2VkIiwiYW5zIiwiaXNjb3JyZWN0IiwiYnVja2V0IiwiY29ycmVjdCIsImFuc3dlck5hbWUiLCJldmVudFN0cmluZyIsInFOYW1lIiwiYU51bSIsImNsVXNlcklkIiwibGF0IiwibG9uIiwibGFuZ3VhZ2UiLCJkdCIsInF1ZXN0aW9uX251bWJlciIsInFOdW1iZXIiLCJxVGFyZ2V0IiwicXVlc3Rpb24iLCJzZWxlY3RlZF9hbnN3ZXIiLCJzZW5kQnVja2V0IiwidGIiLCJwYXNzZWQiLCJibiIsImJ1Y2tldElEIiwiYnRyaWVkIiwibnVtVHJpZWQiLCJiY29ycmVjdCIsIm51bUNvcnJlY3QiLCJidWNrZXROdW1iZXIiLCJudW1iZXJUcmllZEluQnVja2V0IiwibnVtYmVyQ29ycmVjdEluQnVja2V0IiwicGFzc2VkQnVja2V0Iiwic2VuZEZpbmlzaGVkIiwiYnVja2V0cyIsImJhc2FsQnVja2V0SUQiLCJ0ZXN0ZWQiLCJnZXRCYXNhbEJ1Y2tldElEIiwiY2VpbGluZ0J1Y2tldElEIiwiZ2V0Q2VpbGluZ0J1Y2tldElEIiwic2NvcmUiLCJjYWxjdWxhdGVTY29yZSIsIm1heFNjb3JlIiwiYmFzYWxCdWNrZXQiLCJjZWlsaW5nQnVja2V0IiwiYW5hbHl0aWNzT3B0aW9ucyIsImFuYWx5dGljcyIsInJlYXNvbiIsIkJhc2VRdWl6Iiwib25FbmQiLCJTaG93RW5kIiwidW5pdHlCcmlkZ2UiLCJTZW5kQ2xvc2UiLCJzZWFyY2hTdGFnZSIsIlN1cnZleSIsInN0YXJ0U3VydmV5IiwiUmVhZHlGb3JOZXh0IiwiZ2V0TmV4dFF1ZXN0aW9uIiwib25RdWVzdGlvbkVuZCIsIlNldEZlZWRiYWNrVmlzaWJpbGUiLCJjdXJyZW50UXVlc3Rpb25JbmRleCIsIkhhc1F1ZXN0aW9uc0xlZnQiLCJUcnlBbnN3ZXIiLCJhbnN3ZXIiLCJBZGRTdGFyIiwiYnVpbGRRdWVzdGlvbkxpc3QiLCJmZXRjaFN1cnZleVF1ZXN0aW9ucyIsIlNldEJ1dHRvblByZXNzQWN0aW9uIiwiU2V0U3RhcnRBY3Rpb24iLCJSdW4iLCJQcmVwYXJlQXVkaW9BbmRJbWFnZXNGb3JTdXJ2ZXkiLCJHZXREYXRhVVJMIiwiU2VuZExvYWRlZCIsInNvcnRlZEFycmF5VG9CU1QiLCJzdGFydCIsImVuZCIsIm1pZGRsZSIsIm50Tm9kZSIsImxlZnQiLCJyaWdodCIsIkFzc2Vzc21lbnQiLCJzdGFydEFzc2Vzc21lbnQiLCJidWlsZEJ1Y2tldHMiLCJyZXMiLCJmZXRjaEFzc2Vzc21lbnRCdWNrZXRzIiwibnVtQnVja2V0cyIsImJ1Y2tldEFycmF5Iiwicm9vdCIsImN1cnJlbnROb2RlIiwidHJ5TW92ZUJ1Y2tldCIsImluaXRCdWNrZXQiLCJjdXJyZW50QnVja2V0IiwidXNlZEl0ZW1zIiwibnVtQ29uc2VjdXRpdmVXcm9uZyIsImN1cnJlbnRRdWVzdGlvbiIsInF1ZXN0aW9uRW5kVGltZW91dCIsImVuZE9wZXJhdGlvbnMiLCJDaGFuZ2VTdGFySW1hZ2VBZnRlckFuaW1hdGlvbiIsInRhcmdldEl0ZW0iLCJmb2lsMSIsImZvaWwyIiwiZm9pbDMiLCJhbnN3ZXJPcHRpb25zIiwicXVlc3Rpb25OdW1iZXIiLCJpdGVtVGV4dCIsIm5CdWNrZXQiLCJQcmVsb2FkQnVja2V0IiwiaGFzUXVlc3Rpb25zTGVmdCIsIlByb2dyZXNzQ2hlc3QiLCJhcHBsaW5rIiwiVW5pdHlCcmlkZ2UiLCJVbml0eSIsInVuaXR5UmVmZXJlbmNlIiwiU2VuZE1lc3NhZ2UiLCJuIiwidCIsInIiLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJiaW5kIiwibyIsImhyZWYiLCJVUkwiLCJmIiwicyIsInYiLCJubiIsInRuIiwicm4iLCJlbiIsIm9uIiwidW4iLCJhbiIsImNuIiwiaW5zdGFsbGluZyIsInNjcmlwdFVSTCIsInNuIiwicGVyZm9ybWFuY2UiLCJ2biIsImhuIiwibG4iLCJzdGF0ZSIsInN3IiwiaXNFeHRlcm5hbCIsIm9yaWdpbmFsRXZlbnQiLCJtbiIsImlzVXBkYXRlIiwiZGlzcGF0Y2hFdmVudCIsInduIiwid2FpdGluZyIsImRuIiwic2VydmljZVdvcmtlciIsImNvbnRyb2xsZXIiLCJnbiIsInBvcnRzIiwic291cmNlIiwiZ2V0U1ciLCJfX3Byb3RvX18iLCJsIiwidyIsInJlZ2lzdGVyIiwiaW1tZWRpYXRlIiwicmVhZHlTdGF0ZSIsIkJvb2xlYW4iLCJ5biIsInBuIiwib25jZSIsIndhc1dhaXRpbmdCZWZvcmVSZWdpc3RlciIsIm1lc3NhZ2VTVyIsIm1lc3NhZ2VTa2lwV2FpdGluZyIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImRlZmluZVByb3BlcnR5IiwiUG4iLCJTbiIsImxvYWRpbmdTY3JlZW4iLCJoYW5kbGVTZXJ2aWNlV29ya2VyTWVzc2FnZSIsIm1zZyIsInByb2dyZXNzVmFsdWUiLCJwcm9ncmVzc0JhciIsIndpZHRoIiwiU2V0Q29udGVudExvYWRlZCIsInNldEl0ZW0iLCJib29rTmFtZSIsIkFuZHJvaWQiLCJpc0NvbnRlbnRDYWNoZWQiLCJjYWNoZWRTdGF0dXMiLCJyZWFkTGFuZ3VhZ2VEYXRhRnJvbUNhY2hlQW5kTm90aWZ5QW5kcm9pZEFwcCIsImhhbmRsZUxvYWRpbmdNZXNzYWdlIiwicHJvZ3Jlc3MiLCJ0ZXh0IiwiY29uZmlybSIsInJlbG9hZCIsImhhbmRsZVVwZGF0ZUZvdW5kTWVzc2FnZSIsImxhbmciLCJjYWNoZU1vZGVsIiwiY29udGVudEZpbGVQYXRoIiwiYXVkaW9WaXN1YWxSZXNvdXJjZXMiLCJzZXRBcHBOYW1lIiwic2V0Q29udGVudEZpbGVQYXRoIiwic2V0QXVkaW9WaXN1YWxSZXNvdXJjZXMiLCJhZGRJdGVtVG9BdWRpb1Zpc3VhbFJlc291cmNlcyIsImZhbmFseXRpY3MiLCJhbmFseXRpY3NQcm92aWRlciIsImluaXRpYWxpemVBbmFseXRpY3MiLCJnZXRBbmFseXRpY3MiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJzcGluVXAiLCJmZXRjaEFwcERhdGEiLCJTZXRGZWVkYmFja1RleHQiLCJnYW1lIiwiYXVkaW9JdGVtVVJMIiwibmV3VXVpZCIsIm5ld1VzZXJTb3VyY2UiLCJudXVpZCIsIm5ld2dhbmEiLCJkYXRhdXJsIiwiZ2V0VXNlclNvdXJjZSIsInN0YXR1c1RleHQiLCJsb2MiLCJscGllY2VzIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJ1c2VyIiwic2VuZExvY2F0aW9uIiwic2VuZEluaXQiLCJyZWdpc3RlclNlcnZpY2VXb3JrZXIiLCJyZWdpc3RyYXRpb24iLCJoYW5kbGVTZXJ2aWNlV29ya2VyUmVnaXN0YXRpb24iLCJyZWFkeSIsImFwcERhdGEiXSwic291cmNlUm9vdCI6IiJ9