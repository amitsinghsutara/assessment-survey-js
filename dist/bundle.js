/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={};function t(){var e=n().get("data");return null==e&&(console.log("default data file"),e="zulu-lettersounds"),e}function n(){const e=window.location.search;return new URLSearchParams(e)}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var i=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function r(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((i=i.apply(e,t||[])).next())}))};function s(e){return"/data/"+e+".json"}function a(e){return i(this,void 0,void 0,(function*(){var t=s(e);return fetch(t).then((e=>e.json()))}))}class o{constructor(){this.imageToCache=[],this.wavToCache=[],this.allAudios={},this.allImages={},this.dataURL="",this.correctSoundPath="dist/audio/Correct.wav",this.feedbackAudio=null,this.correctAudio=null}init(){this.feedbackAudio=new Audio,this.feedbackAudio.src=this.correctSoundPath,this.correctAudio=new Audio}static PrepareAudioAndImagesForSurvey(e,t){o.getInstance().dataURL=t;const n="audio/"+o.getInstance().dataURL+"/answer_feedback.mp3";for(var i in o.getInstance().wavToCache.push(n),o.getInstance().correctAudio.src=n,e){let t=e[i];for(var s in null!=t.promptAudio&&o.FilterAndAddAudioToAllAudios(t.promptAudio),null!=t.promptImg&&o.AddImageToAllImages(t.promptImg),t.answers){let e=t.answers[s];null!=e.answerImg&&o.AddImageToAllImages(e.answerImg)}}console.log(o.getInstance().allAudios),console.log(o.getInstance().allImages)}static AddImageToAllImages(e){console.log("Add image: "+e);let t=new Image;t.src=e,o.getInstance().allImages[e]=t}static FilterAndAddAudioToAllAudios(e){console.log("Adding audio: "+e),e.includes(".wav")?e=e.replace(".wav",".mp3"):e.includes(".mp3")||(e=e.trim()+".mp3"),console.log("Filtered: "+e);let t=new Audio;["luganda"].includes(o.getInstance().dataURL.split("-")[0]),t.src="audio/"+o.getInstance().dataURL+"/"+e,o.getInstance().allAudios[e]=t,console.log(t.src)}static PreloadBucket(e,t){for(var n in o.getInstance().dataURL=t,o.getInstance().correctAudio.src="audio/"+o.getInstance().dataURL+"/answer_feedback.mp3",e.items){var i=e.items[n];o.FilterAndAddAudioToAllAudios(i.itemName)}}static PlayAudio(e,t,n){console.log("trying to play "+e),e.includes(".mp3")?".mp3"!=e.slice(-4)&&(e=e.trim()+".mp3"):e=e.trim()+".mp3",console.log("Pre play all audios: "),console.log(o.getInstance().allAudios),new Promise(((t,i)=>{const s=o.getInstance().allAudios[e];s?(s.addEventListener("play",(()=>{void 0!==n&&n(!0)})),s.addEventListener("ended",(()=>{void 0!==n&&n(!1),t()})),s.play().catch((e=>{console.error("Error playing audio:",e),t()}))):(console.warn("Audio file not found:",e),t())})).then((()=>{void 0!==t&&t()})).catch((e=>{console.error("Promise error:",e)}))}static GetImage(e){return o.getInstance().allImages[e]}static PlayDing(){o.getInstance().feedbackAudio.play()}static PlayCorrect(){o.getInstance().correctAudio.play()}static getInstance(){return null==o.instance&&(o.instance=new o,o.instance.init()),o.instance}}function r(e){return e[Math.floor(Math.random()*e.length)]}function c(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}o.instance=null;class l{constructor(){this.landingContainerId="landWrap",this.gameContainerId="gameWrap",this.endContainerId="endWrap",this.starContainerId="starWrapper",this.chestContainerId="chestWrapper",this.questionsContainerId="qWrap",this.feedbackContainerId="feedbackWrap",this.answersContainerId="aWrap",this.answerButton1Id="answerButton1",this.answerButton2Id="answerButton2",this.answerButton3Id="answerButton3",this.answerButton4Id="answerButton4",this.answerButton5Id="answerButton5",this.answerButton6Id="answerButton6",this.playButtonId="pbutton",this.chestImgId="chestImage",this.nextQuestion=null,this.contentLoaded=!1,this.shown=!1,this.stars=[],this.starPositions=Array(),this.qAnsNum=0,this.buttons=[],this.buttonsActive=!1}init(){this.landingContainer=document.getElementById(this.landingContainerId),this.gameContainer=document.getElementById(this.gameContainerId),this.endContainer=document.getElementById(this.endContainerId),this.starContainer=document.getElementById(this.starContainerId),this.chestContainer=document.getElementById(this.chestContainerId),this.questionsContainer=document.getElementById(this.questionsContainerId),this.feedbackContainer=document.getElementById(this.feedbackContainerId),this.answersContainer=document.getElementById(this.answersContainerId),this.answerButton1=document.getElementById(this.answerButton1Id),this.answerButton2=document.getElementById(this.answerButton2Id),this.answerButton3=document.getElementById(this.answerButton3Id),this.answerButton4=document.getElementById(this.answerButton4Id),this.answerButton5=document.getElementById(this.answerButton5Id),this.answerButton6=document.getElementById(this.answerButton6Id),this.playButton=document.getElementById(this.playButtonId),this.chestImg=document.getElementById(this.chestImgId),this.initializeStars(),this.initEventListeners()}initializeStars(){for(let e=0;e<20;e++){const t=document.createElement("img");t.id="star"+e,t.classList.add("topstarv"),this.starContainer.appendChild(t),this.starContainer.innerHTML+="",9==e&&(this.starContainer.innerHTML+="<br>"),this.stars.push(e)}c(this.stars)}static OverlappingOtherStars(e,t,n,i){if(e.length<1)return!1;for(let s=0;s<e.length;s++){const a=e[s].x-t,o=e[s].y-n;if(Math.sqrt(a*a+o*o)<i)return!0}return!1}initEventListeners(){this.answerButton1.addEventListener("click",(()=>{this.answerButtonPress(1)})),this.buttons.push(this.answerButton1),this.answerButton2.addEventListener("click",(()=>{this.answerButtonPress(2)})),this.buttons.push(this.answerButton2),this.answerButton3.addEventListener("click",(()=>{this.answerButtonPress(3)})),this.buttons.push(this.answerButton3),this.answerButton4.addEventListener("click",(()=>{this.answerButtonPress(4)})),this.buttons.push(this.answerButton4),this.answerButton5.addEventListener("click",(()=>{this.answerButtonPress(5)})),this.buttons.push(this.answerButton5),this.answerButton6.addEventListener("click",(()=>{this.answerButtonPress(6)})),this.buttons.push(this.answerButton6),this.landingContainer.addEventListener("click",(()=>{localStorage.getItem(t())&&this.showGame()}))}showOptions(){if(!l.getInstance().shown){const e=l.getInstance().nextQuestion,t=l.getInstance().buttons;let n=220;const i=150;l.getInstance().shown=!0;let s=0;t.forEach((e=>{e.style.visibility="hidden",e.style.animation=""})),setTimeout((()=>{for(let i=0;i<e.answers.length;i++){const a=e.answers[i],r=t[i];r.innerHTML="answerText"in a?a.answerText:"",r.style.visibility="hidden",r.style.boxShadow="0px 0px 0px 0px rgba(0,0,0,0)",setTimeout((()=>{if(r.style.visibility="visible",r.style.boxShadow="0px 6px 8px #606060",r.style.animation=`zoomIn ${n}ms ease forwards`,"answerImg"in a){const e=o.GetImage(a.answerImg);r.appendChild(e)}r.addEventListener("animationend",(()=>{s++,s===e.answers.length&&l.getInstance().enableAnswerButton()}))}),i*n*.3)}}),i),l.getInstance().qStart=Date.now()}}enableAnswerButton(){l.getInstance().buttonsActive=!0}static SetFeedbackText(e){console.log("Feedback text set to "+e),l.getInstance().feedbackContainer.innerHTML=e}showLanding(){this.landingContainer.style.display="flex",this.gameContainer.style.display="none",this.endContainer.style.display="none"}static ShowEnd(){l.getInstance().landingContainer.style.display="none",l.getInstance().gameContainer.style.display="none",l.getInstance().endContainer.style.display="flex"}showGame(){this.landingContainer.style.display="none",this.gameContainer.style.display="grid",this.endContainer.style.display="none",this.allStart=Date.now(),this.startPressCallback()}static SetFeedbackVisibile(e){e?(l.getInstance().feedbackContainer.classList.remove("hidden"),l.getInstance().feedbackContainer.classList.add("visible"),o.PlayCorrect(),l.getInstance().buttonsActive=!1):(l.getInstance().feedbackContainer.classList.remove("visible"),l.getInstance().feedbackContainer.classList.add("hidden"),l.getInstance().buttonsActive=!1)}static ReadyForNext(e){for(var t in console.log("ready for next!"),l.getInstance().answersContainer.style.visibility="hidden",l.getInstance().buttons)l.getInstance().buttons[t].style.visibility="hidden";l.getInstance().shown=!1,l.getInstance().nextQuestion=e,l.getInstance().questionsContainer.innerHTML="",l.getInstance().questionsContainer.style.display="none",l.getInstance().playButton.innerHTML="<button id='nextqButton'><img class=audio-button width='100px' height='100px' src='/img/SoundButton_Idle.png' type='image/svg+xml'> </img></button>",document.getElementById("nextqButton").addEventListener("click",(function(){l.ShowQuestion(),o.PlayAudio(e.promptAudio,l.getInstance().showOptions,l.ShowAudioAnimation)}))}static ShowAudioAnimation(e=!1){l.getInstance().playButton.querySelector("img").src=e?"animation/SoundButton.gif":"/img/SoundButton_Idle.png"}static ShowQuestion(e){l.getInstance().playButton.innerHTML="<button id='nextqButton'><img class=audio-button width='100px' height='100px' src='/img/SoundButton_Idle.png' type='image/svg+xml'> </img></button>",document.getElementById("nextqButton").addEventListener("click",(function(){console.log("next question button pressed"),console.log(e.promptAudio),"promptAudio"in e&&o.PlayAudio(e.promptAudio,void 0,l.ShowAudioAnimation)})),l.getInstance().answersContainer.style.visibility="visible";let t="";if(l.getInstance().questionsContainer.innerHTML="",void 0===e&&(e=l.getInstance().nextQuestion),"promptImg"in e){var n=o.GetImage(e.promptImg);l.getInstance().questionsContainer.appendChild(n)}for(var i in t+=e.promptText,t+="<BR>",l.getInstance().questionsContainer.innerHTML+=t,l.getInstance().buttons)l.getInstance().buttons[i].style.visibility="hidden"}static AddStar(){var e=document.getElementById("star"+l.getInstance().stars[l.getInstance().qAnsNum]);e.src="../animation/Star.gif",e.classList.add("topstarv"),e.classList.remove("topstarh"),e.style.position="absolute";let t=l.instance.starContainer.offsetWidth,n=l.instance.starContainer.offsetHeight;console.log("Stars Container dimensions: ",t,n);let i=0,s=0;do{i=Math.floor(Math.random()*(t-60)),s=Math.floor(Math.random()*n)}while(l.OverlappingOtherStars(l.instance.starPositions,i,s,30));e.style.transform="scale(10)",e.style.transition="top 1s ease, left 1s ease, transform 0.5s ease",e.style.zIndex="500",e.style.top=window.innerHeight/2+"px",e.style.left=l.instance.gameContainer.offsetWidth/2-e.offsetWidth/2+"px",setTimeout((()=>{if(e.style.transition="top 2s ease, left 2s ease, transform 2s ease",i<t/2){const t=5+8*Math.random();console.log("Rotating star to the right",t),e.style.transform="rotate(-"+t+"deg) scale(1)"}else{const t=5+8*Math.random();console.log("Rotating star to the left",t),e.style.transform="rotate("+t+"deg) scale(1)"}e.style.left=20+i+"px",e.style.top=60+s+"px",setTimeout((()=>{e.style.filter="drop-shadow(0px 0px 10px yellow)"}),1900)}),1e3),l.instance.starPositions.push({x:i,y:s}),l.getInstance().qAnsNum+=1}static ChangeStarImageAfterAnimation(){document.getElementById("star"+l.getInstance().stars[l.getInstance().qAnsNum-1]).src="../img/star_after_animation.gif"}answerButtonPress(e){const t=this.buttons.every((e=>"visible"===e.style.visibility));if(console.log(this.buttonsActive,t),!0===this.buttonsActive){o.PlayDing();const t=Date.now()-this.qStart;console.log("answered in "+t),this.buttonPressCallback(e,t)}}static ProgressChest(){const e=document.getElementById("chestImage");let t=e.src;console.log("Chest Progression--\x3e",e),console.log("Chest Progression--\x3e",e.src);const n=parseInt(t.slice(-6,-4),10);console.log("Chest Progression number--\x3e",n);const i=`img/chestprogression/TreasureChestOpen0${n%4+1}.svg`;e.src=i}static SetContentLoaded(e){l.getInstance().contentLoaded=e}static SetButtonPressAction(e){l.getInstance().buttonPressCallback=e}static SetStartAction(e){l.getInstance().startPressCallback=e}static getInstance(){return null===l.instance&&(l.instance=new l,l.instance.init()),l.instance}}l.instance=null;const u=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],a=t+1<e.length,o=a?e[t+1]:0,r=t+2<e.length,c=r?e[t+2]:0,l=s>>2,u=(3&s)<<4|o>>4;let d=(15&o)<<2|c>>6,h=63&c;r||(h=64,a||(d=64)),i.push(n[l],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(a>>10)),t[i++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const r=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==a||null==o||null==r)throw Error();const c=s<<2|a>>4;if(i.push(c),64!==o){const e=a<<4&240|o>>2;if(i.push(e),64!==r){const e=o<<6&192|r;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){return function(e){const t=u(e);return d.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function p(){return"object"==typeof indexedDB}function g(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}const f=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e.g)return e.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return d.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class w extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?function(e,t){return e.replace(y,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new w(i,o,n)}}const y=/\{\$([^}]+)}/g;function b(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],a=t[s];if(I(n)&&I(a)){if(!b(n,a))return!1}else if(n!==a)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function I(e){return null!==e&&"object"==typeof e}function S(e,t=1e3,n=2){const i=t*Math.pow(n,e),s=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+s)}function B(e){return e&&e._delegate?e._delegate:e}class k{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const C="[DEFAULT]";class A{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:C})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===C?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:C:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class E{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new A(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const L=[];var T;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(T||(T={}));const D={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},M=T.INFO,N={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},R=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=N[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class P{constructor(e){this.name=e,this._logLevel=M,this._logHandler=R,this._userLogHandler=null,L.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in T))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?D[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,...e),this._logHandler(this,T.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,...e),this._logHandler(this,T.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,T.INFO,...e),this._logHandler(this,T.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,T.WARN,...e),this._logHandler(this,T.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,T.ERROR,...e),this._logHandler(this,T.ERROR,...e)}}let x,F;const U=new WeakMap,O=new WeakMap,j=new WeakMap,V=new WeakMap,$=new WeakMap;let q={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return O.get(e);if("objectStoreNames"===t)return e.objectStoreNames||j.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return W(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function H(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(F||(F=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(z(this),e),W(U.get(this))}:function(...e){return W(t.apply(z(this),e))}:function(e,...n){const i=t.call(z(this),e,...n);return j.set(i,e.sort?e.sort():[e]),W(i)}:(e instanceof IDBTransaction&&function(e){if(O.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)}));O.set(e,t)}(e),n=e,(x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,q):e);var t,n}function W(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(W(e.result)),i()},a=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&U.set(t,e)})).catch((()=>{})),$.set(t,e),t}(e);if(V.has(e))return V.get(e);const t=H(e);return t!==e&&(V.set(e,t),$.set(t,e)),t}const z=e=>$.get(e);function G(e,t,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){const o=indexedDB.open(e,t),r=W(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(W(o.result),e.oldVersion,e.newVersion,W(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),r.then((e=>{a&&e.addEventListener("close",(()=>a())),s&&e.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),r}const Q=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],J=new Map;function X(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(J.get(t))return J.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=K.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!Q.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,s?"readwrite":"readonly");let o=a.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&a.done]))[0]};return J.set(t,a),a}var Y;Y=q,q={...Y,get:(e,t,n)=>X(e,t)||Y.get(e,t,n),has:(e,t)=>!!X(e,t)||Y.has(e,t)};class Z{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ee="@firebase/app",te="0.8.2",ne=new P("@firebase/app"),ie="[DEFAULT]",se={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ae=new Map,oe=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){ne.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ce(e){const t=e.name;if(oe.has(t))return ne.debug(`There were multiple attempts to register component ${t}.`),!1;oe.set(t,e);for(const t of ae.values())re(t,e);return!0}function le(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ue=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class de{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new k("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ue.create("app-deleted",{appName:this._name})}}function he(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:ie,automaticDataCollectionEnabled:!1},t),s=i.name;if("string"!=typeof s||!s)throw ue.create("bad-app-name",{appName:String(s)});var a;if(n||(n=null===(a=f())||void 0===a?void 0:a.config),!n)throw ue.create("no-options");const o=ae.get(s);if(o){if(b(n,o.options)&&b(i,o.config))return o;throw ue.create("duplicate-app",{appName:s})}const r=new E(s);for(const e of oe.values())r.addComponent(e);const c=new de(n,i,r);return ae.set(s,c),c}function pe(e,t,n){var i;let s=null!==(i=se[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=[`Unable to register library "${s}" with version "${t}":`];return a&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ne.warn(e.join(" "))}ce(new k(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const ge="firebase-heartbeat-store";let fe=null;function me(){return fe||(fe=G("firebase-heartbeat-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(ge)}}).catch((e=>{throw ue.create("idb-open",{originalErrorMessage:e.message})}))),fe}async function we(e,t){var n;try{const n=(await me()).transaction(ge,"readwrite"),i=n.objectStore(ge);return await i.put(t,ve(e)),n.done}catch(e){if(e instanceof w)ne.warn(e.message);else{const t=ue.create("idb-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message});ne.warn(t.message)}}}function ve(e){return`${e.name}!${e.options.appId}`}class ye{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ie(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=be();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=be(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),Se(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Se(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=h(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function be(){return(new Date).toISOString().substring(0,10)}class Ie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!p()&&g().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){var t;try{return(await me()).transaction(ge).objectStore(ge).get(ve(e))}catch(e){if(e instanceof w)ne.warn(e.message);else{const n=ue.create("idb-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message});ne.warn(n.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return we(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return we(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Se(e){return h(JSON.stringify({version:2,heartbeats:e})).length}ce(new k("platform-logger",(e=>new Z(e)),"PRIVATE")),ce(new k("heartbeat",(e=>new ye(e)),"PRIVATE")),pe(ee,te,""),pe(ee,te,"esm2017"),pe("fire-js","");const Be="@firebase/installations",ke="0.5.15",Ce="w:0.5.15",Ae=new v("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ee(e){return e instanceof w&&e.code.includes("request-failed")}function Le({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Te(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function De(e,t){const n=(await t.json()).error;return Ae.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Me({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function _e(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Ne(e){return new Promise((t=>{setTimeout(t,e)}))}const Re=/^[cdef][\w-]{21}$/;function Pe(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return Re.test(t)?t:""}catch(e){return""}}function xe(e){return`${e.appName}!${e.appId}`}const Fe=new Map;function Ue(e,t){const n=xe(e);Oe(n,t),function(e,t){const n=(!je&&"BroadcastChannel"in self&&(je=new BroadcastChannel("[Firebase] FID Change"),je.onmessage=e=>{Oe(e.data.key,e.data.fid)}),je);n&&n.postMessage({key:e,fid:t}),0===Fe.size&&je&&(je.close(),je=null)}(n,t)}function Oe(e,t){const n=Fe.get(e);if(n)for(const e of n)e(t)}let je=null;const Ve="firebase-installations-store";let $e=null;function qe(){return $e||($e=G("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Ve)}})),$e}async function He(e,t){const n=xe(e),i=(await qe()).transaction(Ve,"readwrite"),s=i.objectStore(Ve),a=await s.get(n);return await s.put(t,n),await i.done,a&&a.fid===t.fid||Ue(e,t.fid),t}async function We(e){const t=xe(e),n=(await qe()).transaction(Ve,"readwrite");await n.objectStore(Ve).delete(t),await n.done}async function ze(e,t){const n=xe(e),i=(await qe()).transaction(Ve,"readwrite"),s=i.objectStore(Ve),a=await s.get(n),o=t(a);return void 0===o?await s.delete(n):await s.put(o,n),await i.done,!o||a&&a.fid===o.fid||Ue(e,o.fid),o}async function Ge(e){let t;const n=await ze(e.appConfig,(n=>{const i=function(e){return Je(e||{fid:Pe(),registrationStatus:0})}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Ae.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Le(e),s=Me(e),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:Ce},r={method:"POST",headers:s,body:JSON.stringify(o)},c=await _e((()=>fetch(i,r)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Te(e.authToken)}}throw await De("Create Installation",c)}(e,t);return He(e.appConfig,n)}catch(n){throw Ee(n)&&409===n.customData.serverCode?await We(e.appConfig):await He(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Qe(e)}:{installationEntry:t}}(e,i);return t=s.registrationPromise,s.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Qe(e){let t=await Ke(e.appConfig);for(;1===t.registrationStatus;)await Ne(100),t=await Ke(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Ge(e);return n||t}return t}function Ke(e){return ze(e,(e=>{if(!e)throw Ae.create("installation-not-found");return Je(e)}))}function Je(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Xe({appConfig:e,heartbeatServiceProvider:t},n){const i=function(e,{fid:t}){return`${Le(e)}/${t}/authTokens:generate`}(e,n),s=function(e,{refreshToken:t}){const n=Me(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}(e,n),a=t.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Ce,appId:e.appId}},r={method:"POST",headers:s,body:JSON.stringify(o)},c=await _e((()=>fetch(i,r)));if(c.ok)return Te(await c.json());throw await De("Generate Auth Token",c)}async function Ye(e,t=!1){let n;const i=await ze(e.appConfig,(i=>{if(!et(i))throw Ae.create("not-registered");const s=i.authToken;if(!t&&(2===(a=s).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(a)))return i;var a;if(1===s.requestStatus)return n=async function(e,t){let n=await Ze(e.appConfig);for(;1===n.authToken.requestStatus;)await Ne(100),n=await Ze(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Ye(e,t):i}(e,t),i;{if(!navigator.onLine)throw Ae.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return n=async function(e,t){try{const n=await Xe(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await He(e.appConfig,i),n}catch(n){if(!Ee(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await He(e.appConfig,n)}else await We(e.appConfig);throw n}}(e,t),t}}));return n?await n:i.authToken}function Ze(e){return ze(e,(e=>{if(!et(e))throw Ae.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}function et(e){return void 0!==e&&2===e.registrationStatus}function tt(e){return Ae.create("missing-app-config-values",{valueName:e})}const nt="installations";ce(new k(nt,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw tt("App Configuration");if(!e.name)throw tt("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw tt(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:le(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),ce(new k("installations-internal",(e=>{const t=le(e.getProvider("app").getImmediate(),nt).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Ge(t);return i?i.catch(console.error):Ye(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await Ge(e);t&&await t}(n),(await Ye(n,t)).token}(t,e)}}),"PRIVATE")),pe(Be,ke),pe(Be,ke,"esm2017");const it="analytics",st="https://www.googletagmanager.com/gtag/js",at=new P("@firebase/analytics");function ot(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}const rt=new v("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ct=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function lt(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ut(e,t=ct,n){const{appId:i,apiKey:s,measurementId:a}=e.options;if(!i)throw rt.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:i};throw rt.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},r=new ht;return setTimeout((async()=>{r.abort()}),void 0!==n?n:6e4),dt({appId:i,apiKey:s,measurementId:a},o,r,t)}async function dt(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=ct){var a,o;const{appId:r,measurementId:c}=e;try{await function(e,t){return new Promise(((n,i)=>{const s=Math.max(t-Date.now(),0),a=setTimeout(n,s);e.addEventListener((()=>{clearTimeout(a),i(rt.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(i,t)}catch(e){if(c)return at.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null===(a=e)||void 0===a?void 0:a.message}]`),{appId:r,measurementId:c};throw e}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,s={method:"GET",headers:lt(i)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(a,s);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}throw rt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(r),t}catch(t){const a=t;if(!function(e){if(!(e instanceof w&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(a)){if(s.deleteThrottleMetadata(r),c)return at.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==a?void 0:a.message}]`),{appId:r,measurementId:c};throw t}const l=503===Number(null===(o=null==a?void 0:a.customData)||void 0===o?void 0:o.httpStatus)?S(n,s.intervalMillis,30):S(n,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return s.setThrottleMetadata(r,u),at.debug(`Calling attemptFetch again in ${l} millis`),dt(e,u,i,s)}}class ht{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let pt,gt;async function ft(e,t,n,i,s,a,o){var r;const c=ut(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&at.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>at.error(e))),t.push(c);const l=async function(){var e;if(!p())return at.warn(rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await g()}catch(t){return at.warn(rt.create("indexeddb-unavailable",{errorInfo:null===(e=t)||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?i.getId():void 0)),[u,d]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(st)&&n.src.includes(e))return n;return null})(a)||function(e,t){const n=document.createElement("script");n.src=`${st}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(a,u.measurementId),gt&&(s("consent","default",gt),gt=void 0),s("js",new Date);const h=null!==(r=null==o?void 0:o.config)&&void 0!==r?r:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),s("config",u.measurementId,h),pt&&(s("set",pt),pt=void 0),u.measurementId}class mt{constructor(e){this.app=e}_delete(){return delete wt[this.app.options.appId],Promise.resolve()}}let wt={},vt=[];const yt={};let bt,It,St="dataLayer",Bt=!1;function kt(e,t,n){!function(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=rt.create("invalid-analytics-context",{errorInfo:t});at.warn(n.message)}}();const i=e.options.appId;if(!i)throw rt.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw rt.create("no-api-key");at.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wt[i])throw rt.create("already-exists",{id:i});if(!Bt){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,s){let a=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(a=window.gtag),window.gtag=function(e,t,n,i){return async function(s,a,o){try{"event"===s?await async function(e,t,n,i,s){try{let a=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const i=await ot(n);for(const n of e){const e=i.find((e=>e.measurementId===n)),s=e&&t[e.appId];if(!s){a=[];break}a.push(s)}}0===a.length&&(a=Object.values(t)),await Promise.all(a),e("event",i,s||{})}catch(e){at.error(e)}}(e,t,n,a,o):"config"===s?await async function(e,t,n,i,s,a){const o=i[s];try{if(o)await t[o];else{const e=(await ot(n)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(e){at.error(e)}e("config",s,a)}(e,t,n,i,a,o):"consent"===s?e("consent","update",o):e("set",a)}catch(e){at.error(e)}}}(a,e,t,n),{gtagCore:a,wrappedGtag:window.gtag}}(wt,vt,yt);It=e,bt=t,Bt=!0}return wt[i]=ft(e,vt,yt,t,bt,St,n),new mt(e)}function Ct(e,t,n,i){e=B(e),async function(e,t,n,i,s){if(s&&s.global)e("event",n,i);else{const s=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:s}))}}(It,wt[e.app.options.appId],t,n,i).catch((e=>at.error(e)))}const At="@firebase/analytics",Et="0.8.3";ce(new k(it,((e,{options:t})=>kt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),ce(new k("analytics-internal",(function(e){try{const t=e.getProvider(it).getImmediate();return{logEvent:(e,n,i)=>Ct(t,e,n,i)}}catch(e){throw rt.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),pe(At,Et),pe(At,Et,"esm2017");class Lt{constructor(){}static getInstance(){return Lt.instance||(Lt.instance=new Lt),Lt.instance}static setAssessmentType(e){Lt.assessmentType=e}static getLocation(){console.log("starting to get location"),fetch("https://ipinfo.io/json?token=b6268727178610").then((e=>{if(console.log("got location response"),!e.ok)throw Error(e.statusText);return e.json()})).then((e=>{console.log(e),Lt.latlong=e.loc;var t=Lt.latlong.split(","),n=parseFloat(t[0]).toFixed(2),i=parseFloat(t[1]).toFixed(1);return Lt.clat=n,Lt.clon=i,Lt.latlong="",t=[],Lt.sendLocation(),{}})).catch((e=>{console.warn(`location failed to update! encountered error ${e.msg}`)}))}static linkAnalytics(e,t){Lt.gana=e,Lt.dataURL=t}static setUuid(e,t){Lt.uuid=e,Lt.userSource=t}static sendInit(e,t){Lt.appVersion=e,Lt.contentVersion=t,Lt.getLocation();var n="user "+Lt.uuid+" opened the assessment";console.log(n),Ct(Lt.gana,"opened",{})}static getAppLanguageFromDataURL(e){return e&&""!==e&&e.includes("-")?e.split("-")[0]:"NotAvailable"}static getAppTypeFromDataURL(e){return e&&""!==e&&e.includes("-")?e.split("-")[1]:"NotAvailable"}static sendLocation(){var e="Sending User coordinates: "+Lt.uuid+" : "+Lt.clat+", "+Lt.clon;console.log(e),Ct(Lt.gana,"user_location",{user:Lt.uuid,lang:Lt.getAppLanguageFromDataURL(Lt.dataURL),app:Lt.getAppTypeFromDataURL(Lt.dataURL),latlong:Lt.joinLatLong(Lt.clat,Lt.clon)}),console.log("INITIALIZED EVENT SENT"),console.log("App Language: "+Lt.getAppLanguageFromDataURL(Lt.dataURL)),console.log("App Type: "+Lt.getAppTypeFromDataURL(Lt.dataURL)),console.log("App Version: "+Lt.appVersion),console.log("Content Version: "+Lt.contentVersion),Ct(Lt.gana,"initialized",{type:"initialized",clUserId:Lt.uuid,userSource:Lt.userSource,latLong:Lt.joinLatLong(Lt.clat,Lt.clon),appVersion:Lt.appVersion,contentVersion:Lt.contentVersion,app:Lt.getAppTypeFromDataURL(Lt.dataURL),lang:Lt.getAppLanguageFromDataURL(Lt.dataURL)})}static sendAnswered(e,t,n){var i=e.answers[t-1],s=null,a=null;"correct"in e&&null!=e.correct&&(s=e.correct==i.answerName),"bucket"in e&&(a=e.bucket);var o="user "+Lt.uuid+" answered "+e.qName+" with "+i.answerName;o+=", all answers were [";var r="";for(var c in e.answers)o+=e.answers[c].answerName+",",r+=e.answers[c].answerName+",";o+="] ",o+=s,o+=a,console.log(o),console.log("Answered App Version: "+Lt.appVersion),console.log("Content Version: "+Lt.contentVersion),Ct(Lt.gana,"answered",{type:"answered",clUserId:Lt.uuid,userSource:Lt.userSource,latLong:Lt.joinLatLong(Lt.clat,Lt.clon),app:Lt.getAppTypeFromDataURL(Lt.dataURL),lang:Lt.getAppLanguageFromDataURL(Lt.dataURL),dt:n,question_number:e.qNumber,target:e.qTarget,question:e.promptText,selected_answer:i.answerName,iscorrect:s,options:r,bucket:a,appVersion:Lt.appVersion,contentVersion:Lt.contentVersion})}static sendBucket(e,t){var n=e.bucketID,i=e.numTried,s=e.numCorrect,a="user "+Lt.uuid+" finished the bucket "+n+" with "+s+" correct answers out of "+i+" tried and passed: "+t;console.log(a),console.log("Bucket Completed App Version: "+Lt.appVersion),console.log("Content Version: "+Lt.contentVersion),Ct(Lt.gana,"bucketCompleted",{type:"bucketCompleted",clUserId:Lt.uuid,userSource:Lt.userSource,latLong:Lt.joinLatLong(Lt.clat,Lt.clon),app:Lt.getAppTypeFromDataURL(Lt.dataURL),lang:Lt.getAppLanguageFromDataURL(Lt.dataURL),bucketNumber:n,numberTriedInBucket:i,numberCorrectInBucket:s,passedBucket:t,appVersion:Lt.appVersion,contentVersion:Lt.contentVersion})}static sendFinished(e=null,t,n){let i="user "+Lt.uuid+" finished the assessment";console.log(i);let s=Lt.getBasalBucketID(e),a=Lt.getCeilingBucketID(e);0==s&&(s=a);let o=Lt.calculateScore(e,s);const r=100*e.length;console.log("Sending completed event"),console.log("Score: "+o),console.log("Max Score: "+r),console.log("Basal Bucket: "+s),console.log("BASAL FROM ASSESSMENT: "+t),console.log("Ceiling Bucket: "+a),console.log("CEILING FROM ASSESSMENT: "+n),console.log("Completed App Version: "+Lt.appVersion),console.log("Content Version: "+Lt.contentVersion),Lt.sendDataToThirdParty(o,Lt.uuid),Ct(Lt.gana,"completed",{type:"completed",clUserId:Lt.uuid,userSource:Lt.userSource,app:Lt.getAppTypeFromDataURL(Lt.dataURL),lang:Lt.getAppLanguageFromDataURL(Lt.dataURL),latLong:Lt.joinLatLong(Lt.clat,Lt.clon),score:o,maxScore:r,basalBucket:s,ceilingBucket:a,appVersion:Lt.appVersion,contentVersion:Lt.contentVersion})}static sendDataToThirdParty(e,t){console.log("Attempting to send score to a third party! Score: ",e);const n=new URLSearchParams(window.location.search),i=n.get("endpoint"),s=(n.get("organization"),new XMLHttpRequest);if(!i)return void console.error("No target party URL found!");const a={user:t,page:"111108121363615",event:{type:"external",value:{type:"assessment",subType:Lt.assessmentType,score:e,completed:!0}}},o=JSON.stringify(a);try{s.open("POST",i,!0),s.setRequestHeader("Content-Type","application/json"),s.onload=function(){s.status>=200&&s.status<300?console.log("POST success!"+s.responseText):console.error("Request failed with status: "+s.status)},s.send(o)}catch(e){console.error("Failed to send data to target party: ",e)}}static calculateScore(e,t){console.log("Calculating score"),console.log(e);let n=0;console.log("Basal Bucket ID: "+t);let i=0;for(const n in e){const s=e[n];if(s.bucketID==t){i=s.numCorrect;break}}return console.log("Num Correct: "+i," basal: "+t," buckets: "+e.length),t===e.length&&i>=4?(console.log("Perfect score"),100*e.length):(n=0|Math.round(100*(t-1)+i/5*100),n)}static getBasalBucketID(e){let t=0;for(const n in e){const i=e[n];i.tested&&!i.passed&&(0==t||i.bucketID<t)&&(t=i.bucketID)}return t}static getCeilingBucketID(e){let t=0;for(const n in e){const i=e[n];i.tested&&i.passed&&(0==t||i.bucketID>t)&&(t=i.bucketID)}return t}static joinLatLong(e,t){return e+","+t}}class Tt{constructor(){this.devModeAvailable=!1,this.isInDevMode=!1,this.devModeToggleButtonContainerId="devModeModalToggleButtonContainer",this.devModeToggleButtonId="devModeModalToggleButton",this.devModeModalId="devModeSettingsModal",this.devModeBucketGenSelectId="devModeBucketGenSelect",this.toggleDevModeModal=()=>{"block"==this.devModeSettingsModal.style.display?this.devModeSettingsModal.style.display="none":this.devModeSettingsModal.style.display="block"},this.isInDevMode=window.location.href.includes("localhost")||window.location.href.includes("assessmentdev"),this.devModeToggleButtonContainer=document.getElementById(this.devModeToggleButtonContainerId),this.devModeSettingsModal=document.getElementById(this.devModeModalId),this.devModeBucketGenSelect=document.getElementById(this.devModeBucketGenSelectId),this.devModeBucketGenSelect.onchange=e=>{this.handleBucketGenModeChange(e)},this.devModeToggleButton=document.getElementById(this.devModeToggleButtonId),this.devModeToggleButton.onclick=this.toggleDevModeModal}onEnd(){l.ShowEnd(),this.app.unityBridge.SendClose()}}var Dt,Mt;class _t extends Tt{constructor(e,t){super(),this.handleBucketGenModeChange=()=>{console.log("Bucket Gen Mode Changed")},this.startSurvey=()=>{l.ReadyForNext(this.getNextQuestion())},this.onQuestionEnd=()=>{l.SetFeedbackVisibile(!1),this.currentQuestionIndex+=1,setTimeout((()=>{this.HasQuestionsLeft()?l.ReadyForNext(this.getNextQuestion()):(console.log("There are no questions left."),this.onEnd())}),500)},this.TryAnswer=(e,t)=>{Lt.sendAnswered(this.questionsData[this.currentQuestionIndex],e,t),l.SetFeedbackVisibile(!0),l.AddStar(),setTimeout((()=>{this.onQuestionEnd()}),2e3)},this.buildQuestionList=()=>function(e){return i(this,void 0,void 0,(function*(){return a(e).then((e=>e.questions))}))}(this.app.dataURL),console.log("Survey initialized"),this.dataURL=e,this.unityBridge=t,this.currentQuestionIndex=0,l.SetButtonPressAction(this.TryAnswer),l.SetStartAction(this.startSurvey)}Run(e){return t=this,n=void 0,s=function*(){this.app=e,this.buildQuestionList().then((e=>{this.questionsData=e,o.PrepareAudioAndImagesForSurvey(this.questionsData,this.app.GetDataURL()),this.unityBridge.SendLoaded()}))},new((i=void 0)||(i=Promise))((function(e,a){function o(e){try{c(s.next(e))}catch(e){a(e)}}function r(e){try{c(s.throw(e))}catch(e){a(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,r)}c((s=s.apply(t,n||[])).next())}));var t,n,i,s}HasQuestionsLeft(){return this.currentQuestionIndex<=this.questionsData.length-1}getNextQuestion(){return this.questionsData[this.currentQuestionIndex]}}class Nt{constructor(e){this.value=e,this.left=null,this.right=null}}function Rt(e,t,n){if(e>t)return null;let i;if((e+t)%2==0&&1!==n.size){if(i=Math.floor((e+t)/2),0===i)return null}else do{i=Math.floor((e+t)/2),i+=Math.floor(2*Math.random())}while(i>t||n.has(i));n.add(i);let s=new Nt(i);return s.left=Rt(e,i-1,n),s.right=Rt(i+1,t,n),s}!function(e){e[e.BinarySearch=0]="BinarySearch",e[e.LinearSearchUp=1]="LinearSearchUp",e[e.LinearSearchDown=2]="LinearSearchDown"}(Dt||(Dt={})),function(e){e[e.RandomBST=0]="RandomBST",e[e.LinearArrayBased=1]="LinearArrayBased"}(Mt||(Mt={}));class Pt extends Tt{constructor(e,t){super(),this.bucketGenMode=Mt.RandomBST,this.startAssessment=()=>{l.ReadyForNext(this.getNextQuestion())},this.buildBuckets=()=>{var e=function(e){return i(this,void 0,void 0,(function*(){return a(e).then((e=>e.buckets))}))}(this.app.GetDataURL()).then((e=>{this.buckets=e,this.numBuckets=e.length,console.log("buckets: "+this.buckets),this.bucketArray=Array.from(Array(this.numBuckets),((e,t)=>t+1)),console.log("empty array "+this.bucketArray);let t=new Set;t.add(0);let n=Rt(this.buckets[0].bucketID-1,this.buckets[this.buckets.length-1].bucketID,t),i=this.convertToBucketBST(n,this.buckets);console.log("Generated the buckets root ----------------------------------------------"),console.log(i),this.basalBucket=this.numBuckets+1,this.ceilingBucket=-1,this.currentNode=i,this.tryMoveBucket(i.value,!1)}));return e},this.convertToBucketBST=(e,t)=>{if(null===e)return e;let n=e.value;return e.value=t.find((e=>e.bucketID===n)),null!==e.left&&(e.left=this.convertToBucketBST(e.left,t)),null!==e.right&&(e.right=this.convertToBucketBST(e.right,t)),e},this.initBucket=e=>{this.currentBucket=e,this.currentBucket.usedItems=[],this.currentBucket.numTried=0,this.currentBucket.numCorrect=0,this.currentBucket.numConsecutiveWrong=0,this.currentBucket.tested=!0,this.currentBucket.passed=!1},this.TryAnswer=(e,t)=>{Lt.sendAnswered(this.currentQuestion,e,t),this.currentBucket.numTried+=1,this.currentQuestion.answers[e-1].answerName==this.currentQuestion.correct?(this.currentBucket.numCorrect+=1,this.currentBucket.numConsecutiveWrong=0,console.log("Answered correctly")):(this.currentBucket.numConsecutiveWrong+=1,console.log("Answered incorrectly, "+this.currentBucket.numConsecutiveWrong)),l.AddStar(),l.SetFeedbackVisibile(!0),setTimeout((()=>{console.log("Completed first Timeout"),this.onQuestionEnd()}),2e3)},this.onQuestionEnd=()=>{let e=this.HasQuestionsLeft()?500:4e3;const t=()=>{l.SetFeedbackVisibile(!1),l.ChangeStarImageAfterAnimation(),this.HasQuestionsLeft()?l.ReadyForNext(this.getNextQuestion()):(console.log("No questions left"),this.onEnd())};new Promise((t=>{setTimeout((()=>{t()}),e)})).then((()=>{t()}))},this.getNextQuestion=()=>{var e,t,n,i;do{e=r(this.currentBucket.items)}while(this.currentBucket.usedItems.includes(e));this.currentBucket.usedItems.push(e);do{t=r(this.currentBucket.items)}while(e==t);do{n=r(this.currentBucket.items)}while(e==n||t==n);do{i=r(this.currentBucket.items)}while(e==i||t==i||n==i);var s=[e,t,n,i];c(s);var a={qName:"question-"+this.questionNumber+"-"+e.itemName,qNumber:this.questionNumber,qTarget:e.itemName,promptText:"",bucket:this.currentBucket.bucketID,promptAudio:e.itemName,correct:e.itemText,answers:[{answerName:s[0].itemName,answerText:s[0].itemText},{answerName:s[1].itemName,answerText:s[1].itemText},{answerName:s[2].itemName,answerText:s[2].itemText},{answerName:s[3].itemName,answerText:s[3].itemText}]};return this.currentQuestion=a,this.questionNumber+=1,a},this.tryMoveBucket=(e,t)=>{null!=this.currentBucket&&(this.currentBucket.passed=t,Lt.sendBucket(this.currentBucket,t)),console.log("new  bucket is "+e.bucketID),o.PreloadBucket(e,this.app.GetDataURL()),this.initBucket(e)},this.HasQuestionsLeft=()=>{var e=!0;return!this.currentBucket.passed&&(this.currentBucket.numCorrect>=4?(console.log("passed this bucket "+this.currentBucket.bucketID),this.currentBucket.bucketID>=this.numBuckets?(console.log("passed highest bucket"),this.currentBucket.passed=!0,Lt.sendBucket(this.currentBucket,!0),l.ProgressChest(),e=!1):(console.log("moving up bucket"),null!=this.currentNode.right?(l.ProgressChest(),console.log("moving to right node"),this.currentNode=this.currentNode.right,this.tryMoveBucket(this.currentNode.value,!0)):(console.log("reached root node"),this.currentBucket.passed=!0,Lt.sendBucket(this.currentBucket,!0),l.ProgressChest(),e=!1))):(this.currentBucket.numConsecutiveWrong>=2||this.currentBucket.numTried>=5)&&(console.log("failed this bucket "+this.currentBucket.bucketID),this.currentBucket.bucketID<this.basalBucket&&(this.basalBucket=this.currentBucket.bucketID),this.currentBucket.bucketID<=1?(console.log("failed lowest bucket"),e=!1,this.currentBucket.passed=!1,Lt.sendBucket(this.currentBucket,!1)):(console.log("moving down bucket"),null!=this.currentNode.left?(console.log("moving to left node"),this.currentNode=this.currentNode.left,this.tryMoveBucket(this.currentNode.value,!1)):(console.log("reached root node"),e=!1,this.currentBucket.passed=!1,Lt.sendBucket(this.currentBucket,!1)))),e)},this.dataURL=e,this.unityBridge=t,this.questionNumber=0,console.log("app initialized"),l.SetButtonPressAction(this.TryAnswer),l.SetStartAction(this.startAssessment)}Run(e){this.app=e,this.buildBuckets().then((e=>{console.log(this.currentBucket),this.unityBridge.SendLoaded()}))}handleBucketGenModeChange(e){console.log("handleBucketGenModeChange: "+this.devModeBucketGenSelect.value),this.bucketGenMode=parseInt(this.devModeBucketGenSelect.value),console.log("bucketGenMode: "+this.bucketGenMode)}onEnd(){Lt.sendFinished(this.buckets,this.basalBucket,this.ceilingBucket),l.ShowEnd(),this.app.unityBridge.SendClose()}}class xt{constructor(){"undefined"!=typeof Unity?this.unityReference=Unity:this.unityReference=null}SendMessage(e){null!==this.unityReference&&this.unityReference.call(e)}SendLoaded(){null!==this.unityReference?this.unityReference.call("loaded"):console.log("would call Unity loaded now")}SendClose(){null!==this.unityReference?this.unityReference.call("close"):console.log("would close Unity now")}}pe("firebase","9.12.1","app");try{self["workbox:window:7.0.0"]&&_()}catch(Ft){}function Ft(e,t){return new Promise((function(n){var i=new MessageChannel;i.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[i.port2])}))}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ot(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ut(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:7.0.0"]&&_()}catch(Ft){}var jt=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function Vt(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var $t=function(e,t){this.type=e,Object.assign(this,t)};function qt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ht(){}var Wt={type:"SKIP_WAITING"};function zt(e,t){if(!t)return e&&e.then?e.then(Ht):Promise.resolve()}var Gt=function(e){var t,n;function i(t,n){var i,s;return void 0===n&&(n={}),(i=e.call(this)||this).nn={},i.tn=0,i.rn=new jt,i.en=new jt,i.on=new jt,i.un=0,i.an=new Set,i.cn=function(){var e=i.fn,t=e.installing;i.tn>0||!Vt(t.scriptURL,i.sn.toString())||performance.now()>i.un+6e4?(i.vn=t,e.removeEventListener("updatefound",i.cn)):(i.hn=t,i.an.add(t),i.rn.resolve(t)),++i.tn,t.addEventListener("statechange",i.ln)},i.ln=function(e){var t=i.fn,n=e.target,s=n.state,a=n===i.vn,o={sw:n,isExternal:a,originalEvent:e};!a&&i.mn&&(o.isUpdate=!0),i.dispatchEvent(new $t(s,o)),"installed"===s?i.wn=self.setTimeout((function(){"installed"===s&&t.waiting===n&&i.dispatchEvent(new $t("waiting",o))}),200):"activating"===s&&(clearTimeout(i.wn),a||i.en.resolve(n))},i.dn=function(e){var t=i.hn,n=t!==navigator.serviceWorker.controller;i.dispatchEvent(new $t("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:i.mn})),n||i.on.resolve(t)},i.gn=(s=function(e){var t=e.data,n=e.ports,s=e.source;return qt(i.getSW(),(function(){i.an.has(s)&&i.dispatchEvent(new $t("message",{data:t,originalEvent:e,ports:n,sw:s}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(s.apply(this,e))}catch(e){return Promise.reject(e)}}),i.sn=t,i.nn=n,navigator.serviceWorker.addEventListener("message",i.gn),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s,a=i.prototype;return a.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var i=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return zt(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return i.mn=Boolean(navigator.serviceWorker.controller),i.yn=i.pn(),qt(i.bn(),(function(e){i.fn=e,i.yn&&(i.hn=i.yn,i.en.resolve(i.yn),i.on.resolve(i.yn),i.yn.addEventListener("statechange",i.ln,{once:!0}));var t=i.fn.waiting;return t&&Vt(t.scriptURL,i.sn.toString())&&(i.hn=t,Promise.resolve().then((function(){i.dispatchEvent(new $t("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.dn),i.fn}))}))}catch(e){return Promise.reject(e)}},a.update=function(){try{return this.fn?zt(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},a.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},a.messageSW=function(e){try{return qt(this.getSW(),(function(t){return Ft(t,e)}))}catch(e){return Promise.reject(e)}},a.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Ft(this.fn.waiting,Wt)},a.pn=function(){var e=navigator.serviceWorker.controller;return e&&Vt(e.scriptURL,this.sn.toString())?e:void 0},a.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return qt(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(s=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(i.prototype,s),i}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=Ot(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());var Qt=function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function r(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((i=i.apply(e,t||[])).next())}))};let Kt=document.getElementById("loadingScreen");const Jt=new BroadcastChannel("as-message-channel");function Xt(e){"Loading"==e.data.msg&&function(e,t){let n=document.getElementById("progressBar");t<100?n.style.width=t+"%":t>=100&&(Kt.style.display="none",l.SetContentLoaded(!0),localStorage.setItem(e.data.data.bookName,"true"),function(e){if(window.Android){let t=null!==localStorage.getItem(e);window.Android.cachedStatus(t)}}(e.data.data.bookName))}(e,parseInt(e.data.data.progress)),"UpdateFound"==e.data.msg&&(console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>.,update Found"),function(){let e="Update Found.\nPlease accept the update by pressing Ok.";1==confirm(e)?window.location.reload():e="Update will happen on the next launch."}())}Jt.addEventListener("message",Xt);const Yt=new class{constructor(){this.lang="english",this.unityBridge=new xt,console.log("Initializing app..."),this.dataURL=t(),this.cacheModel=new class{constructor(e,t,n){this.appName=e,this.contentFilePath=t,this.audioVisualResources=n}setAppName(e){this.appName=e}setContentFilePath(e){this.contentFilePath=e}setAudioVisualResources(e){this.audioVisualResources=e}addItemToAudioVisualResources(e){this.audioVisualResources.has(e)||this.audioVisualResources.add(e)}}(this.dataURL,this.dataURL,new Set);const e=function(e=function(e="[DEFAULT]"){const t=ae.get(e);if(!t&&e===ie)return he();if(!t)throw ue.create("no-app",{appName:e});return t}()){const t=le(e=B(e),it);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=le(e,it);if(n.isInitialized()){const e=n.getImmediate();if(b(t,n.getOptions()))return e;throw rt.create("already-initialized")}return n.initialize({options:t})}(e)}(he({apiKey:"AIzaSyB8c2lBVi26u7YRL9sxOP97Uaq3yN8hTl4",authDomain:"ftm-b9d99.firebaseapp.com",databaseURL:"https://ftm-b9d99.firebaseio.com",projectId:"ftm-b9d99",storageBucket:"ftm-b9d99.appspot.com",messagingSenderId:"602402387941",appId:"1:602402387941:web:7b1b1181864d28b49de10c",measurementId:"G-FF1159TGCF"}));this.analytics=e,Ct(e,"notification_received"),Ct(e,"test initialization event",{}),console.log("firebase initialized")}spinUp(){return Qt(this,void 0,void 0,(function*(){window.addEventListener("load",(()=>{console.log("Window Loaded!"),(()=>{Qt(this,void 0,void 0,(function*(){yield function(e){return i(this,void 0,void 0,(function*(){return a(e).then((e=>e))}))}(this.dataURL).then((e=>{console.log("Assessment/Survey v1.0.5 initializing!"),console.log("App data loaded!"),console.log(e),this.cacheModel.setContentFilePath(s(this.dataURL)),l.SetFeedbackText(e.feedbackText);let t=e.appType,i=e.assessmentType;if("survey"==t)this.game=new _t(this.dataURL,this.unityBridge);else if("assessment"==t){let t=e.buckets;for(let n=0;n<t.length;n++)for(let i=0;i<t[n].items.length;i++){let s;s=e.quizName.includes("Luganda")||e.quizName.toLowerCase().includes("west african english")?"/audio/"+this.dataURL+"/"+t[n].items[i].itemName.toLowerCase().trim()+".mp3":"/audio/"+this.dataURL+"/"+t[n].items[i].itemName.trim()+".mp3",this.cacheModel.addItemToAudioVisualResources(s)}this.cacheModel.addItemToAudioVisualResources("/audio/"+this.dataURL+"/answer_feedback.mp3"),this.game=new Pt(this.dataURL,this.unityBridge)}var a;this.game.unityBridge=this.unityBridge,Lt.setUuid((null==(a=n().get("cr_user_id"))&&(console.log("no uuid provided"),a="WebUserNoID"),a),function(){var e=n().get("userSource");return null==e&&(console.log("no user source provided"),e="WebUserNoSource"),e}()),Lt.linkAnalytics(this.analytics,this.dataURL),Lt.setAssessmentType(i),Lt.sendInit("v1.0.5",e.contentVersion),this.game.Run(this)})),yield this.registerServiceWorker(this.game)}))})()}))}))}registerServiceWorker(e){return Qt(this,void 0,void 0,(function*(){console.log("Registering service worker..."),"serviceWorker"in navigator?(new Gt("./sw.js",{}).register().then((e=>{console.log("Service worker registered!"),this.handleServiceWorkerRegistation(e)})).catch((e=>{console.log("Service worker registration failed: "+e)})),navigator.serviceWorker.addEventListener("message",Xt),yield navigator.serviceWorker.ready,console.log("Cache Model: "),console.log(this.cacheModel),null==localStorage.getItem(this.cacheModel.appName)?(console.log("WE DONT HAVE THIS ASSESSMENT< CACHING IT!"),Kt.style.display="flex",Jt.postMessage({command:"Cache",data:{appData:this.cacheModel}})):Kt.style.display="none",Jt.onmessage=e=>{console.log(e.data.command+" received from service worker!"),"Activated"==e.data.command&&null==localStorage.getItem(this.cacheModel.appName)&&Jt.postMessage({command:"Cache",data:{appData:this.cacheModel}})}):console.warn("Service workers are not supported in this browser.")}))}handleServiceWorkerRegistation(e){var t;try{null===(t=null==e?void 0:e.installing)||void 0===t||t.postMessage({type:"Registartion",value:this.lang})}catch(e){console.log("Service worker registration failed: "+e)}}GetDataURL(){return this.dataURL}};Yt.spinUp()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxHQUFpQnVHLFlBQVksQ0FDNUJtSixRQUFTLFFBQ1RueEIsS0FBTSxDQUNMMmtDLFFBQVM5akMsS0FBSytoQyxnQkFPbEJ4aUMsUUFBUXlFLEtBQUsscURBRWYsSUFFQTQvQiwrQkFBK0JELFNBQzlCLElBQ3lCLFFBQXhCLEVBQUFBLGFBQVksRUFBWkEsRUFBY3hGLGtCQUFVLFNBQUVoWCxZQUFZLENBQ3JDblMsS0FBTSxlQUNObkksTUFBTzdNLEtBQUt5ekIsT0FFWixNQUFPM0QsR0FDUnZ3QixRQUFRQyxJQUFJLHVDQUF5Q3N3QixHQUV2RCxDQUVPMkosYUFDTixPQUFPejVCLEtBQUtnQixPQUNiLEdBZ0REMGUsR0FBSW9qQiIsInNvdXJjZXMiOlsid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvdXJsVXRpbHMudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL2pzb25VdGlscy50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL2F1ZGlvQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL21hdGhVdGlscy50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL3VpQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9sb2dnZXIvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2luZGV4LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvaW5zdGFsbGF0aW9ucy9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hbmFseXRpY3MvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL2FuYWx5dGljc0V2ZW50cy50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9CYXNlUXVpei50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9hc3Nlc3NtZW50L2Fzc2Vzc21lbnQudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvc3VydmV5L3N1cnZleS50cyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9jb21wb25lbnRzL3ROb2RlLnRzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vc3JjL2NvbXBvbmVudHMvdW5pdHlCcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL2Fzc2Vzc21lbnQtc3VydmV5LWpzLy4vbm9kZV9tb2R1bGVzL3dvcmtib3gtd2luZG93L2J1aWxkL3dvcmtib3gtd2luZG93LnByb2QuZXM1Lm1qcyIsIndlYnBhY2s6Ly9hc3Nlc3NtZW50LXN1cnZleS1qcy8uL3NyYy9BcHAudHMiLCJ3ZWJwYWNrOi8vYXNzZXNzbWVudC1zdXJ2ZXktanMvLi9zcmMvY29tcG9uZW50cy9jYWNoZU1vZGVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvKipcbiAqIENvbnRhaW5zIHV0aWxzIGZvciB3b3JraW5nIHdpdGggVVJMIHN0cmluZ3MuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFwcFR5cGUoKTogc3RyaW5nIHtcblx0Y29uc3QgcGF0aFBhcmFtcyA9IGdldFBhdGhOYW1lKCk7XG5cdGNvbnN0IGFwcFR5cGUgPSBwYXRoUGFyYW1zLmdldCgnYXBwVHlwZScpO1xuXHRyZXR1cm4gYXBwVHlwZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVVSUQoKTogc3RyaW5nIHtcblx0Y29uc3QgcGF0aFBhcmFtcyA9IGdldFBhdGhOYW1lKCk7XG5cdHZhciBudXVpZCA9IHBhdGhQYXJhbXMuZ2V0KCdjcl91c2VyX2lkJyk7XG5cdGlmIChudXVpZCA9PSB1bmRlZmluZWQpIHtcblx0XHRjb25zb2xlLmxvZyhcIm5vIHV1aWQgcHJvdmlkZWRcIik7XG5cdFx0bnV1aWQgPSBcIldlYlVzZXJOb0lEXCJcblx0fVxuXHRyZXR1cm4gbnV1aWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyU291cmNlKCk6IHN0cmluZyB7XG5cdGNvbnN0IHBhdGhQYXJhbXMgPSBnZXRQYXRoTmFtZSgpO1xuXHR2YXIgbnV1aWQgPSBwYXRoUGFyYW1zLmdldCgndXNlclNvdXJjZScpO1xuXHRpZiAobnV1aWQgPT0gdW5kZWZpbmVkKSB7XG5cdFx0Y29uc29sZS5sb2coXCJubyB1c2VyIHNvdXJjZSBwcm92aWRlZFwiKTtcblx0XHRudXVpZCA9IFwiV2ViVXNlck5vU291cmNlXCJcblx0fVxuXHRyZXR1cm4gbnV1aWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhRmlsZSgpOiBzdHJpbmcge1xuXHRjb25zdCBwYXRoUGFyYW1zID0gZ2V0UGF0aE5hbWUoKTtcblx0dmFyIGRhdGEgPSBwYXRoUGFyYW1zLmdldCgnZGF0YScpO1xuXHRpZiAoZGF0YSA9PSB1bmRlZmluZWQpIHtcblx0XHRjb25zb2xlLmxvZyhcImRlZmF1bHQgZGF0YSBmaWxlXCIpO1xuXHRcdGRhdGEgPSBcInp1bHUtbGV0dGVyc291bmRzXCI7XG5cdFx0Ly9kYXRhID0gXCJzdXJ2ZXktenVsdVwiO1xuXHR9XG5cdHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBnZXRQYXRoTmFtZSgpIHtcblx0Y29uc3QgcXVlcnlTdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuXHRjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5U3RyaW5nKTtcblx0cmV0dXJuIHVybFBhcmFtcztcbn1cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiLyoqIEpzb24gVXRpbHMgKi9cclxuXHJcbi8vIGltcG9ydCB7IHNldEZlZWRiYWNrVGV4dCB9IGZyb20gJy4vdWlDb250cm9sbGVyJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFwcERhdGEodXJsOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gbG9hZERhdGEodXJsKS50aGVuKGRhdGEgPT4geyByZXR1cm4gZGF0YTsgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFwcFR5cGUodXJsOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gbG9hZERhdGEodXJsKS50aGVuKGRhdGEgPT4geyBcclxuXHRcdC8vIHNldEZlZWRiYWNrVGV4dChkYXRhW1wiZmVlZGJhY2tUZXh0XCJdKTsgXHJcblx0XHRyZXR1cm4gZGF0YVtcImFwcFR5cGVcIl07IFxyXG5cdH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hGZWVkYmFjayh1cmw6IHN0cmluZykge1xyXG5cdHJldHVybiBsb2FkRGF0YSh1cmwpLnRoZW4oZGF0YSA9PiB7IHJldHVybiBkYXRhW1wiZmVlZGJhY2tUZXh0XCJdOyB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoU3VydmV5UXVlc3Rpb25zKHVybDogc3RyaW5nKSB7XHJcblx0cmV0dXJuIGxvYWREYXRhKHVybCkudGhlbihkYXRhID0+IHsgcmV0dXJuIGRhdGFbXCJxdWVzdGlvbnNcIl0gfSlcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQXNzZXNzbWVudEJ1Y2tldHModXJsOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gbG9hZERhdGEodXJsKS50aGVuKGRhdGEgPT4geyByZXR1cm4gZGF0YVtcImJ1Y2tldHNcIl0gfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFVUkwodXJsOiBzdHJpbmcpIHtcclxuXHRyZXR1cm4gXCIvZGF0YS9cIiArIHVybCArIFwiLmpzb25cIjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENhc2VJbmRlcGVuZGVudExhbmdMaXN0KCkge1xyXG5cdHJldHVybiBbJ2x1Z2FuZGEnXTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gbG9hZERhdGEodXJsOiBzdHJpbmcpIHtcclxuXHR2YXIgZnVybCA9IGdldERhdGFVUkwodXJsKTtcclxuXHQvLyBjb25zb2xlLmxvZyhmdXJsKTtcclxuXHRyZXR1cm4gZmV0Y2goZnVybCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpO1xyXG59XHJcblxyXG5cclxuIiwiLy9jb2RlIGZvciBsb2FkaW5nIGF1ZGlvc1xuXG5pbXBvcnQgeyBxRGF0YSB9IGZyb20gJy4vcXVlc3Rpb25EYXRhJztcbmltcG9ydCB7IGJ1Y2tldCwgYnVja2V0SXRlbSB9IGZyb20gJy4uL2Fzc2Vzc21lbnQvYnVja2V0RGF0YSc7XG5pbXBvcnQgeyBnZXRDYXNlSW5kZXBlbmRlbnRMYW5nTGlzdCB9IGZyb20gJy4vanNvblV0aWxzJztcblxuZXhwb3J0IGNsYXNzIEF1ZGlvQ29udHJvbGxlciB7XG5cblx0cHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEF1ZGlvQ29udHJvbGxlciB8IG51bGwgPSBudWxsO1xuXG5cdHB1YmxpYyBpbWFnZVRvQ2FjaGU6IHN0cmluZ1tdID0gW107XG5cdHB1YmxpYyB3YXZUb0NhY2hlOiBzdHJpbmdbXSA9IFtdO1xuXG5cdHB1YmxpYyBhbGxBdWRpb3M6IGFueSA9IHt9O1xuXHRwdWJsaWMgYWxsSW1hZ2VzOiBhbnkgPSB7fTtcblx0cHVibGljIGRhdGFVUkw6IHN0cmluZyA9IFwiXCI7XG5cblx0cHJpdmF0ZSBjb3JyZWN0U291bmRQYXRoID0gXCJkaXN0L2F1ZGlvL0NvcnJlY3Qud2F2XCI7XG5cblx0cHJpdmF0ZSBmZWVkYmFja0F1ZGlvOiBhbnkgPSBudWxsO1xuXHRwcml2YXRlIGNvcnJlY3RBdWRpbzogYW55ID0gbnVsbDtcblxuXHRwcml2YXRlIGluaXQoKTogdm9pZCB7XG5cdFx0dGhpcy5mZWVkYmFja0F1ZGlvID0gbmV3IEF1ZGlvKCk7XG5cdFx0dGhpcy5mZWVkYmFja0F1ZGlvLnNyYyA9IHRoaXMuY29ycmVjdFNvdW5kUGF0aDtcblx0XHR0aGlzLmNvcnJlY3RBdWRpbyA9IG5ldyBBdWRpbygpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBQcmVwYXJlQXVkaW9BbmRJbWFnZXNGb3JTdXJ2ZXkocXVlc3Rpb25zRGF0YTogcURhdGFbXSwgZGF0YVVSTDogc3RyaW5nKTogdm9pZCB7XG5cdFx0QXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTCA9IGRhdGFVUkw7XG5cdFx0Y29uc3QgZmVlZGJhY2tTb3VuZFBhdGggPSAgXCJhdWRpby9cIiArIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmRhdGFVUkwgKyBcIi9hbnN3ZXJfZmVlZGJhY2subXAzXCI7XG5cblx0XHRBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS53YXZUb0NhY2hlLnB1c2goZmVlZGJhY2tTb3VuZFBhdGgpO1xuXHRcdEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmNvcnJlY3RBdWRpby5zcmMgPSBmZWVkYmFja1NvdW5kUGF0aDtcblxuXHRcdGZvciAodmFyIHF1ZXN0aW9uSW5kZXggaW4gcXVlc3Rpb25zRGF0YSl7XG5cdFx0XHRsZXQgcXVlc3Rpb25EYXRhID0gcXVlc3Rpb25zRGF0YVtxdWVzdGlvbkluZGV4XTtcblx0XHRcdGlmIChxdWVzdGlvbkRhdGEucHJvbXB0QXVkaW8gIT0gbnVsbCkge1xuXHRcdFx0XHRBdWRpb0NvbnRyb2xsZXIuRmlsdGVyQW5kQWRkQXVkaW9Ub0FsbEF1ZGlvcyhxdWVzdGlvbkRhdGEucHJvbXB0QXVkaW8pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAocXVlc3Rpb25EYXRhLnByb21wdEltZyAhPSBudWxsICkge1xuXHRcdFx0XHRBdWRpb0NvbnRyb2xsZXIuQWRkSW1hZ2VUb0FsbEltYWdlcyhxdWVzdGlvbkRhdGEucHJvbXB0SW1nKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yICh2YXIgYW5zd2VySW5kZXggaW4gcXVlc3Rpb25EYXRhLmFuc3dlcnMpIHtcblx0XHRcdFx0bGV0IGFuc3dlckRhdGEgPSBxdWVzdGlvbkRhdGEuYW5zd2Vyc1thbnN3ZXJJbmRleF07XG5cdFx0XHRcdGlmIChhbnN3ZXJEYXRhLmFuc3dlckltZyAhPSBudWxsKXtcblx0XHRcdFx0XHRBdWRpb0NvbnRyb2xsZXIuQWRkSW1hZ2VUb0FsbEltYWdlcyhhbnN3ZXJEYXRhLmFuc3dlckltZyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc29sZS5sb2coQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsQXVkaW9zKTtcblx0XHRjb25zb2xlLmxvZyhBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxJbWFnZXMpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBBZGRJbWFnZVRvQWxsSW1hZ2VzKG5ld0ltYWdlVVJMOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zb2xlLmxvZyhcIkFkZCBpbWFnZTogXCIgKyBuZXdJbWFnZVVSTCk7XG5cdFx0bGV0IG5ld0ltYWdlID0gbmV3IEltYWdlKCk7XG5cdFx0bmV3SW1hZ2Uuc3JjID0gbmV3SW1hZ2VVUkw7XG5cdFx0QXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsSW1hZ2VzW25ld0ltYWdlVVJMXSA9IG5ld0ltYWdlO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBGaWx0ZXJBbmRBZGRBdWRpb1RvQWxsQXVkaW9zKG5ld0F1ZGlvVVJMOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zb2xlLmxvZyhcIkFkZGluZyBhdWRpbzogXCIgKyBuZXdBdWRpb1VSTCk7XG5cdFx0aWYgKG5ld0F1ZGlvVVJMLmluY2x1ZGVzKFwiLndhdlwiKSl7XG5cdFx0XHRuZXdBdWRpb1VSTCA9IG5ld0F1ZGlvVVJMLnJlcGxhY2UoXCIud2F2XCIsIFwiLm1wM1wiKTtcblx0XHR9IGVsc2UgaWYgKG5ld0F1ZGlvVVJMLmluY2x1ZGVzKFwiLm1wM1wiKSkge1xuXHRcdFx0Ly8gQWxyZWFkeSBjb250YWlucyAubXAzIG5vdCBkb2luZyBhbnl0aGluZ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXdBdWRpb1VSTCA9IG5ld0F1ZGlvVVJMLnRyaW0oKSArIFwiLm1wM1wiO1xuXHRcdH1cblxuXHRcdGNvbnNvbGUubG9nKFwiRmlsdGVyZWQ6IFwiICsgbmV3QXVkaW9VUkwpO1xuICAgICAgIFxuXHRcdGxldCBuZXdBdWRpbyA9IG5ldyBBdWRpbygpO1xuXHRcdGlmKGdldENhc2VJbmRlcGVuZGVudExhbmdMaXN0KCkuaW5jbHVkZXMoQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTC5zcGxpdCgnLScpWzBdKSAgKVxuXHRcdHtcblx0XHRcdG5ld0F1ZGlvLnNyYyA9IFwiYXVkaW8vXCIgKyBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMICsgXCIvXCIgKyBuZXdBdWRpb1VSTDtcblx0XHRcdFxuXHRcdH1cblx0XHRlbHNle1xuXHRcdFx0bmV3QXVkaW8uc3JjID0gXCJhdWRpby9cIiArIEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmRhdGFVUkwgKyBcIi9cIiArIG5ld0F1ZGlvVVJMO1xuXG5cdFx0fVxuXHRcdFxuXHRcdEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmFsbEF1ZGlvc1tuZXdBdWRpb1VSTF0gPSBuZXdBdWRpbztcblx0XHRcblx0XHRjb25zb2xlLmxvZyhuZXdBdWRpby5zcmMpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBQcmVsb2FkQnVja2V0KG5ld0J1Y2tldDogYnVja2V0LCBkYXRhVVJMKSB7XG5cdFx0QXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuZGF0YVVSTCA9IGRhdGFVUkw7XG5cdFx0QXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuY29ycmVjdEF1ZGlvLnNyYyA9IFwiYXVkaW8vXCIgKyBBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5kYXRhVVJMICsgXCIvYW5zd2VyX2ZlZWRiYWNrLm1wM1wiO1xuXHRcdGZvciAodmFyIGl0ZW1JbmRleCBpbiBuZXdCdWNrZXQuaXRlbXMpe1xuXHRcdFx0dmFyIGl0ZW0gPSBuZXdCdWNrZXQuaXRlbXNbaXRlbUluZGV4XTtcblx0XHRcdEF1ZGlvQ29udHJvbGxlci5GaWx0ZXJBbmRBZGRBdWRpb1RvQWxsQXVkaW9zKGl0ZW0uaXRlbU5hbWUpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgUGxheUF1ZGlvKGF1ZGlvTmFtZTogc3RyaW5nLCBmaW5pc2hlZENhbGxiYWNrPzogRnVuY3Rpb24sIGF1ZGlvQW5pbT86IEZ1bmN0aW9uKTogdm9pZCB7XG5cdFxuXHRcdGNvbnNvbGUubG9nKFwidHJ5aW5nIHRvIHBsYXkgXCIgKyBhdWRpb05hbWUpO1xuXHRcdGlmIChhdWRpb05hbWUuaW5jbHVkZXMoXCIubXAzXCIpKXtcblx0XHRcdGlmIChhdWRpb05hbWUuc2xpY2UoLTQpICE9IFwiLm1wM1wiKXtcblx0XHRcdFx0YXVkaW9OYW1lID0gYXVkaW9OYW1lLnRyaW0oKSArIFwiLm1wM1wiO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRhdWRpb05hbWUgPSBhdWRpb05hbWUudHJpbSgpICsgXCIubXAzXCI7XG5cdFx0fVxuXHRcblx0XHRjb25zb2xlLmxvZyhcIlByZSBwbGF5IGFsbCBhdWRpb3M6IFwiKTtcblx0XHRjb25zb2xlLmxvZyhBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbGxBdWRpb3MpO1xuXHRcblx0XHRcblx0XHRjb25zdCBwbGF5UHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGNvbnN0IGF1ZGlvID0gQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsQXVkaW9zW2F1ZGlvTmFtZV07XG5cdFx0XHRpZiAoYXVkaW8pIHtcblx0XHRcdFx0YXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlcIiwgKCkgPT4ge1xuXHRcdFx0XHRcdHR5cGVvZihhdWRpb0FuaW0pICE9PSAndW5kZWZpbmVkJyA/IGF1ZGlvQW5pbSh0cnVlKSA6IG51bGw7XG5cdFx0XHRcdH0pO1xuXHRcblx0XHRcdFx0YXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcImVuZGVkXCIsICgpID0+IHtcblx0XHRcdFx0XHR0eXBlb2YoYXVkaW9BbmltKSAhPT0gJ3VuZGVmaW5lZCcgPyBhdWRpb0FuaW0oZmFsc2UpIDogbnVsbDtcblx0XHRcdFx0XHRyZXNvbHZlKCk7IFxuXHRcdFx0XHR9KTtcblx0XG5cdFx0XHRcdGF1ZGlvLnBsYXkoKS5jYXRjaCgoZXJyb3IpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3IgcGxheWluZyBhdWRpbzpcIiwgZXJyb3IpO1xuXHRcdFx0XHRcdHJlc29sdmUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJBdWRpbyBmaWxlIG5vdCBmb3VuZDpcIiwgYXVkaW9OYW1lKTtcblx0XHRcdFx0cmVzb2x2ZSgpOyBcblx0XHRcdH1cblx0XHR9KTtcblx0XG5cdFx0XG5cdFx0cGxheVByb21pc2UudGhlbigoKSA9PiB7XG5cdFx0XHR0eXBlb2YoZmluaXNoZWRDYWxsYmFjaykgIT09ICd1bmRlZmluZWQnID8gZmluaXNoZWRDYWxsYmFjaygpIDogbnVsbDtcblx0XHR9KS5jYXRjaChlcnJvciA9PiB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiUHJvbWlzZSBlcnJvcjpcIiwgZXJyb3IpO1xuXHRcdH0pO1xuXHR9XG5cdFxuXHRcblxuXHRwdWJsaWMgc3RhdGljIEdldEltYWdlKGltYWdlTmFtZTogc3RyaW5nKTogYW55IHtcblx0XHRyZXR1cm4gQXVkaW9Db250cm9sbGVyLmdldEluc3RhbmNlKCkuYWxsSW1hZ2VzW2ltYWdlTmFtZV07XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIFBsYXlEaW5nKCk6IHZvaWQge1xuXHRcdEF1ZGlvQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmZlZWRiYWNrQXVkaW8ucGxheSgpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBQbGF5Q29ycmVjdCgpOiB2b2lkIHtcblx0XHRBdWRpb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5jb3JyZWN0QXVkaW8ucGxheSgpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBdWRpb0NvbnRyb2xsZXIge1xuXHRcdGlmIChBdWRpb0NvbnRyb2xsZXIuaW5zdGFuY2UgPT0gbnVsbCkge1xuXHRcdFx0QXVkaW9Db250cm9sbGVyLmluc3RhbmNlID0gbmV3IEF1ZGlvQ29udHJvbGxlcigpO1xuXHRcdFx0QXVkaW9Db250cm9sbGVyLmluc3RhbmNlLmluaXQoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gQXVkaW9Db250cm9sbGVyLmluc3RhbmNlO1xuXHR9XG59IiwiXHJcbmV4cG9ydCBmdW5jdGlvbiByYW5kRnJvbShhcnJheSkge1xyXG5cdHJldHVybiBhcnJheVtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhcnJheS5sZW5ndGgpXVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2h1ZmZsZUFycmF5KGFycmF5KSB7XHJcblx0Zm9yIChsZXQgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuXHRcdGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcclxuXHRcdFthcnJheVtpXSwgYXJyYXlbal1dID0gW2FycmF5W2pdLCBhcnJheVtpXV07XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7IHFEYXRhLCBhbnN3ZXJEYXRhIH0gZnJvbSAnLi9xdWVzdGlvbkRhdGEnO1xyXG5pbXBvcnQgeyBBdWRpb0NvbnRyb2xsZXIgfSBmcm9tICcuL2F1ZGlvQ29udHJvbGxlcic7XHJcbmltcG9ydCB7IHJhbmRGcm9tLCBzaHVmZmxlQXJyYXkgfSBmcm9tICcuL21hdGhVdGlscyc7XHJcbmltcG9ydCB7IGdldERhdGFGaWxlIH0gZnJvbSAnLi91cmxVdGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgVUlDb250cm9sbGVyIHtcclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFVJQ29udHJvbGxlciB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRwcml2YXRlIGxhbmRpbmdDb250YWluZXJJZCA9IFwibGFuZFdyYXBcIjtcclxuXHRwdWJsaWMgbGFuZGluZ0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgZ2FtZUNvbnRhaW5lcklkID0gXCJnYW1lV3JhcFwiO1xyXG5cdHB1YmxpYyBnYW1lQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBlbmRDb250YWluZXJJZCA9IFwiZW5kV3JhcFwiO1xyXG5cdHB1YmxpYyBlbmRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIHN0YXJDb250YWluZXJJZCA9IFwic3RhcldyYXBwZXJcIjtcclxuXHRwdWJsaWMgc3RhckNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgY2hlc3RDb250YWluZXJJZCA9ICdjaGVzdFdyYXBwZXInO1xyXG5cdHB1YmxpYyBjaGVzdENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgcXVlc3Rpb25zQ29udGFpbmVySWQgPSBcInFXcmFwXCI7XHJcblx0cHVibGljIHF1ZXN0aW9uc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHByaXZhdGUgZmVlZGJhY2tDb250YWluZXJJZCA9IFwiZmVlZGJhY2tXcmFwXCI7XHJcblx0cHVibGljIGZlZWRiYWNrQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBhbnN3ZXJzQ29udGFpbmVySWQgPSBcImFXcmFwXCI7XHJcblx0cHVibGljIGFuc3dlcnNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjFJZCA9IFwiYW5zd2VyQnV0dG9uMVwiO1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uMTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b24ySWQgPSBcImFuc3dlckJ1dHRvbjJcIjtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uM0lkID0gXCJhbnN3ZXJCdXR0b24zXCI7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b24zOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjRJZCA9IFwiYW5zd2VyQnV0dG9uNFwiO1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uNDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b241SWQgPSBcImFuc3dlckJ1dHRvbjVcIjtcclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvbjU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgYW5zd2VyQnV0dG9uNklkID0gXCJhbnN3ZXJCdXR0b242XCI7XHJcblx0cHJpdmF0ZSBhbnN3ZXJCdXR0b242OiBIVE1MRWxlbWVudDtcclxuXHJcblxyXG5cdHByaXZhdGUgcGxheUJ1dHRvbklkID0gXCJwYnV0dG9uXCI7XHJcblx0cHJpdmF0ZSBwbGF5QnV0dG9uOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHJpdmF0ZSBjaGVzdEltZ0lkID0gXCJjaGVzdEltYWdlXCI7XHJcblx0cHJpdmF0ZSBjaGVzdEltZzogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHB1YmxpYyBuZXh0UXVlc3Rpb24gPSBudWxsO1xyXG5cclxuXHRwcml2YXRlIGNvbnRlbnRMb2FkZWQgPSBmYWxzZTtcclxuXHJcblx0cHVibGljIHFTdGFydDtcclxuXHRwdWJsaWMgc2hvd24gPSBmYWxzZTtcclxuXHJcblx0cHVibGljIHN0YXJzID0gW107XHJcblx0cHVibGljIHN0YXJQb3NpdGlvbnM6IEFycmF5PHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfT4gPSBBcnJheTx7IHg6IG51bWJlciwgeTogbnVtYmVyIH0+KCk7XHJcblx0cHVibGljIHFBbnNOdW0gPSAwO1xyXG5cclxuXHRwdWJsaWMgYWxsU3RhcnQ6IG51bWJlcjtcclxuXHJcblx0cHVibGljIGJ1dHRvbnMgPSBbXTtcclxuXHJcblx0cHJpdmF0ZSBidXR0b25QcmVzc0NhbGxiYWNrOiBGdW5jdGlvbjtcclxuXHRwcml2YXRlIHN0YXJ0UHJlc3NDYWxsYmFjazogRnVuY3Rpb247XHJcblxyXG5cdHB1YmxpYyBidXR0b25zQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcclxuXHRcdC8vIEluaXRpYWxpemUgcmVxdWlyZWQgY29udGFpbmVyc1xyXG5cdFx0dGhpcy5sYW5kaW5nQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5sYW5kaW5nQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5nYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5nYW1lQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5lbmRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVuZENvbnRhaW5lcklkKTtcclxuXHRcdHRoaXMuc3RhckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc3RhckNvbnRhaW5lcklkKTtcclxuXHRcdHRoaXMuY2hlc3RDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNoZXN0Q29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5xdWVzdGlvbnNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnF1ZXN0aW9uc0NvbnRhaW5lcklkKTtcclxuXHRcdHRoaXMuZmVlZGJhY2tDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmZlZWRiYWNrQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJzQ29udGFpbmVySWQpO1xyXG5cclxuXHRcdC8vIEluaXRpYWxpemUgcmVxdWlyZWQgYnV0dG9uc1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b24xID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b24xSWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b24yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b24ySWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b24zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b24zSWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b240ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b240SWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b241ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b241SWQpO1xyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b242ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5hbnN3ZXJCdXR0b242SWQpO1xyXG5cclxuXHRcdHRoaXMucGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGxheUJ1dHRvbklkKTtcclxuXHJcblx0XHR0aGlzLmNoZXN0SW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jaGVzdEltZ0lkKTtcclxuXHJcblx0XHR0aGlzLmluaXRpYWxpemVTdGFycygpO1xyXG5cclxuXHRcdHRoaXMuaW5pdEV2ZW50TGlzdGVuZXJzKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGluaXRpYWxpemVTdGFycygpOiB2b2lkIHtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykge1xyXG5cdFx0XHRjb25zdCBuZXdTdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuXHJcblx0XHRcdC8vIG5ld1N0YXIuc3JjID0gXCJpbWcvc3Rhci5wbmdcIjtcclxuXHRcdFx0bmV3U3Rhci5pZCA9IFwic3RhclwiICsgaTtcclxuXHJcblx0XHRcdG5ld1N0YXIuY2xhc3NMaXN0LmFkZChcInRvcHN0YXJ2XCIpO1xyXG5cclxuXHRcdFx0dGhpcy5zdGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1N0YXIpO1xyXG5cclxuXHRcdFx0dGhpcy5zdGFyQ29udGFpbmVyLmlubmVySFRNTCArPSBcIlwiO1xyXG5cclxuXHRcdFx0aWYgKGkgPT0gOSkge1xyXG5cdFx0XHRcdHRoaXMuc3RhckNvbnRhaW5lci5pbm5lckhUTUwgKz0gXCI8YnI+XCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuc3RhcnMucHVzaChpKTtcclxuXHRcdH1cclxuXHJcblx0XHRzaHVmZmxlQXJyYXkodGhpcy5zdGFycyk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIE92ZXJsYXBwaW5nT3RoZXJTdGFycyhzdGFyUG9zaXRpb25zOiBBcnJheTx7IHg6IG51bWJlciwgeTogbnVtYmVyIH0+LCB4OiBudW1iZXIsIHk6IG51bWJlciwgbWluRGlzdGFuY2U6IG51bWJlcik6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKHN0YXJQb3NpdGlvbnMubGVuZ3RoIDwgMSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3RhclBvc2l0aW9ucy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBkeCA9IHN0YXJQb3NpdGlvbnNbaV0ueCAtIHg7XHJcblx0XHRcdGNvbnN0IGR5ID0gc3RhclBvc2l0aW9uc1tpXS55IC0geTtcclxuXHRcdFx0Y29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xyXG5cdFx0XHRpZiAoZGlzdGFuY2UgPCBtaW5EaXN0YW5jZSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGluaXRFdmVudExpc3RlbmVycygpOiB2b2lkIHtcclxuXHRcdC8vIFRPRE86IHJlZmFjdG9yIHRoaXNcclxuXHRcdHRoaXMuYW5zd2VyQnV0dG9uMS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmFuc3dlckJ1dHRvblByZXNzKDEpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5idXR0b25zLnB1c2godGhpcy5hbnN3ZXJCdXR0b24xKTtcclxuXHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5hbnN3ZXJCdXR0b25QcmVzcygyKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuYW5zd2VyQnV0dG9uMik7XHJcblxyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b24zLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuYW5zd2VyQnV0dG9uUHJlc3MoMyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbnMucHVzaCh0aGlzLmFuc3dlckJ1dHRvbjMpO1xyXG5cclxuXHRcdHRoaXMuYW5zd2VyQnV0dG9uNC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmFuc3dlckJ1dHRvblByZXNzKDQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5idXR0b25zLnB1c2godGhpcy5hbnN3ZXJCdXR0b240KTtcclxuXHJcblx0XHR0aGlzLmFuc3dlckJ1dHRvbjUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5hbnN3ZXJCdXR0b25QcmVzcyg1KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuYW5zd2VyQnV0dG9uNSk7XHJcblxyXG5cdFx0dGhpcy5hbnN3ZXJCdXR0b242LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuYW5zd2VyQnV0dG9uUHJlc3MoNik7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbnMucHVzaCh0aGlzLmFuc3dlckJ1dHRvbjYpO1xyXG5cclxuXHRcdHRoaXMubGFuZGluZ0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHRpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oZ2V0RGF0YUZpbGUoKSkpIHtcclxuXHRcdFx0XHR0aGlzLnNob3dHYW1lKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzaG93T3B0aW9ucygpOiB2b2lkIHtcclxuXHRcdGlmICghVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd24pIHtcclxuXHRcdFx0Y29uc3QgbmV3USA9IFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLm5leHRRdWVzdGlvbjtcclxuXHRcdFx0Y29uc3QgYnV0dG9ucyA9IFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnM7XHJcblx0XHRcdGxldCBhbmltYXRpb25EdXJhdGlvbiA9IDIyMDtcclxuXHRcdFx0Y29uc3QgZGVsYXlCZm9yZU9wdGlvbiA9IDE1MDtcclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc2hvd24gPSB0cnVlO1xyXG5cdFx0XHRsZXQgb3B0aW9uc0Rpc3BsYXllZCA9IDA7XHJcblx0XHRcdGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xyXG5cdFx0XHRcdGJ1dHRvbi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuXHRcdFx0XHRidXR0b24uc3R5bGUuYW5pbWF0aW9uID0gXCJcIjtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbmV3US5hbnN3ZXJzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRjb25zdCBjdXJBbnN3ZXIgPSBuZXdRLmFuc3dlcnNbaV07XHJcblx0XHRcdFx0XHRjb25zdCBidXR0b24gPSBidXR0b25zW2ldO1xyXG5cclxuXHRcdFx0XHRcdGJ1dHRvbi5pbm5lckhUTUwgPSAnYW5zd2VyVGV4dCcgaW4gY3VyQW5zd2VyID8gY3VyQW5zd2VyLmFuc3dlclRleHQgOiAnJztcclxuXHRcdFx0XHRcdGJ1dHRvbi5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcclxuXHRcdFx0XHRcdGJ1dHRvbi5zdHlsZS5ib3hTaGFkb3cgPSBcIjBweCAwcHggMHB4IDBweCByZ2JhKDAsMCwwLDApXCI7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnN0eWxlLmJveFNoYWRvdyA9IFwiMHB4IDZweCA4cHggIzYwNjA2MFwiO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc3R5bGUuYW5pbWF0aW9uID0gYHpvb21JbiAke2FuaW1hdGlvbkR1cmF0aW9ufW1zIGVhc2UgZm9yd2FyZHNgO1xyXG5cdFx0XHRcdFx0XHRpZiAoJ2Fuc3dlckltZycgaW4gY3VyQW5zd2VyKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgdG1waW1nID0gQXVkaW9Db250cm9sbGVyLkdldEltYWdlKGN1ckFuc3dlci5hbnN3ZXJJbWcpO1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5hcHBlbmRDaGlsZCh0bXBpbWcpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0b3B0aW9uc0Rpc3BsYXllZCsrO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zRGlzcGxheWVkID09PSBuZXdRLmFuc3dlcnMubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5lbmFibGVBbnN3ZXJCdXR0b24oKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSwgKGkgKiBhbmltYXRpb25EdXJhdGlvbikgKiAwLjMpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdH0sIGRlbGF5QmZvcmVPcHRpb24pXHJcblxyXG5cclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucVN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZW5hYmxlQW5zd2VyQnV0dG9uKCk6IHZvaWQge1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYnV0dG9uc0FjdGl2ZSA9IHRydWU7XHJcblx0fVxyXG5cdHB1YmxpYyBzdGF0aWMgU2V0RmVlZGJhY2tUZXh0KG50OiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiRmVlZGJhY2sgdGV4dCBzZXQgdG8gXCIgKyBudCk7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5pbm5lckhUTUwgPSBudDtcclxuXHR9XHJcblxyXG5cdC8vZnVuY3Rpb25zIHRvIHNob3cvaGlkZSB0aGUgZGlmZmVyZW50IGNvbnRhaW5lcnNcclxuXHRwcml2YXRlIHNob3dMYW5kaW5nKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5sYW5kaW5nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHRcdHRoaXMuZ2FtZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0XHR0aGlzLmVuZENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFNob3dFbmQoKTogdm9pZCB7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5sYW5kaW5nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmdhbWVDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuZW5kQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2hvd0dhbWUoKTogdm9pZCB7XHJcblx0XHR0aGlzLmxhbmRpbmdDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdFx0dGhpcy5nYW1lQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImdyaWRcIjtcclxuXHRcdHRoaXMuZW5kQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdHRoaXMuYWxsU3RhcnQgPSBEYXRlLm5vdygpO1xyXG5cdFx0dGhpcy5zdGFydFByZXNzQ2FsbGJhY2soKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgU2V0RmVlZGJhY2tWaXNpYmlsZSh2aXNpYmxlOiBib29sZWFuKSB7XHJcblx0XHRpZiAodmlzaWJsZSkge1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZVwiKTtcclxuXHRcdFx0QXVkaW9Db250cm9sbGVyLlBsYXlDb3JyZWN0KCk7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnNBY3RpdmUgPSBmYWxzZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmZlZWRiYWNrQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpO1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5mZWVkYmFja0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zQWN0aXZlID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFJlYWR5Rm9yTmV4dChuZXdROiBxRGF0YSk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2coXCJyZWFkeSBmb3IgbmV4dCFcIik7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5hbnN3ZXJzQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG5cdFx0Zm9yICh2YXIgYiBpbiBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zKSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnNbYl0uc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcblx0XHR9XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5zaG93biA9IGZhbHNlO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkubmV4dFF1ZXN0aW9uID0gbmV3UTtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnF1ZXN0aW9uc0NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucXVlc3Rpb25zQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdC8vIHBCLmlubmVySFRNTCA9IFwiPGJ1dHRvbiBpZD0nbmV4dHFCdXR0b24nPjxzdmcgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9J25vbmUnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTTkgMThMMTUgMTJMOSA2VjE4WicgZmlsbD0nY3VycmVudENvbG9yJyBzdHJva2U9J2N1cnJlbnRDb2xvcicgc3Ryb2tlLXdpZHRoPScyJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnPjwvcGF0aD48L3N2Zz48L2J1dHRvbj5cIjtcclxuXHRcdC8vIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnBsYXlCdXR0b24uY2xhc3NMaXN0LmFkZChcImF1ZGlvLWJ1dHRvblwiKTtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnBsYXlCdXR0b24uaW5uZXJIVE1MID0gXCI8YnV0dG9uIGlkPSduZXh0cUJ1dHRvbic+PGltZyBjbGFzcz1hdWRpby1idXR0b24gd2lkdGg9JzEwMHB4JyBoZWlnaHQ9JzEwMHB4JyBzcmM9Jy9pbWcvU291bmRCdXR0b25fSWRsZS5wbmcnIHR5cGU9J2ltYWdlL3N2Zyt4bWwnPiA8L2ltZz48L2J1dHRvbj5cIjtcclxuXHRcdHZhciBuZXh0UXVlc3Rpb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5leHRxQnV0dG9uXCIpO1xyXG5cdFx0bmV4dFF1ZXN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5TaG93UXVlc3Rpb24oKTtcclxuXHRcdFx0Ly9wbGF5cXVlc3Rpb25hdWRpb1xyXG5cdFx0XHRBdWRpb0NvbnRyb2xsZXIuUGxheUF1ZGlvKG5ld1EucHJvbXB0QXVkaW8sIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnNob3dPcHRpb25zLCBVSUNvbnRyb2xsZXIuU2hvd0F1ZGlvQW5pbWF0aW9uKTtcclxuXHJcblx0XHR9KTtcclxuXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFNob3dBdWRpb0FuaW1hdGlvbihwbGF5aW5nOiBib29sZWFuID0gZmFsc2UpIHtcclxuXHRcdGNvbnN0IHBsYXlCdXR0b25JbWcgPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5wbGF5QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG5cdFx0aWYgKHBsYXlpbmcpIHtcclxuXHRcdFx0cGxheUJ1dHRvbkltZy5zcmMgPSAnYW5pbWF0aW9uL1NvdW5kQnV0dG9uLmdpZic7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cGxheUJ1dHRvbkltZy5zcmMgPSAnL2ltZy9Tb3VuZEJ1dHRvbl9JZGxlLnBuZyc7XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgU2hvd1F1ZXN0aW9uKG5ld1F1ZXN0aW9uPzogcURhdGEpOiB2b2lkIHtcclxuXHJcblx0XHQvLyBwQi5pbm5lckhUTUwgPSBcIjxidXR0b24gaWQ9J25leHRxQnV0dG9uJz48c3ZnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSdub25lJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J005IDE4TDE1IDEyTDkgNlYxOFonIGZpbGw9J2N1cnJlbnRDb2xvcicgc3Ryb2tlPSdjdXJyZW50Q29sb3InIHN0cm9rZS13aWR0aD0nMicgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJz48L3BhdGg+PC9zdmc+PC9idXR0b24+XCI7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5wbGF5QnV0dG9uLmlubmVySFRNTCA9IFwiPGJ1dHRvbiBpZD0nbmV4dHFCdXR0b24nPjxpbWcgY2xhc3M9YXVkaW8tYnV0dG9uIHdpZHRoPScxMDBweCcgaGVpZ2h0PScxMDBweCcgc3JjPScvaW1nL1NvdW5kQnV0dG9uX0lkbGUucG5nJyB0eXBlPSdpbWFnZS9zdmcreG1sJz4gPC9pbWc+PC9idXR0b24+XCI7XHJcblxyXG5cdFx0dmFyIG5leHRRdWVzdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV4dHFCdXR0b25cIik7XHJcblx0XHRuZXh0UXVlc3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJuZXh0IHF1ZXN0aW9uIGJ1dHRvbiBwcmVzc2VkXCIpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhuZXdRdWVzdGlvbi5wcm9tcHRBdWRpbyk7XHJcblxyXG5cdFx0XHRpZiAoJ3Byb21wdEF1ZGlvJyBpbiBuZXdRdWVzdGlvbikge1xyXG5cdFx0XHRcdEF1ZGlvQ29udHJvbGxlci5QbGF5QXVkaW8obmV3UXVlc3Rpb24ucHJvbXB0QXVkaW8sIHVuZGVmaW5lZCwgVUlDb250cm9sbGVyLlNob3dBdWRpb0FuaW1hdGlvbik7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblxyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYW5zd2Vyc0NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcblxyXG5cdFx0bGV0IHFDb2RlID0gXCJcIjtcclxuXHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuXHJcblx0XHRpZiAodHlwZW9mIChuZXdRdWVzdGlvbikgPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdFx0bmV3UXVlc3Rpb24gPSBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5uZXh0UXVlc3Rpb247XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCdwcm9tcHRJbWcnIGluIG5ld1F1ZXN0aW9uKSB7XHJcblx0XHRcdHZhciB0bXBpbWcgPSBBdWRpb0NvbnRyb2xsZXIuR2V0SW1hZ2UobmV3UXVlc3Rpb24ucHJvbXB0SW1nKTtcclxuXHRcdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucXVlc3Rpb25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHRtcGltZyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cUNvZGUgKz0gbmV3UXVlc3Rpb24ucHJvbXB0VGV4dDtcclxuXHJcblx0XHRxQ29kZSArPSBcIjxCUj5cIjtcclxuXHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5xdWVzdGlvbnNDb250YWluZXIuaW5uZXJIVE1MICs9IHFDb2RlO1xyXG5cclxuXHJcblx0XHRmb3IgKHZhciBidXR0b25JbmRleCBpbiBVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5idXR0b25zKSB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLmJ1dHRvbnNbYnV0dG9uSW5kZXhdLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBBZGRTdGFyKCk6IHZvaWQge1xyXG5cdFx0dmFyIHN0YXJUb1Nob3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJcIiArIFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnN0YXJzW1VJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnFBbnNOdW1dKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cdFx0c3RhclRvU2hvdy5zcmMgPSAnLi4vYW5pbWF0aW9uL1N0YXIuZ2lmJztcclxuXHRcdHN0YXJUb1Nob3cuY2xhc3NMaXN0LmFkZChcInRvcHN0YXJ2XCIpO1xyXG5cdFx0c3RhclRvU2hvdy5jbGFzc0xpc3QucmVtb3ZlKFwidG9wc3RhcmhcIik7XHJcblxyXG5cdFx0c3RhclRvU2hvdy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuXHJcblx0XHRsZXQgY29udGFpbmVyV2lkdGggPSBVSUNvbnRyb2xsZXIuaW5zdGFuY2Uuc3RhckNvbnRhaW5lci5vZmZzZXRXaWR0aDtcclxuXHRcdGxldCBjb250YWluZXJIZWlnaHQgPSBVSUNvbnRyb2xsZXIuaW5zdGFuY2Uuc3RhckNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coXCJTdGFycyBDb250YWluZXIgZGltZW5zaW9uczogXCIsIGNvbnRhaW5lcldpZHRoLCBjb250YWluZXJIZWlnaHQpO1xyXG5cclxuXHRcdGxldCByYW5kb21YID0gMDtcclxuXHRcdGxldCByYW5kb21ZID0gMDtcclxuXHJcblx0XHRkbyB7XHJcblx0XHRcdHJhbmRvbVggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoY29udGFpbmVyV2lkdGggLSA2MCkpO1xyXG5cdFx0XHRyYW5kb21ZID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29udGFpbmVySGVpZ2h0KTtcclxuXHRcdH0gd2hpbGUgKFVJQ29udHJvbGxlci5PdmVybGFwcGluZ090aGVyU3RhcnMoVUlDb250cm9sbGVyLmluc3RhbmNlLnN0YXJQb3NpdGlvbnMsIHJhbmRvbVgsIHJhbmRvbVksIDMwKSk7XHJcblxyXG5cdFx0Ly8gU2F2ZSB0aGVzZSByYW5kb20geCBhbmQgeSB2YWx1ZXMsIG1ha2UgdGhlIHN0YXIgYXBwZWFyIGluIHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlbiwgbWFrZSBpdCAzIHRpbWVzIGJpZ2dlciB1c2luZyBzY2FsZSBhbmQgc2xvd2x5IHRyYW5zaXRpb24gdG8gdGhlIHJhbmRvbSB4IGFuZCB5IHZhbHVlc1xyXG5cdFx0c3RhclRvU2hvdy5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKDEwKVwiO1xyXG5cdFx0c3RhclRvU2hvdy5zdHlsZS50cmFuc2l0aW9uID0gXCJ0b3AgMXMgZWFzZSwgbGVmdCAxcyBlYXNlLCB0cmFuc2Zvcm0gMC41cyBlYXNlXCI7XHJcblx0XHRzdGFyVG9TaG93LnN0eWxlLnpJbmRleCA9IFwiNTAwXCI7XHJcblx0XHRzdGFyVG9TaG93LnN0eWxlLnRvcCA9IHdpbmRvdy5pbm5lckhlaWdodCAvIDIgKyBcInB4XCI7XHJcblx0XHRzdGFyVG9TaG93LnN0eWxlLmxlZnQgPSBVSUNvbnRyb2xsZXIuaW5zdGFuY2UuZ2FtZUNvbnRhaW5lci5vZmZzZXRXaWR0aCAvIDIgLSAoc3RhclRvU2hvdy5vZmZzZXRXaWR0aCAvIDIpICsgXCJweFwiO1xyXG5cclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRzdGFyVG9TaG93LnN0eWxlLnRyYW5zaXRpb24gPSBcInRvcCAycyBlYXNlLCBsZWZ0IDJzIGVhc2UsIHRyYW5zZm9ybSAycyBlYXNlXCI7XHJcblx0XHRcdGlmIChyYW5kb21YIDwgY29udGFpbmVyV2lkdGggLyAyKSB7XHJcblx0XHRcdFx0Ly8gUm90YXRlIHRoZSBzdGFyIHRvIHRoZSByaWdodCBhIGJpdFxyXG5cdFx0XHRcdGNvbnN0IHJvdGF0aW9uID0gNSArIChNYXRoLnJhbmRvbSgpICogOCk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJSb3RhdGluZyBzdGFyIHRvIHRoZSByaWdodFwiLCByb3RhdGlvbik7XHJcblx0XHRcdFx0c3RhclRvU2hvdy5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZSgtXCIgKyByb3RhdGlvbiArIFwiZGVnKSBzY2FsZSgxKVwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIFJvdGF0ZSB0aGUgc3RhciB0byB0aGUgbGVmdCBhIGJpdFxyXG5cdFx0XHRcdGNvbnN0IHJvdGF0aW9uID0gNSArIChNYXRoLnJhbmRvbSgpICogOCk7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJSb3RhdGluZyBzdGFyIHRvIHRoZSBsZWZ0XCIsIHJvdGF0aW9uKTtcclxuXHRcdFx0XHRzdGFyVG9TaG93LnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlKFwiICsgcm90YXRpb24gKyBcImRlZykgc2NhbGUoMSlcIjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c3RhclRvU2hvdy5zdHlsZS5sZWZ0ID0gMjAgKyByYW5kb21YICsgXCJweFwiO1xyXG5cdFx0XHRzdGFyVG9TaG93LnN0eWxlLnRvcCA9IDYwICsgcmFuZG9tWSArIFwicHhcIjtcclxuXHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHN0YXJUb1Nob3cuc3R5bGUuZmlsdGVyID0gXCJkcm9wLXNoYWRvdygwcHggMHB4IDEwcHggeWVsbG93KVwiO1xyXG5cdFx0XHR9LCAxOTAwKTtcclxuXHRcdH0sIDEwMDApO1xyXG5cclxuXHRcdFVJQ29udHJvbGxlci5pbnN0YW5jZS5zdGFyUG9zaXRpb25zLnB1c2goeyB4OiByYW5kb21YLCB5OiByYW5kb21ZIH0pO1xyXG5cclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnFBbnNOdW0gKz0gMTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgQ2hhbmdlU3RhckltYWdlQWZ0ZXJBbmltYXRpb24oKTogdm9pZCB7XHJcblx0XHR2YXIgc3RhclRvU2hvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhclwiICsgVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuc3RhcnNbVUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkucUFuc051bSAtIDFdKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cdFx0c3RhclRvU2hvdy5zcmMgPSAnLi4vaW1nL3N0YXJfYWZ0ZXJfYW5pbWF0aW9uLmdpZidcclxuXHR9XHJcblxyXG5cclxuXHRwcml2YXRlIGFuc3dlckJ1dHRvblByZXNzKGJ1dHRvbk51bTogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRjb25zdCBhbGxCdXR0b25zVmlzaWJsZSA9IHRoaXMuYnV0dG9ucy5ldmVyeShidXR0b24gPT4gYnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPT09IFwidmlzaWJsZVwiKTtcclxuXHRcdGNvbnNvbGUubG9nKHRoaXMuYnV0dG9uc0FjdGl2ZSwgYWxsQnV0dG9uc1Zpc2libGUpO1xyXG5cdFx0aWYgKHRoaXMuYnV0dG9uc0FjdGl2ZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRBdWRpb0NvbnRyb2xsZXIuUGxheURpbmcoKTtcclxuXHRcdFx0Y29uc3QgblByZXNzZWQgPSBEYXRlLm5vdygpO1xyXG5cdFx0XHRjb25zdCBkVGltZSA9IG5QcmVzc2VkIC0gdGhpcy5xU3RhcnQ7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiYW5zd2VyZWQgaW4gXCIgKyBkVGltZSk7XHJcblx0XHRcdHRoaXMuYnV0dG9uUHJlc3NDYWxsYmFjayhidXR0b25OdW0sIGRUaW1lKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGF0aWMgUHJvZ3Jlc3NDaGVzdCgpIHtcclxuXHRcdGNvbnN0IGNoZXN0SW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hlc3RJbWFnZScpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XHJcblx0XHRsZXQgY3VycmVudEltZ1NyYyA9IGNoZXN0SW1hZ2Uuc3JjXHJcblx0XHRjb25zb2xlLmxvZygnQ2hlc3QgUHJvZ3Jlc3Npb24tLT4nLCBjaGVzdEltYWdlKTtcclxuXHRcdGNvbnNvbGUubG9nKCdDaGVzdCBQcm9ncmVzc2lvbi0tPicsIGNoZXN0SW1hZ2Uuc3JjKTtcclxuXHRcdGNvbnN0IGN1cnJlbnRJbWFnZU51bWJlciA9IHBhcnNlSW50KGN1cnJlbnRJbWdTcmMuc2xpY2UoLTYsIC00KSwgMTApO1xyXG5cdFx0Y29uc29sZS5sb2coJ0NoZXN0IFByb2dyZXNzaW9uIG51bWJlci0tPicsIGN1cnJlbnRJbWFnZU51bWJlcik7XHJcblx0XHRjb25zdCBuZXh0SW1hZ2VOdW1iZXIgPSBjdXJyZW50SW1hZ2VOdW1iZXIgJSA0ICsgMTtcclxuXHRcdGNvbnN0IG5leHRJbWFnZVNyYyA9IGBpbWcvY2hlc3Rwcm9ncmVzc2lvbi9UcmVhc3VyZUNoZXN0T3BlbjAke25leHRJbWFnZU51bWJlcn0uc3ZnYDtcclxuXHRcdGNoZXN0SW1hZ2Uuc3JjID0gbmV4dEltYWdlU3JjO1xyXG5cclxuXHJcblxyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBTZXRDb250ZW50TG9hZGVkKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XHJcblx0XHRVSUNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKS5jb250ZW50TG9hZGVkID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc3RhdGljIFNldEJ1dHRvblByZXNzQWN0aW9uKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xyXG5cdFx0VUlDb250cm9sbGVyLmdldEluc3RhbmNlKCkuYnV0dG9uUHJlc3NDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBTZXRTdGFydEFjdGlvbihjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcclxuXHRcdFVJQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpLnN0YXJ0UHJlc3NDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBVSUNvbnRyb2xsZXIge1xyXG5cdFx0aWYgKFVJQ29udHJvbGxlci5pbnN0YW5jZSA9PT0gbnVsbCkge1xyXG5cdFx0XHRVSUNvbnRyb2xsZXIuaW5zdGFuY2UgPSBuZXcgVUlDb250cm9sbGVyKCk7XHJcblx0XHRcdFVJQ29udHJvbGxlci5pbnN0YW5jZS5pbml0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIFVJQ29udHJvbGxlci5pbnN0YW5jZTtcclxuXHR9XHJcbn1cclxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgRmlyZWJhc2UgY29uc3RhbnRzLiAgU29tZSBvZiB0aGVzZSAoQGRlZmluZXMpIGNhbiBiZSBvdmVycmlkZGVuIGF0IGNvbXBpbGUtdGltZS5cclxuICovXHJcbmNvbnN0IENPTlNUQU5UUyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBjbGllbnQgTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQ0xJRU5UOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogQGRlZmluZSB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGlzIHRoZSBBZG1pbiBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9BRE1JTjogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEZpcmViYXNlIFNESyBWZXJzaW9uXHJcbiAgICAgKi9cclxuICAgIFNES19WRVJTSU9OOiAnJHtKU0NPUkVfVkVSU0lPTn0nXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIHByb3ZpZGVkIGFzc2VydGlvbiBpcyBmYWxzeVxyXG4gKi9cclxuY29uc3QgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcihtZXNzYWdlKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gRXJyb3Igb2JqZWN0IHN1aXRhYmxlIGZvciB0aHJvd2luZy5cclxuICovXHJcbmNvbnN0IGFzc2VydGlvbkVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ZpcmViYXNlIERhdGFiYXNlICgnICtcclxuICAgICAgICBDT05TVEFOVFMuU0RLX1ZFUlNJT04gK1xyXG4gICAgICAgICcpIElOVEVSTkFMIEFTU0VSVCBGQUlMRUQ6ICcgK1xyXG4gICAgICAgIG1lc3NhZ2UpO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSQxID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiZcclxuICAgICAgICAgICAgaSArIDEgPCBzdHIubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIChzdHIuY2hhckNvZGVBdChpICsgMSkgJiAweGZjMDApID09PSAweGRjMDApIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgJiAweDAzZmYpIDw8IDEwKSArIChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHgwM2ZmKTtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIFR1cm5zIGFuIGFycmF5IG9mIG51bWJlcnMgaW50byB0aGUgc3RyaW5nIGdpdmVuIGJ5IHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZVxyXG4gKiBjaGFyYWN0ZXJzIHRvIHdoaWNoIHRoZSBudW1iZXJzIGNvcnJlc3BvbmQuXHJcbiAqIEBwYXJhbSBieXRlcyBBcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBjaGFyYWN0ZXJzLlxyXG4gKiBAcmV0dXJuIFN0cmluZ2lmaWNhdGlvbiBvZiB0aGUgYXJyYXkuXHJcbiAqL1xyXG5jb25zdCBieXRlQXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIChieXRlcykge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHBvcyA9IDAsIGMgPSAwO1xyXG4gICAgd2hpbGUgKHBvcyA8IGJ5dGVzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGMxID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgIGlmIChjMSA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDE5MSAmJiBjMSA8IDIyNCkge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAzMSkgPDwgNikgfCAoYzIgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDIzOSAmJiBjMSA8IDM2NSkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGM0ID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCB1ID0gKCgoYzEgJiA3KSA8PCAxOCkgfCAoKGMyICYgNjMpIDw8IDEyKSB8ICgoYzMgJiA2MykgPDwgNikgfCAoYzQgJiA2MykpIC1cclxuICAgICAgICAgICAgICAgIDB4MTAwMDA7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGQ4MDAgKyAodSA+PiAxMCkpO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkYzAwICsgKHUgJiAxMDIzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMTUpIDw8IDEyKSB8ICgoYzIgJiA2MykgPDwgNikgfCAoYzMgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQuam9pbignJyk7XHJcbn07XHJcbi8vIFdlIGRlZmluZSBpdCBhcyBhbiBvYmplY3QgbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY2xhc3MgYmVjYXVzZSBhIGNsYXNzIGNvbXBpbGVkIGRvd24gdG8gZXM1IGNhbid0XHJcbi8vIGJlIHRyZWVzaGFrZWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2xsdXAvcm9sbHVwL2lzc3Vlcy8xNjkxXHJcbi8vIFN0YXRpYyBsb29rdXAgbWFwcywgbGF6aWx5IHBvcHVsYXRlZCBieSBpbml0XygpXHJcbmNvbnN0IGJhc2U2NCA9IHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byBjaGFyYWN0ZXJzLlxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBieXRlcyB0byB3ZWJzYWZlIGNoYXJhY3RlcnMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBieXRlVG9DaGFyTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgd2Vic2FmZSBjaGFyYWN0ZXJzIHRvIGJ5dGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldCwgc2hhcmVkIGJldHdlZW5cclxuICAgICAqIEVOQ09ERURfVkFMUyBhbmQgRU5DT0RFRF9WQUxTX1dFQlNBRkVcclxuICAgICAqL1xyXG4gICAgRU5DT0RFRF9WQUxTX0JBU0U6ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWicgKyAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICsgJzAxMjM0NTY3ODknLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgZGVmYXVsdCBhbHBoYWJldC4gVmFsdWUgNjQgKD0pIGlzIHNwZWNpYWw7IGl0IG1lYW5zIFwibm90aGluZy5cIlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJysvPSc7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgd2Vic2FmZSBhbHBoYWJldC5cclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMU19XRUJTQUZFKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLkVOQ09ERURfVkFMU19CQVNFICsgJy1fLic7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBXaGV0aGVyIHRoaXMgYnJvd3NlciBzdXBwb3J0cyB0aGUgYXRvYiBhbmQgYnRvYSBmdW5jdGlvbnMuIFRoaXMgZXh0ZW5zaW9uXHJcbiAgICAgKiBzdGFydGVkIGF0IE1vemlsbGEgYnV0IGlzIG5vdyBpbXBsZW1lbnRlZCBieSBtYW55IGJyb3dzZXJzLiBXZSB1c2UgdGhlXHJcbiAgICAgKiBBU1NVTUVfKiB2YXJpYWJsZXMgdG8gYXZvaWQgcHVsbGluZyBpbiB0aGUgZnVsbCB1c2VyYWdlbnQgZGV0ZWN0aW9uIGxpYnJhcnlcclxuICAgICAqIGJ1dCBzdGlsbCBhbGxvd2luZyB0aGUgc3RhbmRhcmQgcGVyLWJyb3dzZXIgY29tcGlsYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgSEFTX05BVElWRV9TVVBQT1JUOiB0eXBlb2YgYXRvYiA9PT0gJ2Z1bmN0aW9uJyxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhbiBhcnJheSBvZiBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQW4gYXJyYXkgb2YgYnl0ZXMgKG51bWJlcnMgd2l0aFxyXG4gICAgICogICAgIHZhbHVlIGluIFswLCAyNTVdKSB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBCb29sZWFuIGluZGljYXRpbmcgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGlucHV0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBieXRlVG9DaGFyTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5ieXRlVG9DaGFyTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gaW5wdXRbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgKyAxIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGlucHV0W2kgKyAxXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgKyAyIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGlucHV0W2kgKyAyXSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gYnl0ZTEgPj4gMjtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUxICYgMHgwMykgPDwgNCkgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlMyA9ICgoYnl0ZTIgJiAweDBmKSA8PCAyKSB8IChieXRlMyA+PiA2KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGU0ID0gYnl0ZTMgJiAweDNmO1xyXG4gICAgICAgICAgICBpZiAoIWhhdmVCeXRlMykge1xyXG4gICAgICAgICAgICAgICAgb3V0Qnl0ZTQgPSA2NDtcclxuICAgICAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Qnl0ZTMgPSA2NDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChieXRlVG9DaGFyTWFwW291dEJ5dGUxXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMl0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTNdLCBieXRlVG9DaGFyTWFwW291dEJ5dGU0XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQuam9pbignJyk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHN0cmluZyB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBJZiB0cnVlLCB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJ0b2EoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVCeXRlQXJyYXkoc3RyaW5nVG9CeXRlQXJyYXkkMShpbnB1dCksIHdlYlNhZmUpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmcoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICAvLyBTaG9ydGN1dCBmb3IgTW96aWxsYSBicm93c2VycyB0aGF0IGltcGxlbWVudFxyXG4gICAgICAgIC8vIGEgbmF0aXZlIGJhc2U2NCBlbmNvZGVyIGluIHRoZSBmb3JtIG9mIFwiYnRvYS9hdG9iXCJcclxuICAgICAgICBpZiAodGhpcy5IQVNfTkFUSVZFX1NVUFBPUlQgJiYgIXdlYlNhZmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF0b2IoaW5wdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnl0ZUFycmF5VG9TdHJpbmcodGhpcy5kZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBJbiBiYXNlLTY0IGRlY29kaW5nLCBncm91cHMgb2YgZm91ciBjaGFyYWN0ZXJzIGFyZSBjb252ZXJ0ZWQgaW50byB0aHJlZVxyXG4gICAgICogYnl0ZXMuICBJZiB0aGUgZW5jb2RlciBkaWQgbm90IGFwcGx5IHBhZGRpbmcsIHRoZSBpbnB1dCBsZW5ndGggbWF5IG5vdFxyXG4gICAgICogYmUgYSBtdWx0aXBsZSBvZiA0LlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgY2FzZSwgdGhlIGxhc3QgZ3JvdXAgd2lsbCBoYXZlIGZld2VyIHRoYW4gNCBjaGFyYWN0ZXJzLCBhbmRcclxuICAgICAqIHBhZGRpbmcgd2lsbCBiZSBpbmZlcnJlZC4gIElmIHRoZSBncm91cCBoYXMgb25lIG9yIHR3byBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzXHJcbiAgICAgKiB0byBvbmUgYnl0ZS4gIElmIHRoZSBncm91cCBoYXMgdGhyZWUgY2hhcmFjdGVycywgaXQgZGVjb2RlcyB0byB0d28gYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IElucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGUgd2ViLXNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIGJ5dGVzIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgY2hhclRvQnl0ZU1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuY2hhclRvQnl0ZU1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUxID0gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSsrKV07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMiA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogMDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMyA9IGhhdmVCeXRlMyA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlNCA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGU0ID0gaGF2ZUJ5dGU0ID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUxID09IG51bGwgfHwgYnl0ZTIgPT0gbnVsbCB8fCBieXRlMyA9PSBudWxsIHx8IGJ5dGU0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSAoYnl0ZTEgPDwgMikgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUxKTtcclxuICAgICAgICAgICAgaWYgKGJ5dGUzICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTMgPSAoKGJ5dGUzIDw8IDYpICYgMHhjMCkgfCBieXRlNDtcclxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIExhenkgc3RhdGljIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uLiBDYWxsZWQgYmVmb3JlXHJcbiAgICAgKiBhY2Nlc3NpbmcgYW55IG9mIHRoZSBzdGF0aWMgbWFwIHZhcmlhYmxlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGluaXRfKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXHJcbiAqL1xyXG5jb25zdCBiYXNlNjRFbmNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCB1dGY4Qnl0ZXMgPSBzdHJpbmdUb0J5dGVBcnJheSQxKHN0cik7XHJcbiAgICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheSh1dGY4Qnl0ZXMsIHRydWUpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nICh3aXRob3V0IFwiLlwiIHBhZGRpbmcgaW4gdGhlIGVuZCkuXHJcbiAqIGUuZy4gVXNlZCBpbiBKU09OIFdlYiBUb2tlbiAoSldUKSBwYXJ0cy5cclxuICovXHJcbmNvbnN0IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgLy8gVXNlIGJhc2U2NHVybCBlbmNvZGluZyBhbmQgcmVtb3ZlIHBhZGRpbmcgaW4gdGhlIGVuZCAoZG90IGNoYXJhY3RlcnMpLlxyXG4gICAgcmV0dXJuIGJhc2U2NEVuY29kZShzdHIpLnJlcGxhY2UoL1xcLi9nLCAnJyk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZGVjb2RpbmdcclxuICpcclxuICogTk9URTogRE8gTk9UIHVzZSB0aGUgZ2xvYmFsIGF0b2IoKSBmdW5jdGlvbiAtIGl0IGRvZXMgTk9UIHN1cHBvcnQgdGhlXHJcbiAqIGJhc2U2NFVybCB2YXJpYW50IGVuY29kaW5nLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RyIFRvIGJlIGRlY29kZWRcclxuICogQHJldHVybiBEZWNvZGVkIHJlc3VsdCwgaWYgcG9zc2libGVcclxuICovXHJcbmNvbnN0IGJhc2U2NERlY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5kZWNvZGVTdHJpbmcoc3RyLCB0cnVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignYmFzZTY0RGVjb2RlIGZhaWxlZDogJywgZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERvIGEgZGVlcC1jb3B5IG9mIGJhc2ljIEphdmFTY3JpcHQgT2JqZWN0cyBvciBBcnJheXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwQ29weSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSk7XHJcbn1cclxuLyoqXHJcbiAqIENvcHkgcHJvcGVydGllcyBmcm9tIHNvdXJjZSB0byB0YXJnZXQgKHJlY3Vyc2l2ZWx5IGFsbG93cyBleHRlbnNpb25cclxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxyXG4gKiBJZiB0YXJnZXQgaXMgdW5kZWZpbmVkLCBhbiBvYmplY3Qgb2YgdGhlIGFwcHJvcHJpYXRlIHR5cGUgd2lsbCBiZSBjcmVhdGVkXHJcbiAqIChhbmQgcmV0dXJuZWQpLlxyXG4gKlxyXG4gKiBXZSByZWN1cnNpdmVseSBjb3B5IGFsbCBjaGlsZCBwcm9wZXJ0aWVzIG9mIHBsYWluIE9iamVjdHMgaW4gdGhlIHNvdXJjZS0gc29cclxuICogdGhhdCBuYW1lc3BhY2UtIGxpa2UgZGljdGlvbmFyaWVzIGFyZSBtZXJnZWQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB0aGUgdGFyZ2V0IGNhbiBiZSBhIGZ1bmN0aW9uLCBpbiB3aGljaCBjYXNlIHRoZSBwcm9wZXJ0aWVzIGluXHJcbiAqIHRoZSBzb3VyY2UgT2JqZWN0IGFyZSBjb3BpZWQgb250byBpdCBhcyBzdGF0aWMgcHJvcGVydGllcyBvZiB0aGUgRnVuY3Rpb24uXHJcbiAqXHJcbiAqIE5vdGU6IHdlIGRvbid0IG1lcmdlIF9fcHJvdG9fXyB0byBwcmV2ZW50IHByb3RvdHlwZSBwb2xsdXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcclxuICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkpIHtcclxuICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChzb3VyY2UuY29uc3RydWN0b3IpIHtcclxuICAgICAgICBjYXNlIERhdGU6XHJcbiAgICAgICAgICAgIC8vIFRyZWF0IERhdGVzIGxpa2Ugc2NhbGFyczsgaWYgdGhlIHRhcmdldCBkYXRlIG9iamVjdCBoYWQgYW55IGNoaWxkXHJcbiAgICAgICAgICAgIC8vIHByb3BlcnRpZXMgLSB0aGV5IHdpbGwgYmUgbG9zdCFcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVZhbHVlID0gc291cmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZVZhbHVlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgY2FzZSBPYmplY3Q6XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBBcnJheTpcclxuICAgICAgICAgICAgLy8gQWx3YXlzIGNvcHkgdGhlIGFycmF5IHNvdXJjZSBhbmQgb3ZlcndyaXRlIHRoZSB0YXJnZXQuXHJcbiAgICAgICAgICAgIHRhcmdldCA9IFtdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAvLyBOb3QgYSBwbGFpbiBPYmplY3QgLSB0cmVhdCBpdCBhcyBhIHNjYWxhci5cclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgcHJvcCBpbiBzb3VyY2UpIHtcclxuICAgICAgICAvLyB1c2UgaXNWYWxpZEtleSB0byBndWFyZCBhZ2FpbnN0IHByb3RvdHlwZSBwb2xsdXRpb24uIFNlZSBodHRwczovL3NueWsuaW8vdnVsbi9TTllLLUpTLUxPREFTSC00NTAyMDJcclxuICAgICAgICBpZiAoIXNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSB8fCAhaXNWYWxpZEtleShwcm9wKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59XHJcbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5KSB7XHJcbiAgICByZXR1cm4ga2V5ICE9PSAnX19wcm90b19fJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbi8vIE5vZGUgZGV0ZWN0aW9uIGxvZ2ljIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pbGlha2FuL2RldGVjdC1ub2RlL1xyXG5mdW5jdGlvbiBpc05vZGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGY7XHJcbn1cclxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xyXG4gICAgY29uc3QgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyBjaHJvbWUucnVudGltZVxyXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXHJcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc0VsZWN0cm9uKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBJbnRlcm5ldCBFeHBsb3Jlci4gKi9cclxuZnVuY3Rpb24gaXNJRSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFICcpID49IDAgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzVVdQKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xyXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiZcclxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICovXHJcbmZ1bmN0aW9uIGdldEdsb2JhbCgpIHtcclxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gc2VsZjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tR2xvYmFsID0gKCkgPT4gZ2V0R2xvYmFsKCkuX19GSVJFQkFTRV9ERUZBVUxUU19fO1xyXG4vKipcclxuICogQXR0ZW1wdCB0byByZWFkIGRlZmF1bHRzIGZyb20gYSBKU09OIHN0cmluZyBwcm92aWRlZCB0b1xyXG4gKiBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX18gb3IgYSBKU09OIGZpbGUgd2hvc2UgcGF0aCBpcyBpblxyXG4gKiBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX1BBVEhfX1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWZhdWx0c0pzb25TdHJpbmcgPSBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcclxuICAgICAgICAvLyBgZG9jdW1lbnRgIG9iamVjdCBidXQgZXJyb3Igb24gYWNjZXNzaW5nIGBkb2N1bWVudC5jb29raWVgLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZWQgPSBtYXRjaCAmJiBiYXNlNjREZWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcclxufTtcclxuLyoqXHJcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxyXG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXHJcbiAqICgyKSBpZiBzdWNoIGFuIG9iamVjdCB3YXMgcHJvdmlkZWQgb24gYSBzaGVsbCBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0cyA9ICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChnZXREZWZhdWx0c0Zyb21HbG9iYWwoKSB8fFxyXG4gICAgICAgICAgICBnZXREZWZhdWx0c0Zyb21FbnZWYXJpYWJsZSgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUNvb2tpZSgpKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2F0Y2gtYWxsIGZvciBiZWluZyB1bmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWVcclxuICAgICAgICAgKiB0byBhbnkgZW52aXJvbm1lbnQgY2FzZSB3ZSBoYXZlIG5vdCBhY2NvdW50ZWQgZm9yLiBMb2cgdG9cclxuICAgICAgICAgKiBpbmZvIGluc3RlYWQgb2Ygc3dhbGxvd2luZyBzbyB3ZSBjYW4gZmluZCB0aGVzZSB1bmtub3duIGNhc2VzXHJcbiAgICAgICAgICogYW5kIGFkZCBwYXRocyBmb3IgdGhlbSBpZiBuZWVkZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc29sZS5pbmZvKGBVbmFibGUgdG8gZ2V0IF9fRklSRUJBU0VfREVGQVVMVFNfXyBkdWUgdG86ICR7ZX1gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3Qgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBVUkwgaG9zdCBmb3JtYXR0ZWQgbGlrZSBgMTI3LjAuMC4xOjk5OTlgIG9yIGBbOjoxXTo0MDAwYCBpZiBhdmFpbGFibGVcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCA9IChwcm9kdWN0TmFtZSkgPT4geyB2YXIgX2EsIF9iOyByZXR1cm4gKF9iID0gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtdWxhdG9ySG9zdHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYltwcm9kdWN0TmFtZV07IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGVtdWxhdG9yIGhvc3RuYW1lIGFuZCBwb3J0IHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdFxyXG4gKiBmb3IgdGhlIGdpdmVuIHByb2R1Y3QuXHJcbiAqIEByZXR1cm5zIGEgcGFpciBvZiBob3N0bmFtZSBhbmQgcG9ydCBsaWtlIGBbXCI6OjFcIiwgNDAwMF1gIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQgPSAocHJvZHVjdE5hbWUpID0+IHtcclxuICAgIGNvbnN0IGhvc3QgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0KHByb2R1Y3ROYW1lKTtcclxuICAgIGlmICghaG9zdCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IGhvc3QubGFzdEluZGV4T2YoJzonKTsgLy8gRmluZGluZyB0aGUgbGFzdCBzaW5jZSBJUHY2IGFkZHIgYWxzbyBoYXMgY29sb25zLlxyXG4gICAgaWYgKHNlcGFyYXRvckluZGV4IDw9IDAgfHwgc2VwYXJhdG9ySW5kZXggKyAxID09PSBob3N0Lmxlbmd0aCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBob3N0ICR7aG9zdH0gd2l0aCBubyBzZXBhcmF0ZSBob3N0bmFtZSBhbmQgcG9ydCFgKTtcclxuICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuICAgIGNvbnN0IHBvcnQgPSBwYXJzZUludChob3N0LnN1YnN0cmluZyhzZXBhcmF0b3JJbmRleCArIDEpLCAxMCk7XHJcbiAgICBpZiAoaG9zdFswXSA9PT0gJ1snKSB7XHJcbiAgICAgICAgLy8gQnJhY2tldC1xdW90ZWQgYFtpcHY2YWRkcl06cG9ydGAgPT4gcmV0dXJuIFwiaXB2NmFkZHJcIiAod2l0aG91dCBicmFja2V0cykuXHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygxLCBzZXBhcmF0b3JJbmRleCAtIDEpLCBwb3J0XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBbaG9zdC5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLCBwb3J0XTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgRmlyZWJhc2UgYXBwIGNvbmZpZyBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRBcHBDb25maWcgPSAoKSA9PiB7IHZhciBfYTsgcmV0dXJuIChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb25maWc7IH07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIGV4cGVyaW1lbnRhbCBzZXR0aW5nIG9uIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0IChwcm9wZXJ0aWVzXHJcbiAqIHByZWZpeGVkIGJ5IFwiX1wiKVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXRFeHBlcmltZW50YWxTZXR0aW5nID0gKG5hbWUpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2BfJHtuYW1lfWBdOyB9O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBEZWZlcnJlZCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlamVjdCA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmUgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3VyIEFQSSBpbnRlcm5hbHMgYXJlIG5vdCBwcm9taXNlaWZpZWQgYW5kIGNhbm5vdCBiZWNhdXNlIG91ciBjYWxsYmFjayBBUElzIGhhdmUgc3VidGxlIGV4cGVjdGF0aW9ucyBhcm91bmRcclxuICAgICAqIGludm9raW5nIHByb21pc2VzIGlubGluZSwgd2hpY2ggUHJvbWlzZXMgYXJlIGZvcmJpZGRlbiB0byBkby4gVGhpcyBtZXRob2QgYWNjZXB0cyBhbiBvcHRpb25hbCBub2RlLXN0eWxlIGNhbGxiYWNrXHJcbiAgICAgKiBhbmQgcmV0dXJucyBhIG5vZGUtc3R5bGUgY2FsbGJhY2sgd2hpY2ggd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgRGVmZXJyZWQncyBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICB3cmFwQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gKGVycm9yLCB2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb21pc2UuY2F0Y2goKCkgPT4geyB9KTtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGNhbGxiYWNrcyBkb24ndCBleHBlY3QgYSB2YWx1ZSBhbmQgb3VyIG93biB0ZXN0c1xyXG4gICAgICAgICAgICAgICAgLy8gYXNzZXJ0IHRoYXQgdGhlIHBhcmFtZXRlciBsZW5ndGggaXMgMVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1vY2tVc2VyVG9rZW4odG9rZW4sIHByb2plY3RJZCkge1xyXG4gICAgaWYgKHRva2VuLnVpZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFwidWlkXCIgZmllbGQgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBieSBtb2NrVXNlclRva2VuLiBQbGVhc2UgdXNlIFwic3ViXCIgaW5zdGVhZCBmb3IgRmlyZWJhc2UgQXV0aCBVc2VyIElELicpO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIFwibm9uZVwiIGFzIHRoZSBhbGdvcml0aG0uXHJcbiAgICBjb25zdCBoZWFkZXIgPSB7XHJcbiAgICAgICAgYWxnOiAnbm9uZScsXHJcbiAgICAgICAgdHlwZTogJ0pXVCdcclxuICAgIH07XHJcbiAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdElkIHx8ICdkZW1vLXByb2plY3QnO1xyXG4gICAgY29uc3QgaWF0ID0gdG9rZW4uaWF0IHx8IDA7XHJcbiAgICBjb25zdCBzdWIgPSB0b2tlbi5zdWIgfHwgdG9rZW4udXNlcl9pZDtcclxuICAgIGlmICghc3ViKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKHsgXHJcbiAgICAgICAgLy8gU2V0IGFsbCByZXF1aXJlZCBmaWVsZHMgdG8gZGVjZW50IGRlZmF1bHRzXHJcbiAgICAgICAgaXNzOiBgaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tLyR7cHJvamVjdH1gLCBhdWQ6IHByb2plY3QsIGlhdCwgZXhwOiBpYXQgKyAzNjAwLCBhdXRoX3RpbWU6IGlhdCwgc3ViLCB1c2VyX2lkOiBzdWIsIGZpcmViYXNlOiB7XHJcbiAgICAgICAgICAgIHNpZ25faW5fcHJvdmlkZXI6ICdjdXN0b20nLFxyXG4gICAgICAgICAgICBpZGVudGl0aWVzOiB7fVxyXG4gICAgICAgIH0gfSwgdG9rZW4pO1xyXG4gICAgLy8gVW5zZWN1cmVkIEpXVHMgdXNlIHRoZSBlbXB0eSBzdHJpbmcgYXMgYSBzaWduYXR1cmUuXHJcbiAgICBjb25zdCBzaWduYXR1cmUgPSAnJztcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoaGVhZGVyKSksXHJcbiAgICAgICAgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgXS5qb2luKCcuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjb2RlLCBtZXNzYWdlLCBcclxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmViYXNlRXJyb3JzLiAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlamVjdHMgaWYgdGhlIGdpdmVuIHByb21pc2UgZG9lc24ndCByZXNvbHZlIGluIHRpbWVJbk1TIG1pbGxpc2Vjb25kcy5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9taXNlV2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZUluTVMgPSAyMDAwKSB7XHJcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gZGVmZXJyZWRQcm9taXNlLnJlamVjdCgndGltZW91dCEnKSwgdGltZUluTVMpO1xyXG4gICAgcHJvbWlzZS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLCBkZWZlcnJlZFByb21pc2UucmVqZWN0KTtcclxuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvcGllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyB1dWlkLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCB1dWlkdjQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcclxuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlZmVycmVkLCBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IsIE1BWF9WQUxVRV9NSUxMSVMsIFJBTkRPTV9GQUNUT1IsIFNoYTEsIGFyZUNvb2tpZXNFbmFibGVkLCBhc3NlcnQsIGFzc2VydGlvbkVycm9yLCBhc3luYywgYmFzZTY0LCBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIGNvbnRhaW5zLCBjcmVhdGVNb2NrVXNlclRva2VuLCBjcmVhdGVTdWJzY3JpYmUsIGRlY29kZSwgZGVlcENvcHksIGRlZXBFcXVhbCwgZGVlcEV4dGVuZCwgZXJyb3JQcmVmaXgsIGV4dHJhY3RRdWVyeXN0cmluZywgZ2V0RGVmYXVsdEFwcENvbmZpZywgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCwgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0LCBnZXRFeHBlcmltZW50YWxTZXR0aW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0VsZWN0cm9uLCBpc0VtcHR5LCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc05vZGUsIGlzTm9kZVNkaywgaXNSZWFjdE5hdGl2ZSwgaXNTYWZhcmksIGlzVVdQLCBpc1ZhbGlkRm9ybWF0LCBpc1ZhbGlkVGltZXN0YW1wLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHByb21pc2VXaXRoVGltZW91dCwgcXVlcnlzdHJpbmcsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBzYWZlR2V0LCBzdHJpbmdMZW5ndGgsIHN0cmluZ1RvQnl0ZUFycmF5LCBzdHJpbmdpZnksIHV1aWR2NCwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGV0aGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIExBWlkgKi87XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRNdWx0aXBsZUluc3RhbmNlcyhtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBjYWxsYmFjaztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbmNsYXNzIFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIGdldChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH1cclxuICAgIGdldEltbWVkaWF0ZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3B0aW9uYWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSW4gY2FzZSBhIGNvbXBvbmVudCBpcyBub3QgaW5pdGlhbGl6ZWQgYW5kIHNob3VsZC9jYW4gbm90IGJlIGF1dG8taW5pdGlhbGl6ZWQgYXQgdGhlIG1vbWVudCwgcmV0dXJuIG51bGwgaWYgdGhlIG9wdGlvbmFsIGZsYWcgaXMgc2V0LCBvciB0aHJvd1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFNlcnZpY2UgJHt0aGlzLm5hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldENvbXBvbmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc21hdGNoaW5nIENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmb3IgUHJvdmlkZXIgJHt0aGlzLm5hbWV9LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhckluc3RhbmNlKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlKSAvLyBsZWdhY3kgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKSksXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuX2RlbGV0ZSgpKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgaXNDb21wb25lbnRTZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpc0luaXRpYWxpemVkKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKG9wdHMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGAke3RoaXMubmFtZX0oJHtub3JtYWxpemVkSWRlbnRpZmllcn0pIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcclxuICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZSB3YWl0aW5nIGZvciB0aGUgc2VydmljZSBpbnN0YW5jZVxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gaXMgaW52b2tlZCBTWU5DSFJPTk9VU0xZLCBzbyBpdCBzaG91bGQgbm90IGV4ZWN1dGUgYW55IGxvbmdydW5uaW5nIHRhc2tzIGluIG9yZGVyIHRvIG5vdCBibG9jayB0aGUgcHJvZ3JhbS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXHJcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIG9uSW5pdChjYWxsYmFjaywgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gKF9hID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IFNldCgpO1xyXG4gICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3Muc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBleGlzdGluZ0NhbGxiYWNrcyk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcclxuICAgICAqL1xyXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgKiBOb3RlIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkIGlzIGRpZmZlcmVudCwgd2hpY2ggaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IGNyZWF0b3IsXHJcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAqIG9uSW5zdGFuY2VDcmVhdGVkKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7IHdoaWNoXHJcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIG5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3VsZEF1dG9Jbml0aWFsaXplKCkge1xyXG4gICAgICAgIHJldHVybiAoISF0aGlzLmNvbXBvbmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSAhPT0gXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKTtcclxuICAgIH1cclxufVxyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxyXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XHJcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcclxuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxyXG4gICAgICovXHJcbiAgICBhZGRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBhZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJvdmlkZXIobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH1cclxuICAgIGdldFByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJjb25zdCBpbnN0YW5jZU9mQW55ID0gKG9iamVjdCwgY29uc3RydWN0b3JzKSA9PiBjb25zdHJ1Y3RvcnMuc29tZSgoYykgPT4gb2JqZWN0IGluc3RhbmNlb2YgYyk7XG5cbmxldCBpZGJQcm94eWFibGVUeXBlcztcbmxldCBjdXJzb3JBZHZhbmNlTWV0aG9kcztcbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSB7XG4gICAgcmV0dXJuIChpZGJQcm94eWFibGVUeXBlcyB8fFxuICAgICAgICAoaWRiUHJveHlhYmxlVHlwZXMgPSBbXG4gICAgICAgICAgICBJREJEYXRhYmFzZSxcbiAgICAgICAgICAgIElEQk9iamVjdFN0b3JlLFxuICAgICAgICAgICAgSURCSW5kZXgsXG4gICAgICAgICAgICBJREJDdXJzb3IsXG4gICAgICAgICAgICBJREJUcmFuc2FjdGlvbixcbiAgICAgICAgXSkpO1xufVxuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpIHtcbiAgICByZXR1cm4gKGN1cnNvckFkdmFuY2VNZXRob2RzIHx8XG4gICAgICAgIChjdXJzb3JBZHZhbmNlTWV0aG9kcyA9IFtcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuYWR2YW5jZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWUsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlUHJpbWFyeUtleSxcbiAgICAgICAgXSkpO1xufVxuY29uc3QgY3Vyc29yUmVxdWVzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvbkRvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3VjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUod3JhcChyZXF1ZXN0LnJlc3VsdCkpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICB9KTtcbiAgICBwcm9taXNlXG4gICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xuICAgICAgICAvLyBTaW5jZSBjdXJzb3JpbmcgcmV1c2VzIHRoZSBJREJSZXF1ZXN0ICgqc2lnaCopLCB3ZSBjYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsXG4gICAgICAgIC8vIChzZWUgd3JhcEZ1bmN0aW9uKS5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCQ3Vyc29yKSB7XG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0TWFwLnNldCh2YWx1ZSwgcmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2F0Y2hpbmcgdG8gYXZvaWQgXCJVbmNhdWdodCBQcm9taXNlIGV4Y2VwdGlvbnNcIlxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIC8vIFRoaXMgbWFwcGluZyBleGlzdHMgaW4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGJ1dCBkb2Vzbid0IGRvZXNuJ3QgZXhpc3QgaW4gdHJhbnNmb3JtQ2FjaGUuIFRoaXNcbiAgICAvLyBpcyBiZWNhdXNlIHdlIGNyZWF0ZSBtYW55IHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdC5cbiAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KHByb21pc2UsIHJlcXVlc3QpO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuZnVuY3Rpb24gY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHR4KSB7XG4gICAgLy8gRWFybHkgYmFpbCBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgYSBkb25lIHByb21pc2UgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgaWYgKHRyYW5zYWN0aW9uRG9uZU1hcC5oYXModHgpKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgZG9uZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgICByZWplY3QodHguZXJyb3IgfHwgbmV3IERPTUV4Y2VwdGlvbignQWJvcnRFcnJvcicsICdBYm9ydEVycm9yJykpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICB9KTtcbiAgICAvLyBDYWNoZSBpdCBmb3IgbGF0ZXIgcmV0cmlldmFsLlxuICAgIHRyYW5zYWN0aW9uRG9uZU1hcC5zZXQodHgsIGRvbmUpO1xufVxubGV0IGlkYlByb3h5VHJhcHMgPSB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciB0cmFuc2FjdGlvbi5kb25lLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdkb25lJylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25Eb25lTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgLy8gUG9seWZpbGwgZm9yIG9iamVjdFN0b3JlTmFtZXMgYmVjYXVzZSBvZiBFZGdlLlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdvYmplY3RTdG9yZU5hbWVzJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQub2JqZWN0U3RvcmVOYW1lcyB8fCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNYWtlIHR4LnN0b3JlIHJldHVybiB0aGUgb25seSBzdG9yZSBpbiB0aGUgdHJhbnNhY3Rpb24sIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbWFueS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnc3RvcmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiByZWNlaXZlci5vYmplY3RTdG9yZShyZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIHRyYW5zZm9ybSB3aGF0ZXZlciB3ZSBnZXQgYmFjay5cbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0W3Byb3BdKTtcbiAgICB9LFxuICAgIHNldCh0YXJnZXQsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGhhcyh0YXJnZXQsIHByb3ApIHtcbiAgICAgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uICYmXG4gICAgICAgICAgICAocHJvcCA9PT0gJ2RvbmUnIHx8IHByb3AgPT09ICdzdG9yZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcCBpbiB0YXJnZXQ7XG4gICAgfSxcbn07XG5mdW5jdGlvbiByZXBsYWNlVHJhcHMoY2FsbGJhY2spIHtcbiAgICBpZGJQcm94eVRyYXBzID0gY2FsbGJhY2soaWRiUHJveHlUcmFwcyk7XG59XG5mdW5jdGlvbiB3cmFwRnVuY3Rpb24oZnVuYykge1xuICAgIC8vIER1ZSB0byBleHBlY3RlZCBvYmplY3QgZXF1YWxpdHkgKHdoaWNoIGlzIGVuZm9yY2VkIGJ5IHRoZSBjYWNoaW5nIGluIGB3cmFwYCksIHdlXG4gICAgLy8gb25seSBjcmVhdGUgb25lIG5ldyBmdW5jIHBlciBmdW5jLlxuICAgIC8vIEVkZ2UgZG9lc24ndCBzdXBwb3J0IG9iamVjdFN0b3JlTmFtZXMgKGJvb28pLCBzbyB3ZSBwb2x5ZmlsbCBpdCBoZXJlLlxuICAgIGlmIChmdW5jID09PSBJREJEYXRhYmFzZS5wcm90b3R5cGUudHJhbnNhY3Rpb24gJiZcbiAgICAgICAgISgnb2JqZWN0U3RvcmVOYW1lcycgaW4gSURCVHJhbnNhY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHN0b3JlTmFtZXMsIC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4ID0gZnVuYy5jYWxsKHVud3JhcCh0aGlzKSwgc3RvcmVOYW1lcywgLi4uYXJncyk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAuc2V0KHR4LCBzdG9yZU5hbWVzLnNvcnQgPyBzdG9yZU5hbWVzLnNvcnQoKSA6IFtzdG9yZU5hbWVzXSk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcCh0eCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIEN1cnNvciBtZXRob2RzIGFyZSBzcGVjaWFsLCBhcyB0aGUgYmVoYXZpb3VyIGlzIGEgbGl0dGxlIG1vcmUgZGlmZmVyZW50IHRvIHN0YW5kYXJkIElEQi4gSW5cbiAgICAvLyBJREIsIHlvdSBhZHZhbmNlIHRoZSBjdXJzb3IgYW5kIHdhaXQgZm9yIGEgbmV3ICdzdWNjZXNzJyBvbiB0aGUgSURCUmVxdWVzdCB0aGF0IGdhdmUgeW91IHRoZVxuICAgIC8vIGN1cnNvci4gSXQncyBraW5kYSBsaWtlIGEgcHJvbWlzZSB0aGF0IGNhbiByZXNvbHZlIHdpdGggbWFueSB2YWx1ZXMuIFRoYXQgZG9lc24ndCBtYWtlIHNlbnNlXG4gICAgLy8gd2l0aCByZWFsIHByb21pc2VzLCBzbyBlYWNoIGFkdmFuY2UgbWV0aG9kcyByZXR1cm5zIGEgbmV3IHByb21pc2UgZm9yIHRoZSBjdXJzb3Igb2JqZWN0LCBvclxuICAgIC8vIHVuZGVmaW5lZCBpZiB0aGUgZW5kIG9mIHRoZSBjdXJzb3IgaGFzIGJlZW4gcmVhY2hlZC5cbiAgICBpZiAoZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKS5pbmNsdWRlcyhmdW5jKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgICAgICBmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gd3JhcChjdXJzb3JSZXF1ZXN0TWFwLmdldCh0aGlzKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgIC8vIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAgIHJldHVybiB3cmFwKGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKSk7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICByZXR1cm4gd3JhcEZ1bmN0aW9uKHZhbHVlKTtcbiAgICAvLyBUaGlzIGRvZXNuJ3QgcmV0dXJuLCBpdCBqdXN0IGNyZWF0ZXMgYSAnZG9uZScgcHJvbWlzZSBmb3IgdGhlIHRyYW5zYWN0aW9uLFxuICAgIC8vIHdoaWNoIGlzIGxhdGVyIHJldHVybmVkIGZvciB0cmFuc2FjdGlvbi5kb25lIChzZWUgaWRiT2JqZWN0SGFuZGxlcikuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pXG4gICAgICAgIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih2YWx1ZSk7XG4gICAgaWYgKGluc3RhbmNlT2ZBbnkodmFsdWUsIGdldElkYlByb3h5YWJsZVR5cGVzKCkpKVxuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHZhbHVlLCBpZGJQcm94eVRyYXBzKTtcbiAgICAvLyBSZXR1cm4gdGhlIHNhbWUgdmFsdWUgYmFjayBpZiB3ZSdyZSBub3QgZ29pbmcgdG8gdHJhbnNmb3JtIGl0LlxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIHdyYXAodmFsdWUpIHtcbiAgICAvLyBXZSBzb21ldGltZXMgZ2VuZXJhdGUgbXVsdGlwbGUgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0IChlZyB3aGVuIGN1cnNvcmluZyksIGJlY2F1c2VcbiAgICAvLyBJREIgaXMgd2VpcmQgYW5kIGEgc2luZ2xlIElEQlJlcXVlc3QgY2FuIHlpZWxkIG1hbnkgcmVzcG9uc2VzLCBzbyB0aGVzZSBjYW4ndCBiZSBjYWNoZWQuXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSURCUmVxdWVzdClcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QodmFsdWUpO1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgdHJhbnNmb3JtZWQgdGhpcyB2YWx1ZSBiZWZvcmUsIHJldXNlIHRoZSB0cmFuc2Zvcm1lZCB2YWx1ZS5cbiAgICAvLyBUaGlzIGlzIGZhc3RlciwgYnV0IGl0IGFsc28gcHJvdmlkZXMgb2JqZWN0IGVxdWFsaXR5LlxuICAgIGlmICh0cmFuc2Zvcm1DYWNoZS5oYXModmFsdWUpKVxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHRyYW5zZm9ybUNhY2hhYmxlVmFsdWUodmFsdWUpO1xuICAgIC8vIE5vdCBhbGwgdHlwZXMgYXJlIHRyYW5zZm9ybWVkLlxuICAgIC8vIFRoZXNlIG1heSBiZSBwcmltaXRpdmUgdHlwZXMsIHNvIHRoZXkgY2FuJ3QgYmUgV2Vha01hcCBrZXlzLlxuICAgIGlmIChuZXdWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgdHJhbnNmb3JtQ2FjaGUuc2V0KHZhbHVlLCBuZXdWYWx1ZSk7XG4gICAgICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQobmV3VmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuY29uc3QgdW53cmFwID0gKHZhbHVlKSA9PiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuZ2V0KHZhbHVlKTtcblxuZXhwb3J0IHsgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlIGFzIGEsIGluc3RhbmNlT2ZBbnkgYXMgaSwgcmVwbGFjZVRyYXBzIGFzIHIsIHVud3JhcCBhcyB1LCB3cmFwIGFzIHcgfTtcbiIsImltcG9ydCB7IHcgYXMgd3JhcCwgciBhcyByZXBsYWNlVHJhcHMgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcbmV4cG9ydCB7IHUgYXMgdW53cmFwLCB3IGFzIHdyYXAgfSBmcm9tICcuL3dyYXAtaWRiLXZhbHVlLmpzJztcblxuLyoqXG4gKiBPcGVuIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKiBAcGFyYW0gdmVyc2lvbiBTY2hlbWEgdmVyc2lvbi5cbiAqIEBwYXJhbSBjYWxsYmFja3MgQWRkaXRpb25hbCBjYWxsYmFja3MuXG4gKi9cbmZ1bmN0aW9uIG9wZW5EQihuYW1lLCB2ZXJzaW9uLCB7IGJsb2NrZWQsIHVwZ3JhZGUsIGJsb2NraW5nLCB0ZXJtaW5hdGVkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcbiAgICBjb25zdCBvcGVuUHJvbWlzZSA9IHdyYXAocmVxdWVzdCk7XG4gICAgaWYgKHVwZ3JhZGUpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB1cGdyYWRlKHdyYXAocmVxdWVzdC5yZXN1bHQpLCBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCB3cmFwKHJlcXVlc3QudHJhbnNhY3Rpb24pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKVxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoKSA9PiBibG9ja2VkKCkpO1xuICAgIG9wZW5Qcm9taXNlXG4gICAgICAgIC50aGVuKChkYikgPT4ge1xuICAgICAgICBpZiAodGVybWluYXRlZClcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4gdGVybWluYXRlZCgpKTtcbiAgICAgICAgaWYgKGJsb2NraW5nKVxuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsICgpID0+IGJsb2NraW5nKCkpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKVxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Jsb2NrZWQnLCAoKSA9PiBibG9ja2VkKCkpO1xuICAgIHJldHVybiB3cmFwKHJlcXVlc3QpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbn1cblxuY29uc3QgcmVhZE1ldGhvZHMgPSBbJ2dldCcsICdnZXRLZXknLCAnZ2V0QWxsJywgJ2dldEFsbEtleXMnLCAnY291bnQnXTtcbmNvbnN0IHdyaXRlTWV0aG9kcyA9IFsncHV0JywgJ2FkZCcsICdkZWxldGUnLCAnY2xlYXInXTtcbmNvbnN0IGNhY2hlZE1ldGhvZHMgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB7XG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSURCRGF0YWJhc2UgJiZcbiAgICAgICAgIShwcm9wIGluIHRhcmdldCkgJiZcbiAgICAgICAgdHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYWNoZWRNZXRob2RzLmdldChwcm9wKSlcbiAgICAgICAgcmV0dXJuIGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApO1xuICAgIGNvbnN0IHRhcmdldEZ1bmNOYW1lID0gcHJvcC5yZXBsYWNlKC9Gcm9tSW5kZXgkLywgJycpO1xuICAgIGNvbnN0IHVzZUluZGV4ID0gcHJvcCAhPT0gdGFyZ2V0RnVuY05hbWU7XG4gICAgY29uc3QgaXNXcml0ZSA9IHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSk7XG4gICAgaWYgKFxuICAgIC8vIEJhaWwgaWYgdGhlIHRhcmdldCBkb2Vzbid0IGV4aXN0IG9uIHRoZSB0YXJnZXQuIEVnLCBnZXRBbGwgaXNuJ3QgaW4gRWRnZS5cbiAgICAhKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkgfHxcbiAgICAgICAgIShpc1dyaXRlIHx8IHJlYWRNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBhc3luYyBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6IHVuZGVmaW5lZCBnemlwcHMgYmV0dGVyLCBidXQgZmFpbHMgaW4gRWRnZSA6KFxuICAgICAgICBjb25zdCB0eCA9IHRoaXMudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKTtcbiAgICAgICAgbGV0IHRhcmdldCA9IHR4LnN0b3JlO1xuICAgICAgICBpZiAodXNlSW5kZXgpXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuaW5kZXgoYXJncy5zaGlmdCgpKTtcbiAgICAgICAgLy8gTXVzdCByZWplY3QgaWYgb3AgcmVqZWN0cy5cbiAgICAgICAgLy8gSWYgaXQncyBhIHdyaXRlIG9wZXJhdGlvbiwgbXVzdCByZWplY3QgaWYgdHguZG9uZSByZWplY3RzLlxuICAgICAgICAvLyBNdXN0IHJlamVjdCB3aXRoIG9wIHJlamVjdGlvbiBmaXJzdC5cbiAgICAgICAgLy8gTXVzdCByZXNvbHZlIHdpdGggb3AgdmFsdWUuXG4gICAgICAgIC8vIE11c3QgaGFuZGxlIGJvdGggcHJvbWlzZXMgKG5vIHVuaGFuZGxlZCByZWplY3Rpb25zKVxuICAgICAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRhcmdldFt0YXJnZXRGdW5jTmFtZV0oLi4uYXJncyksXG4gICAgICAgICAgICBpc1dyaXRlICYmIHR4LmRvbmUsXG4gICAgICAgIF0pKVswXTtcbiAgICB9O1xuICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XG4gICAgcmV0dXJuIG1ldGhvZDtcbn1cbnJlcGxhY2VUcmFwcygob2xkVHJhcHMpID0+ICh7XG4gICAgLi4ub2xkVHJhcHMsXG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLFxuICAgIGhhczogKHRhcmdldCwgcHJvcCkgPT4gISFnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5oYXModGFyZ2V0LCBwcm9wKSxcbn0pKTtcblxuZXhwb3J0IHsgZGVsZXRlREIsIG9wZW5EQiB9O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgc2V0VXNlckxvZ0hhbmRsZXIsIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsJDEgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgZ2V0RGVmYXVsdEFwcENvbmZpZywgZGVlcEVxdWFsLCBGaXJlYmFzZUVycm9yLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgaXNJbmRleGVkREJBdmFpbGFibGUsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5leHBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxyXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXHJcbiAgICBnZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxyXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlcnZpY2UubGlicmFyeX0vJHtzZXJ2aWNlLnZlcnNpb259YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihsb2dTdHJpbmcgPT4gbG9nU3RyaW5nKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuIChjb21wb25lbnQgPT09IG51bGwgfHwgY29tcG9uZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnQudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuOC4yXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYXBwLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3MtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbCA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2stY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkaiA9IFwiQGZpcmViYXNlL2FwcC1jaGVja1wiO1xuXG5jb25zdCBuYW1lJGkgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbmNvbnN0IG5hbWUkaCA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNvbnN0IG5hbWUkZiA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGUgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQyID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjkuMTIuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxuY29uc3QgUExBVEZPUk1fTE9HX1NUUklORyA9IHtcclxuICAgIFtuYW1lJG9dOiAnZmlyZS1jb3JlJyxcclxuICAgIFtuYW1lJG5dOiAnZmlyZS1jb3JlLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIFtuYW1lJG1dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hcHAtY2hlY2snLFxyXG4gICAgW25hbWUka106ICdmaXJlLWFwcC1jaGVjay1jb21wYXQnLFxyXG4gICAgW25hbWUkaV06ICdmaXJlLWF1dGgnLFxyXG4gICAgW25hbWUkaF06ICdmaXJlLWF1dGgtY29tcGF0JyxcclxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiJyxcclxuICAgIFtuYW1lJGZdOiAnZmlyZS1ydGRiLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4nLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWZuLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkJyxcclxuICAgIFtuYW1lJGJdOiAnZmlyZS1paWQtY29tcGF0JyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20nLFxyXG4gICAgW25hbWUkOV06ICdmaXJlLWZjbS1jb21wYXQnLFxyXG4gICAgW25hbWUkOF06ICdmaXJlLXBlcmYnLFxyXG4gICAgW25hbWUkN106ICdmaXJlLXBlcmYtY29tcGF0JyxcclxuICAgIFtuYW1lJDZdOiAnZmlyZS1yYycsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtcmMtY29tcGF0JyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MnLFxyXG4gICAgW25hbWUkM106ICdmaXJlLWdjcy1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLWZzdCcsXHJcbiAgICBbbmFtZSQxXTogJ2ZpcmUtZnN0LWNvbXBhdCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgIGZvciAoY29uc3QgYXBwIG9mIF9hcHBzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpIHtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdENvbnRyb2xsZXIgPSBhcHAuY29udGFpbmVyXHJcbiAgICAgICAgLmdldFByb3ZpZGVyKCdoZWFydGJlYXQnKVxyXG4gICAgICAgIC5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcclxuICAgIGlmIChoZWFydGJlYXRDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdm9pZCBoZWFydGJlYXRDb250cm9sbGVyLnRyaWdnZXJIZWFydGJlYXQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxufVxyXG4vKipcclxuICogVGVzdCBvbmx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcclxuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JTID0ge1xyXG4gICAgW1wibm8tYXBwXCIgLyogTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgRmlyZWJhc2UgQXBwLmluaXRpYWxpemVBcHAoKScsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcIm5vLW9wdGlvbnNcIiAvKiBOT19PUFRJT05TICovXTogJ05lZWQgdG8gcHJvdmlkZSBvcHRpb25zLCB3aGVuIG5vdCBiZWluZyBkZXBsb3llZCB0byBob3N0aW5nIHZpYSBzb3VyY2UuJyxcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nLFxyXG4gICAgW1wiaWRiLW9wZW5cIiAvKiBJREJfT1BFTiAqL106ICdFcnJvciB0aHJvd24gd2hlbiBvcGVuaW5nIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItZ2V0XCIgLyogSURCX0dFVCAqL106ICdFcnJvciB0aHJvd24gd2hlbiByZWFkaW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1zZXRcIiAvKiBJREJfV1JJVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gd3JpdGluZyB0byBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWRlbGV0ZVwiIC8qIElEQl9ERUxFVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gZGVsZXRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAoX29wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICBsZXQgb3B0aW9ucyA9IF9vcHRpb25zO1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSBnZXREZWZhdWx0QXBwQ29uZmlnKCkpO1xyXG4gICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1vcHRpb25zXCIgLyogTk9fT1BUSU9OUyAqLyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCAmJiBuYW1lID09PSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIE5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLykpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBoYW5kbGVyIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICogQHBhcmFtIGxvZ0NhbGxiYWNrIC0gQW4gb3B0aW9uYWwgY3VzdG9tIGxvZyBoYW5kbGVyIHRoYXQgZXhlY3V0ZXMgdXNlciBjb2RlIHdoZW5ldmVyXHJcbiAqIHRoZSBGaXJlYmFzZSBTREsgbWFrZXMgYSBsb2dnaW5nIGNhbGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uTG9nKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIElOVkFMSURfTE9HX0FSR1VNRU5UICovKTtcclxuICAgIH1cclxuICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgbGV2ZWwgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgYXJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgaW5mb2AsIGVycm9ycyBhcmUgbG9nZ2VkLCBidXQgYGRlYnVnYCBhbmRcclxuICogYHZlcmJvc2VgIGxvZ3MgYXJlIG5vdCkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxvZ0xldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxvZ0xldmVsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1kYXRhYmFzZSc7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBTVE9SRV9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1zdG9yZSc7XHJcbmxldCBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQl9OQU1FLCBEQl9WRVJTSU9OLCB7XHJcbiAgICAgICAgICAgIHVwZ3JhZGU6IChkYiwgb2xkVmVyc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cclxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItb3BlblwiIC8qIElEQl9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIGRiXHJcbiAgICAgICAgICAgIC50cmFuc2FjdGlvbihTVE9SRV9OQU1FKVxyXG4gICAgICAgICAgICAub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLmdldChjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItZ2V0XCIgLyogSURCX0dFVCAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IChfYSA9IGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIoYXBwLCBoZWFydGJlYXRPYmplY3QpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dChoZWFydGJlYXRPYmplY3QsIGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgcmV0dXJuIHR4LmRvbmU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1zZXRcIiAvKiBJREJfV1JJVEUgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiAoX2EgPSBlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oaWRiR2V0RXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNvbXB1dGVLZXkoYXBwKSB7XHJcbiAgICByZXR1cm4gYCR7YXBwLm5hbWV9ISR7YXBwLm9wdGlvbnMuYXBwSWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBNQVhfSEVBREVSX0JZVEVTID0gMTAyNDtcclxuLy8gMzAgZGF5c1xyXG5jb25zdCBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTID0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBIZWFydGJlYXRTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbi1tZW1vcnkgY2FjaGUgZm9yIGhlYXJ0YmVhdHMsIHVzZWQgYnkgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHRvIGdlbmVyYXRlXHJcbiAgICAgICAgICogdGhlIGhlYWRlciBzdHJpbmcuXHJcbiAgICAgICAgICogU3RvcmVzIG9uZSByZWNvcmQgcGVyIGRhdGUuIFRoaXMgd2lsbCBiZSBjb25zb2xpZGF0ZWQgaW50byB0aGUgc3RhbmRhcmRcclxuICAgICAgICAgKiBmb3JtYXQgb2Ygb25lIHJlY29yZCBwZXIgdXNlciBhZ2VudCBzdHJpbmcgYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBoZWFkZXIuXHJcbiAgICAgICAgICogUG9wdWxhdGVkIGZyb20gaW5kZXhlZERCIHdoZW4gdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGFuZCBzaG91bGRcclxuICAgICAgICAgKiBiZSBrZXB0IGluIHN5bmMgd2l0aCBpbmRleGVkREIuXHJcbiAgICAgICAgICogTGVhdmUgcHVibGljIGZvciBlYXNpZXIgdGVzdGluZy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB0aGlzLl9zdG9yYWdlID0gbmV3IEhlYXJ0YmVhdFN0b3JhZ2VJbXBsKGFwcCk7XHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZSA9IHRoaXMuX3N0b3JhZ2UucmVhZCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgdG8gcmVwb3J0IGEgaGVhcnRiZWF0LiBUaGUgZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZVxyXG4gICAgICogYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgb2JqZWN0LCB1cGRhdGUgaGVhcnRiZWF0c0NhY2hlLCBhbmQgcGVyc2lzdCBpdFxyXG4gICAgICogdG8gSW5kZXhlZERCLlxyXG4gICAgICogTm90ZSB0aGF0IHdlIG9ubHkgc3RvcmUgb25lIGhlYXJ0YmVhdCBwZXIgZGF5LiBTbyBpZiBhIGhlYXJ0YmVhdCBmb3IgdG9kYXkgaXNcclxuICAgICAqIGFscmVhZHkgbG9nZ2VkLCBzdWJzZXF1ZW50IGNhbGxzIHRvIHRoaXMgZnVuY3Rpb24gaW4gdGhlIHNhbWUgZGF5IHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdHJpZ2dlckhlYXJ0YmVhdCgpIHtcclxuICAgICAgICBjb25zdCBwbGF0Zm9ybUxvZ2dlciA9IHRoaXMuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcigncGxhdGZvcm0tbG9nZ2VyJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIFwiRmlyZWJhc2UgdXNlciBhZ2VudFwiIHN0cmluZyBmcm9tIHRoZSBwbGF0Zm9ybSBsb2dnZXJcclxuICAgICAgICAvLyBzZXJ2aWNlLCBub3QgdGhlIGJyb3dzZXIgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBhZ2VudCA9IHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEbyBub3Qgc3RvcmUgYSBoZWFydGJlYXQgaWYgb25lIGlzIGFscmVhZHkgc3RvcmVkIGZvciB0aGlzIGRheVxyXG4gICAgICAgIC8vIG9yIGlmIGEgaGVhZGVyIGhhcyBhbHJlYWR5IGJlZW4gc2VudCB0b2RheS5cclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9PT0gZGF0ZSB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5zb21lKHNpbmdsZURhdGVIZWFydGJlYXQgPT4gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlID09PSBkYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBlbnRyeSBmb3IgdGhpcyBkYXRlLiBDcmVhdGUgb25lLlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5wdXNoKHsgZGF0ZSwgYWdlbnQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBlbnRyaWVzIG9sZGVyIHRoYW4gMzAgZGF5cy5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmZpbHRlcihzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGJUaW1lc3RhbXAgPSBuZXcgRGF0ZShzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpLnZhbHVlT2YoKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vdyAtIGhiVGltZXN0YW1wIDw9IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgd2hpY2ggY2FuIGJlIGF0dGFjaGVkIHRvIHRoZSBoZWFydGJlYXQtc3BlY2lmaWMgaGVhZGVyIGRpcmVjdGx5LlxyXG4gICAgICogSXQgYWxzbyBjbGVhcnMgYWxsIGhlYXJ0YmVhdHMgZnJvbSBtZW1vcnkgYXMgd2VsbCBhcyBpbiBJbmRleGVkREIuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogQ29uc3VtaW5nIHByb2R1Y3QgU0RLcyBzaG91bGQgbm90IHNlbmQgdGhlIGhlYWRlciBpZiB0aGlzIG1ldGhvZFxyXG4gICAgICogcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIC8vIEV4dHJhY3QgYXMgbWFueSBoZWFydGJlYXRzIGZyb20gdGhlIGNhY2hlIGFzIHdpbGwgZml0IHVuZGVyIHRoZSBzaXplIGxpbWl0LlxyXG4gICAgICAgIGNvbnN0IHsgaGVhcnRiZWF0c1RvU2VuZCwgdW5zZW50RW50cmllcyB9ID0gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIodGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlclN0cmluZyA9IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c1RvU2VuZCB9KSk7XHJcbiAgICAgICAgLy8gU3RvcmUgbGFzdCBzZW50IGRhdGUgdG8gcHJldmVudCBhbm90aGVyIGJlaW5nIGxvZ2dlZC9zZW50IGZvciB0aGUgc2FtZSBkYXkuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgaWYgKHVuc2VudEVudHJpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBTdG9yZSBhbnkgdW5zZW50IGVudHJpZXMgaWYgdGhleSBleGlzdC5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB1bnNlbnRFbnRyaWVzO1xyXG4gICAgICAgICAgICAvLyBUaGlzIHNlZW1zIG1vcmUgbGlrZWx5IHRoYW4gZW1wdHlpbmcgdGhlIGFycmF5IChiZWxvdykgdG8gbGVhZCB0byBzb21lIG9kZCBzdGF0ZVxyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgY2FjaGUgaXNuJ3QgZW1wdHkgYW5kIHRoaXMgd2lsbCBiZSBjYWxsZWQgYWdhaW4gb24gdGhlIG5leHQgcmVxdWVzdCxcclxuICAgICAgICAgICAgLy8gYW5kIGlzIHByb2JhYmx5IHNhZmVzdCBpZiB3ZSBhd2FpdCBpdC5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gW107XHJcbiAgICAgICAgICAgIC8vIERvIG5vdCB3YWl0IGZvciB0aGlzLCB0byByZWR1Y2UgbGF0ZW5jeS5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGVhZGVyU3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFVUQ0RhdGVTdHJpbmcoKSB7XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAvLyBSZXR1cm5zIGRhdGUgZm9ybWF0ICdZWVlZLU1NLUREJ1xyXG4gICAgcmV0dXJuIHRvZGF5LnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcihoZWFydGJlYXRzQ2FjaGUsIG1heFNpemUgPSBNQVhfSEVBREVSX0JZVEVTKSB7XHJcbiAgICAvLyBIZWFydGJlYXRzIGdyb3VwZWQgYnkgdXNlciBhZ2VudCBpbiB0aGUgc3RhbmRhcmQgZm9ybWF0IHRvIGJlIHNlbnQgaW5cclxuICAgIC8vIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRzVG9TZW5kID0gW107XHJcbiAgICAvLyBTaW5nbGUgZGF0ZSBmb3JtYXQgaGVhcnRiZWF0cyB0aGF0IGFyZSBub3Qgc2VudC5cclxuICAgIGxldCB1bnNlbnRFbnRyaWVzID0gaGVhcnRiZWF0c0NhY2hlLnNsaWNlKCk7XHJcbiAgICBmb3IgKGNvbnN0IHNpbmdsZURhdGVIZWFydGJlYXQgb2YgaGVhcnRiZWF0c0NhY2hlKSB7XHJcbiAgICAgICAgLy8gTG9vayBmb3IgYW4gZXhpc3RpbmcgZW50cnkgd2l0aCB0aGUgc2FtZSB1c2VyIGFnZW50LlxyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdEVudHJ5ID0gaGVhcnRiZWF0c1RvU2VuZC5maW5kKGhiID0+IGhiLmFnZW50ID09PSBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50KTtcclxuICAgICAgICBpZiAoIWhlYXJ0YmVhdEVudHJ5KSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGVudHJ5IGZvciB0aGlzIHVzZXIgYWdlbnQgZXhpc3RzLCBjcmVhdGUgb25lLlxyXG4gICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW3NpbmdsZURhdGVIZWFydGJlYXQuZGF0ZV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgaGVhcnRiZWF0XHJcbiAgICAgICAgICAgICAgICAvLyBlbnRyeSBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucHVzaChzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBkYXRlXHJcbiAgICAgICAgICAgIC8vIGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUG9wIHVuc2VudCBlbnRyeSBmcm9tIHF1ZXVlLiAoU2tpcHBlZCBpZiBhZGRpbmcgdGhlIGVudHJ5IGV4Y2VlZGVkXHJcbiAgICAgICAgLy8gcXVvdGEgYW5kIHRoZSBsb29wIGJyZWFrcyBlYXJseS4pXHJcbiAgICAgICAgdW5zZW50RW50cmllcyA9IHVuc2VudEVudHJpZXMuc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQsXHJcbiAgICAgICAgdW5zZW50RW50cmllc1xyXG4gICAgfTtcclxufVxyXG5jbGFzcyBIZWFydGJlYXRTdG9yYWdlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlID0gdGhpcy5ydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCkge1xyXG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgYWxsIGhlYXJ0YmVhdHMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJlYWQoKSB7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiSGVhcnRiZWF0T2JqZWN0ID0gYXdhaXQgcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkYkhlYXJ0YmVhdE9iamVjdCB8fCB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2hlYXJ0YmVhdCcsIGNvbnRhaW5lciA9PiBuZXcgSGVhcnRiZWF0U2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgdmFyaWFudCk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCAnZXNtMjAxNycpO1xyXG4gICAgLy8gUmVnaXN0ZXIgcGxhdGZvcm0gU0RLIGlkZW50aWZpZXIgKG5vIHZlcnNpb24pLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKCdmaXJlLWpzJywgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBBcHBcclxuICpcclxuICogQHJlbWFya3MgVGhpcyBwYWNrYWdlIGNvb3JkaW5hdGVzIHRoZSBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIGRpZmZlcmVudCBGaXJlYmFzZSBjb21wb25lbnRzXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygnJyk7XG5cbmV4cG9ydCB7IFNES19WRVJTSU9OLCBERUZBVUxUX0VOVFJZX05BTUUgYXMgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZENvbXBvbmVudCwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCBfYXBwcywgX2NsZWFyQ29tcG9uZW50cywgX2NvbXBvbmVudHMsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBkZWxldGVBcHAsIGdldEFwcCwgZ2V0QXBwcywgaW5pdGlhbGl6ZUFwcCwgb25Mb2csIHJlZ2lzdGVyVmVyc2lvbiwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBnZXRBcHAsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnNcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuNS4xNVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQRU5ESU5HX1RJTUVPVVRfTVMgPSAxMDAwMDtcclxuY29uc3QgUEFDS0FHRV9WRVJTSU9OID0gYHc6JHt2ZXJzaW9ufWA7XHJcbmNvbnN0IElOVEVSTkFMX0FVVEhfVkVSU0lPTiA9ICdGSVNfdjInO1xyXG5jb25zdCBJTlNUQUxMQVRJT05TX0FQSV9VUkwgPSAnaHR0cHM6Ly9maXJlYmFzZWluc3RhbGxhdGlvbnMuZ29vZ2xlYXBpcy5jb20vdjEnO1xyXG5jb25zdCBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUiA9IDYwICogNjAgKiAxMDAwOyAvLyBPbmUgaG91clxyXG5jb25zdCBTRVJWSUNFID0gJ2luc3RhbGxhdGlvbnMnO1xyXG5jb25zdCBTRVJWSUNFX05BTUUgPSAnSW5zdGFsbGF0aW9ucyc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SX0RFU0NSSVBUSU9OX01BUCA9IHtcclxuICAgIFtcIm1pc3NpbmctYXBwLWNvbmZpZy12YWx1ZXNcIiAvKiBNSVNTSU5HX0FQUF9DT05GSUdfVkFMVUVTICovXTogJ01pc3NpbmcgQXBwIGNvbmZpZ3VyYXRpb24gdmFsdWU6IFwieyR2YWx1ZU5hbWV9XCInLFxyXG4gICAgW1wibm90LXJlZ2lzdGVyZWRcIiAvKiBOT1RfUkVHSVNURVJFRCAqL106ICdGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQuJyxcclxuICAgIFtcImluc3RhbGxhdGlvbi1ub3QtZm91bmRcIiAvKiBJTlNUQUxMQVRJT05fTk9UX0ZPVU5EICovXTogJ0ZpcmViYXNlIEluc3RhbGxhdGlvbiBub3QgZm91bmQuJyxcclxuICAgIFtcInJlcXVlc3QtZmFpbGVkXCIgLyogUkVRVUVTVF9GQUlMRUQgKi9dOiAneyRyZXF1ZXN0TmFtZX0gcmVxdWVzdCBmYWlsZWQgd2l0aCBlcnJvciBcInskc2VydmVyQ29kZX0geyRzZXJ2ZXJTdGF0dXN9OiB7JHNlcnZlck1lc3NhZ2V9XCInLFxyXG4gICAgW1wiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqL106ICdDb3VsZCBub3QgcHJvY2VzcyByZXF1ZXN0LiBBcHBsaWNhdGlvbiBvZmZsaW5lLicsXHJcbiAgICBbXCJkZWxldGUtcGVuZGluZy1yZWdpc3RyYXRpb25cIiAvKiBERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04gKi9dOiBcIkNhbid0IGRlbGV0ZSBpbnN0YWxsYXRpb24gd2hpbGUgdGhlcmUgaXMgYSBwZW5kaW5nIHJlZ2lzdHJhdGlvbiByZXF1ZXN0LlwiXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KFNFUlZJQ0UsIFNFUlZJQ0VfTkFNRSwgRVJST1JfREVTQ1JJUFRJT05fTUFQKTtcclxuLyoqIFJldHVybnMgdHJ1ZSBpZiBlcnJvciBpcyBhIEZpcmViYXNlRXJyb3IgdGhhdCBpcyBiYXNlZCBvbiBhbiBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIuICovXHJcbmZ1bmN0aW9uIGlzU2VydmVyRXJyb3IoZXJyb3IpIHtcclxuICAgIHJldHVybiAoZXJyb3IgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yICYmXHJcbiAgICAgICAgZXJyb3IuY29kZS5pbmNsdWRlcyhcInJlcXVlc3QtZmFpbGVkXCIgLyogUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoeyBwcm9qZWN0SWQgfSkge1xyXG4gICAgcmV0dXJuIGAke0lOU1RBTExBVElPTlNfQVBJX1VSTH0vcHJvamVjdHMvJHtwcm9qZWN0SWR9L2luc3RhbGxhdGlvbnNgO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RBdXRoVG9rZW5JbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHRva2VuOiByZXNwb25zZS50b2tlbixcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAyIC8qIENPTVBMRVRFRCAqLyxcclxuICAgICAgICBleHBpcmVzSW46IGdldEV4cGlyZXNJbkZyb21SZXNwb25zZUV4cGlyZXNJbihyZXNwb25zZS5leHBpcmVzSW4pLFxyXG4gICAgICAgIGNyZWF0aW9uVGltZTogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRFcnJvckZyb21SZXNwb25zZShyZXF1ZXN0TmFtZSwgcmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlSnNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGNvbnN0IGVycm9yRGF0YSA9IHJlc3BvbnNlSnNvbi5lcnJvcjtcclxuICAgIHJldHVybiBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInJlcXVlc3QtZmFpbGVkXCIgLyogUkVRVUVTVF9GQUlMRUQgKi8sIHtcclxuICAgICAgICByZXF1ZXN0TmFtZSxcclxuICAgICAgICBzZXJ2ZXJDb2RlOiBlcnJvckRhdGEuY29kZSxcclxuICAgICAgICBzZXJ2ZXJNZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSxcclxuICAgICAgICBzZXJ2ZXJTdGF0dXM6IGVycm9yRGF0YS5zdGF0dXNcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnMoeyBhcGlLZXkgfSkge1xyXG4gICAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgeyByZWZyZXNoVG9rZW4gfSkge1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIGhlYWRlcnMuYXBwZW5kKCdBdXRob3JpemF0aW9uJywgZ2V0QXV0aG9yaXphdGlvbkhlYWRlcihyZWZyZXNoVG9rZW4pKTtcclxuICAgIHJldHVybiBoZWFkZXJzO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxscyB0aGUgcGFzc2VkIGluIGZldGNoIHdyYXBwZXIgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlLlxyXG4gKiBJZiB0aGUgcmV0dXJuZWQgcmVzcG9uc2UgaGFzIGEgc3RhdHVzIG9mIDV4eCwgcmUtcnVucyB0aGUgZnVuY3Rpb24gb25jZSBhbmRcclxuICogcmV0dXJucyB0aGUgcmVzcG9uc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXRyeUlmU2VydmVyRXJyb3IoZm4pIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XHJcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA+PSA1MDAgJiYgcmVzdWx0LnN0YXR1cyA8IDYwMCkge1xyXG4gICAgICAgIC8vIEludGVybmFsIFNlcnZlciBFcnJvci4gUmV0cnkgcmVxdWVzdC5cclxuICAgICAgICByZXR1cm4gZm4oKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RXhwaXJlc0luRnJvbVJlc3BvbnNlRXhwaXJlc0luKHJlc3BvbnNlRXhwaXJlc0luKSB7XHJcbiAgICAvLyBUaGlzIHdvcmtzIGJlY2F1c2UgdGhlIHNlcnZlciB3aWxsIG5ldmVyIHJlc3BvbmQgd2l0aCBmcmFjdGlvbnMgb2YgYSBzZWNvbmQuXHJcbiAgICByZXR1cm4gTnVtYmVyKHJlc3BvbnNlRXhwaXJlc0luLnJlcGxhY2UoJ3MnLCAnMDAwJykpO1xyXG59XHJcbmZ1bmN0aW9uIGdldEF1dGhvcml6YXRpb25IZWFkZXIocmVmcmVzaFRva2VuKSB7XHJcbiAgICByZXR1cm4gYCR7SU5URVJOQUxfQVVUSF9WRVJTSU9OfSAke3JlZnJlc2hUb2tlbn1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbGxhdGlvblJlcXVlc3QoeyBhcHBDb25maWcsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciB9LCB7IGZpZCB9KSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChhcHBDb25maWcpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgIC8vIElmIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlID0gaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgIH0pO1xyXG4gICAgaWYgKGhlYXJ0YmVhdFNlcnZpY2UpIHtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRzSGVhZGVyID0gYXdhaXQgaGVhcnRiZWF0U2VydmljZS5nZXRIZWFydGJlYXRzSGVhZGVyKCk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgaGVhcnRiZWF0c0hlYWRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgICBmaWQsXHJcbiAgICAgICAgYXV0aFZlcnNpb246IElOVEVSTkFMX0FVVEhfVkVSU0lPTixcclxuICAgICAgICBhcHBJZDogYXBwQ29uZmlnLmFwcElkLFxyXG4gICAgICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmV0cnlJZlNlcnZlckVycm9yKCgpID0+IGZldGNoKGVuZHBvaW50LCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZVZhbHVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSA9IHtcclxuICAgICAgICAgICAgZmlkOiByZXNwb25zZVZhbHVlLmZpZCB8fCBmaWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMiAvKiBDT01QTEVURUQgKi8sXHJcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogcmVzcG9uc2VWYWx1ZS5yZWZyZXNoVG9rZW4sXHJcbiAgICAgICAgICAgIGF1dGhUb2tlbjogZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2VWYWx1ZS5hdXRoVG9rZW4pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgYXdhaXQgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0NyZWF0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgZ2l2ZW4gdGltZSBwYXNzZXMuICovXHJcbmZ1bmN0aW9uIHNsZWVwKG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBidWZmZXJUb0Jhc2U2NFVybFNhZmUoYXJyYXkpIHtcclxuICAgIGNvbnN0IGI2NCA9IGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi5hcnJheSkpO1xyXG4gICAgcmV0dXJuIGI2NC5yZXBsYWNlKC9cXCsvZywgJy0nKS5yZXBsYWNlKC9cXC8vZywgJ18nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBWQUxJRF9GSURfUEFUVEVSTiA9IC9eW2NkZWZdW1xcdy1dezIxfSQvO1xyXG5jb25zdCBJTlZBTElEX0ZJRCA9ICcnO1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgbmV3IEZJRCB1c2luZyByYW5kb20gdmFsdWVzIGZyb20gV2ViIENyeXB0byBBUEkuXHJcbiAqIFJldHVybnMgYW4gZW1wdHkgc3RyaW5nIGlmIEZJRCBnZW5lcmF0aW9uIGZhaWxzIGZvciBhbnkgcmVhc29uLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2VuZXJhdGVGaWQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEEgdmFsaWQgRklEIGhhcyBleGFjdGx5IDIyIGJhc2U2NCBjaGFyYWN0ZXJzLCB3aGljaCBpcyAxMzIgYml0cywgb3IgMTYuNVxyXG4gICAgICAgIC8vIGJ5dGVzLiBvdXIgaW1wbGVtZW50YXRpb24gZ2VuZXJhdGVzIGEgMTcgYnl0ZSBhcnJheSBpbnN0ZWFkLlxyXG4gICAgICAgIGNvbnN0IGZpZEJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KDE3KTtcclxuICAgICAgICBjb25zdCBjcnlwdG8gPSBzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvO1xyXG4gICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoZmlkQnl0ZUFycmF5KTtcclxuICAgICAgICAvLyBSZXBsYWNlIHRoZSBmaXJzdCA0IHJhbmRvbSBiaXRzIHdpdGggdGhlIGNvbnN0YW50IEZJRCBoZWFkZXIgb2YgMGIwMTExLlxyXG4gICAgICAgIGZpZEJ5dGVBcnJheVswXSA9IDBiMDExMTAwMDAgKyAoZmlkQnl0ZUFycmF5WzBdICUgMGIwMDAxMDAwMCk7XHJcbiAgICAgICAgY29uc3QgZmlkID0gZW5jb2RlKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAgICAgcmV0dXJuIFZBTElEX0ZJRF9QQVRURVJOLnRlc3QoZmlkKSA/IGZpZCA6IElOVkFMSURfRklEO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgLy8gRklEIGdlbmVyYXRpb24gZXJyb3JlZFxyXG4gICAgICAgIHJldHVybiBJTlZBTElEX0ZJRDtcclxuICAgIH1cclxufVxyXG4vKiogQ29udmVydHMgYSBGSUQgVWludDhBcnJheSB0byBhIGJhc2U2NCBzdHJpbmcgcmVwcmVzZW50YXRpb24uICovXHJcbmZ1bmN0aW9uIGVuY29kZShmaWRCeXRlQXJyYXkpIHtcclxuICAgIGNvbnN0IGI2NFN0cmluZyA9IGJ1ZmZlclRvQmFzZTY0VXJsU2FmZShmaWRCeXRlQXJyYXkpO1xyXG4gICAgLy8gUmVtb3ZlIHRoZSAyM3JkIGNoYXJhY3RlciB0aGF0IHdhcyBhZGRlZCBiZWNhdXNlIG9mIHRoZSBleHRyYSA0IGJpdHMgYXQgdGhlXHJcbiAgICAvLyBlbmQgb2Ygb3VyIDE3IGJ5dGUgYXJyYXksIGFuZCB0aGUgJz0nIHBhZGRpbmcuXHJcbiAgICByZXR1cm4gYjY0U3RyaW5nLnN1YnN0cigwLCAyMik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFJldHVybnMgYSBzdHJpbmcga2V5IHRoYXQgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgdGhlIGFwcC4gKi9cclxuZnVuY3Rpb24gZ2V0S2V5KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIGAke2FwcENvbmZpZy5hcHBOYW1lfSEke2FwcENvbmZpZy5hcHBJZH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGZpZENoYW5nZUNhbGxiYWNrcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIENhbGxzIHRoZSBvbklkQ2hhbmdlIGNhbGxiYWNrcyB3aXRoIHRoZSBuZXcgRklEIHZhbHVlLCBhbmQgYnJvYWRjYXN0cyB0aGVcclxuICogY2hhbmdlIHRvIG90aGVyIHRhYnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWRDaGFuZ2VkKGFwcENvbmZpZywgZmlkKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNhbGxGaWRDaGFuZ2VDYWxsYmFja3Moa2V5LCBmaWQpO1xyXG4gICAgYnJvYWRjYXN0RmlkQ2hhbmdlKGtleSwgZmlkKTtcclxufVxyXG5mdW5jdGlvbiBhZGRDYWxsYmFjayhhcHBDb25maWcsIGNhbGxiYWNrKSB7XHJcbiAgICAvLyBPcGVuIHRoZSBicm9hZGNhc3QgY2hhbm5lbCBpZiBpdCdzIG5vdCBhbHJlYWR5IG9wZW4sXHJcbiAgICAvLyB0byBiZSBhYmxlIHRvIGxpc3RlbiB0byBjaGFuZ2UgZXZlbnRzIGZyb20gb3RoZXIgdGFicy5cclxuICAgIGdldEJyb2FkY2FzdENoYW5uZWwoKTtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgbGV0IGNhbGxiYWNrU2V0ID0gZmlkQ2hhbmdlQ2FsbGJhY2tzLmdldChrZXkpO1xyXG4gICAgaWYgKCFjYWxsYmFja1NldCkge1xyXG4gICAgICAgIGNhbGxiYWNrU2V0ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIGZpZENoYW5nZUNhbGxiYWNrcy5zZXQoa2V5LCBjYWxsYmFja1NldCk7XHJcbiAgICB9XHJcbiAgICBjYWxsYmFja1NldC5hZGQoY2FsbGJhY2spO1xyXG59XHJcbmZ1bmN0aW9uIHJlbW92ZUNhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgY2FsbGJhY2tTZXQgPSBmaWRDaGFuZ2VDYWxsYmFja3MuZ2V0KGtleSk7XHJcbiAgICBpZiAoIWNhbGxiYWNrU2V0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY2FsbGJhY2tTZXQuZGVsZXRlKGNhbGxiYWNrKTtcclxuICAgIGlmIChjYWxsYmFja1NldC5zaXplID09PSAwKSB7XHJcbiAgICAgICAgZmlkQ2hhbmdlQ2FsbGJhY2tzLmRlbGV0ZShrZXkpO1xyXG4gICAgfVxyXG4gICAgLy8gQ2xvc2UgYnJvYWRjYXN0IGNoYW5uZWwgaWYgdGhlcmUgYXJlIG5vIG1vcmUgY2FsbGJhY2tzLlxyXG4gICAgY2xvc2VCcm9hZGNhc3RDaGFubmVsKCk7XHJcbn1cclxuZnVuY3Rpb24gY2FsbEZpZENoYW5nZUNhbGxiYWNrcyhrZXksIGZpZCkge1xyXG4gICAgY29uc3QgY2FsbGJhY2tzID0gZmlkQ2hhbmdlQ2FsbGJhY2tzLmdldChrZXkpO1xyXG4gICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgIGNhbGxiYWNrKGZpZCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gYnJvYWRjYXN0RmlkQ2hhbmdlKGtleSwgZmlkKSB7XHJcbiAgICBjb25zdCBjaGFubmVsID0gZ2V0QnJvYWRjYXN0Q2hhbm5lbCgpO1xyXG4gICAgaWYgKGNoYW5uZWwpIHtcclxuICAgICAgICBjaGFubmVsLnBvc3RNZXNzYWdlKHsga2V5LCBmaWQgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZUJyb2FkY2FzdENoYW5uZWwoKTtcclxufVxyXG5sZXQgYnJvYWRjYXN0Q2hhbm5lbCA9IG51bGw7XHJcbi8qKiBPcGVucyBhbmQgcmV0dXJucyBhIEJyb2FkY2FzdENoYW5uZWwgaWYgaXQgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLiAqL1xyXG5mdW5jdGlvbiBnZXRCcm9hZGNhc3RDaGFubmVsKCkge1xyXG4gICAgaWYgKCFicm9hZGNhc3RDaGFubmVsICYmICdCcm9hZGNhc3RDaGFubmVsJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgYnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKCdbRmlyZWJhc2VdIEZJRCBDaGFuZ2UnKTtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsLm9ubWVzc2FnZSA9IGUgPT4ge1xyXG4gICAgICAgICAgICBjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzKGUuZGF0YS5rZXksIGUuZGF0YS5maWQpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYnJvYWRjYXN0Q2hhbm5lbDtcclxufVxyXG5mdW5jdGlvbiBjbG9zZUJyb2FkY2FzdENoYW5uZWwoKSB7XHJcbiAgICBpZiAoZmlkQ2hhbmdlQ2FsbGJhY2tzLnNpemUgPT09IDAgJiYgYnJvYWRjYXN0Q2hhbm5lbCkge1xyXG4gICAgICAgIGJyb2FkY2FzdENoYW5uZWwuY2xvc2UoKTtcclxuICAgICAgICBicm9hZGNhc3RDaGFubmVsID0gbnVsbDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQVRBQkFTRV9OQU1FID0gJ2ZpcmViYXNlLWluc3RhbGxhdGlvbnMtZGF0YWJhc2UnO1xyXG5jb25zdCBEQVRBQkFTRV9WRVJTSU9OID0gMTtcclxuY29uc3QgT0JKRUNUX1NUT1JFX05BTUUgPSAnZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1zdG9yZSc7XHJcbmxldCBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQVRBQkFTRV9OQU1FLCBEQVRBQkFTRV9WRVJTSU9OLCB7XHJcbiAgICAgICAgICAgIHVwZ3JhZGU6IChkYiwgb2xkVmVyc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cclxuICAgICAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGJQcm9taXNlO1xyXG59XHJcbi8qKiBBc3NpZ25zIG9yIG92ZXJ3cml0ZXMgdGhlIHJlY29yZCBmb3IgdGhlIGdpdmVuIGtleSB3aXRoIHRoZSBnaXZlbiB2YWx1ZS4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0KGFwcENvbmZpZywgdmFsdWUpIHtcclxuICAgIGNvbnN0IGtleSA9IGdldEtleShhcHBDb25maWcpO1xyXG4gICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHgub2JqZWN0U3RvcmUoT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSAoYXdhaXQgb2JqZWN0U3RvcmUuZ2V0KGtleSkpO1xyXG4gICAgYXdhaXQgb2JqZWN0U3RvcmUucHV0KHZhbHVlLCBrZXkpO1xyXG4gICAgYXdhaXQgdHguZG9uZTtcclxuICAgIGlmICghb2xkVmFsdWUgfHwgb2xkVmFsdWUuZmlkICE9PSB2YWx1ZS5maWQpIHtcclxuICAgICAgICBmaWRDaGFuZ2VkKGFwcENvbmZpZywgdmFsdWUuZmlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG4vKiogUmVtb3ZlcyByZWNvcmQocykgZnJvbSB0aGUgb2JqZWN0U3RvcmUgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4ga2V5LiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZW1vdmUoYXBwQ29uZmlnKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICBhd2FpdCB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSkuZGVsZXRlKGtleSk7XHJcbiAgICBhd2FpdCB0eC5kb25lO1xyXG59XHJcbi8qKlxyXG4gKiBBdG9taWNhbGx5IHVwZGF0ZXMgYSByZWNvcmQgd2l0aCB0aGUgcmVzdWx0IG9mIHVwZGF0ZUZuLCB3aGljaCBnZXRzXHJcbiAqIGNhbGxlZCB3aXRoIHRoZSBjdXJyZW50IHZhbHVlLiBJZiBuZXdWYWx1ZSBpcyB1bmRlZmluZWQsIHRoZSByZWNvcmQgaXNcclxuICogZGVsZXRlZCBpbnN0ZWFkLlxyXG4gKiBAcmV0dXJuIFVwZGF0ZWQgdmFsdWVcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZShhcHBDb25maWcsIHVwZGF0ZUZuKSB7XHJcbiAgICBjb25zdCBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKE9CSkVDVF9TVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgIGNvbnN0IG9sZFZhbHVlID0gKGF3YWl0IHN0b3JlLmdldChrZXkpKTtcclxuICAgIGNvbnN0IG5ld1ZhbHVlID0gdXBkYXRlRm4ob2xkVmFsdWUpO1xyXG4gICAgaWYgKG5ld1ZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBhd2FpdCBzdG9yZS5kZWxldGUoa2V5KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGF3YWl0IHN0b3JlLnB1dChuZXdWYWx1ZSwga2V5KTtcclxuICAgIH1cclxuICAgIGF3YWl0IHR4LmRvbmU7XHJcbiAgICBpZiAobmV3VmFsdWUgJiYgKCFvbGRWYWx1ZSB8fCBvbGRWYWx1ZS5maWQgIT09IG5ld1ZhbHVlLmZpZCkpIHtcclxuICAgICAgICBmaWRDaGFuZ2VkKGFwcENvbmZpZywgbmV3VmFsdWUuZmlkKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXdWYWx1ZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVXBkYXRlcyBhbmQgcmV0dXJucyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAqIEFsc28gdHJpZ2dlcnMgYSByZWdpc3RyYXRpb24gcmVxdWVzdCBpZiBpdCBpcyBuZWNlc3NhcnkgYW5kIHBvc3NpYmxlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SW5zdGFsbGF0aW9uRW50cnkoaW5zdGFsbGF0aW9ucykge1xyXG4gICAgbGV0IHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25FbnRyeSA9IGF3YWl0IHVwZGF0ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgb2xkRW50cnkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGluc3RhbGxhdGlvbkVudHJ5ID0gdXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeShvbGRFbnRyeSk7XHJcbiAgICAgICAgY29uc3QgZW50cnlXaXRoUHJvbWlzZSA9IHRyaWdnZXJSZWdpc3RyYXRpb25JZk5lY2Vzc2FyeShpbnN0YWxsYXRpb25zLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IGVudHJ5V2l0aFByb21pc2UucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICByZXR1cm4gZW50cnlXaXRoUHJvbWlzZS5pbnN0YWxsYXRpb25FbnRyeTtcclxuICAgIH0pO1xyXG4gICAgaWYgKGluc3RhbGxhdGlvbkVudHJ5LmZpZCA9PT0gSU5WQUxJRF9GSUQpIHtcclxuICAgICAgICAvLyBGSUQgZ2VuZXJhdGlvbiBmYWlsZWQuIFdhaXRpbmcgZm9yIHRoZSBGSUQgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBhd2FpdCByZWdpc3RyYXRpb25Qcm9taXNlIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2VcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgSW5zdGFsbGF0aW9uIEVudHJ5IGlmIG9uZSBkb2VzIG5vdCBleGlzdC5cclxuICogQWxzbyBjbGVhcnMgdGltZWQgb3V0IHBlbmRpbmcgcmVxdWVzdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICBjb25zdCBlbnRyeSA9IG9sZEVudHJ5IHx8IHtcclxuICAgICAgICBmaWQ6IGdlbmVyYXRlRmlkKCksXHJcbiAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNsZWFyVGltZWRPdXRSZXF1ZXN0KGVudHJ5KTtcclxufVxyXG4vKipcclxuICogSWYgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCB5ZXQsIHRoaXMgd2lsbCB0cmlnZ2VyIHRoZVxyXG4gKiByZWdpc3RyYXRpb24gYW5kIHJldHVybiBhbiBJblByb2dyZXNzSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqXHJcbiAqIElmIHJlZ2lzdHJhdGlvblByb21pc2UgZG9lcyBub3QgZXhpc3QsIHRoZSBpbnN0YWxsYXRpb25FbnRyeSBpcyBndWFyYW50ZWVkXHJcbiAqIHRvIGJlIHJlZ2lzdGVyZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIGlmIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgLy8gUmVnaXN0cmF0aW9uIHJlcXVpcmVkIGJ1dCBhcHAgaXMgb2ZmbGluZS5cclxuICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uUHJvbWlzZVdpdGhFcnJvciA9IFByb21pc2UucmVqZWN0KEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLykpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlOiByZWdpc3RyYXRpb25Qcm9taXNlV2l0aEVycm9yXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRyeSByZWdpc3RlcmluZy4gQ2hhbmdlIHN0YXR1cyB0byBJTl9QUk9HUkVTUy5cclxuICAgICAgICBjb25zdCBpblByb2dyZXNzRW50cnkgPSB7XHJcbiAgICAgICAgICAgIGZpZDogaW5zdGFsbGF0aW9uRW50cnkuZmlkLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDEgLyogSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvblByb21pc2UgPSByZWdpc3Rlckluc3RhbGxhdGlvbihpbnN0YWxsYXRpb25zLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpblByb2dyZXNzRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgfTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlOiB3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24oaW5zdGFsbGF0aW9ucylcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaW5zdGFsbGF0aW9uRW50cnkgfTtcclxuICAgIH1cclxufVxyXG4vKiogVGhpcyB3aWxsIGJlIGV4ZWN1dGVkIG9ubHkgb25jZSBmb3IgZWFjaCBuZXcgRmlyZWJhc2UgSW5zdGFsbGF0aW9uLiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWdpc3Rlckluc3RhbGxhdGlvbihpbnN0YWxsYXRpb25zLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSBhd2FpdCBjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICByZXR1cm4gc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoaXNTZXJ2ZXJFcnJvcihlKSAmJiBlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDA5KSB7XHJcbiAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIGNhbiBub3QgYmUgdXNlZFwiIGVycm9yLlxyXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgIGF3YWl0IHJlbW92ZShpbnN0YWxsYXRpb25zLmFwcENvbmZpZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZWdpc3RyYXRpb24gZmFpbGVkLiBTZXQgRklEIGFzIG5vdCByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICBhd2FpdCBzZXQoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcsIHtcclxuICAgICAgICAgICAgICAgIGZpZDogaW5zdGFsbGF0aW9uRW50cnkuZmlkLFxyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcbi8qKiBDYWxsIGlmIEZJRCByZWdpc3RyYXRpb24gaXMgcGVuZGluZyBpbiBhbm90aGVyIHJlcXVlc3QuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zKSB7XHJcbiAgICAvLyBVbmZvcnR1bmF0ZWx5LCB0aGVyZSBpcyBubyB3YXkgb2YgcmVsaWFibHkgb2JzZXJ2aW5nIHdoZW4gYSB2YWx1ZSBpblxyXG4gICAgLy8gSW5kZXhlZERCIGNoYW5nZXMgKHlldCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL2luZGV4ZWQtZGItb2JzZXJ2ZXJzKSxcclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gcG9sbC5cclxuICAgIGxldCBlbnRyeSA9IGF3YWl0IHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcpO1xyXG4gICAgd2hpbGUgKGVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgIC8vIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IHN0aWxsIGluIHByb2dyZXNzLlxyXG4gICAgICAgIGF3YWl0IHNsZWVwKDEwMCk7XHJcbiAgICAgICAgZW50cnkgPSBhd2FpdCB1cGRhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgIH1cclxuICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICAvLyBUaGUgcmVxdWVzdCB0aW1lZCBvdXQgb3IgZmFpbGVkIGluIGEgZGlmZmVyZW50IGNhbGwuIFRyeSBhZ2Fpbi5cclxuICAgICAgICBjb25zdCB7IGluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zKTtcclxuICAgICAgICBpZiAocmVnaXN0cmF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIHJlZ2lzdHJhdGlvblByb21pc2UsIGVudHJ5IGlzIHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgIHJldHVybiBpbnN0YWxsYXRpb25FbnRyeTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW50cnk7XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgQ3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFVwZGF0ZXMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGluIHRoZSBEQiBiYXNlZCBvbiB0aGUgc3RhdHVzIG9mIHRoZVxyXG4gKiBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdC5cclxuICpcclxuICogUmV0dXJucyB0aGUgdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeS5cclxuICovXHJcbmZ1bmN0aW9uIHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gdXBkYXRlKGFwcENvbmZpZywgb2xkRW50cnkgPT4ge1xyXG4gICAgICAgIGlmICghb2xkRW50cnkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVkT3V0UmVxdWVzdChvbGRFbnRyeSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjbGVhclRpbWVkT3V0UmVxdWVzdChlbnRyeSkge1xyXG4gICAgaWYgKGhhc0luc3RhbGxhdGlvblJlcXVlc3RUaW1lZE91dChlbnRyeSkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWQ6IGVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBlbnRyeTtcclxufVxyXG5mdW5jdGlvbiBoYXNJbnN0YWxsYXRpb25SZXF1ZXN0VGltZWRPdXQoaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovICYmXHJcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uVGltZSArIFBFTkRJTkdfVElNRU9VVF9NUyA8IERhdGUubm93KCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdCh7IGFwcENvbmZpZywgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyIH0sIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICBjb25zdCBoZWFkZXJzID0gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgLy8gSWYgaGVhcnRiZWF0IHNlcnZpY2UgZXhpc3RzLCBhZGQgdGhlIGhlYXJ0YmVhdCBzdHJpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgIGNvbnN0IGhlYXJ0YmVhdFNlcnZpY2UgPSBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICBvcHRpb25hbDogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0U2VydmljZSkge1xyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdHNIZWFkZXIgPSBhd2FpdCBoZWFydGJlYXRTZXJ2aWNlLmdldEhlYXJ0YmVhdHNIZWFkZXIoKTtcclxuICAgICAgICBpZiAoaGVhcnRiZWF0c0hlYWRlcikge1xyXG4gICAgICAgICAgICBoZWFkZXJzLmFwcGVuZCgneC1maXJlYmFzZS1jbGllbnQnLCBoZWFydGJlYXRzSGVhZGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBib2R5ID0ge1xyXG4gICAgICAgIGluc3RhbGxhdGlvbjoge1xyXG4gICAgICAgICAgICBzZGtWZXJzaW9uOiBQQUNLQUdFX1ZFUlNJT04sXHJcbiAgICAgICAgICAgIGFwcElkOiBhcHBDb25maWcuYXBwSWRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeUlmU2VydmVyRXJyb3IoKCkgPT4gZmV0Y2goZW5kcG9pbnQsIHJlcXVlc3QpKTtcclxuICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVmFsdWUgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgY29uc3QgY29tcGxldGVkQXV0aFRva2VuID0gZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2VWYWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNvbXBsZXRlZEF1dGhUb2tlbjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IGF3YWl0IGdldEVycm9yRnJvbVJlc3BvbnNlKCdHZW5lcmF0ZSBBdXRoIFRva2VuJywgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQoYXBwQ29uZmlnLCB7IGZpZCB9KSB7XHJcbiAgICByZXR1cm4gYCR7Z2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyl9LyR7ZmlkfS9hdXRoVG9rZW5zOmdlbmVyYXRlYDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHZhbGlkIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZvciB0aGUgaW5zdGFsbGF0aW9uLiBHZW5lcmF0ZXMgYSBuZXdcclxuICogdG9rZW4gaWYgb25lIGRvZXNuJ3QgZXhpc3QsIGlzIGV4cGlyZWQgb3IgYWJvdXQgdG8gZXhwaXJlLlxyXG4gKlxyXG4gKiBTaG91bGQgb25seSBiZSBjYWxsZWQgaWYgdGhlIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyByZWdpc3RlcmVkLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEF1dGhUb2tlbihpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgbGV0IHRva2VuUHJvbWlzZTtcclxuICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgdXBkYXRlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCBvbGRFbnRyeSA9PiB7XHJcbiAgICAgICAgaWYgKCFpc0VudHJ5UmVnaXN0ZXJlZChvbGRFbnRyeSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJub3QtcmVnaXN0ZXJlZFwiIC8qIE5PVF9SRUdJU1RFUkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmIGlzQXV0aFRva2VuVmFsaWQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBhIHZhbGlkIHRva2VuIGluIHRoZSBEQi5cclxuICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvbGRBdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLykge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBhbHJlYWR5IGlzIGEgdG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICAgICAgICAgICAgdG9rZW5Qcm9taXNlID0gd2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdChpbnN0YWxsYXRpb25zLCBmb3JjZVJlZnJlc2gpO1xyXG4gICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyB0b2tlbiBvciB0b2tlbiBleHBpcmVkLlxyXG4gICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaW5Qcm9ncmVzc0VudHJ5ID0gbWFrZUF1dGhUb2tlblJlcXVlc3RJblByb2dyZXNzRW50cnkob2xkRW50cnkpO1xyXG4gICAgICAgICAgICB0b2tlblByb21pc2UgPSBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoaW5zdGFsbGF0aW9ucywgaW5Qcm9ncmVzc0VudHJ5KTtcclxuICAgICAgICAgICAgcmV0dXJuIGluUHJvZ3Jlc3NFbnRyeTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGF1dGhUb2tlbiA9IHRva2VuUHJvbWlzZVxyXG4gICAgICAgID8gYXdhaXQgdG9rZW5Qcm9taXNlXHJcbiAgICAgICAgOiBlbnRyeS5hdXRoVG9rZW47XHJcbiAgICByZXR1cm4gYXV0aFRva2VuO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxsIG9ubHkgaWYgRklEIGlzIHJlZ2lzdGVyZWQgYW5kIEF1dGggVG9rZW4gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy5cclxuICpcclxuICogV2FpdHMgdW50aWwgdGhlIGN1cnJlbnQgcGVuZGluZyByZXF1ZXN0IGZpbmlzaGVzLiBJZiB0aGUgcmVxdWVzdCB0aW1lcyBvdXQsXHJcbiAqIHRyaWVzIG9uY2UgaW4gdGhpcyB0aHJlYWQgYXMgd2VsbC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAvLyBVbmZvcnR1bmF0ZWx5LCB0aGVyZSBpcyBubyB3YXkgb2YgcmVsaWFibHkgb2JzZXJ2aW5nIHdoZW4gYSB2YWx1ZSBpblxyXG4gICAgLy8gSW5kZXhlZERCIGNoYW5nZXMgKHlldCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL2luZGV4ZWQtZGItb2JzZXJ2ZXJzKSxcclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gcG9sbC5cclxuICAgIGxldCBlbnRyeSA9IGF3YWl0IHVwZGF0ZUF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcpO1xyXG4gICAgd2hpbGUgKGVudHJ5LmF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSB7XHJcbiAgICAgICAgLy8gZ2VuZXJhdGVBdXRoVG9rZW4gc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgYXdhaXQgc2xlZXAoMTAwKTtcclxuICAgICAgICBlbnRyeSA9IGF3YWl0IHVwZGF0ZUF1dGhUb2tlblJlcXVlc3QoaW5zdGFsbGF0aW9ucy5hcHBDb25maWcpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYXV0aFRva2VuID0gZW50cnkuYXV0aFRva2VuO1xyXG4gICAgaWYgKGF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgLy8gVGhlIHJlcXVlc3QgdGltZWQgb3V0IG9yIGZhaWxlZCBpbiBhIGRpZmZlcmVudCBjYWxsLiBUcnkgYWdhaW4uXHJcbiAgICAgICAgcmV0dXJuIHJlZnJlc2hBdXRoVG9rZW4oaW5zdGFsbGF0aW9ucywgZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGxlZCBvbmx5IGlmIHRoZXJlIGlzIGEgR2VuZXJhdGVBdXRoVG9rZW4gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QuXHJcbiAqXHJcbiAqIFJldHVybnMgdGhlIHVwZGF0ZWQgSW5zdGFsbGF0aW9uRW50cnkuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVBdXRoVG9rZW5SZXF1ZXN0KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBpZiAoIWlzRW50cnlSZWdpc3RlcmVkKG9sZEVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgaWYgKGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChvbGRBdXRoVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9sZEVudHJ5KSwgeyBhdXRoVG9rZW46IHsgcmVxdWVzdFN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoaW5zdGFsbGF0aW9ucywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgYXV0aFRva2VuID0gYXdhaXQgZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0KGluc3RhbGxhdGlvbnMsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICBjb25zdCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGluc3RhbGxhdGlvbkVudHJ5KSwgeyBhdXRoVG9rZW4gfSk7XHJcbiAgICAgICAgYXdhaXQgc2V0KGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgIHJldHVybiBhdXRoVG9rZW47XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChpc1NlcnZlckVycm9yKGUpICYmXHJcbiAgICAgICAgICAgIChlLmN1c3RvbURhdGEuc2VydmVyQ29kZSA9PT0gNDAxIHx8IGUuY3VzdG9tRGF0YS5zZXJ2ZXJDb2RlID09PSA0MDQpKSB7XHJcbiAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIG5vdCBmb3VuZFwiIG9yIGEgXCJJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXCIgZXJyb3IuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgYXdhaXQgcmVtb3ZlKGluc3RhbGxhdGlvbnMuYXBwQ29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFsbGF0aW9uRW50cnkpLCB7IGF1dGhUb2tlbjogeyByZXF1ZXN0U3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovIH0gfSk7XHJcbiAgICAgICAgICAgIGF3YWl0IHNldChpbnN0YWxsYXRpb25zLmFwcENvbmZpZywgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VudHJ5UmVnaXN0ZXJlZChpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIChpbnN0YWxsYXRpb25FbnRyeSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLyk7XHJcbn1cclxuZnVuY3Rpb24gaXNBdXRoVG9rZW5WYWxpZChhdXRoVG9rZW4pIHtcclxuICAgIHJldHVybiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovICYmXHJcbiAgICAgICAgIWlzQXV0aFRva2VuRXhwaXJlZChhdXRoVG9rZW4pKTtcclxufVxyXG5mdW5jdGlvbiBpc0F1dGhUb2tlbkV4cGlyZWQoYXV0aFRva2VuKSB7XHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIChub3cgPCBhdXRoVG9rZW4uY3JlYXRpb25UaW1lIHx8XHJcbiAgICAgICAgYXV0aFRva2VuLmNyZWF0aW9uVGltZSArIGF1dGhUb2tlbi5leHBpcmVzSW4gPCBub3cgKyBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUik7XHJcbn1cclxuLyoqIFJldHVybnMgYW4gdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeSB3aXRoIGFuIEluUHJvZ3Jlc3NBdXRoVG9rZW4uICovXHJcbmZ1bmN0aW9uIG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICBjb25zdCBpblByb2dyZXNzQXV0aFRva2VuID0ge1xyXG4gICAgICAgIHJlcXVlc3RTdGF0dXM6IDEgLyogSU5fUFJPR1JFU1MgKi8sXHJcbiAgICAgICAgcmVxdWVzdFRpbWU6IERhdGUubm93KClcclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiBpblByb2dyZXNzQXV0aFRva2VuIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChhdXRoVG9rZW4pIHtcclxuICAgIHJldHVybiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8gJiZcclxuICAgICAgICBhdXRoVG9rZW4ucmVxdWVzdFRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ3JlYXRlcyBhIEZpcmViYXNlIEluc3RhbGxhdGlvbiBpZiB0aGVyZSBpc24ndCBvbmUgZm9yIHRoZSBhcHAgYW5kXHJcbiAqIHJldHVybnMgdGhlIEluc3RhbGxhdGlvbiBJRC5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRJZChpbnN0YWxsYXRpb25zKSB7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW1wbCA9IGluc3RhbGxhdGlvbnM7XHJcbiAgICBjb25zdCB7IGluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlIH0gPSBhd2FpdCBnZXRJbnN0YWxsYXRpb25FbnRyeShpbnN0YWxsYXRpb25zSW1wbCk7XHJcbiAgICBpZiAocmVnaXN0cmF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBJZiB0aGUgaW5zdGFsbGF0aW9uIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCwgdXBkYXRlIHRoZSBhdXRoZW50aWNhdGlvblxyXG4gICAgICAgIC8vIHRva2VuIGlmIG5lZWRlZC5cclxuICAgICAgICByZWZyZXNoQXV0aFRva2VuKGluc3RhbGxhdGlvbnNJbXBsKS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbnN0YWxsYXRpb25FbnRyeS5maWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBGaXJlYmFzZSBJbnN0YWxsYXRpb25zIGF1dGggdG9rZW4sIGlkZW50aWZ5aW5nIHRoZSBjdXJyZW50XHJcbiAqIEZpcmViYXNlIEluc3RhbGxhdGlvbi5cclxuICogQHBhcmFtIGluc3RhbGxhdGlvbnMgLSBUaGUgYEluc3RhbGxhdGlvbnNgIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFRva2VuKGluc3RhbGxhdGlvbnMsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW1wbCA9IGluc3RhbGxhdGlvbnM7XHJcbiAgICBhd2FpdCBjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zSW1wbCk7XHJcbiAgICAvLyBBdCB0aGlzIHBvaW50IHdlIGVpdGhlciBoYXZlIGEgUmVnaXN0ZXJlZCBJbnN0YWxsYXRpb24gaW4gdGhlIERCLCBvciB3ZSd2ZVxyXG4gICAgLy8gYWxyZWFkeSB0aHJvd24gYW4gZXJyb3IuXHJcbiAgICBjb25zdCBhdXRoVG9rZW4gPSBhd2FpdCByZWZyZXNoQXV0aFRva2VuKGluc3RhbGxhdGlvbnNJbXBsLCBmb3JjZVJlZnJlc2gpO1xyXG4gICAgcmV0dXJuIGF1dGhUb2tlbi50b2tlbjtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBjb21wbGV0ZUluc3RhbGxhdGlvblJlZ2lzdHJhdGlvbihpbnN0YWxsYXRpb25zKSB7XHJcbiAgICBjb25zdCB7IHJlZ2lzdHJhdGlvblByb21pc2UgfSA9IGF3YWl0IGdldEluc3RhbGxhdGlvbkVudHJ5KGluc3RhbGxhdGlvbnMpO1xyXG4gICAgaWYgKHJlZ2lzdHJhdGlvblByb21pc2UpIHtcclxuICAgICAgICAvLyBBIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLiBXYWl0IHVudGlsIGl0IGZpbmlzaGVzLlxyXG4gICAgICAgIGF3YWl0IHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IGdldERlbGV0ZUVuZHBvaW50KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICBoZWFkZXJzXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXRyeUlmU2VydmVyRXJyb3IoKCkgPT4gZmV0Y2goZW5kcG9pbnQsIHJlcXVlc3QpKTtcclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICB0aHJvdyBhd2FpdCBnZXRFcnJvckZyb21SZXNwb25zZSgnRGVsZXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIHsgZmlkIH0pIHtcclxuICAgIHJldHVybiBgJHtnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKX0vJHtmaWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVsZXRlcyB0aGUgRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGFuZCBhbGwgYXNzb2NpYXRlZCBkYXRhLlxyXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyAtIFRoZSBgSW5zdGFsbGF0aW9uc2AgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvbnMoaW5zdGFsbGF0aW9ucykge1xyXG4gICAgY29uc3QgeyBhcHBDb25maWcgfSA9IGluc3RhbGxhdGlvbnM7XHJcbiAgICBjb25zdCBlbnRyeSA9IGF3YWl0IHVwZGF0ZShhcHBDb25maWcsIG9sZEVudHJ5ID0+IHtcclxuICAgICAgICBpZiAob2xkRW50cnkgJiYgb2xkRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdW5yZWdpc3RlcmVkIGVudHJ5IHdpdGhvdXQgc2VuZGluZyBhIGRlbGV0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxuICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAgICAgLy8gQ2FuJ3QgZGVsZXRlIHdoaWxlIHRyeWluZyB0byByZWdpc3Rlci5cclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkZWxldGUtcGVuZGluZy1yZWdpc3RyYXRpb25cIiAvKiBERUxFVEVfUEVORElOR19SRUdJU1RSQVRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovKSB7XHJcbiAgICAgICAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBlbnRyeSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZW1vdmUoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2V0cyBhIG5ldyBjYWxsYmFjayB0aGF0IHdpbGwgZ2V0IGNhbGxlZCB3aGVuIEluc3RhbGxhdGlvbiBJRCBjaGFuZ2VzLlxyXG4gKiBSZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgd2lsbCByZW1vdmUgdGhlIGNhbGxiYWNrIHdoZW4gY2FsbGVkLlxyXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyAtIFRoZSBgSW5zdGFsbGF0aW9uc2AgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGlzIGludm9rZWQgd2hlbiBGSUQgY2hhbmdlcy5cclxuICogQHJldHVybnMgQSBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG8gdW5zdWJzY3JpYmUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uSWRDaGFuZ2UoaW5zdGFsbGF0aW9ucywgY2FsbGJhY2spIHtcclxuICAgIGNvbnN0IHsgYXBwQ29uZmlnIH0gPSBpbnN0YWxsYXRpb25zO1xyXG4gICAgYWRkQ2FsbGJhY2soYXBwQ29uZmlnLCBjYWxsYmFjayk7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIHJlbW92ZUNhbGxiYWNrKGFwcENvbmZpZywgY2FsbGJhY2spO1xyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgSW5zdGFsbGF0aW9uc30gYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlblxyXG4gKiB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnN0YWxsYXRpb25zKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zSW1wbCA9IF9nZXRQcm92aWRlcihhcHAsICdpbnN0YWxsYXRpb25zJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uc0ltcGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdEFwcENvbmZpZyhhcHApIHtcclxuICAgIGlmICghYXBwIHx8ICFhcHAub3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgQ29uZmlndXJhdGlvbicpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHAubmFtZSkge1xyXG4gICAgICAgIHRocm93IGdldE1pc3NpbmdWYWx1ZUVycm9yKCdBcHAgTmFtZScpO1xyXG4gICAgfVxyXG4gICAgLy8gUmVxdWlyZWQgYXBwIGNvbmZpZyBrZXlzXHJcbiAgICBjb25zdCBjb25maWdLZXlzID0gW1xyXG4gICAgICAgICdwcm9qZWN0SWQnLFxyXG4gICAgICAgICdhcGlLZXknLFxyXG4gICAgICAgICdhcHBJZCdcclxuICAgIF07XHJcbiAgICBmb3IgKGNvbnN0IGtleU5hbWUgb2YgY29uZmlnS2V5cykge1xyXG4gICAgICAgIGlmICghYXBwLm9wdGlvbnNba2V5TmFtZV0pIHtcclxuICAgICAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3Ioa2V5TmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhcHBOYW1lOiBhcHAubmFtZSxcclxuICAgICAgICBwcm9qZWN0SWQ6IGFwcC5vcHRpb25zLnByb2plY3RJZCxcclxuICAgICAgICBhcGlLZXk6IGFwcC5vcHRpb25zLmFwaUtleSxcclxuICAgICAgICBhcHBJZDogYXBwLm9wdGlvbnMuYXBwSWRcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0TWlzc2luZ1ZhbHVlRXJyb3IodmFsdWVOYW1lKSB7XHJcbiAgICByZXR1cm4gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUyAqLywge1xyXG4gICAgICAgIHZhbHVlTmFtZVxyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSU5TVEFMTEFUSU9OU19OQU1FID0gJ2luc3RhbGxhdGlvbnMnO1xyXG5jb25zdCBJTlNUQUxMQVRJT05TX05BTUVfSU5URVJOQUwgPSAnaW5zdGFsbGF0aW9ucy1pbnRlcm5hbCc7XHJcbmNvbnN0IHB1YmxpY0ZhY3RvcnkgPSAoY29udGFpbmVyKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgLy8gVGhyb3dzIGlmIGFwcCBpc24ndCBjb25maWd1cmVkIHByb3Blcmx5LlxyXG4gICAgY29uc3QgYXBwQ29uZmlnID0gZXh0cmFjdEFwcENvbmZpZyhhcHApO1xyXG4gICAgY29uc3QgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgJ2hlYXJ0YmVhdCcpO1xyXG4gICAgY29uc3QgaW5zdGFsbGF0aW9uc0ltcGwgPSB7XHJcbiAgICAgICAgYXBwLFxyXG4gICAgICAgIGFwcENvbmZpZyxcclxuICAgICAgICBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIsXHJcbiAgICAgICAgX2RlbGV0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKClcclxuICAgIH07XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uc0ltcGw7XHJcbn07XHJcbmNvbnN0IGludGVybmFsRmFjdG9yeSA9IChjb250YWluZXIpID0+IHtcclxuICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAvLyBJbnRlcm5hbCBGSVMgaW5zdGFuY2UgcmVsaWVzIG9uIHB1YmxpYyBGSVMgaW5zdGFuY2UuXHJcbiAgICBjb25zdCBpbnN0YWxsYXRpb25zID0gX2dldFByb3ZpZGVyKGFwcCwgSU5TVEFMTEFUSU9OU19OQU1FKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgIGNvbnN0IGluc3RhbGxhdGlvbnNJbnRlcm5hbCA9IHtcclxuICAgICAgICBnZXRJZDogKCkgPT4gZ2V0SWQoaW5zdGFsbGF0aW9ucyksXHJcbiAgICAgICAgZ2V0VG9rZW46IChmb3JjZVJlZnJlc2gpID0+IGdldFRva2VuKGluc3RhbGxhdGlvbnMsIGZvcmNlUmVmcmVzaClcclxuICAgIH07XHJcbiAgICByZXR1cm4gaW5zdGFsbGF0aW9uc0ludGVybmFsO1xyXG59O1xyXG5mdW5jdGlvbiByZWdpc3Rlckluc3RhbGxhdGlvbnMoKSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChJTlNUQUxMQVRJT05TX05BTUUsIHB1YmxpY0ZhY3RvcnksIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChJTlNUQUxMQVRJT05TX05BTUVfSU5URVJOQUwsIGludGVybmFsRmFjdG9yeSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG59XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBJbnN0YWxsYXRpb25zXHJcbiAqXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxucmVnaXN0ZXJJbnN0YWxsYXRpb25zKCk7XHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxuLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XG5cbmV4cG9ydCB7IGRlbGV0ZUluc3RhbGxhdGlvbnMsIGdldElkLCBnZXRJbnN0YWxsYXRpb25zLCBnZXRUb2tlbiwgb25JZENoYW5nZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IGdldEFwcCwgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIEZpcmViYXNlRXJyb3IsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGFyZUNvb2tpZXNFbmFibGVkLCBnZXRNb2R1bGFySW5zdGFuY2UsIGRlZXBFcXVhbCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0ICdAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucyc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUeXBlIGNvbnN0YW50IGZvciBGaXJlYmFzZSBBbmFseXRpY3MuXHJcbiAqL1xyXG5jb25zdCBBTkFMWVRJQ1NfVFlQRSA9ICdhbmFseXRpY3MnO1xyXG4vLyBLZXkgdG8gYXR0YWNoIEZJRCB0byBpbiBndGFnIHBhcmFtcy5cclxuY29uc3QgR0FfRklEX0tFWSA9ICdmaXJlYmFzZV9pZCc7XHJcbmNvbnN0IE9SSUdJTl9LRVkgPSAnb3JpZ2luJztcclxuY29uc3QgRkVUQ0hfVElNRU9VVF9NSUxMSVMgPSA2MCAqIDEwMDA7XHJcbmNvbnN0IERZTkFNSUNfQ09ORklHX1VSTCA9ICdodHRwczovL2ZpcmViYXNlLmdvb2dsZWFwaXMuY29tL3YxYWxwaGEvcHJvamVjdHMvLS9hcHBzL3thcHAtaWR9L3dlYkNvbmZpZyc7XHJcbmNvbnN0IEdUQUdfVVJMID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZXRhZ21hbmFnZXIuY29tL2d0YWcvanMnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYW5hbHl0aWNzJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYWtlc2hpZnQgcG9seWZpbGwgZm9yIFByb21pc2UuYWxsU2V0dGxlZCgpLiBSZXNvbHZlcyB3aGVuIGFsbCBwcm9taXNlc1xyXG4gKiBoYXZlIGVpdGhlciByZXNvbHZlZCBvciByZWplY3RlZC5cclxuICpcclxuICogQHBhcmFtIHByb21pc2VzIEFycmF5IG9mIHByb21pc2VzIHRvIHdhaXQgZm9yLlxyXG4gKi9cclxuZnVuY3Rpb24gcHJvbWlzZUFsbFNldHRsZWQocHJvbWlzZXMpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAocHJvbWlzZSA9PiBwcm9taXNlLmNhdGNoKGUgPT4gZSkpKTtcclxufVxyXG4vKipcclxuICogSW5zZXJ0cyBndGFnIHNjcmlwdCB0YWcgaW50byB0aGUgcGFnZSB0byBhc3luY2hyb25vdXNseSBkb3dubG9hZCBndGFnLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGRhdGFsYXllciAobW9zdCBvZnRlbiB0aGUgZGVmYXVsdCwgXCJfZGF0YUxheWVyXCIpLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUsIG1lYXN1cmVtZW50SWQpIHtcclxuICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgLy8gV2UgYXJlIG5vdCBwcm92aWRpbmcgYW4gYW5hbHl0aWNzSWQgaW4gdGhlIFVSTCBiZWNhdXNlIGl0IHdvdWxkIHRyaWdnZXIgYSBgcGFnZV92aWV3YFxyXG4gICAgLy8gd2l0aG91dCBmaWQuIFdlIHdpbGwgaW5pdGlhbGl6ZSBnYS1pZCB1c2luZyBndGFnIChjb25maWcpIGNvbW1hbmQgdG9nZXRoZXIgd2l0aCBmaWQuXHJcbiAgICBzY3JpcHQuc3JjID0gYCR7R1RBR19VUkx9P2w9JHtkYXRhTGF5ZXJOYW1lfSZpZD0ke21lYXN1cmVtZW50SWR9YDtcclxuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XHJcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbn1cclxuLyoqXHJcbiAqIEdldCByZWZlcmVuY2UgdG8sIG9yIGNyZWF0ZSwgZ2xvYmFsIGRhdGFsYXllci5cclxuICogQHBhcmFtIGRhdGFMYXllck5hbWUgTmFtZSBvZiBkYXRhbGF5ZXIgKG1vc3Qgb2Z0ZW4gdGhlIGRlZmF1bHQsIFwiX2RhdGFMYXllclwiKS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE9yQ3JlYXRlRGF0YUxheWVyKGRhdGFMYXllck5hbWUpIHtcclxuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBkYXRhTGF5ZXIgYW5kIGNyZWF0ZSBpZiBuZWVkZWQuXHJcbiAgICBsZXQgZGF0YUxheWVyID0gW107XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh3aW5kb3dbZGF0YUxheWVyTmFtZV0pKSB7XHJcbiAgICAgICAgZGF0YUxheWVyID0gd2luZG93W2RhdGFMYXllck5hbWVdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgd2luZG93W2RhdGFMYXllck5hbWVdID0gZGF0YUxheWVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGFMYXllcjtcclxufVxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGxvZ2ljIHdoZW4gZ3RhZyBpcyBjYWxsZWQgd2l0aCAnY29uZmlnJyBjb21tYW5kLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0NvcmUgQmFzaWMgZ3RhZyBmdW5jdGlvbiB0aGF0IGp1c3QgYXBwZW5kcyB0byBkYXRhTGF5ZXIuXHJcbiAqIEBwYXJhbSBpbml0aWFsaXphdGlvblByb21pc2VzTWFwIE1hcCBvZiBhcHBJZHMgdG8gdGhlaXIgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IEFycmF5IG9mIGR5bmFtaWMgY29uZmlnIGZldGNoIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZFRvQXBwSWQgTWFwIG9mIEdBIG1lYXN1cmVtZW50SURzIHRvIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2UgYXBwSWQuXHJcbiAqIEBwYXJhbSBtZWFzdXJlbWVudElkIEdBIE1lYXN1cmVtZW50IElEIHRvIHNldCBjb25maWcgZm9yLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBHdGFnIGNvbmZpZyBwYXJhbXMgdG8gc2V0LlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ3RhZ09uQ29uZmlnKGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgbWVhc3VyZW1lbnRJZCwgZ3RhZ1BhcmFtcykge1xyXG4gICAgLy8gSWYgY29uZmlnIGlzIGFscmVhZHkgZmV0Y2hlZCwgd2Uga25vdyB0aGUgYXBwSWQgYW5kIGNhbiB1c2UgaXQgdG8gbG9vayB1cCB3aGF0IEZJRCBwcm9taXNlIHdlXHJcbiAgICAvLy8gYXJlIHdhaXRpbmcgZm9yLCBhbmQgd2FpdCBvbmx5IG9uIHRoYXQgb25lLlxyXG4gICAgY29uc3QgY29ycmVzcG9uZGluZ0FwcElkID0gbWVhc3VyZW1lbnRJZFRvQXBwSWRbbWVhc3VyZW1lbnRJZF07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChjb3JyZXNwb25kaW5nQXBwSWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFtjb3JyZXNwb25kaW5nQXBwSWRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgY29uZmlnIGlzIG5vdCBmZXRjaGVkIHlldCwgd2FpdCBmb3IgYWxsIGNvbmZpZ3MgKHdlIGRvbid0IGtub3cgd2hpY2ggb25lIHdlIG5lZWQpIGFuZFxyXG4gICAgICAgICAgICAvLyBmaW5kIHRoZSBhcHBJZCAoaWYgYW55KSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgbWVhc3VyZW1lbnRJZC4gSWYgdGhlcmUgaXMgb25lLCB3YWl0IG9uXHJcbiAgICAgICAgICAgIC8vIHRoYXQgYXBwSWQncyBpbml0aWFsaXphdGlvbiBwcm9taXNlLiBJZiB0aGVyZSBpcyBub25lLCBwcm9taXNlIHJlc29sdmVzIGFuZCBndGFnXHJcbiAgICAgICAgICAgIC8vIGNhbGwgZ29lcyB0aHJvdWdoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBjb25zdCBmb3VuZENvbmZpZyA9IGR5bmFtaWNDb25maWdSZXN1bHRzLmZpbmQoY29uZmlnID0+IGNvbmZpZy5tZWFzdXJlbWVudElkID09PSBtZWFzdXJlbWVudElkKTtcclxuICAgICAgICAgICAgaWYgKGZvdW5kQ29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2ZvdW5kQ29uZmlnLmFwcElkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gICAgZ3RhZ0NvcmUoXCJjb25maWdcIiAvKiBDT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMpO1xyXG59XHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgbG9naWMgd2hlbiBndGFnIGlzIGNhbGxlZCB3aXRoICdldmVudCcgY29tbWFuZC5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWQgR0EgTWVhc3VyZW1lbnQgSUQgdG8gbG9nIGV2ZW50IHRvLlxyXG4gKiBAcGFyYW0gZ3RhZ1BhcmFtcyBQYXJhbXMgdG8gbG9nIHdpdGggdGhpcyBldmVudC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGd0YWdPbkV2ZW50KGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkLCBndGFnUGFyYW1zKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGxldCBpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yID0gW107XHJcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhICdzZW5kX3RvJyBwYXJhbSwgY2hlY2sgaWYgYW55IElEIHNwZWNpZmllZCBtYXRjaGVzXHJcbiAgICAgICAgLy8gYW4gaW5pdGlhbGl6ZUlkcygpIHByb21pc2Ugd2UgYXJlIHdhaXRpbmcgZm9yLlxyXG4gICAgICAgIGlmIChndGFnUGFyYW1zICYmIGd0YWdQYXJhbXNbJ3NlbmRfdG8nXSkge1xyXG4gICAgICAgICAgICBsZXQgZ2FTZW5kVG9MaXN0ID0gZ3RhZ1BhcmFtc1snc2VuZF90byddO1xyXG4gICAgICAgICAgICAvLyBNYWtlIGl0IGFuIGFycmF5IGlmIGlzIGlzbid0LCBzbyBpdCBjYW4gYmUgZGVhbHQgd2l0aCB0aGUgc2FtZSB3YXkuXHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShnYVNlbmRUb0xpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICBnYVNlbmRUb0xpc3QgPSBbZ2FTZW5kVG9MaXN0XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVja2luZyAnc2VuZF90bycgZmllbGRzIHJlcXVpcmVzIGhhdmluZyBhbGwgbWVhc3VyZW1lbnQgSUQgcmVzdWx0cyBiYWNrIGZyb21cclxuICAgICAgICAgICAgLy8gdGhlIGR5bmFtaWMgY29uZmlnIGZldGNoLlxyXG4gICAgICAgICAgICBjb25zdCBkeW5hbWljQ29uZmlnUmVzdWx0cyA9IGF3YWl0IHByb21pc2VBbGxTZXR0bGVkKGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlbmRUb0lkIG9mIGdhU2VuZFRvTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQW55IGZldGNoZWQgZHluYW1pYyBtZWFzdXJlbWVudCBJRCB0aGF0IG1hdGNoZXMgdGhpcyAnc2VuZF90bycgSURcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kQ29uZmlnID0gZHluYW1pY0NvbmZpZ1Jlc3VsdHMuZmluZChjb25maWcgPT4gY29uZmlnLm1lYXN1cmVtZW50SWQgPT09IHNlbmRUb0lkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxpemF0aW9uUHJvbWlzZSA9IGZvdW5kQ29uZmlnICYmIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbZm91bmRDb25maWcuYXBwSWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IucHVzaChpbml0aWFsaXphdGlvblByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgYW4gaXRlbSBpbiAnc2VuZF90bycgdGhhdCBpcyBub3QgYXNzb2NpYXRlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5IHdpdGggYW4gRklELCBwb3NzaWJseSBhIGdyb3VwLiAgRW1wdHkgdGhpcyBhcnJheSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBleGl0IHRoZSBsb29wIGVhcmx5LCBhbmQgbGV0IGl0IGdldCBwb3B1bGF0ZWQgYmVsb3cuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBiZSB1bnBvcHVsYXRlZCBpZiB0aGVyZSB3YXMgbm8gJ3NlbmRfdG8nIGZpZWxkICwgb3JcclxuICAgICAgICAvLyBpZiBub3QgYWxsIGVudHJpZXMgaW4gdGhlICdzZW5kX3RvJyBmaWVsZCBjb3VsZCBiZSBtYXBwZWQgdG9cclxuICAgICAgICAvLyBhIEZJRC4gSW4gdGhlc2UgY2FzZXMsIHdhaXQgb24gYWxsIHBlbmRpbmcgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBPYmplY3QudmFsdWVzKGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSdW4gY29yZSBndGFnIGZ1bmN0aW9uIHdpdGggYXJncyBhZnRlciBhbGwgcmVsZXZhbnQgaW5pdGlhbGl6YXRpb25cclxuICAgICAgICAvLyBwcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQuXHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvcik7XHJcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cDovL2IvMTQxMzcwNDQ5IC0gdGhpcmQgYXJndW1lbnQgY2Fubm90IGJlIHVuZGVmaW5lZC5cclxuICAgICAgICBndGFnQ29yZShcImV2ZW50XCIgLyogRVZFTlQgKi8sIG1lYXN1cmVtZW50SWQsIGd0YWdQYXJhbXMgfHwge30pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiB3aXRoIGV4dHJhIGNvZGUgdG8gd2FpdCBmb3IgY29tcGxldGlvbiBvZlxyXG4gKiByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBiZWZvcmUgc2VuZGluZyByZXF1ZXN0cy5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyLlxyXG4gKiBAcGFyYW0gaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCBNYXAgb2YgYXBwSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCBBcnJheSBvZiBkeW5hbWljIGNvbmZpZyBmZXRjaCBwcm9taXNlcy5cclxuICogQHBhcmFtIG1lYXN1cmVtZW50SWRUb0FwcElkIE1hcCBvZiBHQSBtZWFzdXJlbWVudElEcyB0byBjb3JyZXNwb25kaW5nIEZpcmViYXNlIGFwcElkLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcEd0YWcoZ3RhZ0NvcmUsIFxyXG4vKipcclxuICogQWxsb3dzIHdyYXBwZWQgZ3RhZyBjYWxscyB0byB3YWl0IG9uIHdoaWNoZXZlciBpbnRpYWxpemF0aW9uIHByb21pc2VzIGFyZSByZXF1aXJlZCxcclxuICogZGVwZW5kaW5nIG9uIHRoZSBjb250ZW50cyBvZiB0aGUgZ3RhZyBwYXJhbXMnIGBzZW5kX3RvYCBmaWVsZCwgaWYgYW55LlxyXG4gKi9cclxuaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgXHJcbi8qKlxyXG4gKiBXcmFwcGVkIGd0YWcgY2FsbHMgc29tZXRpbWVzIHJlcXVpcmUgYWxsIGR5bmFtaWMgY29uZmlnIGZldGNoZXMgdG8gaGF2ZSByZXR1cm5lZFxyXG4gKiBiZWZvcmUgZGV0ZXJtaW5pbmcgd2hhdCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyAod2hpY2ggaW5jbHVkZSBGSURzKSB0byB3YWl0IGZvci5cclxuICovXHJcbmR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIFxyXG4vKipcclxuICogV3JhcHBlZCBndGFnIGNvbmZpZyBjYWxscyBjYW4gbmFycm93IGRvd24gd2hpY2ggaW5pdGlhbGl6YXRpb24gcHJvbWlzZSAod2l0aCBGSUQpXHJcbiAqIHRvIHdhaXQgZm9yIGlmIHRoZSBtZWFzdXJlbWVudElkIGlzIGFscmVhZHkgZmV0Y2hlZCwgYnkgZ2V0dGluZyB0aGUgY29ycmVzcG9uZGluZyBhcHBJZCxcclxuICogd2hpY2ggaXMgdGhlIGtleSBmb3IgdGhlIGluaXRpYWxpemF0aW9uIHByb21pc2VzIG1hcC5cclxuICovXHJcbm1lYXN1cmVtZW50SWRUb0FwcElkKSB7XHJcbiAgICAvKipcclxuICAgICAqIFdyYXBwZXIgYXJvdW5kIGd0YWcgdGhhdCBlbnN1cmVzIEZJRCBpcyBzZW50IHdpdGggZ3RhZyBjYWxscy5cclxuICAgICAqIEBwYXJhbSBjb21tYW5kIEd0YWcgY29tbWFuZCB0eXBlLlxyXG4gICAgICogQHBhcmFtIGlkT3JOYW1lT3JQYXJhbXMgTWVhc3VyZW1lbnQgSUQgaWYgY29tbWFuZCBpcyBFVkVOVC9DT05GSUcsIHBhcmFtcyBpZiBjb21tYW5kIGlzIFNFVC5cclxuICAgICAqIEBwYXJhbSBndGFnUGFyYW1zIFBhcmFtcyBpZiBldmVudCBpcyBFVkVOVC9DT05GSUcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGZ1bmN0aW9uIGd0YWdXcmFwcGVyKGNvbW1hbmQsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBJZiBldmVudCwgY2hlY2sgdGhhdCByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZC5cclxuICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT09IFwiZXZlbnRcIiAvKiBFVkVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgRVZFTlQsIHNlY29uZCBhcmcgbXVzdCBiZSBtZWFzdXJlbWVudElkLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgZ3RhZ09uRXZlbnQoZ3RhZ0NvcmUsIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXAsIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQgPT09IFwiY29uZmlnXCIgLyogQ09ORklHICovKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBDT05GSUcsIHNlY29uZCBhcmcgbXVzdCBiZSBtZWFzdXJlbWVudElkLlxyXG4gICAgICAgICAgICAgICAgYXdhaXQgZ3RhZ09uQ29uZmlnKGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgaWRPck5hbWVPclBhcmFtcywgZ3RhZ1BhcmFtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY29tbWFuZCA9PT0gXCJjb25zZW50XCIgLyogQ09OU0VOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgQ09ORklHLCBzZWNvbmQgYXJnIG11c3QgYmUgbWVhc3VyZW1lbnRJZC5cclxuICAgICAgICAgICAgICAgIGd0YWdDb3JlKFwiY29uc2VudFwiIC8qIENPTlNFTlQgKi8sICd1cGRhdGUnLCBndGFnUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIFNFVCwgc2Vjb25kIGFyZyBtdXN0IGJlIHBhcmFtcy5cclxuICAgICAgICAgICAgICAgIGd0YWdDb3JlKFwic2V0XCIgLyogU0VUICovLCBpZE9yTmFtZU9yUGFyYW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGd0YWdXcmFwcGVyO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGdsb2JhbCBndGFnIGZ1bmN0aW9uIG9yIHdyYXBzIGV4aXN0aW5nIG9uZSBpZiBmb3VuZC5cclxuICogVGhpcyB3cmFwcGVkIGZ1bmN0aW9uIGF0dGFjaGVzIEZpcmViYXNlIGluc3RhbmNlIElEIChGSUQpIHRvIGd0YWcgJ2NvbmZpZycgYW5kXHJcbiAqICdldmVudCcgY2FsbHMgdGhhdCBiZWxvbmcgdG8gdGhlIEdBSUQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgRmlyZWJhc2UgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBpbml0aWFsaXphdGlvblByb21pc2VzTWFwIE1hcCBvZiBhcHBJZHMgdG8gdGhlaXIgaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0IEFycmF5IG9mIGR5bmFtaWMgY29uZmlnIGZldGNoIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZFRvQXBwSWQgTWFwIG9mIEdBIG1lYXN1cmVtZW50SURzIHRvIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2UgYXBwSWQuXHJcbiAqIEBwYXJhbSBkYXRhTGF5ZXJOYW1lIE5hbWUgb2YgZ2xvYmFsIEdBIGRhdGFsYXllciBhcnJheS5cclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbk5hbWUgTmFtZSBvZiBnbG9iYWwgZ3RhZyBmdW5jdGlvbiAoXCJndGFnXCIgaWYgbm90IHVzZXItc3BlY2lmaWVkKS5cclxuICovXHJcbmZ1bmN0aW9uIHdyYXBPckNyZWF0ZUd0YWcoaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGRhdGFMYXllck5hbWUsIGd0YWdGdW5jdGlvbk5hbWUpIHtcclxuICAgIC8vIENyZWF0ZSBhIGJhc2ljIGNvcmUgZ3RhZyBmdW5jdGlvblxyXG4gICAgbGV0IGd0YWdDb3JlID0gZnVuY3Rpb24gKC4uLl9hcmdzKSB7XHJcbiAgICAgICAgLy8gTXVzdCBwdXNoIElBcmd1bWVudHMgb2JqZWN0LCBub3QgYW4gYXJyYXkuXHJcbiAgICAgICAgd2luZG93W2RhdGFMYXllck5hbWVdLnB1c2goYXJndW1lbnRzKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXBsYWNlIGl0IHdpdGggZXhpc3Rpbmcgb25lIGlmIGZvdW5kXHJcbiAgICBpZiAod2luZG93W2d0YWdGdW5jdGlvbk5hbWVdICYmXHJcbiAgICAgICAgdHlwZW9mIHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBndGFnQ29yZSA9IHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXTtcclxuICAgIH1cclxuICAgIHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSA9IHdyYXBHdGFnKGd0YWdDb3JlLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGd0YWdDb3JlLFxyXG4gICAgICAgIHdyYXBwZWRHdGFnOiB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV1cclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHNjcmlwdCB0YWcgaW4gdGhlIERPTSBtYXRjaGluZyBib3RoIHRoZSBndGFnIHVybCBwYXR0ZXJuXHJcbiAqIGFuZCB0aGUgcHJvdmlkZWQgZGF0YSBsYXllciBuYW1lLlxyXG4gKi9cclxuZnVuY3Rpb24gZmluZEd0YWdTY3JpcHRPblBhZ2UoZGF0YUxheWVyTmFtZSkge1xyXG4gICAgY29uc3Qgc2NyaXB0VGFncyA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XHJcbiAgICBmb3IgKGNvbnN0IHRhZyBvZiBPYmplY3QudmFsdWVzKHNjcmlwdFRhZ3MpKSB7XHJcbiAgICAgICAgaWYgKHRhZy5zcmMgJiZcclxuICAgICAgICAgICAgdGFnLnNyYy5pbmNsdWRlcyhHVEFHX1VSTCkgJiZcclxuICAgICAgICAgICAgdGFnLnNyYy5pbmNsdWRlcyhkYXRhTGF5ZXJOYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcImFscmVhZHktZXhpc3RzXCIgLyogQUxSRUFEWV9FWElTVFMgKi9dOiAnQSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2Ugd2l0aCB0aGUgYXBwSWQgeyRpZH0gJyArXHJcbiAgICAgICAgJyBhbHJlYWR5IGV4aXN0cy4gJyArXHJcbiAgICAgICAgJ09ubHkgb25lIEZpcmViYXNlIEFuYWx5dGljcyBpbnN0YW5jZSBjYW4gYmUgY3JlYXRlZCBmb3IgZWFjaCBhcHBJZC4nLFxyXG4gICAgW1wiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi9dOiAnaW5pdGlhbGl6ZUFuYWx5dGljcygpIGNhbm5vdCBiZSBjYWxsZWQgYWdhaW4gd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyB0aGFuIHRob3NlICcgK1xyXG4gICAgICAgICdpdCB3YXMgaW5pdGlhbGx5IGNhbGxlZCB3aXRoLiBJdCBjYW4gYmUgY2FsbGVkIGFnYWluIHdpdGggdGhlIHNhbWUgb3B0aW9ucyB0byAnICtcclxuICAgICAgICAncmV0dXJuIHRoZSBleGlzdGluZyBpbnN0YW5jZSwgb3IgZ2V0QW5hbHl0aWNzKCkgY2FuIGJlIHVzZWQgJyArXHJcbiAgICAgICAgJ3RvIGdldCBhIHJlZmVyZW5jZSB0byB0aGUgYWxyZWFkeS1pbnRpYWxpemVkIGluc3RhbmNlLicsXHJcbiAgICBbXCJhbHJlYWR5LWluaXRpYWxpemVkLXNldHRpbmdzXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRF9TRVRUSU5HUyAqL106ICdGaXJlYmFzZSBBbmFseXRpY3MgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZC4nICtcclxuICAgICAgICAnc2V0dGluZ3MoKSBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgaW5pdGlhbGl6aW5nIGFueSBBbmFseXRpY3MgaW5zdGFuY2UnICtcclxuICAgICAgICAnb3IgaXQgd2lsbCBoYXZlIG5vIGVmZmVjdC4nLFxyXG4gICAgW1wiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIElOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi9dOiAnRmlyZWJhc2UgQW5hbHl0aWNzIEludGVyb3AgQ29tcG9uZW50IGZhaWxlZCB0byBpbnN0YW50aWF0ZTogeyRyZWFzb259JyxcclxuICAgIFtcImludmFsaWQtYW5hbHl0aWNzLWNvbnRleHRcIiAvKiBJTlZBTElEX0FOQUxZVElDU19DT05URVhUICovXTogJ0ZpcmViYXNlIEFuYWx5dGljcyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQuICcgK1xyXG4gICAgICAgICdXcmFwIGluaXRpYWxpemF0aW9uIG9mIGFuYWx5dGljcyBpbiBhbmFseXRpY3MuaXNTdXBwb3J0ZWQoKSAnICtcclxuICAgICAgICAndG8gcHJldmVudCBpbml0aWFsaXphdGlvbiBpbiB1bnN1cHBvcnRlZCBlbnZpcm9ubWVudHMuIERldGFpbHM6IHskZXJyb3JJbmZvfScsXHJcbiAgICBbXCJpbmRleGVkZGItdW5hdmFpbGFibGVcIiAvKiBJTkRFWEVEREJfVU5BVkFJTEFCTEUgKi9dOiAnSW5kZXhlZERCIHVuYXZhaWxhYmxlIG9yIHJlc3RyaWN0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC4gJyArXHJcbiAgICAgICAgJ1dyYXAgaW5pdGlhbGl6YXRpb24gb2YgYW5hbHl0aWNzIGluIGFuYWx5dGljcy5pc1N1cHBvcnRlZCgpICcgK1xyXG4gICAgICAgICd0byBwcmV2ZW50IGluaXRpYWxpemF0aW9uIGluIHVuc3VwcG9ydGVkIGVudmlyb25tZW50cy4gRGV0YWlsczogeyRlcnJvckluZm99JyxcclxuICAgIFtcImZldGNoLXRocm90dGxlXCIgLyogRkVUQ0hfVEhST1RUTEUgKi9dOiAnVGhlIGNvbmZpZyBmZXRjaCByZXF1ZXN0IHRpbWVkIG91dCB3aGlsZSBpbiBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIHN0YXRlLicgK1xyXG4gICAgICAgICcgVW5peCB0aW1lc3RhbXAgaW4gbWlsbGlzZWNvbmRzIHdoZW4gZmV0Y2ggcmVxdWVzdCB0aHJvdHRsaW5nIGVuZHM6IHskdGhyb3R0bGVFbmRUaW1lTWlsbGlzfS4nLFxyXG4gICAgW1wiY29uZmlnLWZldGNoLWZhaWxlZFwiIC8qIENPTkZJR19GRVRDSF9GQUlMRUQgKi9dOiAnRHluYW1pYyBjb25maWcgZmV0Y2ggZmFpbGVkOiBbeyRodHRwU3RhdHVzfV0geyRyZXNwb25zZU1lc3NhZ2V9JyxcclxuICAgIFtcIm5vLWFwaS1rZXlcIiAvKiBOT19BUElfS0VZICovXTogJ1RoZSBcImFwaUtleVwiIGZpZWxkIGlzIGVtcHR5IGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIEZpcmViYXNlIEFuYWx5dGljcyByZXF1aXJlcyB0aGlzIGZpZWxkIHRvJyArXHJcbiAgICAgICAgJ2NvbnRhaW4gYSB2YWxpZCBBUEkga2V5LicsXHJcbiAgICBbXCJuby1hcHAtaWRcIiAvKiBOT19BUFBfSUQgKi9dOiAnVGhlIFwiYXBwSWRcIiBmaWVsZCBpcyBlbXB0eSBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnLiBGaXJlYmFzZSBBbmFseXRpY3MgcmVxdWlyZXMgdGhpcyBmaWVsZCB0bycgK1xyXG4gICAgICAgICdjb250YWluIGEgdmFsaWQgYXBwIElELidcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FuYWx5dGljcycsICdBbmFseXRpY3MnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQmFja29mZiBmYWN0b3IgZm9yIDUwMyBlcnJvcnMsIHdoaWNoIHdlIHdhbnQgdG8gYmUgY29uc2VydmF0aXZlIGFib3V0XHJcbiAqIHRvIGF2b2lkIG92ZXJsb2FkaW5nIHNlcnZlcnMuIEVhY2ggcmV0cnkgaW50ZXJ2YWwgd2lsbCBiZVxyXG4gKiBCQVNFX0lOVEVSVkFMX01JTExJUyAqIExPTkdfUkVUUllfRkFDVE9SIF4gcmV0cnlDb3VudCwgc28gdGhlIHNlY29uZCBvbmVcclxuICogd2lsbCBiZSB+MzAgc2Vjb25kcyAod2l0aCBmdXp6aW5nKS5cclxuICovXHJcbmNvbnN0IExPTkdfUkVUUllfRkFDVE9SID0gMzA7XHJcbi8qKlxyXG4gKiBCYXNlIHdhaXQgaW50ZXJ2YWwgdG8gbXVsdGlwbGllZCBieSBiYWNrb2ZmRmFjdG9yXmJhY2tvZmZDb3VudC5cclxuICovXHJcbmNvbnN0IEJBU0VfSU5URVJWQUxfTUlMTElTID0gMTAwMDtcclxuLyoqXHJcbiAqIFN0dWJiYWJsZSByZXRyeSBkYXRhIHN0b3JhZ2UgY2xhc3MuXHJcbiAqL1xyXG5jbGFzcyBSZXRyeURhdGEge1xyXG4gICAgY29uc3RydWN0b3IodGhyb3R0bGVNZXRhZGF0YSA9IHt9LCBpbnRlcnZhbE1pbGxpcyA9IEJBU0VfSU5URVJWQUxfTUlMTElTKSB7XHJcbiAgICAgICAgdGhpcy50aHJvdHRsZU1ldGFkYXRhID0gdGhyb3R0bGVNZXRhZGF0YTtcclxuICAgICAgICB0aGlzLmludGVydmFsTWlsbGlzID0gaW50ZXJ2YWxNaWxsaXM7XHJcbiAgICB9XHJcbiAgICBnZXRUaHJvdHRsZU1ldGFkYXRhKGFwcElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGhyb3R0bGVNZXRhZGF0YVthcHBJZF07XHJcbiAgICB9XHJcbiAgICBzZXRUaHJvdHRsZU1ldGFkYXRhKGFwcElkLCBtZXRhZGF0YSkge1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGVNZXRhZGF0YVthcHBJZF0gPSBtZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy50aHJvdHRsZU1ldGFkYXRhW2FwcElkXTtcclxuICAgIH1cclxufVxyXG5jb25zdCBkZWZhdWx0UmV0cnlEYXRhID0gbmV3IFJldHJ5RGF0YSgpO1xyXG4vKipcclxuICogU2V0IEdFVCByZXF1ZXN0IGhlYWRlcnMuXHJcbiAqIEBwYXJhbSBhcGlLZXkgQXBwIEFQSSBrZXkuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRIZWFkZXJzKGFwaUtleSkge1xyXG4gICAgcmV0dXJuIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAneC1nb29nLWFwaS1rZXknOiBhcGlLZXlcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBGZXRjaGVzIGR5bmFtaWMgY29uZmlnIGZyb20gYmFja2VuZC5cclxuICogQHBhcmFtIGFwcCBGaXJlYmFzZSBhcHAgdG8gZmV0Y2ggY29uZmlnIGZvci5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoRHluYW1pY0NvbmZpZyhhcHBGaWVsZHMpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHsgYXBwSWQsIGFwaUtleSB9ID0gYXBwRmllbGRzO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IGdldEhlYWRlcnMoYXBpS2V5KVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGFwcFVybCA9IERZTkFNSUNfQ09ORklHX1VSTC5yZXBsYWNlKCd7YXBwLWlkfScsIGFwcElkKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBwVXJsLCByZXF1ZXN0KTtcclxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgIT09IDMwNCkge1xyXG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnJztcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBUcnkgdG8gZ2V0IGFueSBlcnJvciBtZXNzYWdlIHRleHQgZnJvbSBzZXJ2ZXIgcmVzcG9uc2UuXHJcbiAgICAgICAgICAgIGNvbnN0IGpzb25SZXNwb25zZSA9IChhd2FpdCByZXNwb25zZS5qc29uKCkpO1xyXG4gICAgICAgICAgICBpZiAoKF9hID0ganNvblJlc3BvbnNlLmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0ganNvblJlc3BvbnNlLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9pZ25vcmVkKSB7IH1cclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImNvbmZpZy1mZXRjaC1mYWlsZWRcIiAvKiBDT05GSUdfRkVUQ0hfRkFJTEVEICovLCB7XHJcbiAgICAgICAgICAgIGh0dHBTdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcclxuICAgICAgICAgICAgcmVzcG9uc2VNZXNzYWdlOiBlcnJvck1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbn1cclxuLyoqXHJcbiAqIEZldGNoZXMgZHluYW1pYyBjb25maWcgZnJvbSBiYWNrZW5kLCByZXRyeWluZyBpZiBmYWlsZWQuXHJcbiAqIEBwYXJhbSBhcHAgRmlyZWJhc2UgYXBwIHRvIGZldGNoIGNvbmZpZyBmb3IuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBmZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoYXBwLCBcclxuLy8gcmV0cnlEYXRhIGFuZCB0aW1lb3V0TWlsbGlzIGFyZSBwYXJhbWV0ZXJpemVkIHRvIGFsbG93IHBhc3NpbmcgYSBkaWZmZXJlbnQgdmFsdWUgZm9yIHRlc3RpbmcuXHJcbnJldHJ5RGF0YSA9IGRlZmF1bHRSZXRyeURhdGEsIHRpbWVvdXRNaWxsaXMpIHtcclxuICAgIGNvbnN0IHsgYXBwSWQsIGFwaUtleSwgbWVhc3VyZW1lbnRJZCB9ID0gYXBwLm9wdGlvbnM7XHJcbiAgICBpZiAoIWFwcElkKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHAtaWRcIiAvKiBOT19BUFBfSUQgKi8pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcGlLZXkpIHtcclxuICAgICAgICBpZiAobWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbWVhc3VyZW1lbnRJZCxcclxuICAgICAgICAgICAgICAgIGFwcElkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBpLWtleVwiIC8qIE5PX0FQSV9LRVkgKi8pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGhyb3R0bGVNZXRhZGF0YSA9IHJldHJ5RGF0YS5nZXRUaHJvdHRsZU1ldGFkYXRhKGFwcElkKSB8fCB7XHJcbiAgICAgICAgYmFja29mZkNvdW50OiAwLFxyXG4gICAgICAgIHRocm90dGxlRW5kVGltZU1pbGxpczogRGF0ZS5ub3coKVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNpZ25hbCA9IG5ldyBBbmFseXRpY3NBYm9ydFNpZ25hbCgpO1xyXG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgLy8gTm90ZSBhIHZlcnkgbG93IGRlbGF5LCBlZyA8IDEwbXMsIGNhbiBlbGFwc2UgYmVmb3JlIGxpc3RlbmVycyBhcmUgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgc2lnbmFsLmFib3J0KCk7XHJcbiAgICB9LCB0aW1lb3V0TWlsbGlzICE9PSB1bmRlZmluZWQgPyB0aW1lb3V0TWlsbGlzIDogRkVUQ0hfVElNRU9VVF9NSUxMSVMpO1xyXG4gICAgcmV0dXJuIGF0dGVtcHRGZXRjaER5bmFtaWNDb25maWdXaXRoUmV0cnkoeyBhcHBJZCwgYXBpS2V5LCBtZWFzdXJlbWVudElkIH0sIHRocm90dGxlTWV0YWRhdGEsIHNpZ25hbCwgcmV0cnlEYXRhKTtcclxufVxyXG4vKipcclxuICogUnVucyBvbmUgcmV0cnkgYXR0ZW1wdC5cclxuICogQHBhcmFtIGFwcEZpZWxkcyBOZWNlc3NhcnkgYXBwIGNvbmZpZyBmaWVsZHMuXHJcbiAqIEBwYXJhbSB0aHJvdHRsZU1ldGFkYXRhIE9uZ29pbmcgbWV0YWRhdGEgdG8gZGV0ZXJtaW5lIHRocm90dGxpbmcgdGltZXMuXHJcbiAqIEBwYXJhbSBzaWduYWwgQWJvcnQgc2lnbmFsLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeShhcHBGaWVsZHMsIHsgdGhyb3R0bGVFbmRUaW1lTWlsbGlzLCBiYWNrb2ZmQ291bnQgfSwgc2lnbmFsLCByZXRyeURhdGEgPSBkZWZhdWx0UmV0cnlEYXRhIC8vIGZvciB0ZXN0aW5nXHJcbikge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIGNvbnN0IHsgYXBwSWQsIG1lYXN1cmVtZW50SWQgfSA9IGFwcEZpZWxkcztcclxuICAgIC8vIFN0YXJ0cyB3aXRoIGEgKHBvdGVudGlhbGx5IHplcm8pIHRpbWVvdXQgdG8gc3VwcG9ydCByZXN1bXB0aW9uIGZyb20gc3RvcmVkIHN0YXRlLlxyXG4gICAgLy8gRW5zdXJlcyB0aGUgdGhyb3R0bGUgZW5kIHRpbWUgaXMgaG9ub3JlZCBpZiB0aGUgbGFzdCBhdHRlbXB0IHRpbWVkIG91dC5cclxuICAgIC8vIE5vdGUgdGhlIFNESyB3aWxsIG5ldmVyIG1ha2UgYSByZXF1ZXN0IGlmIHRoZSBmZXRjaCB0aW1lb3V0IGV4cGlyZXMgYXQgdGhpcyBwb2ludC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc2V0QWJvcnRhYmxlVGltZW91dChzaWduYWwsIHRocm90dGxlRW5kVGltZU1pbGxpcyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChtZWFzdXJlbWVudElkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBUaW1lZCBvdXQgZmV0Y2hpbmcgdGhpcyBGaXJlYmFzZSBhcHAncyBtZWFzdXJlbWVudCBJRCBmcm9tIHRoZSBzZXJ2ZXIuYCArXHJcbiAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgYCBwcm92aWRlZCBpbiB0aGUgXCJtZWFzdXJlbWVudElkXCIgZmllbGQgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gWyR7KF9hID0gZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2V9XWApO1xyXG4gICAgICAgICAgICByZXR1cm4geyBhcHBJZCwgbWVhc3VyZW1lbnRJZCB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoRHluYW1pY0NvbmZpZyhhcHBGaWVsZHMpO1xyXG4gICAgICAgIC8vIE5vdGUgdGhlIFNESyBvbmx5IGNsZWFycyB0aHJvdHRsZSBzdGF0ZSBpZiByZXNwb25zZSBpcyBzdWNjZXNzIG9yIG5vbi1yZXRyaWFibGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBlO1xyXG4gICAgICAgIGlmICghaXNSZXRyaWFibGVFcnJvcihlcnJvcikpIHtcclxuICAgICAgICAgICAgcmV0cnlEYXRhLmRlbGV0ZVRocm90dGxlTWV0YWRhdGEoYXBwSWQpO1xyXG4gICAgICAgICAgICBpZiAobWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEZhaWxlZCB0byBmZXRjaCB0aGlzIEZpcmViYXNlIGFwcCdzIG1lYXN1cmVtZW50IElEIGZyb20gdGhlIHNlcnZlci5gICtcclxuICAgICAgICAgICAgICAgICAgICBgIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHttZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGAgcHJvdmlkZWQgaW4gdGhlIFwibWVhc3VyZW1lbnRJZFwiIGZpZWxkIGluIHRoZSBsb2NhbCBGaXJlYmFzZSBjb25maWcuIFske2Vycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5tZXNzYWdlfV1gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGFwcElkLCBtZWFzdXJlbWVudElkIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJhY2tvZmZNaWxsaXMgPSBOdW1iZXIoKF9iID0gZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLmN1c3RvbURhdGEpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5odHRwU3RhdHVzKSA9PT0gNTAzXHJcbiAgICAgICAgICAgID8gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcywgTE9OR19SRVRSWV9GQUNUT1IpXHJcbiAgICAgICAgICAgIDogY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIHJldHJ5RGF0YS5pbnRlcnZhbE1pbGxpcyk7XHJcbiAgICAgICAgLy8gSW5jcmVtZW50cyBiYWNrb2ZmIHN0YXRlLlxyXG4gICAgICAgIGNvbnN0IHRocm90dGxlTWV0YWRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRocm90dGxlRW5kVGltZU1pbGxpczogRGF0ZS5ub3coKSArIGJhY2tvZmZNaWxsaXMsXHJcbiAgICAgICAgICAgIGJhY2tvZmZDb3VudDogYmFja29mZkNvdW50ICsgMVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gUGVyc2lzdHMgc3RhdGUuXHJcbiAgICAgICAgcmV0cnlEYXRhLnNldFRocm90dGxlTWV0YWRhdGEoYXBwSWQsIHRocm90dGxlTWV0YWRhdGEpO1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ2FsbGluZyBhdHRlbXB0RmV0Y2ggYWdhaW4gaW4gJHtiYWNrb2ZmTWlsbGlzfSBtaWxsaXNgKTtcclxuICAgICAgICByZXR1cm4gYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeShhcHBGaWVsZHMsIHRocm90dGxlTWV0YWRhdGEsIHNpZ25hbCwgcmV0cnlEYXRhKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU3VwcG9ydHMgd2FpdGluZyBvbiBhIGJhY2tvZmYgYnk6XHJcbiAqXHJcbiAqIDx1bD5cclxuICogICA8bGk+UHJvbWlzaWZ5aW5nIHNldFRpbWVvdXQsIHNvIHdlIGNhbiBzZXQgYSB0aW1lb3V0IGluIG91ciBQcm9taXNlIGNoYWluPC9saT5cclxuICogICA8bGk+TGlzdGVuaW5nIG9uIGEgc2lnbmFsIGJ1cyBmb3IgYWJvcnQgZXZlbnRzLCBqdXN0IGxpa2UgdGhlIEZldGNoIEFQSTwvbGk+XHJcbiAqICAgPGxpPkZhaWxpbmcgaW4gdGhlIHNhbWUgd2F5IHRoZSBGZXRjaCBBUEkgZmFpbHMsIHNvIHRpbWluZyBvdXQgYSBsaXZlIHJlcXVlc3QgYW5kIGEgdGhyb3R0bGVkXHJcbiAqICAgICAgIHJlcXVlc3QgYXBwZWFyIHRoZSBzYW1lLjwvbGk+XHJcbiAqIDwvdWw+XHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRBYm9ydGFibGVUaW1lb3V0KHNpZ25hbCwgdGhyb3R0bGVFbmRUaW1lTWlsbGlzKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIC8vIERlcml2ZXMgYmFja29mZiBmcm9tIGdpdmVuIGVuZCB0aW1lLCBub3JtYWxpemluZyBuZWdhdGl2ZSBudW1iZXJzIHRvIHplcm8uXHJcbiAgICAgICAgY29uc3QgYmFja29mZk1pbGxpcyA9IE1hdGgubWF4KHRocm90dGxlRW5kVGltZU1pbGxpcyAtIERhdGUubm93KCksIDApO1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIGJhY2tvZmZNaWxsaXMpO1xyXG4gICAgICAgIC8vIEFkZHMgbGlzdGVuZXIsIHJhdGhlciB0aGFuIHNldHMgb25hYm9ydCwgYmVjYXVzZSBzaWduYWwgaXMgYSBzaGFyZWQgb2JqZWN0LlxyXG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCgpID0+IHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBjb21wbGV0ZXMgYmVmb3JlIHRoaXMgdGltZW91dCwgdGhlIHJlamVjdGlvbiBoYXMgbm8gZWZmZWN0LlxyXG4gICAgICAgICAgICByZWplY3QoRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJmZXRjaC10aHJvdHRsZVwiIC8qIEZFVENIX1RIUk9UVExFICovLCB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdHRsZUVuZFRpbWVNaWxsaXNcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUge0BsaW5rIEVycm9yfSBpbmRpY2F0ZXMgYSBmZXRjaCByZXF1ZXN0IG1heSBzdWNjZWVkIGxhdGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZXRyaWFibGVFcnJvcihlKSB7XHJcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikgfHwgIWUuY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIFVzZXMgc3RyaW5nIGluZGV4IGRlZmluZWQgYnkgRXJyb3JEYXRhLCB3aGljaCBGaXJlYmFzZUVycm9yIGltcGxlbWVudHMuXHJcbiAgICBjb25zdCBodHRwU3RhdHVzID0gTnVtYmVyKGUuY3VzdG9tRGF0YVsnaHR0cFN0YXR1cyddKTtcclxuICAgIHJldHVybiAoaHR0cFN0YXR1cyA9PT0gNDI5IHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAwIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTAzIHx8XHJcbiAgICAgICAgaHR0cFN0YXR1cyA9PT0gNTA0KTtcclxufVxyXG4vKipcclxuICogU2hpbXMgYSBtaW5pbWFsIEFib3J0U2lnbmFsIChjb3BpZWQgZnJvbSBSZW1vdGUgQ29uZmlnKS5cclxuICpcclxuICogPHA+QWJvcnRDb250cm9sbGVyJ3MgQWJvcnRTaWduYWwgY29udmVuaWVudGx5IGRlY291cGxlcyBmZXRjaCB0aW1lb3V0IGxvZ2ljIGZyb20gb3RoZXIgYXNwZWN0c1xyXG4gKiBvZiBuZXR3b3JraW5nLCBzdWNoIGFzIHJldHJpZXMuIEZpcmViYXNlIGRvZXNuJ3QgdXNlIEFib3J0Q29udHJvbGxlciBlbm91Z2ggdG8ganVzdGlmeSBhXHJcbiAqIHBvbHlmaWxsIHJlY29tbWVuZGF0aW9uLCBsaWtlIHdlIGRvIHdpdGggdGhlIEZldGNoIEFQSSwgYnV0IHRoaXMgbWluaW1hbCBzaGltIGNhbiBlYXNpbHkgYmVcclxuICogc3dhcHBlZCBvdXQgaWYvd2hlbiB3ZSBkby5cclxuICovXHJcbmNsYXNzIEFuYWx5dGljc0Fib3J0U2lnbmFsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcbiAgICBhZGRFdmVudExpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBhYm9ydCgpIHtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKCkpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmVudCBwYXJhbWV0ZXJzIHRvIHNldCBvbiAnZ3RhZycgZHVyaW5nIGluaXRpYWxpemF0aW9uLlxyXG4gKi9cclxubGV0IGRlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0O1xyXG4vKipcclxuICogTG9ncyBhbiBhbmFseXRpY3MgZXZlbnQgdGhyb3VnaCB0aGUgRmlyZWJhc2UgU0RLLlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBldmVudE5hbWUgR29vZ2xlIEFuYWx5dGljcyBldmVudCBuYW1lLCBjaG9vc2UgZnJvbSBzdGFuZGFyZCBsaXN0IG9yIHVzZSBhIGN1c3RvbSBzdHJpbmcuXHJcbiAqIEBwYXJhbSBldmVudFBhcmFtcyBBbmFseXRpY3MgZXZlbnQgcGFyYW1ldGVycy5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxvZ0V2ZW50JDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBFVkVOVCAqLywgZXZlbnROYW1lLCBldmVudFBhcmFtcyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGV2ZW50UGFyYW1zKSwgeyAnc2VuZF90byc6IG1lYXN1cmVtZW50SWQgfSk7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwiZXZlbnRcIiAvKiBFVkVOVCAqLywgZXZlbnROYW1lLCBwYXJhbXMpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgc2NyZWVuX25hbWUgcGFyYW1ldGVyIGZvciB0aGlzIEdvb2dsZSBBbmFseXRpY3MgSUQuXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgbG9nRXZlbnR9IHdpdGggYGV2ZW50TmFtZWAgYXMgJ3NjcmVlbl92aWV3JyBhbmQgYWRkIHJlbGV2YW50IGBldmVudFBhcmFtc2AuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYW5hbHl0aWNzL3NjcmVlbnZpZXdzIHwgVHJhY2sgU2NyZWVudmlld3N9LlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBzY3JlZW5OYW1lIFNjcmVlbiBuYW1lIHN0cmluZyB0byBzZXQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuJDEoZ3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2UsIHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogU0VUICovLCB7ICdzY3JlZW5fbmFtZSc6IHNjcmVlbk5hbWUgfSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBDT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCB1c2VyX2lkIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBpZCBVc2VyIElEIHN0cmluZyB0byBzZXRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldFVzZXJJZCQxKGd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBpZCwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJzZXRcIiAvKiBTRVQgKi8sIHsgJ3VzZXJfaWQnOiBpZCB9KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBtZWFzdXJlbWVudElkID0gYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIGd0YWdGdW5jdGlvbihcImNvbmZpZ1wiIC8qIENPTkZJRyAqLywgbWVhc3VyZW1lbnRJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICd1c2VyX2lkJzogaWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IGFsbCBvdGhlciB1c2VyIHByb3BlcnRpZXMgb3RoZXIgdGhhbiB1c2VyX2lkIGFuZCBzY3JlZW5fbmFtZS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gcHJvcGVydGllcyBNYXAgb2YgdXNlciBwcm9wZXJ0aWVzIHRvIHNldFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2V0VXNlclByb3BlcnRpZXMkMShndGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZSwgcHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBjb25zdCBmbGF0UHJvcGVydGllcyA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHByb3BlcnRpZXMpKSB7XHJcbiAgICAgICAgICAgIC8vIHVzZSBkb3Qgbm90YXRpb24gZm9yIG1lcmdlIGJlaGF2aW9yIGluIGd0YWcuanNcclxuICAgICAgICAgICAgZmxhdFByb3BlcnRpZXNbYHVzZXJfcHJvcGVydGllcy4ke2tleX1gXSA9IHByb3BlcnRpZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKFwic2V0XCIgLyogU0VUICovLCBmbGF0UHJvcGVydGllcyk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRJZCA9IGF3YWl0IGluaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBndGFnRnVuY3Rpb24oXCJjb25maWdcIiAvKiBDT05GSUcgKi8sIG1lYXN1cmVtZW50SWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAndXNlcl9wcm9wZXJ0aWVzJzogcHJvcGVydGllc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBTZXQgd2hldGhlciBjb2xsZWN0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgSUQuXHJcbiAqXHJcbiAqIEBwYXJhbSBlbmFibGVkIElmIHRydWUsIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBJRC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkJDEoaW5pdGlhbGl6YXRpb25Qcm9taXNlLCBlbmFibGVkKSB7XHJcbiAgICBjb25zdCBtZWFzdXJlbWVudElkID0gYXdhaXQgaW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgd2luZG93W2BnYS1kaXNhYmxlLSR7bWVhc3VyZW1lbnRJZH1gXSA9ICFlbmFibGVkO1xyXG59XHJcbi8qKlxyXG4gKiBDb25zZW50IHBhcmFtZXRlcnMgdG8gZGVmYXVsdCB0byBkdXJpbmcgJ2d0YWcnIGluaXRpYWxpemF0aW9uLlxyXG4gKi9cclxubGV0IGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0O1xyXG4vKipcclxuICogU2V0cyB0aGUgdmFyaWFibGUge0BsaW5rIGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0fSBmb3IgdXNlIGluIHRoZSBpbml0aWFsaXphdGlvbiBvZlxyXG4gKiBhbmFseXRpY3MuXHJcbiAqXHJcbiAqIEBwYXJhbSBjb25zZW50U2V0dGluZ3MgTWFwcyB0aGUgYXBwbGljYWJsZSBlbmQgdXNlciBjb25zZW50IHN0YXRlIGZvciBndGFnLmpzLlxyXG4gKi9cclxuZnVuY3Rpb24gX3NldENvbnNlbnREZWZhdWx0Rm9ySW5pdChjb25zZW50U2V0dGluZ3MpIHtcclxuICAgIGRlZmF1bHRDb25zZW50U2V0dGluZ3NGb3JJbml0ID0gY29uc2VudFNldHRpbmdzO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSB2YXJpYWJsZSBgZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXRgIGZvciB1c2UgaW4gdGhlIGluaXRpYWxpemF0aW9uIG9mXHJcbiAqIGFuYWx5dGljcy5cclxuICpcclxuICogQHBhcmFtIGN1c3RvbVBhcmFtcyBBbnkgY3VzdG9tIHBhcmFtcyB0aGUgdXNlciBtYXkgcGFzcyB0byBndGFnLmpzLlxyXG4gKi9cclxuZnVuY3Rpb24gX3NldERlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KGN1c3RvbVBhcmFtcykge1xyXG4gICAgZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQgPSBjdXN0b21QYXJhbXM7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREIoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICBsb2dnZXIud2FybihFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImluZGV4ZWRkYi11bmF2YWlsYWJsZVwiIC8qIElOREVYRUREQl9VTkFWQUlMQUJMRSAqLywge1xyXG4gICAgICAgICAgICBlcnJvckluZm86ICdJbmRleGVkREIgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LidcclxuICAgICAgICB9KS5tZXNzYWdlKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW5kZXhlZGRiLXVuYXZhaWxhYmxlXCIgLyogSU5ERVhFRERCX1VOQVZBSUxBQkxFICovLCB7XHJcbiAgICAgICAgICAgICAgICBlcnJvckluZm86IChfYSA9IGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGFuYWx5dGljcyBpbnN0YW5jZSBpbiBndGFnLmpzIGJ5IGNhbGxpbmcgY29uZmlnIGNvbW1hbmQgd2l0aCBmaWQuXHJcbiAqXHJcbiAqIE5PVEU6IFdlIGNvbWJpbmUgYW5hbHl0aWNzIGluaXRpYWxpemF0aW9uIGFuZCBzZXR0aW5nIGZpZCB0b2dldGhlciBiZWNhdXNlIHdlIHdhbnQgZmlkIHRvIGJlXHJcbiAqIHBhcnQgb2YgdGhlIGBwYWdlX3ZpZXdgIGV2ZW50IHRoYXQncyBzZW50IGR1cmluZyB0aGUgaW5pdGlhbGl6YXRpb25cclxuICogQHBhcmFtIGFwcCBGaXJlYmFzZSBhcHBcclxuICogQHBhcmFtIGd0YWdDb3JlIFRoZSBndGFnIGZ1bmN0aW9uIHRoYXQncyBub3Qgd3JhcHBlZC5cclxuICogQHBhcmFtIGR5bmFtaWNDb25maWdQcm9taXNlc0xpc3QgQXJyYXkgb2YgYWxsIGR5bmFtaWMgY29uZmlnIHByb21pc2VzLlxyXG4gKiBAcGFyYW0gbWVhc3VyZW1lbnRJZFRvQXBwSWQgTWFwcyBtZWFzdXJlbWVudElEIHRvIGFwcElELlxyXG4gKiBAcGFyYW0gaW5zdGFsbGF0aW9ucyBfRmlyZWJhc2VJbnN0YWxsYXRpb25zSW50ZXJuYWwgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEByZXR1cm5zIE1lYXN1cmVtZW50IElELlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2luaXRpYWxpemVBbmFseXRpY3MoYXBwLCBkeW5hbWljQ29uZmlnUHJvbWlzZXNMaXN0LCBtZWFzdXJlbWVudElkVG9BcHBJZCwgaW5zdGFsbGF0aW9ucywgZ3RhZ0NvcmUsIGRhdGFMYXllck5hbWUsIG9wdGlvbnMpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGR5bmFtaWNDb25maWdQcm9taXNlID0gZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5KGFwcCk7XHJcbiAgICAvLyBPbmNlIGZldGNoZWQsIG1hcCBtZWFzdXJlbWVudElkcyB0byBhcHBJZCwgZm9yIGVhc2Ugb2YgbG9va3VwIGluIHdyYXBwZWQgZ3RhZyBmdW5jdGlvbi5cclxuICAgIGR5bmFtaWNDb25maWdQcm9taXNlXHJcbiAgICAgICAgLnRoZW4oY29uZmlnID0+IHtcclxuICAgICAgICBtZWFzdXJlbWVudElkVG9BcHBJZFtjb25maWcubWVhc3VyZW1lbnRJZF0gPSBjb25maWcuYXBwSWQ7XHJcbiAgICAgICAgaWYgKGFwcC5vcHRpb25zLm1lYXN1cmVtZW50SWQgJiZcclxuICAgICAgICAgICAgY29uZmlnLm1lYXN1cmVtZW50SWQgIT09IGFwcC5vcHRpb25zLm1lYXN1cmVtZW50SWQpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRoZSBtZWFzdXJlbWVudCBJRCBpbiB0aGUgbG9jYWwgRmlyZWJhc2UgY29uZmlnICgke2FwcC5vcHRpb25zLm1lYXN1cmVtZW50SWR9KWAgK1xyXG4gICAgICAgICAgICAgICAgYCBkb2VzIG5vdCBtYXRjaCB0aGUgbWVhc3VyZW1lbnQgSUQgZmV0Y2hlZCBmcm9tIHRoZSBzZXJ2ZXIgKCR7Y29uZmlnLm1lYXN1cmVtZW50SWR9KS5gICtcclxuICAgICAgICAgICAgICAgIGAgVG8gZW5zdXJlIGFuYWx5dGljcyBldmVudHMgYXJlIGFsd2F5cyBzZW50IHRvIHRoZSBjb3JyZWN0IEFuYWx5dGljcyBwcm9wZXJ0eSxgICtcclxuICAgICAgICAgICAgICAgIGAgdXBkYXRlIHRoZWAgK1xyXG4gICAgICAgICAgICAgICAgYCBtZWFzdXJlbWVudCBJRCBmaWVsZCBpbiB0aGUgbG9jYWwgY29uZmlnIG9yIHJlbW92ZSBpdCBmcm9tIHRoZSBsb2NhbCBjb25maWcuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG4gICAgLy8gQWRkIHRvIGxpc3QgdG8gdHJhY2sgc3RhdGUgb2YgYWxsIGR5bmFtaWMgY29uZmlnIHByb21pc2VzLlxyXG4gICAgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdC5wdXNoKGR5bmFtaWNDb25maWdQcm9taXNlKTtcclxuICAgIGNvbnN0IGZpZFByb21pc2UgPSB2YWxpZGF0ZUluZGV4ZWREQigpLnRoZW4oZW52SXNWYWxpZCA9PiB7XHJcbiAgICAgICAgaWYgKGVudklzVmFsaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbGxhdGlvbnMuZ2V0SWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBbZHluYW1pY0NvbmZpZywgZmlkXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICBkeW5hbWljQ29uZmlnUHJvbWlzZSxcclxuICAgICAgICBmaWRQcm9taXNlXHJcbiAgICBdKTtcclxuICAgIC8vIERldGVjdCBpZiB1c2VyIGhhcyBhbHJlYWR5IHB1dCB0aGUgZ3RhZyA8c2NyaXB0PiB0YWcgb24gdGhpcyBwYWdlIHdpdGggdGhlIHBhc3NlZCBpblxyXG4gICAgLy8gZGF0YSBsYXllciBuYW1lLlxyXG4gICAgaWYgKCFmaW5kR3RhZ1NjcmlwdE9uUGFnZShkYXRhTGF5ZXJOYW1lKSkge1xyXG4gICAgICAgIGluc2VydFNjcmlwdFRhZyhkYXRhTGF5ZXJOYW1lLCBkeW5hbWljQ29uZmlnLm1lYXN1cmVtZW50SWQpO1xyXG4gICAgfVxyXG4gICAgLy8gRGV0ZWN0cyBpZiB0aGVyZSBhcmUgY29uc2VudCBzZXR0aW5ncyB0aGF0IG5lZWQgdG8gYmUgY29uZmlndXJlZC5cclxuICAgIGlmIChkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCkge1xyXG4gICAgICAgIGd0YWdDb3JlKFwiY29uc2VudFwiIC8qIENPTlNFTlQgKi8sICdkZWZhdWx0JywgZGVmYXVsdENvbnNlbnRTZXR0aW5nc0ZvckluaXQpO1xyXG4gICAgICAgIF9zZXRDb25zZW50RGVmYXVsdEZvckluaXQodW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgY29tbWFuZCBpbml0aWFsaXplcyBndGFnLmpzIGFuZCBvbmx5IG5lZWRzIHRvIGJlIGNhbGxlZCBvbmNlIGZvciB0aGUgZW50aXJlIHdlYiBhcHAsXHJcbiAgICAvLyBidXQgc2luY2UgaXQgaXMgaWRlbXBvdGVudCwgd2UgY2FuIGNhbGwgaXQgbXVsdGlwbGUgdGltZXMuXHJcbiAgICAvLyBXZSBrZWVwIGl0IHRvZ2V0aGVyIHdpdGggb3RoZXIgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGJldHRlciBjb2RlIHN0cnVjdHVyZS5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICBndGFnQ29yZSgnanMnLCBuZXcgRGF0ZSgpKTtcclxuICAgIC8vIFVzZXIgY29uZmlnIGFkZGVkIGZpcnN0LiBXZSBkb24ndCB3YW50IHVzZXJzIHRvIGFjY2lkZW50YWxseSBvdmVyd3JpdGVcclxuICAgIC8vIGJhc2UgRmlyZWJhc2UgY29uZmlnIHByb3BlcnRpZXMuXHJcbiAgICBjb25zdCBjb25maWdQcm9wZXJ0aWVzID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNvbmZpZykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDoge307XHJcbiAgICAvLyBndWFyZCBhZ2FpbnN0IGRldmVsb3BlcnMgYWNjaWRlbnRhbGx5IHNldHRpbmcgcHJvcGVydGllcyB3aXRoIHByZWZpeCBgZmlyZWJhc2VfYFxyXG4gICAgY29uZmlnUHJvcGVydGllc1tPUklHSU5fS0VZXSA9ICdmaXJlYmFzZSc7XHJcbiAgICBjb25maWdQcm9wZXJ0aWVzLnVwZGF0ZSA9IHRydWU7XHJcbiAgICBpZiAoZmlkICE9IG51bGwpIHtcclxuICAgICAgICBjb25maWdQcm9wZXJ0aWVzW0dBX0ZJRF9LRVldID0gZmlkO1xyXG4gICAgfVxyXG4gICAgLy8gSXQgc2hvdWxkIGJlIHRoZSBmaXJzdCBjb25maWcgY29tbWFuZCBjYWxsZWQgb24gdGhpcyBHQS1JRFxyXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGlzIEdBLUlEIGFuZCBzZXQgRklEIG9uIGl0IHVzaW5nIHRoZSBndGFnIGNvbmZpZyBBUEkuXHJcbiAgICAvLyBOb3RlOiBUaGlzIHdpbGwgdHJpZ2dlciBhIHBhZ2VfdmlldyBldmVudCB1bmxlc3MgJ3NlbmRfcGFnZV92aWV3JyBpcyBzZXQgdG8gZmFsc2UgaW5cclxuICAgIC8vIGBjb25maWdQcm9wZXJ0aWVzYC5cclxuICAgIGd0YWdDb3JlKFwiY29uZmlnXCIgLyogQ09ORklHICovLCBkeW5hbWljQ29uZmlnLm1lYXN1cmVtZW50SWQsIGNvbmZpZ1Byb3BlcnRpZXMpO1xyXG4gICAgLy8gRGV0ZWN0cyBpZiB0aGVyZSBpcyBkYXRhIHRoYXQgd2lsbCBiZSBzZXQgb24gZXZlcnkgZXZlbnQgbG9nZ2VkIGZyb20gdGhlIFNESy5cclxuICAgIGlmIChkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCkge1xyXG4gICAgICAgIGd0YWdDb3JlKFwic2V0XCIgLyogU0VUICovLCBkZWZhdWx0RXZlbnRQYXJhbWV0ZXJzRm9ySW5pdCk7XHJcbiAgICAgICAgX3NldERlZmF1bHRFdmVudFBhcmFtZXRlcnNGb3JJbml0KHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZHluYW1pY0NvbmZpZy5tZWFzdXJlbWVudElkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBbmFseXRpY3MgU2VydmljZSBjbGFzcy5cclxuICovXHJcbmNsYXNzIEFuYWx5dGljc1NlcnZpY2Uge1xyXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICB9XHJcbiAgICBfZGVsZXRlKCkge1xyXG4gICAgICAgIGRlbGV0ZSBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW3RoaXMuYXBwLm9wdGlvbnMuYXBwSWRdO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogTWFwcyBhcHBJZCB0byBmdWxsIGluaXRpYWxpemF0aW9uIHByb21pc2UuIFdyYXBwZWQgZ3RhZyBjYWxscyBtdXN0IHdhaXQgb25cclxuICogYWxsIG9yIHNvbWUgb2YgdGhlc2UsIGRlcGVuZGluZyBvbiB0aGUgY2FsbCdzIGBzZW5kX3RvYCBwYXJhbSBhbmQgdGhlIHN0YXR1c1xyXG4gKiBvZiB0aGUgZHluYW1pYyBjb25maWcgZmV0Y2hlcyAoc2VlIGJlbG93KS5cclxuICovXHJcbmxldCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwID0ge307XHJcbi8qKlxyXG4gKiBMaXN0IG9mIGR5bmFtaWMgY29uZmlnIGZldGNoIHByb21pc2VzLiBJbiBjZXJ0YWluIGNhc2VzLCB3cmFwcGVkIGd0YWcgY2FsbHNcclxuICogd2FpdCBvbiBhbGwgdGhlc2UgdG8gYmUgY29tcGxldGUgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIGlmIGl0IGNhbiBzZWxlY3RpdmVseVxyXG4gKiB3YWl0IGZvciBvbmx5IGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gKEZJRCkgcHJvbWlzZXMgb3IgaWYgaXQgbXVzdCB3YWl0IGZvciBhbGwuXHJcbiAqL1xyXG5sZXQgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCA9IFtdO1xyXG4vKipcclxuICogTWFwcyBmZXRjaGVkIG1lYXN1cmVtZW50SWRzIHRvIGFwcElkLiBQb3B1bGF0ZWQgd2hlbiB0aGUgYXBwJ3MgZHluYW1pYyBjb25maWdcclxuICogZmV0Y2ggY29tcGxldGVzLiBJZiBhbHJlYWR5IHBvcHVsYXRlZCwgZ3RhZyBjb25maWcgY2FsbHMgY2FuIHVzZSB0aGlzIHRvXHJcbiAqIHNlbGVjdGl2ZWx5IHdhaXQgZm9yIG9ubHkgdGhpcyBhcHAncyBpbml0aWFsaXphdGlvbiBwcm9taXNlIChGSUQpIGluc3RlYWQgb2YgYWxsXHJcbiAqIGluaXRpYWxpemF0aW9uIHByb21pc2VzLlxyXG4gKi9cclxuY29uc3QgbWVhc3VyZW1lbnRJZFRvQXBwSWQgPSB7fTtcclxuLyoqXHJcbiAqIE5hbWUgZm9yIHdpbmRvdyBnbG9iYWwgZGF0YSBsYXllciBhcnJheSB1c2VkIGJ5IEdBOiBkZWZhdWx0cyB0byAnZGF0YUxheWVyJy5cclxuICovXHJcbmxldCBkYXRhTGF5ZXJOYW1lID0gJ2RhdGFMYXllcic7XHJcbi8qKlxyXG4gKiBOYW1lIGZvciB3aW5kb3cgZ2xvYmFsIGd0YWcgZnVuY3Rpb24gdXNlZCBieSBHQTogZGVmYXVsdHMgdG8gJ2d0YWcnLlxyXG4gKi9cclxubGV0IGd0YWdOYW1lID0gJ2d0YWcnO1xyXG4vKipcclxuICogUmVwcm9kdWN0aW9uIG9mIHN0YW5kYXJkIGd0YWcgZnVuY3Rpb24gb3IgcmVmZXJlbmNlIHRvIGV4aXN0aW5nXHJcbiAqIGd0YWcgZnVuY3Rpb24gb24gd2luZG93IG9iamVjdC5cclxuICovXHJcbmxldCBndGFnQ29yZUZ1bmN0aW9uO1xyXG4vKipcclxuICogV3JhcHBlciBhcm91bmQgZ3RhZyBmdW5jdGlvbiB0aGF0IGVuc3VyZXMgRklEIGlzIHNlbnQgd2l0aCBhbGxcclxuICogcmVsZXZhbnQgZXZlbnQgYW5kIGNvbmZpZyBjYWxscy5cclxuICovXHJcbmxldCB3cmFwcGVkR3RhZ0Z1bmN0aW9uO1xyXG4vKipcclxuICogRmxhZyB0byBlbnN1cmUgcGFnZSBpbml0aWFsaXphdGlvbiBzdGVwcyAoY3JlYXRpb24gb3Igd3JhcHBpbmcgb2ZcclxuICogZGF0YUxheWVyIGFuZCBndGFnIHNjcmlwdCkgYXJlIG9ubHkgcnVuIG9uY2UgcGVyIHBhZ2UgbG9hZC5cclxuICovXHJcbmxldCBnbG9iYWxJbml0RG9uZSA9IGZhbHNlO1xyXG4vKipcclxuICogQ29uZmlndXJlcyBGaXJlYmFzZSBBbmFseXRpY3MgdG8gdXNlIGN1c3RvbSBgZ3RhZ2Agb3IgYGRhdGFMYXllcmAgbmFtZXMuXHJcbiAqIEludGVuZGVkIHRvIGJlIHVzZWQgaWYgYGd0YWcuanNgIHNjcmlwdCBoYXMgYmVlbiBpbnN0YWxsZWQgb25cclxuICogdGhpcyBwYWdlIGluZGVwZW5kZW50bHkgb2YgRmlyZWJhc2UgQW5hbHl0aWNzLCBhbmQgaXMgdXNpbmcgbm9uLWRlZmF1bHRcclxuICogbmFtZXMgZm9yIGVpdGhlciB0aGUgYGd0YWdgIGZ1bmN0aW9uIG9yIGZvciBgZGF0YUxheWVyYC5cclxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGNhbGxpbmcgYGdldEFuYWx5dGljcygpYCBvciBpdCB3b24ndFxyXG4gKiBoYXZlIGFueSBlZmZlY3QuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIG9wdGlvbnMgLSBDdXN0b20gZ3RhZyBhbmQgZGF0YUxheWVyIG5hbWVzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0dGluZ3Mob3B0aW9ucykge1xyXG4gICAgaWYgKGdsb2JhbEluaXREb25lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5kYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICAgICAgZGF0YUxheWVyTmFtZSA9IG9wdGlvbnMuZGF0YUxheWVyTmFtZTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmd0YWdOYW1lKSB7XHJcbiAgICAgICAgZ3RhZ05hbWUgPSBvcHRpb25zLmd0YWdOYW1lO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgbm8gZW52aXJvbm1lbnQgbWlzbWF0Y2ggaXMgZm91bmQuXHJcbiAqIElmIGVudmlyb25tZW50IG1pc21hdGNoZXMgYXJlIGZvdW5kLCB0aHJvd3MgYW4gSU5WQUxJRF9BTkFMWVRJQ1NfQ09OVEVYVFxyXG4gKiBlcnJvciB0aGF0IGFsc28gbGlzdHMgZGV0YWlscyBmb3IgZWFjaCBtaXNtYXRjaCBmb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIHdhcm5PbkJyb3dzZXJDb250ZXh0TWlzbWF0Y2goKSB7XHJcbiAgICBjb25zdCBtaXNtYXRjaGVkRW52TWVzc2FnZXMgPSBbXTtcclxuICAgIGlmIChpc0Jyb3dzZXJFeHRlbnNpb24oKSkge1xyXG4gICAgICAgIG1pc21hdGNoZWRFbnZNZXNzYWdlcy5wdXNoKCdUaGlzIGlzIGEgYnJvd3NlciBleHRlbnNpb24gZW52aXJvbm1lbnQuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFyZUNvb2tpZXNFbmFibGVkKCkpIHtcclxuICAgICAgICBtaXNtYXRjaGVkRW52TWVzc2FnZXMucHVzaCgnQ29va2llcyBhcmUgbm90IGF2YWlsYWJsZS4nKTtcclxuICAgIH1cclxuICAgIGlmIChtaXNtYXRjaGVkRW52TWVzc2FnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSBtaXNtYXRjaGVkRW52TWVzc2FnZXNcclxuICAgICAgICAgICAgLm1hcCgobWVzc2FnZSwgaW5kZXgpID0+IGAoJHtpbmRleCArIDF9KSAke21lc3NhZ2V9YClcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgICAgICBjb25zdCBlcnIgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtYW5hbHl0aWNzLWNvbnRleHRcIiAvKiBJTlZBTElEX0FOQUxZVElDU19DT05URVhUICovLCB7XHJcbiAgICAgICAgICAgIGVycm9ySW5mbzogZGV0YWlsc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxvZ2dlci53YXJuKGVyci5tZXNzYWdlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQW5hbHl0aWNzIGluc3RhbmNlIGZhY3RvcnkuXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gZmFjdG9yeShhcHAsIGluc3RhbGxhdGlvbnMsIG9wdGlvbnMpIHtcclxuICAgIHdhcm5PbkJyb3dzZXJDb250ZXh0TWlzbWF0Y2goKTtcclxuICAgIGNvbnN0IGFwcElkID0gYXBwLm9wdGlvbnMuYXBwSWQ7XHJcbiAgICBpZiAoIWFwcElkKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHAtaWRcIiAvKiBOT19BUFBfSUQgKi8pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHAub3B0aW9ucy5hcGlLZXkpIHtcclxuICAgICAgICBpZiAoYXBwLm9wdGlvbnMubWVhc3VyZW1lbnRJZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgVGhlIFwiYXBpS2V5XCIgZmllbGQgaXMgZW1wdHkgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy4gVGhpcyBpcyBuZWVkZWQgdG8gZmV0Y2ggdGhlIGxhdGVzdGAgK1xyXG4gICAgICAgICAgICAgICAgYCBtZWFzdXJlbWVudCBJRCBmb3IgdGhpcyBGaXJlYmFzZSBhcHAuIEZhbGxpbmcgYmFjayB0byB0aGUgbWVhc3VyZW1lbnQgSUQgJHthcHAub3B0aW9ucy5tZWFzdXJlbWVudElkfWAgK1xyXG4gICAgICAgICAgICAgICAgYCBwcm92aWRlZCBpbiB0aGUgXCJtZWFzdXJlbWVudElkXCIgZmllbGQgaW4gdGhlIGxvY2FsIEZpcmViYXNlIGNvbmZpZy5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBpLWtleVwiIC8qIE5PX0FQSV9LRVkgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FwcElkXSAhPSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhbHJlYWR5LWV4aXN0c1wiIC8qIEFMUkVBRFlfRVhJU1RTICovLCB7XHJcbiAgICAgICAgICAgIGlkOiBhcHBJZFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFnbG9iYWxJbml0RG9uZSkge1xyXG4gICAgICAgIC8vIFN0ZXBzIGhlcmUgc2hvdWxkIG9ubHkgYmUgZG9uZSBvbmNlIHBlciBwYWdlOiBjcmVhdGlvbiBvciB3cmFwcGluZ1xyXG4gICAgICAgIC8vIG9mIGRhdGFMYXllciBhbmQgZ2xvYmFsIGd0YWcgZnVuY3Rpb24uXHJcbiAgICAgICAgZ2V0T3JDcmVhdGVEYXRhTGF5ZXIoZGF0YUxheWVyTmFtZSk7XHJcbiAgICAgICAgY29uc3QgeyB3cmFwcGVkR3RhZywgZ3RhZ0NvcmUgfSA9IHdyYXBPckNyZWF0ZUd0YWcoaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGRhdGFMYXllck5hbWUsIGd0YWdOYW1lKTtcclxuICAgICAgICB3cmFwcGVkR3RhZ0Z1bmN0aW9uID0gd3JhcHBlZEd0YWc7XHJcbiAgICAgICAgZ3RhZ0NvcmVGdW5jdGlvbiA9IGd0YWdDb3JlO1xyXG4gICAgICAgIGdsb2JhbEluaXREb25lID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIEFzeW5jIGJ1dCBub24tYmxvY2tpbmcuXHJcbiAgICAvLyBUaGlzIG1hcCByZWZsZWN0cyB0aGUgY29tcGxldGlvbiBzdGF0ZSBvZiBhbGwgcHJvbWlzZXMgZm9yIGVhY2ggYXBwSWQuXHJcbiAgICBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FwcElkXSA9IF9pbml0aWFsaXplQW5hbHl0aWNzKGFwcCwgZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCwgbWVhc3VyZW1lbnRJZFRvQXBwSWQsIGluc3RhbGxhdGlvbnMsIGd0YWdDb3JlRnVuY3Rpb24sIGRhdGFMYXllck5hbWUsIG9wdGlvbnMpO1xyXG4gICAgY29uc3QgYW5hbHl0aWNzSW5zdGFuY2UgPSBuZXcgQW5hbHl0aWNzU2VydmljZShhcHApO1xyXG4gICAgcmV0dXJuIGFuYWx5dGljc0luc3RhbmNlO1xyXG59XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYW4ge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UgZm9yIHRoZSBnaXZlbiBhcHAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICpcclxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gdG8gdXNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QW5hbHl0aWNzKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBhcHAgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXBwKTtcclxuICAgIC8vIERlcGVuZGVuY2llc1xyXG4gICAgY29uc3QgYW5hbHl0aWNzUHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCBBTkFMWVRJQ1NfVFlQRSk7XHJcbiAgICBpZiAoYW5hbHl0aWNzUHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGFuYWx5dGljc1Byb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluaXRpYWxpemVBbmFseXRpY3MoYXBwKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhbiB7QGxpbmsgQW5hbHl0aWNzfSBpbnN0YW5jZSBmb3IgdGhlIGdpdmVuIGFwcC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB0byB1c2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQW5hbHl0aWNzKGFwcCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAvLyBEZXBlbmRlbmNpZXNcclxuICAgIGNvbnN0IGFuYWx5dGljc1Byb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgQU5BTFlUSUNTX1RZUEUpO1xyXG4gICAgaWYgKGFuYWx5dGljc1Byb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSBhbmFseXRpY3NQcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGFuYWx5dGljc1Byb3ZpZGVyLmdldE9wdGlvbnMoKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nSW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBhbmFseXRpY3NJbnN0YW5jZSA9IGFuYWx5dGljc1Byb3ZpZGVyLmluaXRpYWxpemUoeyBvcHRpb25zIH0pO1xyXG4gICAgcmV0dXJuIGFuYWx5dGljc0luc3RhbmNlO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIGlzIGEgcHVibGljIHN0YXRpYyBtZXRob2QgcHJvdmlkZWQgdG8gdXNlcnMgdGhhdCB3cmFwcyBmb3VyIGRpZmZlcmVudCBjaGVja3M6XHJcbiAqXHJcbiAqIDEuIENoZWNrIGlmIGl0J3Mgbm90IGEgYnJvd3NlciBleHRlbnNpb24gZW52aXJvbm1lbnQuXHJcbiAqIDIuIENoZWNrIGlmIGNvb2tpZXMgYXJlIGVuYWJsZWQgaW4gY3VycmVudCBicm93c2VyLlxyXG4gKiAzLiBDaGVjayBpZiBJbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyIGVudmlyb25tZW50LlxyXG4gKiA0LiBDaGVjayBpZiB0aGUgY3VycmVudCBicm93c2VyIGNvbnRleHQgaXMgdmFsaWQgZm9yIHVzaW5nIGBJbmRleGVkREIub3BlbigpYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gaXNTdXBwb3J0ZWQoKSB7XHJcbiAgICBpZiAoaXNCcm93c2VyRXh0ZW5zaW9uKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFyZUNvb2tpZXNFbmFibGVkKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGlzREJPcGVuYWJsZSA9IGF3YWl0IHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKTtcclxuICAgICAgICByZXR1cm4gaXNEQk9wZW5hYmxlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVc2UgZ3RhZyBgY29uZmlnYCBjb21tYW5kIHRvIHNldCBgc2NyZWVuX25hbWVgLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqXHJcbiAqIEBkZXByZWNhdGVkIFVzZSB7QGxpbmsgbG9nRXZlbnR9IHdpdGggYGV2ZW50TmFtZWAgYXMgJ3NjcmVlbl92aWV3JyBhbmQgYWRkIHJlbGV2YW50IGBldmVudFBhcmFtc2AuXHJcbiAqIFNlZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYW5hbHl0aWNzL3NjcmVlbnZpZXdzIHwgVHJhY2sgU2NyZWVudmlld3N9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYW5hbHl0aWNzSW5zdGFuY2UgLSBUaGUge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBzY3JlZW5OYW1lIC0gU2NyZWVuIG5hbWUgdG8gc2V0LlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0Q3VycmVudFNjcmVlbihhbmFseXRpY3NJbnN0YW5jZSwgc2NyZWVuTmFtZSwgb3B0aW9ucykge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgc2V0Q3VycmVudFNjcmVlbiQxKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBzY3JlZW5OYW1lLCBvcHRpb25zKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIFVzZSBndGFnIGBjb25maWdgIGNvbW1hbmQgdG8gc2V0IGB1c2VyX2lkYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gYW5hbHl0aWNzSW5zdGFuY2UgLSBUaGUge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBpZCAtIFVzZXIgSUQgdG8gc2V0LlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0VXNlcklkKGFuYWx5dGljc0luc3RhbmNlLCBpZCwgb3B0aW9ucykge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgc2V0VXNlcklkJDEod3JhcHBlZEd0YWdGdW5jdGlvbiwgaW5pdGlhbGl6YXRpb25Qcm9taXNlc01hcFthbmFseXRpY3NJbnN0YW5jZS5hcHAub3B0aW9ucy5hcHBJZF0sIGlkLCBvcHRpb25zKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIFVzZSBndGFnIGBjb25maWdgIGNvbW1hbmQgdG8gc2V0IGFsbCBwYXJhbXMgc3BlY2lmaWVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRVc2VyUHJvcGVydGllcyhhbmFseXRpY3NJbnN0YW5jZSwgcHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgc2V0VXNlclByb3BlcnRpZXMkMSh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgcHJvcGVydGllcywgb3B0aW9ucykuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHdoZXRoZXIgR29vZ2xlIEFuYWx5dGljcyBjb2xsZWN0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgYXBwIG9uIHRoaXMgZGV2aWNlLlxyXG4gKiBTZXRzIGdsb2JhbCBgd2luZG93WydnYS1kaXNhYmxlLWFuYWx5dGljc0lkJ10gPSB0cnVlO2BcclxuICpcclxuICogQHB1YmxpY1xyXG4gKlxyXG4gKiBAcGFyYW0gYW5hbHl0aWNzSW5zdGFuY2UgLSBUaGUge0BsaW5rIEFuYWx5dGljc30gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbmFibGVkIC0gSWYgdHJ1ZSwgZW5hYmxlcyBjb2xsZWN0aW9uLCBpZiBmYWxzZSwgZGlzYWJsZXMgaXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZChhbmFseXRpY3NJbnN0YW5jZSwgZW5hYmxlZCkge1xyXG4gICAgYW5hbHl0aWNzSW5zdGFuY2UgPSBnZXRNb2R1bGFySW5zdGFuY2UoYW5hbHl0aWNzSW5zdGFuY2UpO1xyXG4gICAgc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQkMShpbml0aWFsaXphdGlvblByb21pc2VzTWFwW2FuYWx5dGljc0luc3RhbmNlLmFwcC5vcHRpb25zLmFwcElkXSwgZW5hYmxlZCkuY2F0Y2goZSA9PiBsb2dnZXIuZXJyb3IoZSkpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGRhdGEgdGhhdCB3aWxsIGJlIHNldCBvbiBldmVyeSBldmVudCBsb2dnZWQgZnJvbSB0aGUgU0RLLCBpbmNsdWRpbmcgYXV0b21hdGljIG9uZXMuXHJcbiAqIFdpdGggZ3RhZydzIFwic2V0XCIgY29tbWFuZCwgdGhlIHZhbHVlcyBwYXNzZWQgcGVyc2lzdCBvbiB0aGUgY3VycmVudCBwYWdlIGFuZCBhcmUgcGFzc2VkIHdpdGhcclxuICogYWxsIHN1YnNlcXVlbnQgZXZlbnRzLlxyXG4gKiBAcHVibGljXHJcbiAqIEBwYXJhbSBjdXN0b21QYXJhbXMgLSBBbnkgY3VzdG9tIHBhcmFtcyB0aGUgdXNlciBtYXkgcGFzcyB0byBndGFnLmpzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVycyhjdXN0b21QYXJhbXMpIHtcclxuICAgIC8vIENoZWNrIGlmIHJlZmVyZW5jZSB0byBleGlzdGluZyBndGFnIGZ1bmN0aW9uIG9uIHdpbmRvdyBvYmplY3QgZXhpc3RzXHJcbiAgICBpZiAod3JhcHBlZEd0YWdGdW5jdGlvbikge1xyXG4gICAgICAgIHdyYXBwZWRHdGFnRnVuY3Rpb24oXCJzZXRcIiAvKiBTRVQgKi8sIGN1c3RvbVBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBfc2V0RGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQoY3VzdG9tUGFyYW1zKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2VuZHMgYSBHb29nbGUgQW5hbHl0aWNzIGV2ZW50IHdpdGggZ2l2ZW4gYGV2ZW50UGFyYW1zYC4gVGhpcyBtZXRob2RcclxuICogYXV0b21hdGljYWxseSBhc3NvY2lhdGVzIHRoaXMgbG9nZ2VkIGV2ZW50IHdpdGggdGhpcyBGaXJlYmFzZSB3ZWJcclxuICogYXBwIGluc3RhbmNlIG9uIHRoaXMgZGV2aWNlLlxyXG4gKiBMaXN0IG9mIG9mZmljaWFsIGV2ZW50IHBhcmFtZXRlcnMgY2FuIGJlIGZvdW5kIGluIHRoZSBndGFnLmpzXHJcbiAqIHJlZmVyZW5jZSBkb2N1bWVudGF0aW9uOlxyXG4gKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vZ3RhZ2pzL3JlZmVyZW5jZS9nYTQtZXZlbnRzXHJcbiAqIHwgdGhlIEdBNCByZWZlcmVuY2UgZG9jdW1lbnRhdGlvbn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGxvZ0V2ZW50KGFuYWx5dGljc0luc3RhbmNlLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICBhbmFseXRpY3NJbnN0YW5jZSA9IGdldE1vZHVsYXJJbnN0YW5jZShhbmFseXRpY3NJbnN0YW5jZSk7XHJcbiAgICBsb2dFdmVudCQxKHdyYXBwZWRHdGFnRnVuY3Rpb24sIGluaXRpYWxpemF0aW9uUHJvbWlzZXNNYXBbYW5hbHl0aWNzSW5zdGFuY2UuYXBwLm9wdGlvbnMuYXBwSWRdLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKS5jYXRjaChlID0+IGxvZ2dlci5lcnJvcihlKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgdGhlIGFwcGxpY2FibGUgZW5kIHVzZXIgY29uc2VudCBzdGF0ZSBmb3IgdGhpcyB3ZWIgYXBwIGFjcm9zcyBhbGwgZ3RhZyByZWZlcmVuY2VzIG9uY2VcclxuICogRmlyZWJhc2UgQW5hbHl0aWNzIGlzIGluaXRpYWxpemVkLlxyXG4gKlxyXG4gKiBVc2UgdGhlIHtAbGluayBDb25zZW50U2V0dGluZ3N9IHRvIHNwZWNpZnkgaW5kaXZpZHVhbCBjb25zZW50IHR5cGUgdmFsdWVzLiBCeSBkZWZhdWx0IGNvbnNlbnRcclxuICogdHlwZXMgYXJlIHNldCB0byBcImdyYW50ZWRcIi5cclxuICogQHB1YmxpY1xyXG4gKiBAcGFyYW0gY29uc2VudFNldHRpbmdzIC0gTWFwcyB0aGUgYXBwbGljYWJsZSBlbmQgdXNlciBjb25zZW50IHN0YXRlIGZvciBndGFnLmpzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0Q29uc2VudChjb25zZW50U2V0dGluZ3MpIHtcclxuICAgIC8vIENoZWNrIGlmIHJlZmVyZW5jZSB0byBleGlzdGluZyBndGFnIGZ1bmN0aW9uIG9uIHdpbmRvdyBvYmplY3QgZXhpc3RzXHJcbiAgICBpZiAod3JhcHBlZEd0YWdGdW5jdGlvbikge1xyXG4gICAgICAgIHdyYXBwZWRHdGFnRnVuY3Rpb24oXCJjb25zZW50XCIgLyogQ09OU0VOVCAqLywgJ3VwZGF0ZScsIGNvbnNlbnRTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBfc2V0Q29uc2VudERlZmF1bHRGb3JJbml0KGNvbnNlbnRTZXR0aW5ncyk7XHJcbiAgICB9XHJcbn1cblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuY29uc3QgdmVyc2lvbiA9IFwiMC44LjNcIjtcblxuLyoqXHJcbiAqIEZpcmViYXNlIEFuYWx5dGljc1xyXG4gKlxyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQW5hbHl0aWNzKCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoQU5BTFlUSUNTX1RZUEUsIChjb250YWluZXIsIHsgb3B0aW9uczogYW5hbHl0aWNzT3B0aW9ucyB9KSA9PiB7XHJcbiAgICAgICAgLy8gZ2V0SW1tZWRpYXRlIGZvciBGaXJlYmFzZUFwcCB3aWxsIGFsd2F5cyBzdWNjZWVkXHJcbiAgICAgICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBpbnN0YWxsYXRpb25zID0gY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcignaW5zdGFsbGF0aW9ucy1pbnRlcm5hbCcpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICByZXR1cm4gZmFjdG9yeShhcHAsIGluc3RhbGxhdGlvbnMsIGFuYWx5dGljc09wdGlvbnMpO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhbmFseXRpY3MtaW50ZXJuYWwnLCBpbnRlcm5hbEZhY3RvcnksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2VzbTIwMTcnKTtcclxuICAgIGZ1bmN0aW9uIGludGVybmFsRmFjdG9yeShjb250YWluZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhbmFseXRpY3MgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoQU5BTFlUSUNTX1RZUEUpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbG9nRXZlbnQ6IChldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSA9PiBsb2dFdmVudChhbmFseXRpY3MsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIElOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxucmVnaXN0ZXJBbmFseXRpY3MoKTtcblxuZXhwb3J0IHsgZ2V0QW5hbHl0aWNzLCBpbml0aWFsaXplQW5hbHl0aWNzLCBpc1N1cHBvcnRlZCwgbG9nRXZlbnQsIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkLCBzZXRDb25zZW50LCBzZXRDdXJyZW50U2NyZWVuLCBzZXREZWZhdWx0RXZlbnRQYXJhbWV0ZXJzLCBzZXRVc2VySWQsIHNldFVzZXJQcm9wZXJ0aWVzLCBzZXR0aW5ncyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8vIHRoaXMgaXMgd2hlcmUgd2UgY2FuIGhhdmUgdGhlIGNsYXNzZXMgYW5kIGZ1bmN0aW9ucyBmb3IgYnVpbGRpbmcgdGhlIGV2ZW50c1xyXG4vLyB0byBzZW5kIHRvIGFuIGFuYWx5dGljcyByZWNvcmRlciAoZmlyZWJhc2U/IGxycz8pXHJcblxyXG5pbXBvcnQgeyBxRGF0YSwgYW5zd2VyRGF0YSB9IGZyb20gJy4vcXVlc3Rpb25EYXRhJztcclxuaW1wb3J0IHsgbG9nRXZlbnQgfSBmcm9tICdmaXJlYmFzZS9hbmFseXRpY3MnO1xyXG5pbXBvcnQgeyBidWNrZXQgfSBmcm9tICcuLi9hc3Nlc3NtZW50L2J1Y2tldERhdGEnXHJcblxyXG5cclxuLy8gQ3JlYXRlIGEgc2luZ2xldG9uIGNsYXNzIGZvciB0aGUgYW5hbHl0aWNzIGV2ZW50c1xyXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzRXZlbnRzIHtcclxuXHJcblx0cHJvdGVjdGVkIHN0YXRpYyB1dWlkOiBzdHJpbmc7XHJcblx0cHJvdGVjdGVkIHN0YXRpYyB1c2VyU291cmNlOiBzdHJpbmc7XHJcblx0cHJvdGVjdGVkIHN0YXRpYyBjbGF0O1xyXG5cdHByb3RlY3RlZCBzdGF0aWMgY2xvbjtcclxuXHRwcm90ZWN0ZWQgc3RhdGljIGdhbmE7XHJcblx0cHJvdGVjdGVkIHN0YXRpYyBsYXRsb25nO1xyXG5cdC8vIHZhciBjaXR5LCByZWdpb24sIGNvdW50cnk7XHJcblx0cHJvdGVjdGVkIHN0YXRpYyBkYXRhVVJMO1xyXG5cclxuXHRwcm90ZWN0ZWQgc3RhdGljIGFwcFZlcnNpb247XHJcblx0cHJvdGVjdGVkIHN0YXRpYyBjb250ZW50VmVyc2lvbjtcclxuXHJcblx0cHJvdGVjdGVkIHN0YXRpYyBhc3Nlc3NtZW50VHlwZTogc3RyaW5nO1xyXG5cclxuXHRzdGF0aWMgaW5zdGFuY2U6IEFuYWx5dGljc0V2ZW50cztcclxuXHJcblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8vIEluaXRpYWxpemUgdGhlIGNsYXNzXHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZ2V0SW5zdGFuY2UoKTogQW5hbHl0aWNzRXZlbnRzIHtcclxuXHRcdGlmICghQW5hbHl0aWNzRXZlbnRzLmluc3RhbmNlKSB7XHJcblx0XHRcdEFuYWx5dGljc0V2ZW50cy5pbnN0YW5jZSA9IG5ldyBBbmFseXRpY3NFdmVudHMoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gQW5hbHl0aWNzRXZlbnRzLmluc3RhbmNlO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIHNldEFzc2Vzc21lbnRUeXBlKGFzc2Vzc21lbnRUeXBlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdEFuYWx5dGljc0V2ZW50cy5hc3Nlc3NtZW50VHlwZSA9IGFzc2Vzc21lbnRUeXBlO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IExvY2F0aW9uXHJcblx0c3RhdGljIGdldExvY2F0aW9uKCk6IHZvaWQge1xyXG5cdFx0Y29uc29sZS5sb2coXCJzdGFydGluZyB0byBnZXQgbG9jYXRpb25cIik7XHJcblx0XHRmZXRjaChgaHR0cHM6Ly9pcGluZm8uaW8vanNvbj90b2tlbj1iNjI2ODcyNzE3ODYxMGApLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiZ290IGxvY2F0aW9uIHJlc3BvbnNlXCIpO1xyXG5cdFx0XHRpZighcmVzcG9uc2Uub2spIHtcclxuXHRcdFx0XHR0aHJvdyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzcG9uc2UuanNvbigpXHJcblx0XHR9KS50aGVuKChqc29uUmVzcG9uc2UpICA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKGpzb25SZXNwb25zZSk7XHJcblx0XHRcdEFuYWx5dGljc0V2ZW50cy5sYXRsb25nID0ganNvblJlc3BvbnNlLmxvYztcclxuXHRcdFx0dmFyIGxwaWVjZXMgPSBBbmFseXRpY3NFdmVudHMubGF0bG9uZy5zcGxpdChcIixcIik7XHJcblx0XHRcdHZhciBsYXQgPSBwYXJzZUZsb2F0KGxwaWVjZXNbMF0pLnRvRml4ZWQoMik7XHJcblx0XHRcdHZhciBsb24gPSBwYXJzZUZsb2F0KGxwaWVjZXNbMV0pLnRvRml4ZWQoMSk7XHJcblx0XHRcdEFuYWx5dGljc0V2ZW50cy5jbGF0ID0gbGF0O1xyXG5cdFx0XHRBbmFseXRpY3NFdmVudHMuY2xvbiA9IGxvbjtcclxuXHRcdFx0QW5hbHl0aWNzRXZlbnRzLmxhdGxvbmcgPSBcIlwiO1xyXG5cdFx0XHRscGllY2VzID0gW107XHJcblx0XHRcdC8vIGNpdHkgPSBqc29uUmVzcG9uc2UuY2l0eTtcclxuXHRcdFx0Ly8gcmVnaW9uID0ganNvblJlc3BvbnNlLnJlZ2lvbjtcclxuXHRcdFx0Ly8gY291bnRyeSA9IGpzb25SZXNwb25zZS5jb3VudHJ5O1xyXG5cdFx0XHRBbmFseXRpY3NFdmVudHMuc2VuZExvY2F0aW9uKCk7XHJcblxyXG5cdFx0XHRyZXR1cm4ge307XHJcblx0XHR9KS5jYXRjaCgoZXJyKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUud2FybihgbG9jYXRpb24gZmFpbGVkIHRvIHVwZGF0ZSEgZW5jb3VudGVyZWQgZXJyb3IgJHtlcnIubXNnfWApO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIExpbmsgQW5hbHl0aWNzXHJcblx0c3RhdGljIGxpbmtBbmFseXRpY3MobmV3Z2FuYSwgZGF0YXVybCk6IHZvaWQge1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmdhbmEgPSBuZXdnYW5hO1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwgPSBkYXRhdXJsO1xyXG5cdH1cclxuXHJcblx0Ly8gU2V0IFVVSURcclxuXHRzdGF0aWMgc2V0VXVpZChuZXdVdWlkOiBzdHJpbmcsIG5ld1VzZXJTb3VyY2U6IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLnV1aWQgPSBuZXdVdWlkO1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLnVzZXJTb3VyY2UgPSBuZXdVc2VyU291cmNlO1xyXG5cdH1cclxuXHJcblx0Ly8gU2VuZCBJbml0XHJcblx0c3RhdGljIHNlbmRJbml0KGFwcFZlcnNpb246IHN0cmluZywgY29udGVudFZlcnNpb246IHN0cmluZyk6IHZvaWQge1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmFwcFZlcnNpb24gPSBhcHBWZXJzaW9uO1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uID0gY29udGVudFZlcnNpb247XHJcblxyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLmdldExvY2F0aW9uKCk7XHJcblxyXG5cdFx0dmFyIGV2ZW50U3RyaW5nID0gXCJ1c2VyIFwiICsgQW5hbHl0aWNzRXZlbnRzLnV1aWQgKyBcIiBvcGVuZWQgdGhlIGFzc2Vzc21lbnRcIjtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJvcGVuZWRcIiwge1xyXG5cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IEFwcCBMYW5ndWFnZSBGcm9tIERhdGEgVVJMXHJcblx0c3RhdGljIGdldEFwcExhbmd1YWdlRnJvbURhdGFVUkwoYXBwVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdC8vIENoZWNrIGlmIGFwcCB0eXBlIGlzIG5vdCBlbXB0eSBhbmQgc3BsaXQgdGhlIHN0cmluZyBieSB0aGUgaHlwaGVuIHRoZW4gcmV0dXJuIHRoZSBmaXJzdCBlbGVtZW50XHJcblx0XHRpZiAoYXBwVHlwZSAmJiBhcHBUeXBlICE9PSBcIlwiICYmIGFwcFR5cGUuaW5jbHVkZXMoXCItXCIpKSB7XHJcblx0XHRcdHJldHVybiBhcHBUeXBlLnNwbGl0KFwiLVwiKVswXTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gXCJOb3RBdmFpbGFibGVcIjtcclxuXHR9XHJcblxyXG5cdC8vIEdldCBBcHAgVHlwZSBGcm9tIERhdGEgVVJMXHJcblx0c3RhdGljIGdldEFwcFR5cGVGcm9tRGF0YVVSTChhcHBUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgYXBwIHR5cGUgaXMgbm90IGVtcHR5IGFuZCBzcGxpdCB0aGUgc3RyaW5nIGJ5IHRoZSBoeXBoZW4gdGhlbiByZXR1cm4gdGhlIGxhc3QgZWxlbWVudFxyXG5cdFx0aWYgKGFwcFR5cGUgJiYgYXBwVHlwZSAhPT0gXCJcIiAmJiBhcHBUeXBlLmluY2x1ZGVzKFwiLVwiKSkge1xyXG5cdFx0XHRyZXR1cm4gYXBwVHlwZS5zcGxpdChcIi1cIilbMV07XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIFwiTm90QXZhaWxhYmxlXCI7XHJcblx0fVxyXG5cclxuXHQvLyBTZW5kIExvY2F0aW9uXHJcblx0c3RhdGljIHNlbmRMb2NhdGlvbigpOiB2b2lkIHtcclxuXHRcdHZhciBldmVudFN0cmluZyA9IFwiU2VuZGluZyBVc2VyIGNvb3JkaW5hdGVzOiBcIiArIEFuYWx5dGljc0V2ZW50cy51dWlkICsgXCIgOiBcIiArIEFuYWx5dGljc0V2ZW50cy5jbGF0ICsgXCIsIFwiICsgQW5hbHl0aWNzRXZlbnRzLmNsb247XHJcblx0XHRjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJ1c2VyX2xvY2F0aW9uXCIsIHtcclxuXHRcdFx0dXNlcjogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXHJcblx0XHRcdGxhbmc6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0YXBwOiBBbmFseXRpY3NFdmVudHMuZ2V0QXBwVHlwZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0bGF0bG9uZzogQW5hbHl0aWNzRXZlbnRzLmpvaW5MYXRMb25nKEFuYWx5dGljc0V2ZW50cy5jbGF0LCBBbmFseXRpY3NFdmVudHMuY2xvbiksXHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIklOSVRJQUxJWkVEIEVWRU5UIFNFTlRcIik7XHJcblx0XHRjb25zb2xlLmxvZyhcIkFwcCBMYW5ndWFnZTogXCIgKyBBbmFseXRpY3NFdmVudHMuZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCkpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJBcHAgVHlwZTogXCIgKyBBbmFseXRpY3NFdmVudHMuZ2V0QXBwVHlwZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSk7XHJcblx0XHRjb25zb2xlLmxvZyhcIkFwcCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ29udGVudCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbik7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJpbml0aWFsaXplZFwiLCB7XHJcblx0XHRcdHR5cGU6IFwiaW5pdGlhbGl6ZWRcIixcclxuXHRcdFx0Y2xVc2VySWQ6IEFuYWx5dGljc0V2ZW50cy51dWlkLFxyXG5cdFx0XHR1c2VyU291cmNlOiBBbmFseXRpY3NFdmVudHMudXNlclNvdXJjZSxcclxuXHRcdFx0bGF0TG9uZzogQW5hbHl0aWNzRXZlbnRzLmpvaW5MYXRMb25nKEFuYWx5dGljc0V2ZW50cy5jbGF0LCBBbmFseXRpY3NFdmVudHMuY2xvbiksXHJcblx0XHRcdGFwcFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uLFxyXG5cdFx0XHRjb250ZW50VmVyc2lvbjogQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uLFxyXG5cdFx0XHQvLyBjaXR5OiBjaXR5LFxyXG5cdFx0XHQvLyByZWdpb246IHJlZ2lvbixcclxuXHRcdFx0Ly8gY291bnRyeTogY291bnRyeSxcclxuXHRcdFx0YXBwOiBBbmFseXRpY3NFdmVudHMuZ2V0QXBwVHlwZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0bGFuZzogQW5hbHl0aWNzRXZlbnRzLmdldEFwcExhbmd1YWdlRnJvbURhdGFVUkwoQW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwpXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vIFNlbmQgQW5zd2VyZWRcclxuXHRzdGF0aWMgc2VuZEFuc3dlcmVkKHRoZVE6IHFEYXRhLCB0aGVBOiBudW1iZXIsIGVsYXBzZWQ6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0dmFyIGFucyA9IHRoZVEuYW5zd2Vyc1t0aGVBIC0gMV07XHJcblxyXG5cdFx0dmFyIGlzY29ycmVjdCA9IG51bGw7XHJcblx0XHR2YXIgYnVja2V0ID0gbnVsbDtcclxuXHRcdGlmIChcImNvcnJlY3RcIiBpbiB0aGVRKXtcclxuXHRcdFx0aWYgKHRoZVEuY29ycmVjdCAhPSBudWxsKXtcclxuXHRcdFx0XHRpZiAodGhlUS5jb3JyZWN0ID09IGFucy5hbnN3ZXJOYW1lKXtcclxuXHRcdFx0XHRcdGlzY29ycmVjdCA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2V7XHJcblx0XHRcdFx0XHRpc2NvcnJlY3QgPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGlmIChcImJ1Y2tldFwiIGluIHRoZVEpe1xyXG5cdFx0XHRidWNrZXQgPSB0aGVRLmJ1Y2tldDtcclxuXHRcdH1cclxuXHRcdHZhciBldmVudFN0cmluZyA9IFwidXNlciBcIiArIEFuYWx5dGljc0V2ZW50cy51dWlkICsgXCIgYW5zd2VyZWQgXCIgKyB0aGVRLnFOYW1lICsgXCIgd2l0aCBcIiArIGFucy5hbnN3ZXJOYW1lO1xyXG5cdFx0ZXZlbnRTdHJpbmcgKz0gXCIsIGFsbCBhbnN3ZXJzIHdlcmUgW1wiO1xyXG5cdFx0dmFyIG9wdHMgPSBcIlwiO1xyXG5cdFx0Zm9yICh2YXIgYU51bSBpbiB0aGVRLmFuc3dlcnMpIHtcclxuXHRcdFx0ZXZlbnRTdHJpbmcgKz0gdGhlUS5hbnN3ZXJzW2FOdW1dLmFuc3dlck5hbWUgKyBcIixcIjtcclxuXHRcdFx0b3B0cyArPSB0aGVRLmFuc3dlcnNbYU51bV0uYW5zd2VyTmFtZSArIFwiLFwiO1xyXG5cclxuXHRcdH1cclxuXHRcdGV2ZW50U3RyaW5nICs9IFwiXSBcIjtcclxuXHRcdGV2ZW50U3RyaW5nICs9IGlzY29ycmVjdDtcclxuXHRcdGV2ZW50U3RyaW5nICs9IGJ1Y2tldDtcclxuXHRcdGNvbnNvbGUubG9nKGV2ZW50U3RyaW5nKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQW5zd2VyZWQgQXBwIFZlcnNpb246IFwiICsgQW5hbHl0aWNzRXZlbnRzLmFwcFZlcnNpb24pO1xyXG5cdFx0Y29uc29sZS5sb2coXCJDb250ZW50IFZlcnNpb246IFwiICsgQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uKTtcclxuXHJcblx0XHRsb2dFdmVudChBbmFseXRpY3NFdmVudHMuZ2FuYSxcImFuc3dlcmVkXCIsIHtcclxuXHRcdFx0dHlwZTogXCJhbnN3ZXJlZFwiLFxyXG5cdFx0XHRjbFVzZXJJZDogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXHJcblx0XHRcdHVzZXJTb3VyY2U6IEFuYWx5dGljc0V2ZW50cy51c2VyU291cmNlLFxyXG5cdFx0XHRsYXRMb25nOiBBbmFseXRpY3NFdmVudHMuam9pbkxhdExvbmcoQW5hbHl0aWNzRXZlbnRzLmNsYXQsIEFuYWx5dGljc0V2ZW50cy5jbG9uKSxcclxuXHRcdFx0Ly8gY2l0eTogY2l0eSxcclxuXHRcdFx0Ly8gcmVnaW9uOiByZWdpb24sXHJcblx0XHRcdC8vIGNvdW50cnk6IGNvdW50cnksXHJcblx0XHRcdGFwcDogQW5hbHl0aWNzRXZlbnRzLmdldEFwcFR5cGVGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXHJcblx0XHRcdGxhbmc6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0ZHQ6IGVsYXBzZWQsXHJcblx0XHRcdHF1ZXN0aW9uX251bWJlcjogdGhlUS5xTnVtYmVyLFxyXG5cdFx0XHR0YXJnZXQ6IHRoZVEucVRhcmdldCxcclxuXHRcdFx0cXVlc3Rpb246IHRoZVEucHJvbXB0VGV4dCxcclxuXHRcdFx0c2VsZWN0ZWRfYW5zd2VyOiBhbnMuYW5zd2VyTmFtZSxcclxuXHRcdFx0aXNjb3JyZWN0OiBpc2NvcnJlY3QsXHJcblx0XHRcdG9wdGlvbnM6IG9wdHMsXHJcblx0XHRcdGJ1Y2tldDogYnVja2V0LFxyXG5cdFx0XHRhcHBWZXJzaW9uOiBBbmFseXRpY3NFdmVudHMuYXBwVmVyc2lvbixcclxuXHRcdFx0Y29udGVudFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvblxyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcblx0Ly8gU2VuZCBCdWNrZXRcclxuXHRzdGF0aWMgc2VuZEJ1Y2tldCh0YjogYnVja2V0LCBwYXNzZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHZhciBibiA9IHRiLmJ1Y2tldElEO1xyXG5cdFx0dmFyIGJ0cmllZCA9IHRiLm51bVRyaWVkO1xyXG5cdFx0dmFyIGJjb3JyZWN0ID0gdGIubnVtQ29ycmVjdDtcclxuXHRcdFxyXG5cdFx0dmFyIGV2ZW50U3RyaW5nID0gXCJ1c2VyIFwiICsgQW5hbHl0aWNzRXZlbnRzLnV1aWQgKyBcIiBmaW5pc2hlZCB0aGUgYnVja2V0IFwiICsgYm4gKyBcIiB3aXRoIFwiICsgYmNvcnJlY3QgKyBcIiBjb3JyZWN0IGFuc3dlcnMgb3V0IG9mIFwiICsgYnRyaWVkICsgXCIgdHJpZWRcIiArIFwiIGFuZCBwYXNzZWQ6IFwiICsgcGFzc2VkO1xyXG5cdFx0Y29uc29sZS5sb2coZXZlbnRTdHJpbmcpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJCdWNrZXQgQ29tcGxldGVkIEFwcCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ29udGVudCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbik7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJidWNrZXRDb21wbGV0ZWRcIiwge1xyXG5cdFx0XHR0eXBlOiBcImJ1Y2tldENvbXBsZXRlZFwiLFxyXG5cdFx0XHRjbFVzZXJJZDogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXHJcblx0XHRcdHVzZXJTb3VyY2U6IEFuYWx5dGljc0V2ZW50cy51c2VyU291cmNlLFxyXG5cdFx0XHRsYXRMb25nOiBBbmFseXRpY3NFdmVudHMuam9pbkxhdExvbmcoQW5hbHl0aWNzRXZlbnRzLmNsYXQsIEFuYWx5dGljc0V2ZW50cy5jbG9uKSxcclxuXHRcdFx0Ly8gY2l0eTogY2l0eSxcclxuXHRcdFx0Ly8gcmVnaW9uOiByZWdpb24sXHJcblx0XHRcdC8vIGNvdW50cnk6IGNvdW50cnksXHJcblx0XHRcdGFwcDogQW5hbHl0aWNzRXZlbnRzLmdldEFwcFR5cGVGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXHJcblx0XHRcdGxhbmc6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBMYW5ndWFnZUZyb21EYXRhVVJMKEFuYWx5dGljc0V2ZW50cy5kYXRhVVJMKSxcclxuXHRcdFx0YnVja2V0TnVtYmVyOiBibixcclxuXHRcdFx0bnVtYmVyVHJpZWRJbkJ1Y2tldDpidHJpZWQsXHJcblx0XHRcdG51bWJlckNvcnJlY3RJbkJ1Y2tldDpiY29ycmVjdCxcclxuXHRcdFx0cGFzc2VkQnVja2V0OiBwYXNzZWQsXHJcblx0XHRcdGFwcFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uLFxyXG5cdFx0XHRjb250ZW50VmVyc2lvbjogQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vIFNlbmQgRmluaXNoZWRcclxuXHRzdGF0aWMgc2VuZEZpbmlzaGVkKGJ1Y2tldHM6IGJ1Y2tldFtdID0gbnVsbCwgYmFzYWxCdWNrZXQ6IG51bWJlciwgY2VpbGluZ0J1Y2tldDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRsZXQgZXZlbnRTdHJpbmcgPSBcInVzZXIgXCIgKyBBbmFseXRpY3NFdmVudHMudXVpZCArIFwiIGZpbmlzaGVkIHRoZSBhc3Nlc3NtZW50XCI7XHJcblx0XHRjb25zb2xlLmxvZyhldmVudFN0cmluZyk7XHJcblxyXG5cdFx0bGV0IGJhc2FsQnVja2V0SUQgPSBBbmFseXRpY3NFdmVudHMuZ2V0QmFzYWxCdWNrZXRJRChidWNrZXRzKTtcclxuXHRcdGxldCBjZWlsaW5nQnVja2V0SUQgPSBBbmFseXRpY3NFdmVudHMuZ2V0Q2VpbGluZ0J1Y2tldElEKGJ1Y2tldHMpO1xyXG5cclxuXHRcdGlmIChiYXNhbEJ1Y2tldElEID09IDApIHtcclxuXHRcdFx0YmFzYWxCdWNrZXRJRCA9IGNlaWxpbmdCdWNrZXRJRDtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgc2NvcmUgPSBBbmFseXRpY3NFdmVudHMuY2FsY3VsYXRlU2NvcmUoYnVja2V0cywgYmFzYWxCdWNrZXRJRCk7XHJcblx0XHRjb25zdCBtYXhTY29yZSA9IGJ1Y2tldHMubGVuZ3RoICogMTAwO1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiU2VuZGluZyBjb21wbGV0ZWQgZXZlbnRcIik7XHJcblx0XHRjb25zb2xlLmxvZyhcIlNjb3JlOiBcIiArIHNjb3JlKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiTWF4IFNjb3JlOiBcIiArIG1heFNjb3JlKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQmFzYWwgQnVja2V0OiBcIiArIGJhc2FsQnVja2V0SUQpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJCQVNBTCBGUk9NIEFTU0VTU01FTlQ6IFwiICsgYmFzYWxCdWNrZXQpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJDZWlsaW5nIEJ1Y2tldDogXCIgKyBjZWlsaW5nQnVja2V0SUQpO1xyXG5cdFx0Y29uc29sZS5sb2coXCJDRUlMSU5HIEZST00gQVNTRVNTTUVOVDogXCIgKyBjZWlsaW5nQnVja2V0KTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ29tcGxldGVkIEFwcCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uKTtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ29udGVudCBWZXJzaW9uOiBcIiArIEFuYWx5dGljc0V2ZW50cy5jb250ZW50VmVyc2lvbik7XHJcblxyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmREYXRhVG9UaGlyZFBhcnR5KHNjb3JlLCBBbmFseXRpY3NFdmVudHMudXVpZCk7XHJcblxyXG5cdFx0bG9nRXZlbnQoQW5hbHl0aWNzRXZlbnRzLmdhbmEsXCJjb21wbGV0ZWRcIiwge1xyXG5cdFx0XHR0eXBlOiBcImNvbXBsZXRlZFwiLFxyXG5cdFx0XHRjbFVzZXJJZDogQW5hbHl0aWNzRXZlbnRzLnV1aWQsXHJcblx0XHRcdHVzZXJTb3VyY2U6IEFuYWx5dGljc0V2ZW50cy51c2VyU291cmNlLFxyXG5cdFx0XHRhcHA6IEFuYWx5dGljc0V2ZW50cy5nZXRBcHBUeXBlRnJvbURhdGFVUkwoQW5hbHl0aWNzRXZlbnRzLmRhdGFVUkwpLFxyXG5cdFx0XHRsYW5nOiBBbmFseXRpY3NFdmVudHMuZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTChBbmFseXRpY3NFdmVudHMuZGF0YVVSTCksXHJcblx0XHRcdGxhdExvbmc6IEFuYWx5dGljc0V2ZW50cy5qb2luTGF0TG9uZyhBbmFseXRpY3NFdmVudHMuY2xhdCwgQW5hbHl0aWNzRXZlbnRzLmNsb24pLFxyXG5cdFx0XHQvLyBjaXR5OiBjaXR5LFxyXG5cdFx0XHQvLyByZWdpb246IHJlZ2lvbixcclxuXHRcdFx0Ly8gY291bnRyeTogY291bnRyeSxcclxuXHRcdFx0c2NvcmU6IHNjb3JlLFxyXG5cdFx0XHRtYXhTY29yZTogbWF4U2NvcmUsXHJcblx0XHRcdGJhc2FsQnVja2V0OiBiYXNhbEJ1Y2tldElELFxyXG5cdFx0XHRjZWlsaW5nQnVja2V0OiBjZWlsaW5nQnVja2V0SUQsXHJcblx0XHRcdGFwcFZlcnNpb246IEFuYWx5dGljc0V2ZW50cy5hcHBWZXJzaW9uLFxyXG5cdFx0XHRjb250ZW50VmVyc2lvbjogQW5hbHl0aWNzRXZlbnRzLmNvbnRlbnRWZXJzaW9uXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBzZW5kRGF0YVRvVGhpcmRQYXJ0eShzY29yZTogbnVtYmVyLCB1dWlkOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdC8vIFNlbmQgZGF0YSB0byB0aGUgdGhpcmQgcGFydHlcclxuXHRcdGNvbnNvbGUubG9nKFwiQXR0ZW1wdGluZyB0byBzZW5kIHNjb3JlIHRvIGEgdGhpcmQgcGFydHkhIFNjb3JlOiBcIiwgc2NvcmUpO1xyXG5cclxuXHRcdC8vIFJlYWQgdGhlIFVSTCBmcm9tIHV0bSBwYXJhbWV0ZXJzXHJcblx0XHRjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG5cdFx0Y29uc3QgdGFyZ2V0UGFydHlVUkwgPSB1cmxQYXJhbXMuZ2V0KCdlbmRwb2ludCcpO1xyXG5cdFx0Y29uc3Qgb3JnYW5pemF0aW9uID0gdXJsUGFyYW1zLmdldCgnb3JnYW5pemF0aW9uJyk7XHJcbiAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG5cdFx0aWYgKCF0YXJnZXRQYXJ0eVVSTCkge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiTm8gdGFyZ2V0IHBhcnR5IFVSTCBmb3VuZCFcIik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAgICAgICAgIFwidXNlclwiOiB1dWlkLFxyXG4gICAgICAgICAgXCJwYWdlXCI6IFwiMTExMTA4MTIxMzYzNjE1XCIsIFxyXG4gICAgICAgICAgXCJldmVudFwiOiB7IFxyXG4gICAgICAgICAgICBcInR5cGVcIjogXCJleHRlcm5hbFwiLCBcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB7ICBcclxuICAgICAgICAgICAgICBcInR5cGVcIjogXCJhc3Nlc3NtZW50XCIsXHJcblx0XHRcdCAgXCJzdWJUeXBlXCI6IEFuYWx5dGljc0V2ZW50cy5hc3Nlc3NtZW50VHlwZSxcclxuICAgICAgICAgICAgICBcInNjb3JlXCI6IHNjb3JlLFxyXG4gICAgICAgICAgICAgIFwiY29tcGxldGVkXCI6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHBheWxvYWRTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkKTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHR4aHIub3BlbihcIlBPU1RcIiwgdGFyZ2V0UGFydHlVUkwsIHRydWUpO1xyXG5cdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuXHRcclxuXHRcdFx0eGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkge1xyXG5cdFx0XHRcdFx0Ly8gUmVxdWVzdCB3YXMgc3VjY2Vzc2Z1bCwgaGFuZGxlIHRoZSByZXNwb25zZSBoZXJlXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBPU1Qgc3VjY2VzcyFcIiArIHhoci5yZXNwb25zZVRleHQpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBSZXF1ZXN0IGZhaWxlZFxyXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICcgKyB4aHIuc3RhdHVzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHJcblx0XHRcdHhoci5zZW5kKHBheWxvYWRTdHJpbmcpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIGRhdGEgdG8gdGFyZ2V0IHBhcnR5OiBcIiwgZXJyb3IpO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcblxyXG5cdC8vIENhbGN1bGF0ZSBTY29yZVxyXG5cdHN0YXRpYyBjYWxjdWxhdGVTY29yZShidWNrZXRzOiBidWNrZXRbXSwgYmFzYWxCdWNrZXRJRDogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiQ2FsY3VsYXRpbmcgc2NvcmVcIik7XHJcblx0XHRjb25zb2xlLmxvZyhidWNrZXRzKTtcclxuXHRcdFxyXG5cdFx0bGV0IHNjb3JlID0gMDtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIkJhc2FsIEJ1Y2tldCBJRDogXCIgKyBiYXNhbEJ1Y2tldElEKTtcclxuXHJcblx0XHQvLyBHZXQgdGhlIG51bWNvcnJlY3QgZnJvbSB0aGUgYmFzYWwgYnVja2V0IGJhc2VkIG9uIGxvb3BpbmcgdGhyb3VnaCBhbmQgZmluZGluZyB0aGUgYnVja2V0IGlkXHJcblx0XHRsZXQgbnVtQ29ycmVjdCA9IDA7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBpbmRleCBpbiBidWNrZXRzKSB7XHJcblx0XHRcdGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNbaW5kZXhdO1xyXG5cdFx0XHRpZiAoYnVja2V0LmJ1Y2tldElEID09IGJhc2FsQnVja2V0SUQpIHtcclxuXHRcdFx0XHRudW1Db3JyZWN0ID0gYnVja2V0Lm51bUNvcnJlY3Q7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIk51bSBDb3JyZWN0OiBcIiArIG51bUNvcnJlY3QsIFwiIGJhc2FsOiBcIiArIGJhc2FsQnVja2V0SUQsIFwiIGJ1Y2tldHM6IFwiICsgYnVja2V0cy5sZW5ndGgpO1xyXG5cdFx0XHJcblx0XHRpZiAoYmFzYWxCdWNrZXRJRCA9PT0gYnVja2V0cy5sZW5ndGggJiYgbnVtQ29ycmVjdCA+PSA0KSB7XHJcblx0XHRcdC8vIElmIHRoZSB1c2VyIGhhcyBlbm91Z2ggY29ycmVjdCBhbnN3ZXJzIGluIHRoZSBsYXN0IGJ1Y2tldCwgZ2l2ZSB0aGVtIGEgcGVyZmVjdCBzY29yZVxyXG5cdFx0XHRjb25zb2xlLmxvZyhcIlBlcmZlY3Qgc2NvcmVcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gYnVja2V0cy5sZW5ndGggKiAxMDA7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHNjb3JlID0gTWF0aC5yb3VuZCgoKGJhc2FsQnVja2V0SUQgLSAxKSAqIDEwMCkgKyAobnVtQ29ycmVjdCAvIDUpICogMTAwKSB8IDA7XHJcblxyXG5cdFx0cmV0dXJuIHNjb3JlO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IEJhc2FsIEJ1Y2tldCBJRFxyXG5cdHN0YXRpYyBnZXRCYXNhbEJ1Y2tldElEKGJ1Y2tldHM6IGJ1Y2tldFtdKTogbnVtYmVyIHtcclxuXHRcdGxldCBidWNrZXRJRCA9IDA7XHJcblx0XHRcclxuXHRcdC8vIFNlbGVjdCB0aGUgbG93ZXN0IGJ1Y2tldElEIGJ1Y2tldCB0aGF0IHRoZSB1c2VyIGhhcyBmYWlsZWRcclxuXHRcdGZvciAoY29uc3QgaW5kZXggaW4gYnVja2V0cykge1xyXG5cdFx0XHRjb25zdCBidWNrZXQgPSBidWNrZXRzW2luZGV4XTtcclxuXHRcdFx0aWYgKGJ1Y2tldC50ZXN0ZWQgJiYgIWJ1Y2tldC5wYXNzZWQpIHtcclxuXHRcdFx0XHRpZiAoYnVja2V0SUQgPT0gMCB8fCBidWNrZXQuYnVja2V0SUQgPCBidWNrZXRJRCkge1xyXG5cdFx0XHRcdFx0YnVja2V0SUQgPSBidWNrZXQuYnVja2V0SUQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGJ1Y2tldElEO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IENlaWxpbmcgQnVja2V0IElEXHJcblx0c3RhdGljIGdldENlaWxpbmdCdWNrZXRJRChidWNrZXRzOiBidWNrZXRbXSk6IG51bWJlciB7XHJcblx0XHRsZXQgYnVja2V0SUQgPSAwO1xyXG5cdFx0XHJcblx0XHQvLyBTZWxlY3QgdGhlIGhpdWdoZXN0IGJ1Y2tldElEIGJ1Y2tldCB0aGF0IHRoZSB1c2VyIGhhcyBwYXNzZWRcclxuXHRcdGZvciAoY29uc3QgaW5kZXggaW4gYnVja2V0cykge1xyXG5cdFx0XHRjb25zdCBidWNrZXQgPSBidWNrZXRzW2luZGV4XTtcclxuXHRcdFx0aWYgKGJ1Y2tldC50ZXN0ZWQgJiYgYnVja2V0LnBhc3NlZCkge1xyXG5cdFx0XHRcdGlmIChidWNrZXRJRCA9PSAwIHx8IGJ1Y2tldC5idWNrZXRJRCA+IGJ1Y2tldElEKSB7XHJcblx0XHRcdFx0XHRidWNrZXRJRCA9IGJ1Y2tldC5idWNrZXRJRDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYnVja2V0SUQ7XHJcblx0fVxyXG5cclxuXHQvLyBKb2luIExhdCBMb25nXHJcblx0c3RhdGljIGpvaW5MYXRMb25nKGxhdDogc3RyaW5nLCBsb246IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gbGF0ICsgXCIsXCIgKyBsb247XHJcblx0fVxyXG59IiwiaW1wb3J0IHsgQXBwIH0gZnJvbSAnLi9BcHAnO1xyXG5pbXBvcnQgeyBBbmFseXRpY3NFdmVudHMgfSBmcm9tICcuL2NvbXBvbmVudHMvYW5hbHl0aWNzRXZlbnRzJztcclxuaW1wb3J0IHsgVUlDb250cm9sbGVyIH0gZnJvbSAnLi9jb21wb25lbnRzL3VpQ29udHJvbGxlcic7XHJcbmltcG9ydCB7IFVuaXR5QnJpZGdlIH0gZnJvbSAnLi9jb21wb25lbnRzL3VuaXR5QnJpZGdlJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUXVpeiB7XHJcblx0cHJvdGVjdGVkIGFwcDogQXBwO1xyXG5cdHB1YmxpYyBkYXRhVVJMOiBzdHJpbmc7XHJcblx0cHVibGljIHVuaXR5QnJpZGdlOiBVbml0eUJyaWRnZTtcclxuXHRcclxuXHRwdWJsaWMgZGV2TW9kZUF2YWlsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHB1YmxpYyBpc0luRGV2TW9kZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHRwdWJsaWMgZGV2TW9kZVRvZ2dsZUJ1dHRvbkNvbnRhaW5lcklkOiBzdHJpbmcgPSBcImRldk1vZGVNb2RhbFRvZ2dsZUJ1dHRvbkNvbnRhaW5lclwiO1xyXG5cdHB1YmxpYyBkZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHJcblx0cHVibGljIGRldk1vZGVUb2dnbGVCdXR0b25JZDogc3RyaW5nID0gXCJkZXZNb2RlTW9kYWxUb2dnbGVCdXR0b25cIjtcclxuXHRwdWJsaWMgZGV2TW9kZVRvZ2dsZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdHB1YmxpYyBkZXZNb2RlTW9kYWxJZDogc3RyaW5nID0gXCJkZXZNb2RlU2V0dGluZ3NNb2RhbFwiO1xyXG5cdHB1YmxpYyBkZXZNb2RlU2V0dGluZ3NNb2RhbDogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdHB1YmxpYyBkZXZNb2RlQnVja2V0R2VuU2VsZWN0SWQ6IHN0cmluZyA9IFwiZGV2TW9kZUJ1Y2tldEdlblNlbGVjdFwiO1xyXG5cdHB1YmxpYyBkZXZNb2RlQnVja2V0R2VuU2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHR0aGlzLmlzSW5EZXZNb2RlID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCJsb2NhbGhvc3RcIikgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCJhc3Nlc3NtZW50ZGV2XCIpO1xyXG5cdFx0dGhpcy5kZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5kZXZNb2RlU2V0dGluZ3NNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGV2TW9kZU1vZGFsSWQpO1xyXG5cclxuXHRcdHRoaXMuZGV2TW9kZUJ1Y2tldEdlblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGV2TW9kZUJ1Y2tldEdlblNlbGVjdElkKSBhcyBIVE1MU2VsZWN0RWxlbWVudDtcclxuXHRcdHRoaXMuZGV2TW9kZUJ1Y2tldEdlblNlbGVjdC5vbmNoYW5nZSA9IChldmVudCkgPT4geyB0aGlzLmhhbmRsZUJ1Y2tldEdlbk1vZGVDaGFuZ2UoZXZlbnQpIH07XHJcblx0XHRcclxuXHRcdHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbklkKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHRcdHRoaXMuZGV2TW9kZVRvZ2dsZUJ1dHRvbi5vbmNsaWNrID0gdGhpcy50b2dnbGVEZXZNb2RlTW9kYWw7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYWJzdHJhY3QgaGFuZGxlQnVja2V0R2VuTW9kZUNoYW5nZShldmVudDogRXZlbnQpOiB2b2lkO1xyXG5cclxuXHRwdWJsaWMgdG9nZ2xlRGV2TW9kZU1vZGFsID0gKCkgPT4ge1xyXG5cdFx0aWYgKHRoaXMuZGV2TW9kZVNldHRpbmdzTW9kYWwuc3R5bGUuZGlzcGxheSA9PSBcImJsb2NrXCIpIHtcclxuXHRcdFx0dGhpcy5kZXZNb2RlU2V0dGluZ3NNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmRldk1vZGVTZXR0aW5nc01vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYWJzdHJhY3QgUnVuKGFwcGxpbms6IEFwcCk6IHZvaWQ7XHJcblx0cHVibGljIGFic3RyYWN0IFRyeUFuc3dlcihhbnM6IG51bWJlciwgZWxhcHNlZDogbnVtYmVyKTogdm9pZDtcclxuXHRwdWJsaWMgYWJzdHJhY3QgSGFzUXVlc3Rpb25zTGVmdCgpOiBib29sZWFuO1xyXG5cclxuXHRwdWJsaWMgb25FbmQoKTogdm9pZCB7XHJcblx0XHQvLyBzZW5kRmluaXNoZWQoKTtcclxuXHRcdFVJQ29udHJvbGxlci5TaG93RW5kKCk7XHJcblx0XHR0aGlzLmFwcC51bml0eUJyaWRnZS5TZW5kQ2xvc2UoKTtcclxuXHR9XHJcbn1cclxuIiwiLy90aGlzIGlzIHdoZXJlIHRoZSBsb2dpYyBmb3IgaGFuZGxpbmcgdGhlIGJ1Y2tldHMgd2lsbCBnb1xyXG4vL1xyXG4vL29uY2Ugd2Ugc3RhcnQgYWRkaW5nIGluIHRoZSBhc3Nlc3NtZW50IGZ1bmN0aW9uYWxpdHlcclxuaW1wb3J0IHsgVUlDb250cm9sbGVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy91aUNvbnRyb2xsZXInO1xyXG5pbXBvcnQgeyBxRGF0YSwgYW5zd2VyRGF0YSB9IGZyb20gJy4uL2NvbXBvbmVudHMvcXVlc3Rpb25EYXRhJztcclxuaW1wb3J0IHsgQW5hbHl0aWNzRXZlbnRzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9hbmFseXRpY3NFdmVudHMnXHJcbmltcG9ydCB7IEFwcCB9IGZyb20gJy4uL0FwcCc7XHJcbmltcG9ydCB7IGJ1Y2tldCwgYnVja2V0SXRlbSB9IGZyb20gJy4vYnVja2V0RGF0YSc7XHJcbmltcG9ydCB7IEJhc2VRdWl6IH0gZnJvbSAnLi4vQmFzZVF1aXonO1xyXG5pbXBvcnQgeyBmZXRjaEFzc2Vzc21lbnRCdWNrZXRzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9qc29uVXRpbHMnO1xyXG5pbXBvcnQgeyBUcmVlTm9kZSwgc29ydGVkQXJyYXlUb0lEc0JTVCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdE5vZGUnO1xyXG5pbXBvcnQgeyByYW5kRnJvbSwgc2h1ZmZsZUFycmF5IH0gZnJvbSAnLi4vY29tcG9uZW50cy9tYXRoVXRpbHMnO1xyXG5pbXBvcnQgeyBBdWRpb0NvbnRyb2xsZXIgfSBmcm9tICcuLi9jb21wb25lbnRzL2F1ZGlvQ29udHJvbGxlcic7XHJcblxyXG5lbnVtIHNlYXJjaFN0YWdlIHtcclxuXHRCaW5hcnlTZWFyY2gsXHJcblx0TGluZWFyU2VhcmNoVXAsXHJcblx0TGluZWFyU2VhcmNoRG93blxyXG59XHJcblxyXG5lbnVtIEJ1Y2tldEdlbk1vZGUge1xyXG5cdFJhbmRvbUJTVCxcclxuXHRMaW5lYXJBcnJheUJhc2VkLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQXNzZXNzbWVudCBleHRlbmRzIEJhc2VRdWl6IHtcclxuXHJcblx0cHVibGljIHVuaXR5QnJpZGdlO1xyXG5cclxuXHRwdWJsaWMgY3VycmVudE5vZGU6IFRyZWVOb2RlO1xyXG5cdHB1YmxpYyBjdXJyZW50UXVlc3Rpb246IHFEYXRhO1xyXG5cdHB1YmxpYyBidWNrZXRBcnJheTogbnVtYmVyW107XHJcblx0cHVibGljIHF1ZXN0aW9uTnVtYmVyOiBudW1iZXI7XHJcblx0XHJcblx0cHVibGljIGJ1Y2tldHM6IGJ1Y2tldFtdO1xyXG5cdHB1YmxpYyBjdXJyZW50QnVja2V0OiBidWNrZXQ7XHJcblx0cHVibGljIG51bUJ1Y2tldHM6IG51bWJlcjtcclxuXHRwdWJsaWMgYmFzYWxCdWNrZXQ6IG51bWJlcjtcclxuXHRwdWJsaWMgY2VpbGluZ0J1Y2tldDogbnVtYmVyO1xyXG5cclxuXHRwcm90ZWN0ZWQgYnVja2V0R2VuTW9kZTogQnVja2V0R2VuTW9kZSA9IEJ1Y2tldEdlbk1vZGUuUmFuZG9tQlNUO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihkYXRhVVJMOiBzdHJpbmcsIHVuaXR5QnJpZGdlOiBhbnkpIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLmRhdGFVUkwgPSBkYXRhVVJMO1xyXG5cdFx0dGhpcy51bml0eUJyaWRnZSA9IHVuaXR5QnJpZGdlO1xyXG5cdFx0dGhpcy5xdWVzdGlvbk51bWJlciA9IDA7XHJcblx0XHRjb25zb2xlLmxvZyhcImFwcCBpbml0aWFsaXplZFwiKTtcclxuXHRcdFVJQ29udHJvbGxlci5TZXRCdXR0b25QcmVzc0FjdGlvbih0aGlzLlRyeUFuc3dlcik7XHJcblx0XHRVSUNvbnRyb2xsZXIuU2V0U3RhcnRBY3Rpb24odGhpcy5zdGFydEFzc2Vzc21lbnQpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIFJ1bihhcHBsaW5rOiBBcHApOiB2b2lkIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwbGluaztcclxuXHRcdHRoaXMuYnVpbGRCdWNrZXRzKCkudGhlbihyZXN1bHQgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRCdWNrZXQpO1xyXG5cdFx0XHR0aGlzLnVuaXR5QnJpZGdlLlNlbmRMb2FkZWQoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGhhbmRsZUJ1Y2tldEdlbk1vZGVDaGFuZ2UoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcblx0XHQvLyBUT0RPOiBJbXBsZW1lbnQgaGFuZGxlQnVja2V0R2VuTW9kZUNoYW5nZVxyXG5cdFx0Y29uc29sZS5sb2coXCJoYW5kbGVCdWNrZXRHZW5Nb2RlQ2hhbmdlOiBcIiArIHRoaXMuZGV2TW9kZUJ1Y2tldEdlblNlbGVjdC52YWx1ZSk7XHJcblx0XHR0aGlzLmJ1Y2tldEdlbk1vZGUgPSBwYXJzZUludCh0aGlzLmRldk1vZGVCdWNrZXRHZW5TZWxlY3QudmFsdWUpIGFzIEJ1Y2tldEdlbk1vZGU7XHJcblx0XHRjb25zb2xlLmxvZyhcImJ1Y2tldEdlbk1vZGU6IFwiICsgdGhpcy5idWNrZXRHZW5Nb2RlKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzdGFydEFzc2Vzc21lbnQgPSAoKSA9PiB7XHJcblx0XHRVSUNvbnRyb2xsZXIuUmVhZHlGb3JOZXh0KHRoaXMuZ2V0TmV4dFF1ZXN0aW9uKCkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGJ1aWxkQnVja2V0cyA9ICgpID0+IHtcclxuXHRcdHZhciByZXMgPSBmZXRjaEFzc2Vzc21lbnRCdWNrZXRzKHRoaXMuYXBwLkdldERhdGFVUkwoKSkudGhlbigocmVzdWx0KSA9PiB7XHJcblx0XHRcdHRoaXMuYnVja2V0cyA9IHJlc3VsdDtcclxuXHRcdFx0dGhpcy5udW1CdWNrZXRzID0gcmVzdWx0Lmxlbmd0aDtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJidWNrZXRzOiBcIiArIHRoaXMuYnVja2V0cyk7XHJcblx0XHRcdHRoaXMuYnVja2V0QXJyYXkgPSBBcnJheS5mcm9tKEFycmF5KHRoaXMubnVtQnVja2V0cyksIChfLCBpKSA9PiBpKzEpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcImVtcHR5IGFycmF5IFwiICsgIHRoaXMuYnVja2V0QXJyYXkpXHJcblx0XHRcdGxldCB1c2VkSW5kaWNlcyA9IG5ldyBTZXQ8bnVtYmVyPigpO1xyXG5cdFx0XHR1c2VkSW5kaWNlcy5hZGQoMCk7XHJcblx0XHRcdGxldCByb290T2ZJRHMgPSBzb3J0ZWRBcnJheVRvSURzQlNUKHRoaXMuYnVja2V0c1swXS5idWNrZXRJRCAtIDEsIHRoaXMuYnVja2V0c1t0aGlzLmJ1Y2tldHMubGVuZ3RoIC0gMV0uYnVja2V0SUQsIHVzZWRJbmRpY2VzKTtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coXCJHZW5lcmF0ZWQgdGhlIGJ1Y2tldHMgcm9vdCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyhyb290T2ZJRHMpO1xyXG5cdFx0XHRsZXQgYnVja2V0c1Jvb3QgPSB0aGlzLmNvbnZlcnRUb0J1Y2tldEJTVChyb290T2ZJRHMsIHRoaXMuYnVja2V0cyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiR2VuZXJhdGVkIHRoZSBidWNrZXRzIHJvb3QgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcclxuXHRcdFx0Y29uc29sZS5sb2coYnVja2V0c1Jvb3QpO1xyXG5cdFx0XHR0aGlzLmJhc2FsQnVja2V0ID0gdGhpcy5udW1CdWNrZXRzICsgMTtcclxuXHRcdFx0dGhpcy5jZWlsaW5nQnVja2V0ID0gLTE7XHJcblx0XHRcdHRoaXMuY3VycmVudE5vZGUgPSBidWNrZXRzUm9vdDtcclxuXHRcdFx0dGhpcy50cnlNb3ZlQnVja2V0KGJ1Y2tldHNSb290LnZhbHVlLCBmYWxzZSk7XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiByZXM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDb252ZXJ0cyBhIGJpbmFyeSBzZWFyY2ggdHJlZSBvZiBudW1iZXJzIHRvIGEgYmluYXJ5IHNlYXJjaCB0cmVlIG9mIGJ1Y2tldCBvYmplY3RzXHJcblx0ICogQHBhcmFtIG5vZGUgSXMgYSByb290IG5vZGUgb2YgYSBiaW5hcnkgc2VhcmNoIHRyZWVcclxuXHQgKiBAcGFyYW0gYnVja2V0cyBJcyBhbiBhcnJheSBvZiBidWNrZXQgb2JqZWN0c1xyXG5cdCAqIEByZXR1cm5zIEEgcm9vdCBub2RlIG9mIGEgYmluYXJ5IHNlYXJjaCB0cmVlIHdoZXJlIHRoZSB2YWx1ZSBvZiBlYWNoIG5vZGUgaXMgYSBidWNrZXQgb2JqZWN0XHJcblx0ICovXHJcblx0cHVibGljIGNvbnZlcnRUb0J1Y2tldEJTVCA9IChub2RlOiBUcmVlTm9kZSwgYnVja2V0czogYnVja2V0W10pID0+IHtcclxuXHRcdC8vIFRyYXZlcnNlIGVhY2ggZWxlbWVudCB0YWtlIHRoZSB2YWx1ZSBhbmQgZmluZCB0aGF0IGJ1Y2tldCBpbiB0aGUgYnVja2V0cyBhcnJheSBhbmQgYXNzaWduIHRoYXQgYnVja2V0IGluc3RlYWQgb2YgdGhlIG51bWJlciB2YWx1ZVxyXG5cdFx0aWYgKG5vZGUgPT09IG51bGwpIHJldHVybiBub2RlO1xyXG5cclxuXHRcdGxldCBidWNrZXRJZCA9IG5vZGUudmFsdWU7XHJcblx0XHRub2RlLnZhbHVlID0gYnVja2V0cy5maW5kKGJ1Y2tldCA9PiBidWNrZXQuYnVja2V0SUQgPT09IGJ1Y2tldElkKTtcclxuXHRcdGlmIChub2RlLmxlZnQgIT09IG51bGwpIG5vZGUubGVmdCA9IHRoaXMuY29udmVydFRvQnVja2V0QlNUKG5vZGUubGVmdCwgYnVja2V0cyk7XHJcblx0XHRpZiAobm9kZS5yaWdodCAhPT0gbnVsbCkgbm9kZS5yaWdodCA9IHRoaXMuY29udmVydFRvQnVja2V0QlNUKG5vZGUucmlnaHQsIGJ1Y2tldHMpO1xyXG5cclxuXHRcdHJldHVybiBub2RlO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGluaXRCdWNrZXQgPSAoYnVja2V0OiBidWNrZXQpID0+IHtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldCA9IGJ1Y2tldDtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC51c2VkSXRlbXMgPSBbXTtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1UcmllZCA9IDA7XHJcblx0XHR0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29ycmVjdCA9IDA7XHJcblx0XHR0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyA9IDA7XHJcblx0XHR0aGlzLmN1cnJlbnRCdWNrZXQudGVzdGVkID0gdHJ1ZTtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBUcnlBbnN3ZXIgPSAoYW5zd2VyOiBudW1iZXIsIGVsYXBzZWQ6IG51bWJlcikgPT4ge1xyXG5cdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmRBbnN3ZXJlZCh0aGlzLmN1cnJlbnRRdWVzdGlvbiwgYW5zd2VyLCBlbGFwc2VkKTtcclxuXHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1UcmllZCArPSAxO1xyXG5cdFx0aWYgKHRoaXMuY3VycmVudFF1ZXN0aW9uLmFuc3dlcnNbYW5zd2VyLTFdLmFuc3dlck5hbWUgPT0gdGhpcy5jdXJyZW50UXVlc3Rpb24uY29ycmVjdCl7XHJcblx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db3JyZWN0ICs9IDE7XHJcblx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5udW1Db25zZWN1dGl2ZVdyb25nID0gMDtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJBbnN3ZXJlZCBjb3JyZWN0bHlcIik7XHJcblx0XHR9ZWxzZXtcclxuXHRcdFx0dGhpcy5jdXJyZW50QnVja2V0Lm51bUNvbnNlY3V0aXZlV3JvbmcgKz0gMTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJBbnN3ZXJlZCBpbmNvcnJlY3RseSwgXCIgKyB0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyk7XHJcblx0XHR9XHJcblx0XHRVSUNvbnRyb2xsZXIuQWRkU3RhcigpO1xyXG5cdFx0VUlDb250cm9sbGVyLlNldEZlZWRiYWNrVmlzaWJpbGUodHJ1ZSk7XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHsgXHJcblx0XHRcdGNvbnNvbGUubG9nKCdDb21wbGV0ZWQgZmlyc3QgVGltZW91dCcpO1xyXG5cdFx0XHR0aGlzLm9uUXVlc3Rpb25FbmQoKVxyXG5cdFx0fSwgMjAwMCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgb25RdWVzdGlvbkVuZCA9ICgpID0+IHtcclxuXHRcdGxldCBxdWVzdGlvbkVuZFRpbWVvdXQgPSAodGhpcy5IYXNRdWVzdGlvbnNMZWZ0KCkpID8gNTAwIDogNDAwMDtcclxuXHRcclxuXHRcdGNvbnN0IGVuZE9wZXJhdGlvbnMgPSAoKSA9PiB7XHJcblx0XHRcdFVJQ29udHJvbGxlci5TZXRGZWVkYmFja1Zpc2liaWxlKGZhbHNlKTtcclxuXHRcdFx0VUlDb250cm9sbGVyLkNoYW5nZVN0YXJJbWFnZUFmdGVyQW5pbWF0aW9uKCk7XHJcblx0XHRcdGlmICh0aGlzLkhhc1F1ZXN0aW9uc0xlZnQoKSkge1xyXG5cdFx0XHRcdFVJQ29udHJvbGxlci5SZWFkeUZvck5leHQodGhpcy5nZXROZXh0UXVlc3Rpb24oKSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJObyBxdWVzdGlvbnMgbGVmdFwiKTtcclxuXHRcdFx0XHR0aGlzLm9uRW5kKCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHJcblx0XHQvLyBDcmVhdGUgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhlIHNwZWNpZmllZCB0aW1lb3V0XHJcblx0XHRjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4ge1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRyZXNvbHZlKCk7XHJcblx0XHRcdH0sIHF1ZXN0aW9uRW5kVGltZW91dCk7XHJcblx0XHR9KTtcclxuXHRcclxuXHRcdC8vIEV4ZWN1dGUgZW5kT3BlcmF0aW9ucyBhZnRlciB0aW1lb3V0UHJvbWlzZSByZXNvbHZlc1xyXG5cdFx0dGltZW91dFByb21pc2UudGhlbigoKSA9PiB7XHJcblx0XHRcdGVuZE9wZXJhdGlvbnMoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHJcblx0cHVibGljIGdldE5leHRRdWVzdGlvbiA9ICgpID0+IHtcclxuXHRcdHZhciB0YXJnZXRJdGVtLCBmb2lsMSwgZm9pbDIsIGZvaWwzO1xyXG5cclxuXHRcdGRvIHtcclxuXHRcdFx0dGFyZ2V0SXRlbSA9IHJhbmRGcm9tKHRoaXMuY3VycmVudEJ1Y2tldC5pdGVtcyk7XHJcblx0XHR9IHdoaWxlICh0aGlzLmN1cnJlbnRCdWNrZXQudXNlZEl0ZW1zLmluY2x1ZGVzKHRhcmdldEl0ZW0pKTtcclxuXHRcdFx0dGhpcy5jdXJyZW50QnVja2V0LnVzZWRJdGVtcy5wdXNoKHRhcmdldEl0ZW0pO1xyXG5cdFx0ZG8ge1xyXG5cdFx0XHRmb2lsMSA9IHJhbmRGcm9tKHRoaXMuY3VycmVudEJ1Y2tldC5pdGVtcyk7XHJcblx0XHR9IHdoaWxlICh0YXJnZXRJdGVtID09IGZvaWwxKTtcclxuXHRcdGRvIHtcclxuXHRcdFx0Zm9pbDIgPSByYW5kRnJvbSh0aGlzLmN1cnJlbnRCdWNrZXQuaXRlbXMpO1xyXG5cdFx0fSB3aGlsZSAodGFyZ2V0SXRlbSA9PSBmb2lsMiB8fCBmb2lsMSA9PSBmb2lsMik7XHJcblx0XHRkbyB7XHJcblx0XHRcdGZvaWwzID0gcmFuZEZyb20odGhpcy5jdXJyZW50QnVja2V0Lml0ZW1zKTtcclxuXHRcdH0gd2hpbGUgKHRhcmdldEl0ZW0gPT0gZm9pbDMgfHwgZm9pbDEgPT0gZm9pbDMgfHwgZm9pbDIgPT0gZm9pbDMpO1xyXG5cclxuXHRcdHZhciBhbnN3ZXJPcHRpb25zID0gW3RhcmdldEl0ZW0sIGZvaWwxLCBmb2lsMiwgZm9pbDNdO1xyXG5cdFx0c2h1ZmZsZUFycmF5KGFuc3dlck9wdGlvbnMpO1xyXG5cclxuXHRcdHZhciByZXN1bHQgPSB7XHJcblx0XHRcdHFOYW1lOiBcInF1ZXN0aW9uLVwiICsgdGhpcy5xdWVzdGlvbk51bWJlciArIFwiLVwiICsgdGFyZ2V0SXRlbS5pdGVtTmFtZSxcclxuXHRcdFx0cU51bWJlcjogdGhpcy5xdWVzdGlvbk51bWJlcixcclxuXHRcdFx0cVRhcmdldDogdGFyZ2V0SXRlbS5pdGVtTmFtZSxcclxuXHRcdFx0cHJvbXB0VGV4dDogXCJcIixcclxuXHRcdFx0YnVja2V0OiB0aGlzLmN1cnJlbnRCdWNrZXQuYnVja2V0SUQsXHJcblx0XHRcdHByb21wdEF1ZGlvOiB0YXJnZXRJdGVtLml0ZW1OYW1lLFxyXG5cdFx0XHRjb3JyZWN0OiB0YXJnZXRJdGVtLml0ZW1UZXh0LFxyXG5cdFx0XHRhbnN3ZXJzOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0YW5zd2VyTmFtZTogYW5zd2VyT3B0aW9uc1swXS5pdGVtTmFtZSxcclxuXHRcdFx0XHRcdGFuc3dlclRleHQ6IGFuc3dlck9wdGlvbnNbMF0uaXRlbVRleHRcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGFuc3dlck5hbWU6IGFuc3dlck9wdGlvbnNbMV0uaXRlbU5hbWUsXHJcblx0XHRcdFx0XHRhbnN3ZXJUZXh0OiBhbnN3ZXJPcHRpb25zWzFdLml0ZW1UZXh0XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRhbnN3ZXJOYW1lOiBhbnN3ZXJPcHRpb25zWzJdLml0ZW1OYW1lLFxyXG5cdFx0XHRcdFx0YW5zd2VyVGV4dDogYW5zd2VyT3B0aW9uc1syXS5pdGVtVGV4dFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0YW5zd2VyTmFtZTogYW5zd2VyT3B0aW9uc1szXS5pdGVtTmFtZSxcclxuXHRcdFx0XHRcdGFuc3dlclRleHQ6IGFuc3dlck9wdGlvbnNbM10uaXRlbVRleHRcclxuXHRcdFx0XHR9XHJcblx0XHRcdF1cclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5jdXJyZW50UXVlc3Rpb24gPSByZXN1bHQ7XHJcblx0XHR0aGlzLnF1ZXN0aW9uTnVtYmVyICs9IDE7XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHJcblx0cHVibGljIHRyeU1vdmVCdWNrZXQgPSAobkJ1Y2tldCwgcGFzc2VkOiBib29sZWFuKSA9PiB7XHJcblx0XHRpZiAodGhpcy5jdXJyZW50QnVja2V0ICE9IG51bGwpIHtcclxuXHRcdFx0dGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IHBhc3NlZDtcclxuXHRcdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCBwYXNzZWQpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc29sZS5sb2coXCJuZXcgIGJ1Y2tldCBpcyBcIiArIG5CdWNrZXQuYnVja2V0SUQpO1xyXG5cdFx0QXVkaW9Db250cm9sbGVyLlByZWxvYWRCdWNrZXQobkJ1Y2tldCwgdGhpcy5hcHAuR2V0RGF0YVVSTCgpKTtcclxuXHRcdHRoaXMuaW5pdEJ1Y2tldChuQnVja2V0KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBIYXNRdWVzdGlvbnNMZWZ0ID0gKCkgPT4ge1xyXG5cdFx0Ly8vLyBUT0RPOiBjaGVjayBidWNrZXRzLCBjaGVjayBpZiBkb25lXHJcblx0XHR2YXIgaGFzUXVlc3Rpb25zTGVmdCA9IHRydWU7XHJcblxyXG5cdFx0aWYgKHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQpIHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHJcblx0XHRpZiAodGhpcy5jdXJyZW50QnVja2V0Lm51bUNvcnJlY3QgPj0gNCkge1xyXG5cdFx0XHQvL3Bhc3NlZCB0aGlzIGJ1Y2tldFxyXG5cdFx0XHRjb25zb2xlLmxvZyhcInBhc3NlZCB0aGlzIGJ1Y2tldCBcIiArIHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAodGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEID49IHRoaXMubnVtQnVja2V0cykge1xyXG5cdFx0XHRcdC8vcGFzc2VkIGhpZ2hlc3QgYnVja2V0XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJwYXNzZWQgaGlnaGVzdCBidWNrZXRcIik7XHJcblx0XHRcdFx0dGhpcy5jdXJyZW50QnVja2V0LnBhc3NlZCA9IHRydWU7XHJcblx0XHRcdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmRCdWNrZXQodGhpcy5jdXJyZW50QnVja2V0LCB0cnVlKTtcclxuXHRcdFx0XHRVSUNvbnRyb2xsZXIuUHJvZ3Jlc3NDaGVzdCgpO1xyXG5cdFx0XHRcdGhhc1F1ZXN0aW9uc0xlZnQgPSBmYWxzZTtcdFxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdC8vbW92ZWQgdXAgdG8gbmV4dCBidWNrZXRcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIm1vdmluZyB1cCBidWNrZXRcIik7XHJcblx0XHRcdFx0aWYgKHRoaXMuY3VycmVudE5vZGUucmlnaHQgIT0gbnVsbCl7XHJcblx0XHRcdFx0XHQvL21vdmUgZG93biB0byByaWdodFxyXG5cdFx0XHRcdFx0VUlDb250cm9sbGVyLlByb2dyZXNzQ2hlc3QoKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwibW92aW5nIHRvIHJpZ2h0IG5vZGVcIik7XHJcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnROb2RlID0gdGhpcy5jdXJyZW50Tm9kZS5yaWdodDtcclxuXHRcdFx0XHRcdHRoaXMudHJ5TW92ZUJ1Y2tldCh0aGlzLmN1cnJlbnROb2RlLnZhbHVlLCB0cnVlKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0Ly8gcmVhY2hlZCByb290IG5vZGUhISEhXHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicmVhY2hlZCByb290IG5vZGVcIik7XHJcblx0XHRcdFx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRBbmFseXRpY3NFdmVudHMuc2VuZEJ1Y2tldCh0aGlzLmN1cnJlbnRCdWNrZXQsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRVSUNvbnRyb2xsZXIuUHJvZ3Jlc3NDaGVzdCgpO1xyXG5cdFx0XHRcdFx0XHRoYXNRdWVzdGlvbnNMZWZ0ID0gZmFsc2U7XHJcblx0XHRcdFx0XHQvLyBkbyBzb21ldGhpbmcgaGVyZVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRCdWNrZXQubnVtQ29uc2VjdXRpdmVXcm9uZyA+PSAyIHx8IHRoaXMuY3VycmVudEJ1Y2tldC5udW1UcmllZCA+PSA1KSB7XHJcblx0XHRcdC8vZmFpbGVkIHRoaXMgYnVja2V0XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiZmFpbGVkIHRoaXMgYnVja2V0IFwiICsgdGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEKTtcclxuXHRcdFx0aWYgKHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRCA8IHRoaXMuYmFzYWxCdWNrZXQpIHtcclxuXHRcdFx0XHQvL3VwZGF0ZSBiYXNhbCBidWNrZXQgbnVtYmVyXHJcblx0XHRcdFx0dGhpcy5iYXNhbEJ1Y2tldCA9IHRoaXMuY3VycmVudEJ1Y2tldC5idWNrZXRJRDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodGhpcy5jdXJyZW50QnVja2V0LmJ1Y2tldElEIDw9IDEpIHtcclxuXHRcdFx0XHQvL2ZhaWxlZCB0aGUgbG93ZXN0IGJ1Y2tldFxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiZmFpbGVkIGxvd2VzdCBidWNrZXRcIik7XHJcblx0XHRcdFx0aGFzUXVlc3Rpb25zTGVmdCA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRBbmFseXRpY3NFdmVudHMuc2VuZEJ1Y2tldCh0aGlzLmN1cnJlbnRCdWNrZXQsIGZhbHNlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIm1vdmluZyBkb3duIGJ1Y2tldFwiKTtcclxuXHRcdFx0XHRpZiAodGhpcy5jdXJyZW50Tm9kZS5sZWZ0ICE9IG51bGwpe1xyXG5cdFx0XHRcdFx0Ly9tb3ZlIGRvd24gdG8gbGVmdFxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJtb3ZpbmcgdG8gbGVmdCBub2RlXCIpO1xyXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50Tm9kZSA9IHRoaXMuY3VycmVudE5vZGUubGVmdDtcclxuXHRcdFx0XHRcdHRoaXMudHJ5TW92ZUJ1Y2tldCh0aGlzLmN1cnJlbnROb2RlLnZhbHVlLCBmYWxzZSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIHJlYWNoZWQgcm9vdCBub2RlISEhIVxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJyZWFjaGVkIHJvb3Qgbm9kZVwiKTtcclxuXHRcdFx0XHRcdGhhc1F1ZXN0aW9uc0xlZnQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdHRoaXMuY3VycmVudEJ1Y2tldC5wYXNzZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdEFuYWx5dGljc0V2ZW50cy5zZW5kQnVja2V0KHRoaXMuY3VycmVudEJ1Y2tldCwgZmFsc2UpO1xyXG5cdFx0XHRcdFx0Ly8gZG8gc29tZXRoaW5nIGhlcmVcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaGFzUXVlc3Rpb25zTGVmdDtcclxuXHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBvdmVycmlkZSBvbkVuZCgpOiB2b2lkIHtcclxuXHRcdEFuYWx5dGljc0V2ZW50cy5zZW5kRmluaXNoZWQodGhpcy5idWNrZXRzLCB0aGlzLmJhc2FsQnVja2V0LCB0aGlzLmNlaWxpbmdCdWNrZXQpO1xyXG5cdFx0VUlDb250cm9sbGVyLlNob3dFbmQoKTtcclxuXHRcdHRoaXMuYXBwLnVuaXR5QnJpZGdlLlNlbmRDbG9zZSgpO1xyXG5cdH1cclxufVxyXG4iLCIvL3RoaXMgaXMgd2hlcmUgdGhlIGNvZGUgd2lsbCBnbyBmb3IgbGluZWFybHkgaXRlcmF0aW5nIHRocm91Z2ggdGhlXHJcbi8vcXVlc3Rpb25zIGluIGEgZGF0YS5qc29uIGZpbGUgdGhhdCBpZGVudGlmaWVzIGl0c2VsZiBhcyBhIHN1cnZleVxyXG5cclxuaW1wb3J0IHsgVUlDb250cm9sbGVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy91aUNvbnRyb2xsZXInO1xyXG5pbXBvcnQgeyBBdWRpb0NvbnRyb2xsZXIgfSBmcm9tICcuLi9jb21wb25lbnRzL2F1ZGlvQ29udHJvbGxlcic7XHJcbmltcG9ydCB7IHFEYXRhLCBhbnN3ZXJEYXRhIH0gZnJvbSAnLi4vY29tcG9uZW50cy9xdWVzdGlvbkRhdGEnO1xyXG5pbXBvcnQgeyBBbmFseXRpY3NFdmVudHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2FuYWx5dGljc0V2ZW50cydcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnLi4vQXBwJztcclxuaW1wb3J0IHsgQmFzZVF1aXogfSBmcm9tICcuLi9CYXNlUXVpeic7XHJcbmltcG9ydCB7IGZldGNoU3VydmV5UXVlc3Rpb25zIH0gZnJvbSAnLi4vY29tcG9uZW50cy9qc29uVXRpbHMnO1xyXG5pbXBvcnQgeyBVbml0eUJyaWRnZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvdW5pdHlCcmlkZ2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN1cnZleSBleHRlbmRzIEJhc2VRdWl6IHtcclxuXHJcblx0cHVibGljIHF1ZXN0aW9uc0RhdGE6IHFEYXRhW107XHJcblx0cHVibGljIGN1cnJlbnRRdWVzdGlvbkluZGV4OiBudW1iZXI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGRhdGFVUkw6IHN0cmluZywgdW5pdHlCcmlkZ2UpIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHRjb25zb2xlLmxvZyhcIlN1cnZleSBpbml0aWFsaXplZFwiKTtcclxuXHJcblx0XHR0aGlzLmRhdGFVUkwgPSBkYXRhVVJMO1xyXG5cdFx0dGhpcy51bml0eUJyaWRnZSA9IHVuaXR5QnJpZGdlO1xyXG5cdFx0dGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleCA9IDA7XHJcblx0XHRVSUNvbnRyb2xsZXIuU2V0QnV0dG9uUHJlc3NBY3Rpb24odGhpcy5UcnlBbnN3ZXIpO1xyXG5cdFx0VUlDb250cm9sbGVyLlNldFN0YXJ0QWN0aW9uKHRoaXMuc3RhcnRTdXJ2ZXkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGhhbmRsZUJ1Y2tldEdlbk1vZGVDaGFuZ2UgPSAoKSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZyhcIkJ1Y2tldCBHZW4gTW9kZSBDaGFuZ2VkXCIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGFzeW5jIFJ1bihhcHA6IEFwcCkge1xyXG5cdFx0dGhpcy5hcHAgPSBhcHA7XHJcblx0XHR0aGlzLmJ1aWxkUXVlc3Rpb25MaXN0KCkudGhlbihyZXN1bHQgPT4ge1xyXG5cdFx0XHR0aGlzLnF1ZXN0aW9uc0RhdGEgPSByZXN1bHQ7XHJcblx0XHRcdEF1ZGlvQ29udHJvbGxlci5QcmVwYXJlQXVkaW9BbmRJbWFnZXNGb3JTdXJ2ZXkodGhpcy5xdWVzdGlvbnNEYXRhLCB0aGlzLmFwcC5HZXREYXRhVVJMKCkpO1xyXG5cdFx0XHR0aGlzLnVuaXR5QnJpZGdlLlNlbmRMb2FkZWQoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHN0YXJ0U3VydmV5ID0gKCkgPT57XHJcblx0XHRVSUNvbnRyb2xsZXIuUmVhZHlGb3JOZXh0KHRoaXMuZ2V0TmV4dFF1ZXN0aW9uKCkpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIG9uUXVlc3Rpb25FbmQgPSAoKSA9PiB7XHJcblx0XHRVSUNvbnRyb2xsZXIuU2V0RmVlZGJhY2tWaXNpYmlsZShmYWxzZSk7XHJcblxyXG5cdFx0dGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleCArPSAxO1xyXG5cclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5IYXNRdWVzdGlvbnNMZWZ0KCkpIHtcclxuXHRcdFx0XHRVSUNvbnRyb2xsZXIuUmVhZHlGb3JOZXh0KHRoaXMuZ2V0TmV4dFF1ZXN0aW9uKCkpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiVGhlcmUgYXJlIG5vIHF1ZXN0aW9ucyBsZWZ0LlwiKTtcclxuXHRcdFx0XHR0aGlzLm9uRW5kKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIDUwMCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgVHJ5QW5zd2VyID0gKGFuc3dlcjogbnVtYmVyLCBlbGFwc2VkOiBudW1iZXIpID0+IHtcclxuXHRcdEFuYWx5dGljc0V2ZW50cy5zZW5kQW5zd2VyZWQodGhpcy5xdWVzdGlvbnNEYXRhW3RoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXhdLCBhbnN3ZXIsIGVsYXBzZWQpXHJcblx0XHRVSUNvbnRyb2xsZXIuU2V0RmVlZGJhY2tWaXNpYmlsZSh0cnVlKTtcclxuXHRcdFVJQ29udHJvbGxlci5BZGRTdGFyKCk7XHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5vblF1ZXN0aW9uRW5kKCkgfSwgMjAwMCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYnVpbGRRdWVzdGlvbkxpc3QgPSAoKSA9PiB7XHJcblx0XHRjb25zdCBzdXJ2ZXlRdWVzdGlvbnMgPSBmZXRjaFN1cnZleVF1ZXN0aW9ucyh0aGlzLmFwcC5kYXRhVVJMKTtcclxuXHRcdHJldHVybiBzdXJ2ZXlRdWVzdGlvbnM7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgSGFzUXVlc3Rpb25zTGVmdCgpOiBib29sZWFuIHtcclxuXHRcdHJldHVybiB0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4IDw9ICh0aGlzLnF1ZXN0aW9uc0RhdGEubGVuZ3RoIC0gMSk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0TmV4dFF1ZXN0aW9uKCk6IHFEYXRhIHtcclxuXHRcdHZhciBxdWVzdGlvbkRhdGEgPSB0aGlzLnF1ZXN0aW9uc0RhdGFbdGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleF07XHJcblx0XHRyZXR1cm4gcXVlc3Rpb25EYXRhO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgeyBidWNrZXQgfSBmcm9tIFwiLi4vYXNzZXNzbWVudC9idWNrZXREYXRhXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVHJlZU5vZGUge1xyXG4gICAgdmFsdWU6IG51bWJlciB8IGJ1Y2tldDtcclxuICAgIGxlZnQ6IFRyZWVOb2RlIHwgbnVsbDtcclxuICAgIHJpZ2h0OiBUcmVlTm9kZSB8IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IodmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmxlZnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKiogR2VuZXJhdGVzIGEgcmFuZG9tIGJpbmFyeSBzZWFyY2ggdHJlZSBmcm9tIGFcclxuIC0gSWYgdGhlIHN0YXJ0IGFuZCBlbmQgaW5kaWNlcyBhcmUgdGhlIHNhbWUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIG51bGxcclxuIC0gSWYgdGhlIG1pZGRsZSBpbmRleCBpcyBldmVuLCB0aGUgZnVuY3Rpb24gdXNlcyB0aGUgZXhhY3QgbWlkZGxlIHBvaW50XHJcbiAtIE90aGVyd2lzZSwgdGhlIGZ1bmN0aW9uIHJhbmRvbWx5IGFkZHMgMCBvciAxIHRvIHRoZSBtaWRkbGUgaW5kZXhcclxuIC0gUmV0dXJucyB0aGUgcm9vdCBub2RlIG9mIHRoZSBnZW5lcmF0ZWQgYmluYXJ5IHNlYXJjaCB0cmVlIHdoaWNoIGNvbnRhaW5zIHRoZSBidWNrZXRJZHMgaWYgY2FsbGVkIHByb3Blcmx5XHJcbiAtIGV4OiBsZXQgcm9vdE9mSWRzID0gc29ydGVkQXJyYXlUb0JTVCh0aGlzLmJ1Y2tldHMsIHRoaXMuYnVja2V0c1swXS5idWNrZXRJRCAtIDEsIHRoaXMuYnVja2V0c1t0aGlzLmJ1Y2tldHMubGVuZ3RoIC0gMV0uYnVja2V0SUQsIHVzZWRJbmRpY2VzKTtcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzb3J0ZWRBcnJheVRvSURzQlNUKHN0YXJ0LCBlbmQsIHVzZWRJbmRpY2VzKSB7XHJcbiAgICBpZiAoc3RhcnQgPiBlbmQpIHJldHVybiBudWxsO1xyXG5cclxuICAgIC8vIFJhbmRvbWl6ZSBtaWRkbGUgcG9pbnQgd2l0aGluIHVudXNlZCBpbmRpY2VzXHJcbiAgICBsZXQgbWlkO1xyXG5cclxuICAgIGlmICgoc3RhcnQgKyBlbmQpICUgMiA9PT0gMCAmJiB1c2VkSW5kaWNlcy5zaXplICE9PSAxKSB7XHJcbiAgICAgICAgbWlkID0gTWF0aC5mbG9vcigoc3RhcnQgKyBlbmQpIC8gMik7IC8vIFVzZSB0aGUgZXhhY3QgbWlkZGxlIHBvaW50XHJcbiAgICAgICAgaWYgKG1pZCA9PT0gMCkgcmV0dXJuIG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgbWlkID0gTWF0aC5mbG9vcigoc3RhcnQgKyBlbmQpIC8gMik7XHJcbiAgICAgICAgICAgIG1pZCArPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKTsgLy8gUmFuZG9tbHkgYWRkIDAgb3IgMSB0byBtaWRcclxuICAgICAgICB9IHdoaWxlIChtaWQgPiBlbmQgfHwgdXNlZEluZGljZXMuaGFzKG1pZCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHVzZWRJbmRpY2VzLmFkZChtaWQpO1xyXG4gICAgXHJcbiAgICBsZXQgbm9kZSA9IG5ldyBUcmVlTm9kZShtaWQpO1xyXG5cclxuICAgIG5vZGUubGVmdCA9IHNvcnRlZEFycmF5VG9JRHNCU1Qoc3RhcnQsIG1pZCAtIDEsIHVzZWRJbmRpY2VzKTtcclxuICAgIG5vZGUucmlnaHQgPSBzb3J0ZWRBcnJheVRvSURzQlNUKG1pZCArIDEsIGVuZCwgdXNlZEluZGljZXMpO1xyXG5cclxuICAgIHJldHVybiBub2RlO1xyXG59XHJcbiIsIi8qKlxuICogTW9kdWxlIHRoYXQgd3JhcHMgVW5pdHkgY2FsbHMgZm9yIHNlbmRpbmcgbWVzc2FnZXMgZnJvbSB0aGUgd2VidmlldyB0byBVbml0eS5cbiAqL1xuXG5kZWNsYXJlIGNvbnN0IFVuaXR5O1xuXG5leHBvcnQgY2xhc3MgVW5pdHlCcmlkZ2Uge1xuXG5cdHByaXZhdGUgdW5pdHlSZWZlcmVuY2U7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0aWYgKHR5cGVvZiBVbml0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRoaXMudW5pdHlSZWZlcmVuY2UgPSBVbml0eTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy51bml0eVJlZmVyZW5jZSA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIFNlbmRNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZykge1xuXHRcdGlmICh0aGlzLnVuaXR5UmVmZXJlbmNlICE9PSBudWxsKSB7XG5cdFx0XHR0aGlzLnVuaXR5UmVmZXJlbmNlLmNhbGwobWVzc2FnZSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIFNlbmRMb2FkZWQoKSB7XG5cdFx0aWYgKHRoaXMudW5pdHlSZWZlcmVuY2UgIT09IG51bGwpIHtcblx0XHRcdHRoaXMudW5pdHlSZWZlcmVuY2UuY2FsbChcImxvYWRlZFwiKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIndvdWxkIGNhbGwgVW5pdHkgbG9hZGVkIG5vd1wiKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgU2VuZENsb3NlKCkge1xuXHRcdGlmICh0aGlzLnVuaXR5UmVmZXJlbmNlICE9PSBudWxsKSB7XG5cdFx0XHR0aGlzLnVuaXR5UmVmZXJlbmNlLmNhbGwoXCJjbG9zZVwiKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIndvdWxkIGNsb3NlIFVuaXR5IG5vd1wiKTtcblx0XHR9XG5cdH1cblxufVxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiOS4xMi4xXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJ0cnl7c2VsZltcIndvcmtib3g6d2luZG93OjcuMC4wXCJdJiZfKCl9Y2F0Y2gobil7fWZ1bmN0aW9uIG4obix0KXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHIpe3ZhciBlPW5ldyBNZXNzYWdlQ2hhbm5lbDtlLnBvcnQxLm9ubWVzc2FnZT1mdW5jdGlvbihuKXtyKG4uZGF0YSl9LG4ucG9zdE1lc3NhZ2UodCxbZS5wb3J0Ml0pfSkpfWZ1bmN0aW9uIHQobix0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIGU9dFtyXTtlLmVudW1lcmFibGU9ZS5lbnVtZXJhYmxlfHwhMSxlLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBlJiYoZS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sZS5rZXksZSl9fWZ1bmN0aW9uIHIobix0KXsobnVsbD09dHx8dD5uLmxlbmd0aCkmJih0PW4ubGVuZ3RoKTtmb3IodmFyIHI9MCxlPW5ldyBBcnJheSh0KTtyPHQ7cisrKWVbcl09bltyXTtyZXR1cm4gZX1mdW5jdGlvbiBlKG4sdCl7dmFyIGU7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFN5bWJvbHx8bnVsbD09bltTeW1ib2wuaXRlcmF0b3JdKXtpZihBcnJheS5pc0FycmF5KG4pfHwoZT1mdW5jdGlvbihuLHQpe2lmKG4pe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuKXJldHVybiByKG4sdCk7dmFyIGU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG4pLnNsaWNlKDgsLTEpO3JldHVyblwiT2JqZWN0XCI9PT1lJiZuLmNvbnN0cnVjdG9yJiYoZT1uLmNvbnN0cnVjdG9yLm5hbWUpLFwiTWFwXCI9PT1lfHxcIlNldFwiPT09ZT9BcnJheS5mcm9tKG4pOlwiQXJndW1lbnRzXCI9PT1lfHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChlKT9yKG4sdCk6dm9pZCAwfX0obikpfHx0JiZuJiZcIm51bWJlclwiPT10eXBlb2Ygbi5sZW5ndGgpe2UmJihuPWUpO3ZhciBpPTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGk+PW4ubGVuZ3RoP3tkb25lOiEwfTp7ZG9uZTohMSx2YWx1ZTpuW2krK119fX10aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIil9cmV0dXJuKGU9bltTeW1ib2wuaXRlcmF0b3JdKCkpLm5leHQuYmluZChlKX10cnl7c2VsZltcIndvcmtib3g6Y29yZTo3LjAuMFwiXSYmXygpfWNhdGNoKG4pe312YXIgaT1mdW5jdGlvbigpe3ZhciBuPXRoaXM7dGhpcy5wcm9taXNlPW5ldyBQcm9taXNlKChmdW5jdGlvbih0LHIpe24ucmVzb2x2ZT10LG4ucmVqZWN0PXJ9KSl9O2Z1bmN0aW9uIG8obix0KXt2YXIgcj1sb2NhdGlvbi5ocmVmO3JldHVybiBuZXcgVVJMKG4scikuaHJlZj09PW5ldyBVUkwodCxyKS5ocmVmfXZhciB1PWZ1bmN0aW9uKG4sdCl7dGhpcy50eXBlPW4sT2JqZWN0LmFzc2lnbih0aGlzLHQpfTtmdW5jdGlvbiBhKG4sdCxyKXtyZXR1cm4gcj90P3Qobik6bjoobiYmbi50aGVufHwobj1Qcm9taXNlLnJlc29sdmUobikpLHQ/bi50aGVuKHQpOm4pfWZ1bmN0aW9uIGMoKXt9dmFyIGY9e3R5cGU6XCJTS0lQX1dBSVRJTkdcIn07ZnVuY3Rpb24gcyhuLHQpe2lmKCF0KXJldHVybiBuJiZuLnRoZW4/bi50aGVuKGMpOlByb21pc2UucmVzb2x2ZSgpfXZhciB2PWZ1bmN0aW9uKHIpe3ZhciBlLGM7ZnVuY3Rpb24gdihuLHQpe3ZhciBlLGM7cmV0dXJuIHZvaWQgMD09PXQmJih0PXt9KSwoZT1yLmNhbGwodGhpcyl8fHRoaXMpLm5uPXt9LGUudG49MCxlLnJuPW5ldyBpLGUuZW49bmV3IGksZS5vbj1uZXcgaSxlLnVuPTAsZS5hbj1uZXcgU2V0LGUuY249ZnVuY3Rpb24oKXt2YXIgbj1lLmZuLHQ9bi5pbnN0YWxsaW5nO2UudG4+MHx8IW8odC5zY3JpcHRVUkwsZS5zbi50b1N0cmluZygpKXx8cGVyZm9ybWFuY2Uubm93KCk+ZS51bis2ZTQ/KGUudm49dCxuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVmb3VuZFwiLGUuY24pKTooZS5obj10LGUuYW4uYWRkKHQpLGUucm4ucmVzb2x2ZSh0KSksKytlLnRuLHQuYWRkRXZlbnRMaXN0ZW5lcihcInN0YXRlY2hhbmdlXCIsZS5sbil9LGUubG49ZnVuY3Rpb24obil7dmFyIHQ9ZS5mbixyPW4udGFyZ2V0LGk9ci5zdGF0ZSxvPXI9PT1lLnZuLGE9e3N3OnIsaXNFeHRlcm5hbDpvLG9yaWdpbmFsRXZlbnQ6bn07IW8mJmUubW4mJihhLmlzVXBkYXRlPSEwKSxlLmRpc3BhdGNoRXZlbnQobmV3IHUoaSxhKSksXCJpbnN0YWxsZWRcIj09PWk/ZS53bj1zZWxmLnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7XCJpbnN0YWxsZWRcIj09PWkmJnQud2FpdGluZz09PXImJmUuZGlzcGF0Y2hFdmVudChuZXcgdShcIndhaXRpbmdcIixhKSl9KSwyMDApOlwiYWN0aXZhdGluZ1wiPT09aSYmKGNsZWFyVGltZW91dChlLnduKSxvfHxlLmVuLnJlc29sdmUocikpfSxlLmRuPWZ1bmN0aW9uKG4pe3ZhciB0PWUuaG4scj10IT09bmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcjtlLmRpc3BhdGNoRXZlbnQobmV3IHUoXCJjb250cm9sbGluZ1wiLHtpc0V4dGVybmFsOnIsb3JpZ2luYWxFdmVudDpuLHN3OnQsaXNVcGRhdGU6ZS5tbn0pKSxyfHxlLm9uLnJlc29sdmUodCl9LGUuZ249KGM9ZnVuY3Rpb24obil7dmFyIHQ9bi5kYXRhLHI9bi5wb3J0cyxpPW4uc291cmNlO3JldHVybiBhKGUuZ2V0U1coKSwoZnVuY3Rpb24oKXtlLmFuLmhhcyhpKSYmZS5kaXNwYXRjaEV2ZW50KG5ldyB1KFwibWVzc2FnZVwiLHtkYXRhOnQsb3JpZ2luYWxFdmVudDpuLHBvcnRzOnIsc3c6aX0pKX0pKX0sZnVuY3Rpb24oKXtmb3IodmFyIG49W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspblt0XT1hcmd1bWVudHNbdF07dHJ5e3JldHVybiBQcm9taXNlLnJlc29sdmUoYy5hcHBseSh0aGlzLG4pKX1jYXRjaChuKXtyZXR1cm4gUHJvbWlzZS5yZWplY3Qobil9fSksZS5zbj1uLGUubm49dCxuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGUuZ24pLGV9Yz1yLChlPXYpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGMucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuX19wcm90b19fPWM7dmFyIGgsbCxtLHc9di5wcm90b3R5cGU7cmV0dXJuIHcucmVnaXN0ZXI9ZnVuY3Rpb24obil7dmFyIHQ9KHZvaWQgMD09PW4/e306bikuaW1tZWRpYXRlLHI9dm9pZCAwIT09dCYmdDt0cnl7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24obix0KXt2YXIgcj1uKCk7aWYociYmci50aGVuKXJldHVybiByLnRoZW4odCk7cmV0dXJuIHQocil9KChmdW5jdGlvbigpe2lmKCFyJiZcImNvbXBsZXRlXCIhPT1kb2N1bWVudC5yZWFkeVN0YXRlKXJldHVybiBzKG5ldyBQcm9taXNlKChmdW5jdGlvbihuKXtyZXR1cm4gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbil9KSkpfSksKGZ1bmN0aW9uKCl7cmV0dXJuIGUubW49Qm9vbGVhbihuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyKSxlLnluPWUucG4oKSxhKGUuYm4oKSwoZnVuY3Rpb24obil7ZS5mbj1uLGUueW4mJihlLmhuPWUueW4sZS5lbi5yZXNvbHZlKGUueW4pLGUub24ucmVzb2x2ZShlLnluKSxlLnluLmFkZEV2ZW50TGlzdGVuZXIoXCJzdGF0ZWNoYW5nZVwiLGUubG4se29uY2U6ITB9KSk7dmFyIHQ9ZS5mbi53YWl0aW5nO3JldHVybiB0JiZvKHQuc2NyaXB0VVJMLGUuc24udG9TdHJpbmcoKSkmJihlLmhuPXQsUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoZnVuY3Rpb24oKXtlLmRpc3BhdGNoRXZlbnQobmV3IHUoXCJ3YWl0aW5nXCIse3N3OnQsd2FzV2FpdGluZ0JlZm9yZVJlZ2lzdGVyOiEwfSkpfSkpLnRoZW4oKGZ1bmN0aW9uKCl7fSkpKSxlLmhuJiYoZS5ybi5yZXNvbHZlKGUuaG4pLGUuYW4uYWRkKGUuaG4pKSxlLmZuLmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVmb3VuZFwiLGUuY24pLG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjb250cm9sbGVyY2hhbmdlXCIsZS5kbiksZS5mbn0pKX0pKX1jYXRjaChuKXtyZXR1cm4gUHJvbWlzZS5yZWplY3Qobil9fSx3LnVwZGF0ZT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5mbj9zKHRoaXMuZm4udXBkYXRlKCkpOnZvaWQgMH1jYXRjaChuKXtyZXR1cm4gUHJvbWlzZS5yZWplY3Qobil9fSx3LmdldFNXPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuaG4/UHJvbWlzZS5yZXNvbHZlKHRoaXMuaG4pOnRoaXMucm4ucHJvbWlzZX0sdy5tZXNzYWdlU1c9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBhKHRoaXMuZ2V0U1coKSwoZnVuY3Rpb24ocil7cmV0dXJuIG4ocix0KX0pKX1jYXRjaChuKXtyZXR1cm4gUHJvbWlzZS5yZWplY3Qobil9fSx3Lm1lc3NhZ2VTa2lwV2FpdGluZz1mdW5jdGlvbigpe3RoaXMuZm4mJnRoaXMuZm4ud2FpdGluZyYmbih0aGlzLmZuLndhaXRpbmcsZil9LHcucG49ZnVuY3Rpb24oKXt2YXIgbj1uYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyO3JldHVybiBuJiZvKG4uc2NyaXB0VVJMLHRoaXMuc24udG9TdHJpbmcoKSk/bjp2b2lkIDB9LHcuYm49ZnVuY3Rpb24oKXt0cnl7dmFyIG49dGhpcztyZXR1cm4gZnVuY3Rpb24obix0KXt0cnl7dmFyIHI9bigpfWNhdGNoKG4pe3JldHVybiB0KG4pfWlmKHImJnIudGhlbilyZXR1cm4gci50aGVuKHZvaWQgMCx0KTtyZXR1cm4gcn0oKGZ1bmN0aW9uKCl7cmV0dXJuIGEobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIobi5zbixuLm5uKSwoZnVuY3Rpb24odCl7cmV0dXJuIG4udW49cGVyZm9ybWFuY2Uubm93KCksdH0pKX0pLChmdW5jdGlvbihuKXt0aHJvdyBufSkpfWNhdGNoKG4pe3JldHVybiBQcm9taXNlLnJlamVjdChuKX19LGg9diwobD1be2tleTpcImFjdGl2ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuLnByb21pc2V9fSx7a2V5OlwiY29udHJvbGxpbmdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vbi5wcm9taXNlfX1dKSYmdChoLnByb3RvdHlwZSxsKSxtJiZ0KGgsbSksdn0oZnVuY3Rpb24oKXtmdW5jdGlvbiBuKCl7dGhpcy5Qbj1uZXcgTWFwfXZhciB0PW4ucHJvdG90eXBlO3JldHVybiB0LmFkZEV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24obix0KXt0aGlzLlNuKG4pLmFkZCh0KX0sdC5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKG4sdCl7dGhpcy5TbihuKS5kZWxldGUodCl9LHQuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihuKXtuLnRhcmdldD10aGlzO2Zvcih2YXIgdCxyPWUodGhpcy5TbihuLnR5cGUpKTshKHQ9cigpKS5kb25lOyl7KDAsdC52YWx1ZSkobil9fSx0LlNuPWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLlBuLmhhcyhuKXx8dGhpcy5Qbi5zZXQobixuZXcgU2V0KSx0aGlzLlBuLmdldChuKX0sbn0oKSk7ZXhwb3J0e3YgYXMgV29ya2JveCx1IGFzIFdvcmtib3hFdmVudCxuIGFzIG1lc3NhZ2VTV307XG4vLyMgc291cmNlTWFwcGluZ1VSTD13b3JrYm94LXdpbmRvdy5wcm9kLmVzNS5tanMubWFwXG4iLCIvKipcclxuICogQXBwIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhbiBlbnRyeSBwb2ludCBvZiB0aGUgYXBwbGljYXRpb24uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZ2V0VVVJRCwgZ2V0VXNlclNvdXJjZSwgZ2V0RGF0YUZpbGUgfSBmcm9tICcuL2NvbXBvbmVudHMvdXJsVXRpbHMnO1xyXG5pbXBvcnQgeyBTdXJ2ZXkgfSBmcm9tICcuL3N1cnZleS9zdXJ2ZXknO1xyXG5pbXBvcnQgeyBBc3Nlc3NtZW50IH0gZnJvbSAnLi9hc3Nlc3NtZW50L2Fzc2Vzc21lbnQnO1xyXG5pbXBvcnQgeyBVbml0eUJyaWRnZSB9IGZyb20gJy4vY29tcG9uZW50cy91bml0eUJyaWRnZSc7XHJcbmltcG9ydCB7IEFuYWx5dGljc0V2ZW50cyB9IGZyb20gJy4vY29tcG9uZW50cy9hbmFseXRpY3NFdmVudHMnO1xyXG5pbXBvcnQgeyBCYXNlUXVpeiB9IGZyb20gJy4vQmFzZVF1aXonO1xyXG5pbXBvcnQgeyBmZXRjaEFwcERhdGEsIGdldERhdGFVUkwgfSBmcm9tICcuL2NvbXBvbmVudHMvanNvblV0aWxzJztcclxuaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7XHJcbmltcG9ydCB7IGdldEFuYWx5dGljcywgbG9nRXZlbnQgfSBmcm9tICdmaXJlYmFzZS9hbmFseXRpY3MnO1xyXG5pbXBvcnQgeyBXb3JrYm94IH0gZnJvbSAnd29ya2JveC13aW5kb3cnO1xyXG5pbXBvcnQgQ2FjaGVNb2RlbCBmcm9tICcuL2NvbXBvbmVudHMvY2FjaGVNb2RlbCc7XHJcbmltcG9ydCB7IFVJQ29udHJvbGxlciB9IGZyb20gJy4vY29tcG9uZW50cy91aUNvbnRyb2xsZXInO1xyXG5cclxuY29uc3QgYXBwVmVyc2lvbjogc3RyaW5nID0gXCJ2MS4wLjVcIjtcclxuXHJcbmxldCBsb2FkaW5nU2NyZWVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2FkaW5nU2NyZWVuXCIpO1xyXG5cclxuY29uc3QgYnJvYWRjYXN0Q2hhbm5lbDogQnJvYWRjYXN0Q2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKCdhcy1tZXNzYWdlLWNoYW5uZWwnKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBBcHAge1xyXG5cclxuXHQvKiogQ291bGQgYmUgJ2Fzc2Vzc21lbnQnIG9yICdzdXJ2ZXknIGJhc2VkIG9uIHRoZSBkYXRhIGZpbGUgKi9cclxuXHRwdWJsaWMgZGF0YVVSTDogc3RyaW5nO1xyXG5cclxuXHRwdWJsaWMgdW5pdHlCcmlkZ2U7XHJcblx0cHVibGljIGFuYWx5dGljcztcclxuXHRwdWJsaWMgZ2FtZTogQmFzZVF1aXo7XHJcblxyXG5cdGNhY2hlTW9kZWw6IENhY2hlTW9kZWw7XHJcblxyXG5cdGxhbmc6IHN0cmluZyA9IFwiZW5nbGlzaFwiO1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMudW5pdHlCcmlkZ2UgPSBuZXcgVW5pdHlCcmlkZ2UoKTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIkluaXRpYWxpemluZyBhcHAuLi5cIik7XHJcblxyXG5cdFx0dGhpcy5kYXRhVVJMID0gZ2V0RGF0YUZpbGUoKTtcclxuXHJcblx0XHR0aGlzLmNhY2hlTW9kZWwgPSBuZXcgQ2FjaGVNb2RlbCh0aGlzLmRhdGFVUkwsIHRoaXMuZGF0YVVSTCwgbmV3IFNldDxzdHJpbmc+KCkpO1xyXG5cclxuXHRcdC8vIGNvbnNvbGUubG9nKFwiRGF0YSBmaWxlOiBcIiArIHRoaXMuZGF0YVVSTCk7XHJcblxyXG5cdFx0Y29uc3QgZmlyZWJhc2VDb25maWcgPSB7XHJcblx0XHQgIGFwaUtleTogXCJBSXphU3lCOGMybEJWaTI2dTdZUkw5c3hPUDk3VWFxM3lOOGhUbDRcIixcclxuXHRcdCAgYXV0aERvbWFpbjogXCJmdG0tYjlkOTkuZmlyZWJhc2VhcHAuY29tXCIsXHJcblx0XHQgIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vZnRtLWI5ZDk5LmZpcmViYXNlaW8uY29tXCIsXHJcblx0XHQgIHByb2plY3RJZDogXCJmdG0tYjlkOTlcIixcclxuXHRcdCAgc3RvcmFnZUJ1Y2tldDogXCJmdG0tYjlkOTkuYXBwc3BvdC5jb21cIixcclxuXHRcdCAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNjAyNDAyMzg3OTQxXCIsXHJcblx0XHQgIGFwcElkOiBcIjE6NjAyNDAyMzg3OTQxOndlYjo3YjFiMTE4MTg2NGQyOGI0OWRlMTBjXCIsXHJcblx0XHQgIG1lYXN1cmVtZW50SWQ6IFwiRy1GRjExNTlUR0NGXCJcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgZmFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xyXG5cdFx0Y29uc3QgZmFuYWx5dGljcyA9IGdldEFuYWx5dGljcyhmYXBwKTtcclxuXHJcblx0XHR0aGlzLmFuYWx5dGljcyA9IGZhbmFseXRpY3M7XHJcblx0XHRsb2dFdmVudChmYW5hbHl0aWNzLCAnbm90aWZpY2F0aW9uX3JlY2VpdmVkJyk7XHJcblx0XHRsb2dFdmVudChmYW5hbHl0aWNzLFwidGVzdCBpbml0aWFsaXphdGlvbiBldmVudFwiLHt9KTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhcImZpcmViYXNlIGluaXRpYWxpemVkXCIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGFzeW5jIHNwaW5VcCgpIHtcclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIldpbmRvdyBMb2FkZWQhXCIpO1xyXG5cdFx0XHQoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IGZldGNoQXBwRGF0YSh0aGlzLmRhdGFVUkwpLnRoZW4oZGF0YSA9PiB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkFzc2Vzc21lbnQvU3VydmV5IFwiICsgYXBwVmVyc2lvbiArIFwiIGluaXRpYWxpemluZyFcIik7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkFwcCBkYXRhIGxvYWRlZCFcIik7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcblx0XHRcdFx0XHR0aGlzLmNhY2hlTW9kZWwuc2V0Q29udGVudEZpbGVQYXRoKGdldERhdGFVUkwodGhpcy5kYXRhVVJMKSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gVE9ETzogV2h5IGRvIHdlIG5lZWQgdG8gc2V0IHRoZSBmZWVkYmFjayB0ZXh0IGhlcmU/XHJcblx0XHRcdFx0XHRVSUNvbnRyb2xsZXIuU2V0RmVlZGJhY2tUZXh0KGRhdGFbXCJmZWVkYmFja1RleHRcIl0pO1xyXG5cclxuXHRcdFx0XHRcdGxldCBhcHBUeXBlID0gZGF0YVtcImFwcFR5cGVcIl07XHJcblx0XHRcdFx0XHRsZXQgYXNzZXNzbWVudFR5cGUgPSBkYXRhW1wiYXNzZXNzbWVudFR5cGVcIl07XHJcblxyXG5cdFx0XHRcdFx0aWYgKGFwcFR5cGUgPT0gXCJzdXJ2ZXlcIikge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmdhbWUgPSBuZXcgU3VydmV5KHRoaXMuZGF0YVVSTCwgdGhpcy51bml0eUJyaWRnZSk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGFwcFR5cGUgPT0gXCJhc3Nlc3NtZW50XCIpIHtcclxuXHRcdFx0XHRcdFx0Ly8gR2V0IGFuZCBhZGQgYWxsIHRoZSBhdWRpbyBhc3NldHMgdG8gdGhlIGNhY2hlIG1vZGVsXHJcblxyXG5cdFx0XHRcdFx0XHRsZXQgYnVja2V0cyA9IGRhdGFbXCJidWNrZXRzXCJdO1xyXG5cclxuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBidWNrZXRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDA7IGogPCBidWNrZXRzW2ldLml0ZW1zLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRsZXQgYXVkaW9JdGVtVVJMO1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRvIGxvd2VyIGNhc2UgZm9yIHRoZSBMdWdhbmRhbiBkYXRhXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YVtcInF1aXpOYW1lXCJdLmluY2x1ZGVzKFwiTHVnYW5kYVwiKSB8fCBkYXRhW1wicXVpek5hbWVcIl0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcIndlc3QgYWZyaWNhbiBlbmdsaXNoXCIpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF1ZGlvSXRlbVVSTCA9IFwiL2F1ZGlvL1wiICsgdGhpcy5kYXRhVVJMICsgXCIvXCIgKyBidWNrZXRzW2ldLml0ZW1zW2pdLml0ZW1OYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpICsgXCIubXAzXCI7XHJcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhdWRpb0l0ZW1VUkwgPSBcIi9hdWRpby9cIiArIHRoaXMuZGF0YVVSTCArIFwiL1wiICsgYnVja2V0c1tpXS5pdGVtc1tqXS5pdGVtTmFtZS50cmltKCkgKyBcIi5tcDNcIjtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmNhY2hlTW9kZWwuYWRkSXRlbVRvQXVkaW9WaXN1YWxSZXNvdXJjZXMoYXVkaW9JdGVtVVJMKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdHRoaXMuY2FjaGVNb2RlbC5hZGRJdGVtVG9BdWRpb1Zpc3VhbFJlc291cmNlcyhcIi9hdWRpby9cIiArIHRoaXMuZGF0YVVSTCArIFwiL2Fuc3dlcl9mZWVkYmFjay5tcDNcIik7XHJcblxyXG5cdFx0XHRcdFx0XHR0aGlzLmdhbWUgPSBuZXcgQXNzZXNzbWVudCh0aGlzLmRhdGFVUkwsIHRoaXMudW5pdHlCcmlkZ2UpO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHRoaXMuZ2FtZS51bml0eUJyaWRnZSA9IHRoaXMudW5pdHlCcmlkZ2U7XHJcblxyXG5cdFx0XHRcdFx0QW5hbHl0aWNzRXZlbnRzLnNldFV1aWQoZ2V0VVVJRCgpLCBnZXRVc2VyU291cmNlKCkpO1xyXG5cdFx0XHRcdFx0QW5hbHl0aWNzRXZlbnRzLmxpbmtBbmFseXRpY3ModGhpcy5hbmFseXRpY3MsIHRoaXMuZGF0YVVSTCk7XHJcblx0XHRcdFx0XHRBbmFseXRpY3NFdmVudHMuc2V0QXNzZXNzbWVudFR5cGUoYXNzZXNzbWVudFR5cGUpO1xyXG5cdFx0XHRcdFx0QW5hbHl0aWNzRXZlbnRzLnNlbmRJbml0KGFwcFZlcnNpb24sIGRhdGFbXCJjb250ZW50VmVyc2lvblwiXSk7XHJcblx0XHRcdFx0XHQvLyB0aGlzLmNhY2hlTW9kZWwuc2V0QXBwTmFtZSh0aGlzLmNhY2hlTW9kZWwuYXBwTmFtZSArICc6JyArIGRhdGFbXCJjb250ZW50VmVyc2lvblwiXSk7XHJcblxyXG5cdFx0XHRcdFx0dGhpcy5nYW1lLlJ1bih0aGlzKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnJlZ2lzdGVyU2VydmljZVdvcmtlcih0aGlzLmdhbWUpO1xyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyByZWdpc3RlclNlcnZpY2VXb3JrZXIoZ2FtZTogQmFzZVF1aXopIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiUmVnaXN0ZXJpbmcgc2VydmljZSB3b3JrZXIuLi5cIik7XHJcblxyXG5cdFx0aWYgKFwic2VydmljZVdvcmtlclwiIGluIG5hdmlnYXRvcikge1xyXG5cdFx0XHRsZXQgd2IgPSBuZXcgV29ya2JveCgnLi9zdy5qcycsIHt9KTtcclxuXHJcblx0XHRcdHdiLnJlZ2lzdGVyKCkudGhlbigocmVnaXN0cmF0aW9uKSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTZXJ2aWNlIHdvcmtlciByZWdpc3RlcmVkIVwiKTtcclxuXHRcdFx0XHR0aGlzLmhhbmRsZVNlcnZpY2VXb3JrZXJSZWdpc3RhdGlvbihyZWdpc3RyYXRpb24pO1xyXG5cdFx0XHR9KS5jYXRjaCgoZXJyKSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiBcIiArIGVycik7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UpO1xyXG5cclxuXHRcdFx0YXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkNhY2hlIE1vZGVsOiBcIik7XHJcblx0XHRcdGNvbnNvbGUubG9nKHRoaXMuY2FjaGVNb2RlbCk7XHJcblxyXG5cdFx0XHRpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5jYWNoZU1vZGVsLmFwcE5hbWUpID09IG51bGwpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIldFIERPTlQgSEFWRSBUSElTIEFTU0VTU01FTlQ8IENBQ0hJTkcgSVQhXCIpO1xyXG5cdFx0XHRcdGxvYWRpbmdTY3JlZW4hLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxuICAgICAgICAgICAgICAgIGJyb2FkY2FzdENoYW5uZWwucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IFwiQ2FjaGVcIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcERhdGE6IHRoaXMuY2FjaGVNb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHRcdFx0XHRsb2FkaW5nU2NyZWVuIS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGJyb2FkY2FzdENoYW5uZWwub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXZlbnQuZGF0YS5jb21tYW5kICsgXCIgcmVjZWl2ZWQgZnJvbSBzZXJ2aWNlIHdvcmtlciFcIik7XHJcblx0XHRcdFx0aWYgKGV2ZW50LmRhdGEuY29tbWFuZCA9PSBcIkFjdGl2YXRlZFwiICYmIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuY2FjaGVNb2RlbC5hcHBOYW1lKSA9PSBudWxsKSB7XHJcblx0XHRcdFx0XHRicm9hZGNhc3RDaGFubmVsLnBvc3RNZXNzYWdlKHtcclxuXHRcdFx0XHRcdFx0Y29tbWFuZDogXCJDYWNoZVwiLFxyXG5cdFx0XHRcdFx0XHRkYXRhOiB7XHJcblx0XHRcdFx0XHRcdFx0YXBwRGF0YTogdGhpcy5jYWNoZU1vZGVsLFxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKFwiU2VydmljZSB3b3JrZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3Nlci5cIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRoYW5kbGVTZXJ2aWNlV29ya2VyUmVnaXN0YXRpb24ocmVnaXN0cmF0aW9uOiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIHwgdW5kZWZpbmVkKTogdm9pZCB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRyZWdpc3RyYXRpb24/Lmluc3RhbGxpbmc/LnBvc3RNZXNzYWdlKHtcclxuXHRcdFx0XHR0eXBlOiAnUmVnaXN0YXJ0aW9uJyxcclxuXHRcdFx0XHR2YWx1ZTogdGhpcy5sYW5nXHJcblx0XHRcdH0pXHJcblx0XHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJTZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiBcIiArIGVycik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgR2V0RGF0YVVSTCgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuZGF0YVVSTDtcclxuXHR9XHJcbn1cclxuXHJcbmJyb2FkY2FzdENoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2VydmljZVdvcmtlck1lc3NhZ2UoZXZlbnQpOiB2b2lkIHtcclxuICAgIGlmIChldmVudC5kYXRhLm1zZyA9PSBcIkxvYWRpbmdcIikge1xyXG4gICAgICAgIGxldCBwcm9ncmVzc1ZhbHVlID0gcGFyc2VJbnQoZXZlbnQuZGF0YS5kYXRhLnByb2dyZXNzKTtcclxuICAgICAgICBoYW5kbGVMb2FkaW5nTWVzc2FnZShldmVudCwgcHJvZ3Jlc3NWYWx1ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQuZGF0YS5tc2cgPT0gXCJVcGRhdGVGb3VuZFwiKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCI+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pi4sdXBkYXRlIEZvdW5kXCIpO1xyXG4gICAgICAgIGhhbmRsZVVwZGF0ZUZvdW5kTWVzc2FnZSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMb2FkaW5nTWVzc2FnZShldmVudCwgcHJvZ3Jlc3NWYWx1ZSk6IHZvaWQge1xyXG4gICAgbGV0IHByb2dyZXNzQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9ncmVzc0JhclwiKTtcclxuICAgIGlmIChwcm9ncmVzc1ZhbHVlIDwgMTAwKSB7XHJcbiAgICAgICAgcHJvZ3Jlc3NCYXIhLnN0eWxlLndpZHRoID0gcHJvZ3Jlc3NWYWx1ZSArIFwiJVwiO1xyXG4gICAgfSBlbHNlIGlmIChwcm9ncmVzc1ZhbHVlID49IDEwMCkge1xyXG4gICAgICAgIGxvYWRpbmdTY3JlZW4hLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHRcdFVJQ29udHJvbGxlci5TZXRDb250ZW50TG9hZGVkKHRydWUpO1xyXG4gICAgICAgIC8vIGFkZCBib29rIHdpdGggYSBuYW1lIHRvIGxvY2FsIHN0b3JhZ2UgYXMgY2FjaGVkXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZXZlbnQuZGF0YS5kYXRhLmJvb2tOYW1lLCBcInRydWVcIik7XHJcbiAgICAgICAgcmVhZExhbmd1YWdlRGF0YUZyb21DYWNoZUFuZE5vdGlmeUFuZHJvaWRBcHAoZXZlbnQuZGF0YS5kYXRhLmJvb2tOYW1lKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZExhbmd1YWdlRGF0YUZyb21DYWNoZUFuZE5vdGlmeUFuZHJvaWRBcHAoYm9va05hbWU6IHN0cmluZykge1xyXG4gICAgLy9AdHMtaWdub3JlXHJcbiAgICBpZiAod2luZG93LkFuZHJvaWQpIHtcclxuICAgICAgICBsZXQgaXNDb250ZW50Q2FjaGVkOiBib29sZWFuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYm9va05hbWUpICE9PSBudWxsO1xyXG4gICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgIHdpbmRvdy5BbmRyb2lkLmNhY2hlZFN0YXR1cyhpc0NvbnRlbnRDYWNoZWQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVVcGRhdGVGb3VuZE1lc3NhZ2UoKTogdm9pZCB7XHJcbiAgICBsZXQgdGV4dCA9IFwiVXBkYXRlIEZvdW5kLlxcblBsZWFzZSBhY2NlcHQgdGhlIHVwZGF0ZSBieSBwcmVzc2luZyBPay5cIjtcclxuICAgIGlmIChjb25maXJtKHRleHQpID09IHRydWUpIHtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRleHQgPSBcIlVwZGF0ZSB3aWxsIGhhcHBlbiBvbiB0aGUgbmV4dCBsYXVuY2guXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcclxuYXBwLnNwaW5VcCgpO1xyXG4iLCIvLyBJbnRlcmZhY2UgdGhhdCBnZXRzIHBhc3NlZCBhcm91bmQgdGhlIGFwcCBjb21wb25lbnRzIHRvIGdhdGhlciBhbGwgcmVxdXJpZWQgcmVzb3VyY2VzXG4vLyBhbmQgdGhhdCBnZXRzIHNlbnQgdG8gdGhlIHNlcnZpY2Ugd29ya2VyIGZvciBjYWNoaW5nXG5cbmludGVyZmFjZSBJQ2FjaGVNb2RlbCB7XG4gICAgYXBwTmFtZTogc3RyaW5nO1xuICAgIGNvbnRlbnRGaWxlUGF0aDogc3RyaW5nO1xuICAgIGF1ZGlvVmlzdWFsUmVzb3VyY2VzOiBTZXQ8c3RyaW5nPjtcbn1cblxuY2xhc3MgQ2FjaGVNb2RlbCBpbXBsZW1lbnRzIElDYWNoZU1vZGVsIHtcbiAgICBhcHBOYW1lOiBzdHJpbmc7XG4gICAgY29udGVudEZpbGVQYXRoOiBzdHJpbmc7XG4gICAgYXVkaW9WaXN1YWxSZXNvdXJjZXM6IFNldDxzdHJpbmc+O1xuXG4gICAgY29uc3RydWN0b3IoYXBwTmFtZTogc3RyaW5nLCBjb250ZW50RmlsZVBhdGg6IHN0cmluZywgYXVkaW9WaXN1YWxSZXNvdXJjZXM6IFNldDxzdHJpbmc+KSB7XG4gICAgICAgIHRoaXMuYXBwTmFtZSA9IGFwcE5hbWU7XG4gICAgICAgIHRoaXMuY29udGVudEZpbGVQYXRoID0gY29udGVudEZpbGVQYXRoO1xuICAgICAgICB0aGlzLmF1ZGlvVmlzdWFsUmVzb3VyY2VzID0gYXVkaW9WaXN1YWxSZXNvdXJjZXM7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEFwcE5hbWUoYXBwTmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwTmFtZSA9IGFwcE5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldENvbnRlbnRGaWxlUGF0aChjb250ZW50RmlsZVBhdGg6IHN0cmluZykge1xuICAgICAgICB0aGlzLmNvbnRlbnRGaWxlUGF0aCA9IGNvbnRlbnRGaWxlUGF0aDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0QXVkaW9WaXN1YWxSZXNvdXJjZXMoYXVkaW9WaXN1YWxSZXNvdXJjZXM6IFNldDxzdHJpbmc+KSB7XG4gICAgICAgIHRoaXMuYXVkaW9WaXN1YWxSZXNvdXJjZXMgPSBhdWRpb1Zpc3VhbFJlc291cmNlcztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkSXRlbVRvQXVkaW9WaXN1YWxSZXNvdXJjZXMoaXRlbTogc3RyaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5hdWRpb1Zpc3VhbFJlc291cmNlcy5oYXMoaXRlbSkpIHtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9WaXN1YWxSZXNvdXJjZXMuYWRkKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IENhY2hlTW9kZWw7XG5cbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZ2V0RGF0YUZpbGUiLCJkYXRhIiwiZ2V0UGF0aE5hbWUiLCJnZXQiLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwibG9nIiwicXVlcnlTdHJpbmciLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsIlVSTFNlYXJjaFBhcmFtcyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsImdldERhdGFVUkwiLCJ1cmwiLCJsb2FkRGF0YSIsImZ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJBdWRpb0NvbnRyb2xsZXIiLCJpbWFnZVRvQ2FjaGUiLCJ3YXZUb0NhY2hlIiwiYWxsQXVkaW9zIiwiYWxsSW1hZ2VzIiwiZGF0YVVSTCIsImNvcnJlY3RTb3VuZFBhdGgiLCJmZWVkYmFja0F1ZGlvIiwiY29ycmVjdEF1ZGlvIiwiaW5pdCIsIkF1ZGlvIiwic3JjIiwic3RhdGljIiwicXVlc3Rpb25zRGF0YSIsImdldEluc3RhbmNlIiwiZmVlZGJhY2tTb3VuZFBhdGgiLCJxdWVzdGlvbkluZGV4IiwicHVzaCIsInF1ZXN0aW9uRGF0YSIsImFuc3dlckluZGV4IiwicHJvbXB0QXVkaW8iLCJGaWx0ZXJBbmRBZGRBdWRpb1RvQWxsQXVkaW9zIiwicHJvbXB0SW1nIiwiQWRkSW1hZ2VUb0FsbEltYWdlcyIsImFuc3dlcnMiLCJhbnN3ZXJEYXRhIiwiYW5zd2VySW1nIiwibmV3SW1hZ2VVUkwiLCJuZXdJbWFnZSIsIkltYWdlIiwibmV3QXVkaW9VUkwiLCJpbmNsdWRlcyIsInJlcGxhY2UiLCJ0cmltIiwibmV3QXVkaW8iLCJzcGxpdCIsIm5ld0J1Y2tldCIsIml0ZW1JbmRleCIsIml0ZW1zIiwiaXRlbSIsIml0ZW1OYW1lIiwiYXVkaW9OYW1lIiwiZmluaXNoZWRDYWxsYmFjayIsImF1ZGlvQW5pbSIsInNsaWNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJhdWRpbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJwbGF5IiwiY2F0Y2giLCJlcnJvciIsIndhcm4iLCJpbWFnZU5hbWUiLCJpbnN0YW5jZSIsInJhbmRGcm9tIiwiYXJyYXkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJzaHVmZmxlQXJyYXkiLCJpIiwiaiIsIlVJQ29udHJvbGxlciIsImxhbmRpbmdDb250YWluZXJJZCIsImdhbWVDb250YWluZXJJZCIsImVuZENvbnRhaW5lcklkIiwic3RhckNvbnRhaW5lcklkIiwiY2hlc3RDb250YWluZXJJZCIsInF1ZXN0aW9uc0NvbnRhaW5lcklkIiwiZmVlZGJhY2tDb250YWluZXJJZCIsImFuc3dlcnNDb250YWluZXJJZCIsImFuc3dlckJ1dHRvbjFJZCIsImFuc3dlckJ1dHRvbjJJZCIsImFuc3dlckJ1dHRvbjNJZCIsImFuc3dlckJ1dHRvbjRJZCIsImFuc3dlckJ1dHRvbjVJZCIsImFuc3dlckJ1dHRvbjZJZCIsInBsYXlCdXR0b25JZCIsImNoZXN0SW1nSWQiLCJuZXh0UXVlc3Rpb24iLCJjb250ZW50TG9hZGVkIiwic2hvd24iLCJzdGFycyIsInN0YXJQb3NpdGlvbnMiLCJBcnJheSIsInFBbnNOdW0iLCJidXR0b25zIiwiYnV0dG9uc0FjdGl2ZSIsImxhbmRpbmdDb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2FtZUNvbnRhaW5lciIsImVuZENvbnRhaW5lciIsInN0YXJDb250YWluZXIiLCJjaGVzdENvbnRhaW5lciIsInF1ZXN0aW9uc0NvbnRhaW5lciIsImZlZWRiYWNrQ29udGFpbmVyIiwiYW5zd2Vyc0NvbnRhaW5lciIsImFuc3dlckJ1dHRvbjEiLCJhbnN3ZXJCdXR0b24yIiwiYW5zd2VyQnV0dG9uMyIsImFuc3dlckJ1dHRvbjQiLCJhbnN3ZXJCdXR0b241IiwiYW5zd2VyQnV0dG9uNiIsInBsYXlCdXR0b24iLCJjaGVzdEltZyIsImluaXRpYWxpemVTdGFycyIsImluaXRFdmVudExpc3RlbmVycyIsIm5ld1N0YXIiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImlubmVySFRNTCIsIngiLCJ5IiwibWluRGlzdGFuY2UiLCJkeCIsImR5Iiwic3FydCIsImFuc3dlckJ1dHRvblByZXNzIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNob3dHYW1lIiwic2hvd09wdGlvbnMiLCJuZXdRIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJkZWxheUJmb3JlT3B0aW9uIiwib3B0aW9uc0Rpc3BsYXllZCIsImZvckVhY2giLCJidXR0b24iLCJzdHlsZSIsInZpc2liaWxpdHkiLCJhbmltYXRpb24iLCJzZXRUaW1lb3V0IiwiY3VyQW5zd2VyIiwiYW5zd2VyVGV4dCIsImJveFNoYWRvdyIsInRtcGltZyIsIkdldEltYWdlIiwiZW5hYmxlQW5zd2VyQnV0dG9uIiwicVN0YXJ0IiwiRGF0ZSIsIm5vdyIsIm50Iiwic2hvd0xhbmRpbmciLCJkaXNwbGF5IiwiYWxsU3RhcnQiLCJzdGFydFByZXNzQ2FsbGJhY2siLCJ2aXNpYmxlIiwicmVtb3ZlIiwiUGxheUNvcnJlY3QiLCJiIiwiU2hvd1F1ZXN0aW9uIiwiUGxheUF1ZGlvIiwiU2hvd0F1ZGlvQW5pbWF0aW9uIiwicGxheWluZyIsInF1ZXJ5U2VsZWN0b3IiLCJuZXdRdWVzdGlvbiIsInFDb2RlIiwiYnV0dG9uSW5kZXgiLCJwcm9tcHRUZXh0Iiwic3RhclRvU2hvdyIsInBvc2l0aW9uIiwiY29udGFpbmVyV2lkdGgiLCJvZmZzZXRXaWR0aCIsImNvbnRhaW5lckhlaWdodCIsIm9mZnNldEhlaWdodCIsInJhbmRvbVgiLCJyYW5kb21ZIiwiT3ZlcmxhcHBpbmdPdGhlclN0YXJzIiwidHJhbnNmb3JtIiwidHJhbnNpdGlvbiIsInpJbmRleCIsInRvcCIsImlubmVySGVpZ2h0IiwibGVmdCIsInJvdGF0aW9uIiwiZmlsdGVyIiwiYnV0dG9uTnVtIiwiYWxsQnV0dG9uc1Zpc2libGUiLCJldmVyeSIsIlBsYXlEaW5nIiwiZFRpbWUiLCJidXR0b25QcmVzc0NhbGxiYWNrIiwiY2hlc3RJbWFnZSIsImN1cnJlbnRJbWdTcmMiLCJjdXJyZW50SW1hZ2VOdW1iZXIiLCJwYXJzZUludCIsIm5leHRJbWFnZVNyYyIsInZhbHVlIiwiY2FsbGJhY2siLCJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwicCIsImMiLCJjaGFyQ29kZUF0IiwiYmFzZTY0IiwiYnl0ZVRvQ2hhck1hcF8iLCJjaGFyVG9CeXRlTWFwXyIsImJ5dGVUb0NoYXJNYXBXZWJTYWZlXyIsImNoYXJUb0J5dGVNYXBXZWJTYWZlXyIsIkVOQ09ERURfVkFMU19CQVNFIiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJIQVNfTkFUSVZFX1NVUFBPUlQiLCJhdG9iIiwiZW5jb2RlQnl0ZUFycmF5IiwiaW5wdXQiLCJ3ZWJTYWZlIiwiaXNBcnJheSIsIkVycm9yIiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsImluZGV4ZWREQiIsInByZUV4aXN0IiwiREJfQ0hFQ0tfTkFNRSIsInJlcXVlc3QiLCJzZWxmIiwib3BlbiIsIm9uc3VjY2VzcyIsInJlc3VsdCIsImNsb3NlIiwiZGVsZXRlRGF0YWJhc2UiLCJvbnVwZ3JhZGVuZWVkZWQiLCJvbmVycm9yIiwiX2EiLCJtZXNzYWdlIiwiZ2V0RGVmYXVsdHMiLCJnZXRHbG9iYWwiLCJfX0ZJUkVCQVNFX0RFRkFVTFRTX18iLCJwcm9jZXNzIiwiZW52IiwiZGVmYXVsdHNKc29uU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwiZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUiLCJtYXRjaCIsImNvb2tpZSIsImRlY29kZWQiLCJiYXNlNjREZWNvZGUiLCJnZXREZWZhdWx0c0Zyb21Db29raWUiLCJpbmZvIiwiRGVmZXJyZWQiLCJjb25zdHJ1Y3RvciIsInByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJGaXJlYmFzZUVycm9yIiwiY29kZSIsImN1c3RvbURhdGEiLCJzdXBlciIsIm5hbWUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhcHR1cmVTdGFja1RyYWNlIiwiRXJyb3JGYWN0b3J5IiwiY3JlYXRlIiwic2VydmljZSIsInNlcnZpY2VOYW1lIiwiZXJyb3JzIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsIlBBVFRFUk4iLCJfIiwia2V5IiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJkZWVwRXF1YWwiLCJhIiwiYUtleXMiLCJrZXlzIiwiYktleXMiLCJrIiwiYVByb3AiLCJiUHJvcCIsImlzT2JqZWN0IiwidGhpbmciLCJjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzIiwiYmFja29mZkNvdW50IiwiaW50ZXJ2YWxNaWxsaXMiLCJiYWNrb2ZmRmFjdG9yIiwiY3VyckJhc2VWYWx1ZSIsInBvdyIsInJhbmRvbVdhaXQiLCJyb3VuZCIsIm1pbiIsIl9kZWxlZ2F0ZSIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsIm1vZGUiLCJzZXRNdWx0aXBsZUluc3RhbmNlcyIsInNldFNlcnZpY2VQcm9wcyIsInByb3BzIiwic2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2siLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsImlkZW50aWZpZXIiLCJub3JtYWxpemVkSWRlbnRpZmllciIsIm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciIsImhhcyIsImRlZmVycmVkIiwic2V0IiwiaXNJbml0aWFsaXplZCIsInNob3VsZEF1dG9Jbml0aWFsaXplIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsImdldEltbWVkaWF0ZSIsIm9wdGlvbnMiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiZW50cmllcyIsImNsZWFySW5zdGFuY2UiLCJkZWxldGUiLCJhc3luYyIsInNlcnZpY2VzIiwiZnJvbSIsInZhbHVlcyIsImFsbCIsIm1hcCIsIklOVEVSTkFMIiwiX2RlbGV0ZSIsImlzQ29tcG9uZW50U2V0IiwiZ2V0T3B0aW9ucyIsImluaXRpYWxpemUiLCJvcHRzIiwib25Jbml0IiwiZXhpc3RpbmdDYWxsYmFja3MiLCJTZXQiLCJleGlzdGluZ0luc3RhbmNlIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIkRFQlVHIiwiVkVSQk9TRSIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiYXJncyIsImxvZ0xldmVsIiwidG9JU09TdHJpbmciLCJtZXRob2QiLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJpZGJQcm94eWFibGVUeXBlcyIsImN1cnNvckFkdmFuY2VNZXRob2RzIiwiY3Vyc29yUmVxdWVzdE1hcCIsIldlYWtNYXAiLCJ0cmFuc2FjdGlvbkRvbmVNYXAiLCJ0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAiLCJ0cmFuc2Zvcm1DYWNoZSIsInJldmVyc2VUcmFuc2Zvcm1DYWNoZSIsImlkYlByb3h5VHJhcHMiLCJ0YXJnZXQiLCJwcm9wIiwicmVjZWl2ZXIiLCJJREJUcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlTmFtZXMiLCJvYmplY3RTdG9yZSIsInRyYW5zZm9ybUNhY2hhYmxlVmFsdWUiLCJmdW5jIiwiSURCRGF0YWJhc2UiLCJ0cmFuc2FjdGlvbiIsIklEQkN1cnNvciIsImFkdmFuY2UiLCJjb250aW51ZSIsImNvbnRpbnVlUHJpbWFyeUtleSIsImFwcGx5IiwidW53cmFwIiwic3RvcmVOYW1lcyIsInR4IiwiY2FsbCIsInNvcnQiLCJkb25lIiwidW5saXN0ZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY29tcGxldGUiLCJET01FeGNlcHRpb24iLCJjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24iLCJvYmplY3QiLCJJREJPYmplY3RTdG9yZSIsIklEQkluZGV4Iiwic29tZSIsIlByb3h5IiwiSURCUmVxdWVzdCIsInN1Y2Nlc3MiLCJwcm9taXNpZnlSZXF1ZXN0IiwibmV3VmFsdWUiLCJvcGVuREIiLCJ2ZXJzaW9uIiwiYmxvY2tlZCIsInVwZ3JhZGUiLCJibG9ja2luZyIsInRlcm1pbmF0ZWQiLCJvcGVuUHJvbWlzZSIsImV2ZW50Iiwib2xkVmVyc2lvbiIsIm5ld1ZlcnNpb24iLCJkYiIsInJlYWRNZXRob2RzIiwid3JpdGVNZXRob2RzIiwiY2FjaGVkTWV0aG9kcyIsImdldE1ldGhvZCIsInRhcmdldEZ1bmNOYW1lIiwidXNlSW5kZXgiLCJpc1dyaXRlIiwic3RvcmVOYW1lIiwic3RvcmUiLCJpbmRleCIsInNoaWZ0Iiwib2xkVHJhcHMiLCJQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibGlicmFyeSIsImxvZ1N0cmluZyIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsIkVSUk9SX0ZBQ1RPUlkiLCJGaXJlYmFzZUFwcEltcGwiLCJjb25maWciLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJhc3NpZ24iLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsImluaXRpYWxpemVBcHAiLCJyYXdDb25maWciLCJleGlzdGluZ0FwcCIsIm5ld0FwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIlNUT1JFX05BTUUiLCJkYlByb21pc2UiLCJnZXREYlByb21pc2UiLCJjcmVhdGVPYmplY3RTdG9yZSIsIm9yaWdpbmFsRXJyb3JNZXNzYWdlIiwid3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIiLCJoZWFydGJlYXRPYmplY3QiLCJwdXQiLCJjb21wdXRlS2V5IiwiaWRiR2V0RXJyb3IiLCJhcHBJZCIsIkhlYXJ0YmVhdFNlcnZpY2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZSIsIl9zdG9yYWdlIiwiSGVhcnRiZWF0U3RvcmFnZUltcGwiLCJfaGVhcnRiZWF0c0NhY2hlUHJvbWlzZSIsInJlYWQiLCJhZ2VudCIsImRhdGUiLCJnZXRVVENEYXRlU3RyaW5nIiwibGFzdFNlbnRIZWFydGJlYXREYXRlIiwiaGVhcnRiZWF0cyIsInNpbmdsZURhdGVIZWFydGJlYXQiLCJoYlRpbWVzdGFtcCIsInZhbHVlT2YiLCJvdmVyd3JpdGUiLCJoZWFydGJlYXRzVG9TZW5kIiwidW5zZW50RW50cmllcyIsImhlYXJ0YmVhdHNDYWNoZSIsIm1heFNpemUiLCJoZWFydGJlYXRFbnRyeSIsImZpbmQiLCJoYiIsImRhdGVzIiwiY291bnRCeXRlcyIsInBvcCIsImV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyIiwiaGVhZGVyU3RyaW5nIiwic3RyaW5naWZ5Iiwic3Vic3RyaW5nIiwiX2NhblVzZUluZGV4ZWREQlByb21pc2UiLCJydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrIiwiaWRiSGVhcnRiZWF0T2JqZWN0IiwicmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCIiwiaGVhcnRiZWF0c09iamVjdCIsImV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCIsIlBBQ0tBR0VfVkVSU0lPTiIsImlzU2VydmVyRXJyb3IiLCJnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQiLCJwcm9qZWN0SWQiLCJleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZSIsInRva2VuIiwicmVxdWVzdFN0YXR1cyIsImV4cGlyZXNJbiIsInJlc3BvbnNlRXhwaXJlc0luIiwiTnVtYmVyIiwiY3JlYXRpb25UaW1lIiwiZ2V0RXJyb3JGcm9tUmVzcG9uc2UiLCJyZXF1ZXN0TmFtZSIsImVycm9yRGF0YSIsInNlcnZlckNvZGUiLCJzZXJ2ZXJNZXNzYWdlIiwic2VydmVyU3RhdHVzIiwic3RhdHVzIiwiZ2V0SGVhZGVycyIsImFwaUtleSIsIkhlYWRlcnMiLCJBY2NlcHQiLCJyZXRyeUlmU2VydmVyRXJyb3IiLCJmbiIsInNsZWVwIiwibXMiLCJWQUxJRF9GSURfUEFUVEVSTiIsImdlbmVyYXRlRmlkIiwiZmlkQnl0ZUFycmF5IiwiVWludDhBcnJheSIsImNyeXB0byIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiZmlkIiwic3Vic3RyIiwiZW5jb2RlIiwidGVzdCIsImdldEtleSIsImFwcENvbmZpZyIsImZpZENoYW5nZUNhbGxiYWNrcyIsImZpZENoYW5nZWQiLCJjYWxsRmlkQ2hhbmdlQ2FsbGJhY2tzIiwiY2hhbm5lbCIsImJyb2FkY2FzdENoYW5uZWwiLCJCcm9hZGNhc3RDaGFubmVsIiwib25tZXNzYWdlIiwicG9zdE1lc3NhZ2UiLCJzaXplIiwiYnJvYWRjYXN0RmlkQ2hhbmdlIiwiT0JKRUNUX1NUT1JFX05BTUUiLCJvbGRWYWx1ZSIsInVwZGF0ZSIsInVwZGF0ZUZuIiwiZ2V0SW5zdGFsbGF0aW9uRW50cnkiLCJpbnN0YWxsYXRpb25zIiwicmVnaXN0cmF0aW9uUHJvbWlzZSIsImluc3RhbGxhdGlvbkVudHJ5Iiwib2xkRW50cnkiLCJjbGVhclRpbWVkT3V0UmVxdWVzdCIsInJlZ2lzdHJhdGlvblN0YXR1cyIsInVwZGF0ZU9yQ3JlYXRlSW5zdGFsbGF0aW9uRW50cnkiLCJlbnRyeVdpdGhQcm9taXNlIiwibmF2aWdhdG9yIiwib25MaW5lIiwiaW5Qcm9ncmVzc0VudHJ5IiwicmVnaXN0cmF0aW9uVGltZSIsInJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSIsImhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciIsImVuZHBvaW50IiwiaGVhZGVycyIsImhlYXJ0YmVhdFNlcnZpY2UiLCJoZWFydGJlYXRzSGVhZGVyIiwiZ2V0SGVhcnRiZWF0c0hlYWRlciIsImFwcGVuZCIsImJvZHkiLCJhdXRoVmVyc2lvbiIsInNka1ZlcnNpb24iLCJvayIsInJlc3BvbnNlVmFsdWUiLCJyZWZyZXNoVG9rZW4iLCJhdXRoVG9rZW4iLCJjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0IiwicmVnaXN0ZXJJbnN0YWxsYXRpb24iLCJ3YWl0VW50aWxGaWRSZWdpc3RyYXRpb24iLCJ0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkiLCJlbnRyeSIsInVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QiLCJnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QiLCJnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50IiwiZ2V0QXV0aG9yaXphdGlvbkhlYWRlciIsImdldEhlYWRlcnNXaXRoQXV0aCIsImluc3RhbGxhdGlvbiIsInJlZnJlc2hBdXRoVG9rZW4iLCJmb3JjZVJlZnJlc2giLCJ0b2tlblByb21pc2UiLCJpc0VudHJ5UmVnaXN0ZXJlZCIsIm9sZEF1dGhUb2tlbiIsImlzQXV0aFRva2VuRXhwaXJlZCIsInVwZGF0ZUF1dGhUb2tlblJlcXVlc3QiLCJ3YWl0VW50aWxBdXRoVG9rZW5SZXF1ZXN0IiwiaW5Qcm9ncmVzc0F1dGhUb2tlbiIsInJlcXVlc3RUaW1lIiwibWFrZUF1dGhUb2tlblJlcXVlc3RJblByb2dyZXNzRW50cnkiLCJ1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkiLCJmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIiLCJnZXRNaXNzaW5nVmFsdWVFcnJvciIsInZhbHVlTmFtZSIsIklOU1RBTExBVElPTlNfTkFNRSIsImNvbmZpZ0tleXMiLCJrZXlOYW1lIiwiZXh0cmFjdEFwcENvbmZpZyIsImdldElkIiwiaW5zdGFsbGF0aW9uc0ltcGwiLCJnZXRUb2tlbiIsImNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uIiwiQU5BTFlUSUNTX1RZUEUiLCJHVEFHX1VSTCIsInByb21pc2VBbGxTZXR0bGVkIiwicHJvbWlzZXMiLCJkZWZhdWx0UmV0cnlEYXRhIiwidGhyb3R0bGVNZXRhZGF0YSIsImdldFRocm90dGxlTWV0YWRhdGEiLCJzZXRUaHJvdHRsZU1ldGFkYXRhIiwibWV0YWRhdGEiLCJkZWxldGVUaHJvdHRsZU1ldGFkYXRhIiwiZmV0Y2hEeW5hbWljQ29uZmlnV2l0aFJldHJ5IiwicmV0cnlEYXRhIiwidGltZW91dE1pbGxpcyIsIm1lYXN1cmVtZW50SWQiLCJ0aHJvdHRsZUVuZFRpbWVNaWxsaXMiLCJzaWduYWwiLCJBbmFseXRpY3NBYm9ydFNpZ25hbCIsImFib3J0IiwiYXR0ZW1wdEZldGNoRHluYW1pY0NvbmZpZ1dpdGhSZXRyeSIsImFwcEZpZWxkcyIsIl9iIiwiYmFja29mZk1pbGxpcyIsIm1heCIsInRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJzZXRBYm9ydGFibGVUaW1lb3V0IiwiYXBwVXJsIiwiZXJyb3JNZXNzYWdlIiwianNvblJlc3BvbnNlIiwiX2lnbm9yZWQiLCJodHRwU3RhdHVzIiwicmVzcG9uc2VNZXNzYWdlIiwiZmV0Y2hEeW5hbWljQ29uZmlnIiwiaXNSZXRyaWFibGVFcnJvciIsImxpc3RlbmVycyIsImxpc3RlbmVyIiwiZGVmYXVsdEV2ZW50UGFyYW1ldGVyc0ZvckluaXQiLCJkZWZhdWx0Q29uc2VudFNldHRpbmdzRm9ySW5pdCIsIl9pbml0aWFsaXplQW5hbHl0aWNzIiwiZHluYW1pY0NvbmZpZ1Byb21pc2VzTGlzdCIsIm1lYXN1cmVtZW50SWRUb0FwcElkIiwiZ3RhZ0NvcmUiLCJkYXRhTGF5ZXJOYW1lIiwiZHluYW1pY0NvbmZpZ1Byb21pc2UiLCJmaWRQcm9taXNlIiwiZXJyb3JJbmZvIiwidG9TdHJpbmciLCJ2YWxpZGF0ZUluZGV4ZWREQiIsImVudklzVmFsaWQiLCJkeW5hbWljQ29uZmlnIiwic2NyaXB0VGFncyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGFnIiwiZmluZEd0YWdTY3JpcHRPblBhZ2UiLCJzY3JpcHQiLCJoZWFkIiwiaW5zZXJ0U2NyaXB0VGFnIiwiY29uZmlnUHJvcGVydGllcyIsIkFuYWx5dGljc1NlcnZpY2UiLCJpbml0aWFsaXphdGlvblByb21pc2VzTWFwIiwiZ3RhZ0NvcmVGdW5jdGlvbiIsIndyYXBwZWRHdGFnRnVuY3Rpb24iLCJnbG9iYWxJbml0RG9uZSIsImZhY3RvcnkiLCJtaXNtYXRjaGVkRW52TWVzc2FnZXMiLCJydW50aW1lIiwiY2hyb21lIiwiYnJvd3NlciIsImNvb2tpZUVuYWJsZWQiLCJkZXRhaWxzIiwiZXJyIiwid2Fybk9uQnJvd3NlckNvbnRleHRNaXNtYXRjaCIsImRhdGFMYXllciIsImdldE9yQ3JlYXRlRGF0YUxheWVyIiwid3JhcHBlZEd0YWciLCJndGFnRnVuY3Rpb25OYW1lIiwiX2FyZ3MiLCJhcmd1bWVudHMiLCJjb21tYW5kIiwiaWRPck5hbWVPclBhcmFtcyIsImd0YWdQYXJhbXMiLCJpbml0aWFsaXphdGlvblByb21pc2VzVG9XYWl0Rm9yIiwiZ2FTZW5kVG9MaXN0IiwiZHluYW1pY0NvbmZpZ1Jlc3VsdHMiLCJzZW5kVG9JZCIsImZvdW5kQ29uZmlnIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiZ3RhZ09uRXZlbnQiLCJjb3JyZXNwb25kaW5nQXBwSWQiLCJndGFnT25Db25maWciLCJ3cmFwR3RhZyIsIndyYXBPckNyZWF0ZUd0YWciLCJsb2dFdmVudCIsImFuYWx5dGljc0luc3RhbmNlIiwiZXZlbnROYW1lIiwiZXZlbnRQYXJhbXMiLCJndGFnRnVuY3Rpb24iLCJnbG9iYWwiLCJsb2dFdmVudCQxIiwiYW5hbHl0aWNzT3B0aW9ucyIsImFuYWx5dGljcyIsInJlYXNvbiIsIkFuYWx5dGljc0V2ZW50cyIsImFzc2Vzc21lbnRUeXBlIiwic3RhdHVzVGV4dCIsImxhdGxvbmciLCJsb2MiLCJscGllY2VzIiwibGF0IiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJsb24iLCJjbGF0IiwiY2xvbiIsInNlbmRMb2NhdGlvbiIsIm1zZyIsIm5ld2dhbmEiLCJkYXRhdXJsIiwiZ2FuYSIsIm5ld1V1aWQiLCJuZXdVc2VyU291cmNlIiwidXVpZCIsInVzZXJTb3VyY2UiLCJhcHBWZXJzaW9uIiwiY29udGVudFZlcnNpb24iLCJnZXRMb2NhdGlvbiIsImV2ZW50U3RyaW5nIiwiYXBwVHlwZSIsInVzZXIiLCJsYW5nIiwiZ2V0QXBwTGFuZ3VhZ2VGcm9tRGF0YVVSTCIsImdldEFwcFR5cGVGcm9tRGF0YVVSTCIsImpvaW5MYXRMb25nIiwiY2xVc2VySWQiLCJsYXRMb25nIiwidGhlUSIsInRoZUEiLCJlbGFwc2VkIiwiYW5zIiwiaXNjb3JyZWN0IiwiYnVja2V0IiwiY29ycmVjdCIsImFuc3dlck5hbWUiLCJxTmFtZSIsImFOdW0iLCJkdCIsInF1ZXN0aW9uX251bWJlciIsInFOdW1iZXIiLCJxVGFyZ2V0IiwicXVlc3Rpb24iLCJzZWxlY3RlZF9hbnN3ZXIiLCJ0YiIsInBhc3NlZCIsImJuIiwiYnVja2V0SUQiLCJidHJpZWQiLCJudW1UcmllZCIsImJjb3JyZWN0IiwibnVtQ29ycmVjdCIsImJ1Y2tldE51bWJlciIsIm51bWJlclRyaWVkSW5CdWNrZXQiLCJudW1iZXJDb3JyZWN0SW5CdWNrZXQiLCJwYXNzZWRCdWNrZXQiLCJidWNrZXRzIiwiYmFzYWxCdWNrZXQiLCJjZWlsaW5nQnVja2V0IiwiYmFzYWxCdWNrZXRJRCIsImdldEJhc2FsQnVja2V0SUQiLCJjZWlsaW5nQnVja2V0SUQiLCJnZXRDZWlsaW5nQnVja2V0SUQiLCJzY29yZSIsImNhbGN1bGF0ZVNjb3JlIiwibWF4U2NvcmUiLCJzZW5kRGF0YVRvVGhpcmRQYXJ0eSIsInVybFBhcmFtcyIsInRhcmdldFBhcnR5VVJMIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJwYXlsb2FkIiwicGF5bG9hZFN0cmluZyIsInNldFJlcXVlc3RIZWFkZXIiLCJvbmxvYWQiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwidGVzdGVkIiwiQmFzZVF1aXoiLCJkZXZNb2RlQXZhaWxhYmxlIiwiaXNJbkRldk1vZGUiLCJkZXZNb2RlVG9nZ2xlQnV0dG9uQ29udGFpbmVySWQiLCJkZXZNb2RlVG9nZ2xlQnV0dG9uSWQiLCJkZXZNb2RlTW9kYWxJZCIsImRldk1vZGVCdWNrZXRHZW5TZWxlY3RJZCIsInRvZ2dsZURldk1vZGVNb2RhbCIsImRldk1vZGVTZXR0aW5nc01vZGFsIiwiaHJlZiIsImRldk1vZGVUb2dnbGVCdXR0b25Db250YWluZXIiLCJkZXZNb2RlQnVja2V0R2VuU2VsZWN0Iiwib25jaGFuZ2UiLCJoYW5kbGVCdWNrZXRHZW5Nb2RlQ2hhbmdlIiwiZGV2TW9kZVRvZ2dsZUJ1dHRvbiIsIm9uY2xpY2siLCJvbkVuZCIsIlNob3dFbmQiLCJ1bml0eUJyaWRnZSIsIlNlbmRDbG9zZSIsInNlYXJjaFN0YWdlIiwiQnVja2V0R2VuTW9kZSIsIlN1cnZleSIsInN0YXJ0U3VydmV5IiwiUmVhZHlGb3JOZXh0IiwiZ2V0TmV4dFF1ZXN0aW9uIiwib25RdWVzdGlvbkVuZCIsIlNldEZlZWRiYWNrVmlzaWJpbGUiLCJjdXJyZW50UXVlc3Rpb25JbmRleCIsIkhhc1F1ZXN0aW9uc0xlZnQiLCJUcnlBbnN3ZXIiLCJhbnN3ZXIiLCJzZW5kQW5zd2VyZWQiLCJBZGRTdGFyIiwiYnVpbGRRdWVzdGlvbkxpc3QiLCJmZXRjaFN1cnZleVF1ZXN0aW9ucyIsIlNldEJ1dHRvblByZXNzQWN0aW9uIiwiU2V0U3RhcnRBY3Rpb24iLCJSdW4iLCJQcmVwYXJlQXVkaW9BbmRJbWFnZXNGb3JTdXJ2ZXkiLCJHZXREYXRhVVJMIiwiU2VuZExvYWRlZCIsIlRyZWVOb2RlIiwicmlnaHQiLCJzb3J0ZWRBcnJheVRvSURzQlNUIiwic3RhcnQiLCJlbmQiLCJ1c2VkSW5kaWNlcyIsIm1pZCIsIm5vZGUiLCJBc3Nlc3NtZW50IiwiYnVja2V0R2VuTW9kZSIsIlJhbmRvbUJTVCIsInN0YXJ0QXNzZXNzbWVudCIsImJ1aWxkQnVja2V0cyIsInJlcyIsImZldGNoQXNzZXNzbWVudEJ1Y2tldHMiLCJudW1CdWNrZXRzIiwiYnVja2V0QXJyYXkiLCJyb290T2ZJRHMiLCJidWNrZXRzUm9vdCIsImNvbnZlcnRUb0J1Y2tldEJTVCIsImN1cnJlbnROb2RlIiwidHJ5TW92ZUJ1Y2tldCIsImJ1Y2tldElkIiwiaW5pdEJ1Y2tldCIsImN1cnJlbnRCdWNrZXQiLCJ1c2VkSXRlbXMiLCJudW1Db25zZWN1dGl2ZVdyb25nIiwiY3VycmVudFF1ZXN0aW9uIiwicXVlc3Rpb25FbmRUaW1lb3V0IiwiZW5kT3BlcmF0aW9ucyIsIkNoYW5nZVN0YXJJbWFnZUFmdGVyQW5pbWF0aW9uIiwidGFyZ2V0SXRlbSIsImZvaWwxIiwiZm9pbDIiLCJmb2lsMyIsImFuc3dlck9wdGlvbnMiLCJxdWVzdGlvbk51bWJlciIsIml0ZW1UZXh0IiwibkJ1Y2tldCIsInNlbmRCdWNrZXQiLCJQcmVsb2FkQnVja2V0IiwiaGFzUXVlc3Rpb25zTGVmdCIsIlByb2dyZXNzQ2hlc3QiLCJhcHBsaW5rIiwic2VuZEZpbmlzaGVkIiwiVW5pdHlCcmlkZ2UiLCJVbml0eSIsInVuaXR5UmVmZXJlbmNlIiwiU2VuZE1lc3NhZ2UiLCJuIiwidCIsInIiLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJiaW5kIiwibyIsIlVSTCIsImYiLCJzIiwidiIsIm5uIiwidG4iLCJybiIsImVuIiwib24iLCJ1biIsImFuIiwiY24iLCJpbnN0YWxsaW5nIiwic2NyaXB0VVJMIiwic24iLCJwZXJmb3JtYW5jZSIsInZuIiwiaG4iLCJsbiIsInN0YXRlIiwic3ciLCJpc0V4dGVybmFsIiwib3JpZ2luYWxFdmVudCIsIm1uIiwiaXNVcGRhdGUiLCJkaXNwYXRjaEV2ZW50Iiwid24iLCJ3YWl0aW5nIiwiZG4iLCJzZXJ2aWNlV29ya2VyIiwiY29udHJvbGxlciIsImduIiwicG9ydHMiLCJzb3VyY2UiLCJnZXRTVyIsIl9fcHJvdG9fXyIsImwiLCJ3IiwicmVnaXN0ZXIiLCJpbW1lZGlhdGUiLCJyZWFkeVN0YXRlIiwiQm9vbGVhbiIsInluIiwicG4iLCJvbmNlIiwid2FzV2FpdGluZ0JlZm9yZVJlZ2lzdGVyIiwibWVzc2FnZVNXIiwibWVzc2FnZVNraXBXYWl0aW5nIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZGVmaW5lUHJvcGVydHkiLCJQbiIsIlNuIiwibG9hZGluZ1NjcmVlbiIsImhhbmRsZVNlcnZpY2VXb3JrZXJNZXNzYWdlIiwicHJvZ3Jlc3NWYWx1ZSIsInByb2dyZXNzQmFyIiwid2lkdGgiLCJTZXRDb250ZW50TG9hZGVkIiwic2V0SXRlbSIsImJvb2tOYW1lIiwiQW5kcm9pZCIsImlzQ29udGVudENhY2hlZCIsImNhY2hlZFN0YXR1cyIsInJlYWRMYW5ndWFnZURhdGFGcm9tQ2FjaGVBbmROb3RpZnlBbmRyb2lkQXBwIiwiaGFuZGxlTG9hZGluZ01lc3NhZ2UiLCJwcm9ncmVzcyIsInRleHQiLCJjb25maXJtIiwicmVsb2FkIiwiaGFuZGxlVXBkYXRlRm91bmRNZXNzYWdlIiwiY2FjaGVNb2RlbCIsImNvbnRlbnRGaWxlUGF0aCIsImF1ZGlvVmlzdWFsUmVzb3VyY2VzIiwic2V0QXBwTmFtZSIsInNldENvbnRlbnRGaWxlUGF0aCIsInNldEF1ZGlvVmlzdWFsUmVzb3VyY2VzIiwiYWRkSXRlbVRvQXVkaW9WaXN1YWxSZXNvdXJjZXMiLCJmYW5hbHl0aWNzIiwiYW5hbHl0aWNzUHJvdmlkZXIiLCJpbml0aWFsaXplQW5hbHl0aWNzIiwiZ2V0QW5hbHl0aWNzIiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwic3BpblVwIiwiZmV0Y2hBcHBEYXRhIiwiU2V0RmVlZGJhY2tUZXh0IiwiZ2FtZSIsImF1ZGlvSXRlbVVSTCIsInRvTG93ZXJDYXNlIiwibnV1aWQiLCJzZXRVdWlkIiwiZ2V0VXNlclNvdXJjZSIsImxpbmtBbmFseXRpY3MiLCJzZXRBc3Nlc3NtZW50VHlwZSIsInNlbmRJbml0IiwicmVnaXN0ZXJTZXJ2aWNlV29ya2VyIiwicmVnaXN0cmF0aW9uIiwiaGFuZGxlU2VydmljZVdvcmtlclJlZ2lzdGF0aW9uIiwicmVhZHkiLCJhcHBEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==